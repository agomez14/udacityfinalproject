/*!CK:205937389!*//*1438207555,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["N4n9\/"]); }

__d("ActorURIConfig",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={PARAMETER_ACTOR:"av"};},null);
__d("ChatSidebarSections",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={MORE_ONLINE_FRIENDS:"more_online_friends",MORE_ONLINE_COWORKERS:"more_online_coworkers",OFFLINE_USERS:"offline_users",ORDERED_LIST:"ordered_list",ORDERED_COWORKERS:"ordered_coworkers",TYPEAHEAD:"typeahead",NOW_PINNED_LIST:"now_pinned_list"};},null);
__d("ChatTypeaheadEvent",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={ABANDONED_QUERY:"abandoned_query",NEW_QUERY:"new_query",RESULT_SELECTED:"result_selected"};},null);
__d("P2PBannerType",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={SENDER_NUX:"SENDER_NUX",RECEIVER_NUX:"RECEIVER_NUX"};},null);
__d("SyncRequestStatusEnum",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={PENDING:0,ACCEPTED:1,REJECTED:2,EXPIRED:3,CANCELED:4,namesByValue:["PENDING","ACCEPTED","REJECTED","EXPIRED","CANCELED"]};},null);
__d("TrackingNodeTypes",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={HEADLINE:1,USER_NAME:2,ACTOR_PHOTO:3,ACTION_LINKS:4,LIKE_LINK:5,UNLIKE_LINK:6,PARTICIPANT:7,PRONOUN:8,ROBOTEXT:9,TITLE:10,MEDIA_GENERIC:11,PHOTO:12,VIDEO:13,MUSIC:14,ATTACHMENT:15,NAME_LIST:16,SHARE_LINK:17,USER_MESSAGE:18,SUBTITLE:19,DESCRIPTION:20,SOURCE:21,BLINGBOX:22,OTHER:23,VIEW_ALL_COMMENTS:24,COMMENT:25,COMMENT_LINK:26,SMALL_ACTOR_PHOTO:27,SUBSTORY:28,XBUTTON:29,HIDE_LINK:30,REPORT_SPAM_LINK:31,HIDE_ALL_LINK:32,BAD_AGGREGATION_LINK:33,ADD_COMMENT_BOX:34,APP_CALL_TO_ACTION:35,UFI:36,OG_LEFT_SLIDE_PAGER:37,OG_RIGHT_SLIDE_PAGER:38,EXP_CALL_TO_ACTION:39,LARGE_MEDIA_ATTACHMENT:40,FAN_PAGE:42,UNFAN_PAGE:43,SEE_MORE:44,COLLECTION_ROBOTEXT_LINK:45,COLLECTION_ACTION_LINK:46,COLLECTION_TICKER_LINK:47,SPONSORED_LINK:49,PAGE_LINK:50,SOCIAL_CONTEXT:51,SOCIAL_ACTOR_PHOTO:52,OFFERS_CLAIM:53,OFFERS_CLICK:54,DROPDOWN_BUTTON:55,EVENT_VIEW:56,EVENT_RSVP:57,ADS_SHIMMED_LINK:58,COLLECTION_ADD_BUTTON:59,EVENT_INVITE_FRIENDS:60,RHC_AD:61,AD_CREATIVE_TITLE:62,AD_CREATIVE_BODY:63,AD_CREATIVE_IMAGE:64,AD_SOCIAL_SENTENCE:65,APP_NAME:66,GROUP_JOIN:67,PAGE_COVER_PHOTO:68,PAGE_PROFILE_PIC:69,AD_IDENTITY:70,UNHIDE_LINK:71,TRENDING_TOPIC_LINK:72,RELATED_SHARE_ARTICLE:73,OFFERS_USE_NOW:74,RELATED_SHARE_VIDEO:75,RHC_CARD:76,RHC_CARD_HIDE:77,RHC_SIMPLIFICATION:78,RHC_SIMPLIFICATION_HIDE:79,TOPIC_PIVOT_HEADER:80,ADD_FRIEND_BUTTON:81,SNOWLIFT:82,SNOWLIFT_MESSAGE:83,OFFERS_RESEND:84,RHC_LINK_OPEN:85,GENERIC_CALL_TO_ACTION_BUTTON:86,AD_LOGOUT:87,RHC_PHOTO_SLIDER:88,RHC_COMMENT_BUTTON:89,HASHTAG:90,NOTE:91,RELATED_SHARE_ARTICLE_HIDE:92,RELATED_SHARE_VIDEO_HIDE:93,NEKO_PREVIEW:94,OG_COMPOSER_OBJECT:95,INSTALL_ACTION:96,SPONSORED_CONTEXT:97,DIGITAL_GOOD:98,STORY_FOOTER:99,STORY_LOCATION:100,ADD_PHOTO_ACTION:101,ACTION_ICON:102,EGO_FEED_UNIT:103,PLACE_STAR_SURVEY:104,REVIEW_MENU:105,SAVE_ACTION:106,PHOTO_GALLERY:107,SUB_ATTACHMENT:108,FEEDBACK_SECTION:109,ALBUM:110,ALBUM_COLLAGE:111,AVATAR_LIST:112,STORY_LIST:113,MEDIA_CONTROLS:114,ZERO_UPSELL_BUY:115,ZERO_UPSELL_FEED_UNIT:116,RATING:117,PERMALINK_COMMENT:118,LIKE_COUNT:119,RETRY_BUTTON:120,TIMELINE_GIFTS:121,NEARBY_FRIENDS_LIST:122,PRESENCE_UNIT:123,EVENT_INVITE_SENT:124,ATTACHMENT_TITLE:125,HSCROLL_PAGER:126,STORY_MESSAGE:127,STATUS_LINK:128,ADD_MEDIA_LINK:129,ADD_QUESTION_LINK:130,START_Q_AND_A_LINK:131,UPLOAD_FILE_LINK:132,START_CONVERSATION_LINK:133,ATTACH_LIFE_EVENT_LINK:134,ATTACH_PLACE_LINK:135,COVER_PHOTO_EDIT_LINK:136,SHOW_LIKES:137,ROTATE_LEFT_BUTTON:138,ROTATE_RIGHT_BUTTON:139,TAG_LINK:140,CLOSE_BUTTON:141,PAGER_NEXT:142,PAGER_PREVIOUS:143,FULLSCREEN_BUTTON:144,ACTIONS:145,CURATION_MENU:146,PROFILE_PIC_EDIT_LINK:147,VIEW_ALL_SHARES:148,THUMBNAIL_LINK:149,EDIT_HISTORY:150,ADD_TO_THREAD:151,SIDEBAR:152,HOME_SIDENAV:153,BUDDYLIST_NUB:154,TITLEBAR:155,SEND_BUTTON:156,CONVERSATION:157,CHAT_FLYOUT:158,INPUT:159,EMOTICONS:160,VIDEOCHAT:161,TYPEAHEAD:162,OPTIONS_MENU:163,BOOST_POST_BUTTON:164,TOGGLE_BUTTON:165,CHAT_SIDEBAR_FOOTER:166,GRIPPER:167,BOOKMARK_ITEM:168,BOOKMARKS_SECTION:169,BOOKMARKS_NAV:170,RHC:171,RHC_HEADER:172,SIDE_ADS:173,BUDDY_LIST:174,SHOW_ADS_FEED:184,VIDEO_IN_PLAY_CALL_TO_ACTION_BUTTON:185,VIDEO_ENDSCREEN_CALL_TO_ACTION_BUTTON:186,INLINE_PHOTO_PIVOTS_HIDE:187,VIDEO_CALL_TO_ACTION_ENDSCREEN_REPLAY:188,APP_ATTACHMENT:189,ACTIVITY_LINK:190,SAVE_BUTTON:191,SEE_MORE_PHOTO_PAGE_POST_BUTTON:192,BUY_VIRTUAL_GOOD:193,SAVE_SECONDARY_MENU:194,MPP_INSIGHTS:195,WAP_FOOTER:196,GROUP_CANCEL:197,GROUP_LEAVE:198,MESSAGE_LINK:199,VIDEO_SPONSORSHIP_LABEL:200,MULTI_ATTACHMENT_PAGER_NEXT:201,MULTI_ATTACHMENT_PAGER_PREV:202,WEB_CLICK:203,COMPOSER_POST:204,MULTI_ATTACHMENT_VIDEO:205,VIDEO_CALL_TO_ACTION_PAUSESCREEN_RESUME:206,VOICECHAT:207,PAGE_INVITE_FRIEND:208,UNUSED:-1};},null);
__d("ItunesPluginLogging",["Run","Bootloader"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h={logPluginData:function(){g.onAfterLoad(function(){var i=b('Bootloader');i.loadModules(["ItunesDetector","AsyncRequest"],function(j,k){new k().setURI('/ajax/ads/media/log').setData({status:j.hasItunes()}).send();});});}};e.exports=h;},null);
__d("ActorURI",["ActorURIConfig","URI"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i={create:function(j,k){return (new h(j)).addQueryData(g.PARAMETER_ACTOR,k);}};i.PARAMETER_ACTOR=g.PARAMETER_ACTOR;e.exports=i;},null);
__d("ScriptPathState",["Arbiter"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h,i,j,k,l=100,m={setIsUIPageletRequest:function(n){j=n;},setUserURISampleRate:function(n){k=n;},reset:function(){h=null;i=false;j=false;},_shouldUpdateScriptPath:function(){return (i&&!j);},_shouldSendURI:function(){return (Math.random()<k);},getParams:function(){var n={};if(m._shouldUpdateScriptPath()){if(m._shouldSendURI()&&h!==null)n.user_uri=h.substring(0,l);}else n.no_script_path=1;return n;}};g.subscribe("pre_page_transition",function(n,o){i=true;h=o.to.getUnqualifiedURI().toString();});e.exports=a.ScriptPathState=m;},null);
__d("AjaxPipeRequest",["Arbiter","AsyncRequest","BigPipe","CSS","DOM","Env","PageEvents","PageletSet","ScriptPathState","URI","ge","goOrReplace","performance","performanceAbsoluteNow"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){b.__markCompiled&&b.__markCompiled();var u,v=0;function w(z,aa){var ba=q(z);if(!ba)return;if(!aa)ba.style.minHeight='100px';var ca=n.getPageletIDs();for(var da=0;da<ca.length;da++){var ea=ca[da];if(k.contains(ba,ea))n.removePagelet(ea);}k.empty(ba);g.inform('pagelet/destroy',{id:null,root:ba});}function x(z,aa){var ba=q(z);if(ba&&!aa)ba.style.minHeight='100px';}function y(z,aa){"use strict";this._uri=z;this._query_data=aa;this._request=new h();this._canvas_id=null;this._allow_cross_page_transition=true;this._arbiter=new g();this._requestID=v++;}y.prototype.setCanvasId=function(z){"use strict";this._canvas_id=z;return this;};y.prototype.setURI=function(z){"use strict";this._uri=z;return this;};y.prototype.setData=function(z){"use strict";this._query_data=z;return this;};y.prototype.getData=function(z){"use strict";return this._query_data;};y.prototype.setAllowCrossPageTransition=function(z){"use strict";this._allow_cross_page_transition=z;return this;};y.prototype.setAppend=function(z){"use strict";this._append=z;return this;};y.prototype.send=function(){"use strict";this._arbiter.inform(m.AJAXPIPE_SEND,{rid:this._requestID,quickling:!!this._isQuickling,ts:t()},g.BEHAVIOR_PERSISTENT);var z={ajaxpipe:1,ajaxpipe_token:l.ajaxpipe_token};Object.assign(z,o.getParams());o.reset();this._request.setOption('useIframeTransport',true).setURI(this._uri).setData(Object.assign(z,this._query_data)).setPreBootloadHandler(this._preBootloadHandler.bind(this)).setInitialHandler(this._onInitialResponse.bind(this)).setHandler(this._onResponse.bind(this)).setMethod('GET').setReadOnly(true).setAllowCrossPageTransition(this._allow_cross_page_transition).setAllowIrrelevantRequests(this._allowIrrelevantRequests);if(this._automatic){this._relevantRequest=u;}else u=this._request;if(this._isQuickling){var aa=s.webkitClearResourceTimings||s.clearResourceTimings||null;if(aa)aa.call(s);}this._request.send();return this;};y.prototype._preBootloadFirstResponse=function(z){"use strict";return false;};y.prototype._fireDomContentCallback=function(){"use strict";this._arbiter.inform(m.AJAXPIPE_DOMREADY,true,g.BEHAVIOR_STATE);};y.prototype._fireOnloadCallback=function(){"use strict";this._arbiter.inform(m.AJAXPIPE_ONLOAD,{lid:this.pipe.lid,rid:this._requestID,ts:t()},g.BEHAVIOR_STATE);};y.prototype._isRelevant=function(z){"use strict";return this._request==u||(this._automatic&&this._relevantRequest==u)||this._jsNonBlock||(u&&u._allowIrrelevantRequests);};y.prototype._preBootloadHandler=function(z){"use strict";var aa=z.getPayload();if(!aa||aa.redirect||!this._isRelevant(z))return false;var ba=false;if(z.is_first){!this._append&&!this._displayCallback&&w(this._canvas_id,this._constHeight);ba=this._preBootloadFirstResponse(z);this.pipe=new i({arbiter:this._arbiter,rootNodeID:this._canvas_id,lid:this._request.lid,rid:this._requestID,isAjax:true,domContentCallback:this._fireDomContentCallback.bind(this),onloadCallback:this._fireOnloadCallback.bind(this),domContentEvt:m.AJAXPIPE_DOMREADY,onloadEvt:m.AJAXPIPE_ONLOAD,jsNonBlock:this._jsNonBlock,automatic:this._automatic,displayCallback:this._displayCallback,allowIrrelevantRequests:this._allowIrrelevantRequests});}return ba;};y.prototype._redirect=function(z){"use strict";if(z.redirect){if(z.force||!this.isPageActive(z.redirect)){var aa=['ajaxpipe','ajaxpipe_token'].concat(this.getSanitizedParameters());r(window.location,new p(z.redirect).removeQueryData(aa),true);}else{var ba=a.PageTransitions;ba.go(z.redirect,true);}return true;}else return false;};y.prototype.isPageActive=function(z){"use strict";return true;};y.prototype.getSanitizedParameters=function(){"use strict";return [];};y.prototype._versionCheck=function(z){"use strict";return true;};y.prototype._onInitialResponse=function(z){"use strict";var aa=z.getPayload();if(!this._isRelevant(z))return false;if(!aa)return true;if(this._redirect(aa)||!this._versionCheck(aa))return false;return true;};y.prototype._processFirstResponse=function(z){"use strict";var aa=z.getPayload();if(q(this._canvas_id)&&aa.canvas_class!=null)j.setClass(this._canvas_id,aa.canvas_class);};y.prototype.setFirstResponseCallback=function(z){"use strict";this._firstResponseCallback=z;return this;};y.prototype.setFirstResponseHandler=function(z){"use strict";this._processFirstResponse=z;return this;};y.prototype._onResponse=function(z){"use strict";var aa=z.payload;if(!this._isRelevant(z))return h.suppressOnloadToken;if(z.is_first){this._processFirstResponse(z);this._firstResponseCallback&&this._firstResponseCallback();aa.provides=aa.provides||[];aa.provides.push('uipage_onload');if(this._append)aa.append=this._canvas_id;}if(aa){if('content' in aa.content&&this._canvas_id!==null&&this._canvas_id!='content'){aa.content[this._canvas_id]=aa.content.content;delete aa.content.content;}if(aa.secondFlushResources){this.pipe.setSecondFlushResources(aa.secondFlushResources);}else this.pipe.onPageletArrive(aa);}if(z.is_last)x(this._canvas_id,this._constHeight);return h.suppressOnloadToken;};y.prototype.setNectarModuleDataSafe=function(z){"use strict";this._request.setNectarModuleDataSafe(z);return this;};y.prototype.setFinallyHandler=function(z){"use strict";this._request.setFinallyHandler(z);return this;};y.prototype.setErrorHandler=function(z){"use strict";this._request.setErrorHandler(z);return this;};y.prototype.setTransportErrorHandler=function(z){"use strict";this._request.setTransportErrorHandler(z);return this;};y.prototype.abort=function(){"use strict";this._request.abort();if(u==this._request)u=null;this._request=null;return this;};y.prototype.setJSNonBlock=function(z){"use strict";this._jsNonBlock=z;return this;};y.prototype.setAutomatic=function(z){"use strict";this._automatic=z;return this;};y.prototype.setDisplayCallback=function(z){"use strict";this._displayCallback=z;return this;};y.prototype.setConstHeight=function(z){"use strict";this._constHeight=z;return this;};y.prototype.setAllowIrrelevantRequests=function(z){"use strict";this._allowIrrelevantRequests=z;return this;};y.prototype.getAsyncRequest=function(){"use strict";return this._request;};y.getCurrentRequest=function(){"use strict";return u;};y.setCurrentRequest=function(z){"use strict";u=z;};e.exports=y;},null);
__d("UIPageletContentCache",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={cache:{},getContent:function(h){if(h in this.cache)return this.cache[h];return null;},setContent:function(h,i){this.cache[h]=i;}};e.exports=g;},null);
__d("UIPagelet",["ActorURI","AjaxPipeRequest","AsyncRequest","DOM","HTML","ScriptPathState","UIPageletContentCache","URI","emptyFunction","ge"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){b.__markCompiled&&b.__markCompiled();function q(r,s,t){"use strict";var u=r&&j.isElementNode(r)?r.id:r;this._id=u||null;this._element=p(r||j.create('div'));this._src=s||null;this._context_data=t||{};this._data={};this._handler=o;this._request=null;this._use_ajaxpipe=false;this._use_post_request=false;this._is_bundle=true;this._allow_cross_page_transition=false;this._append=false;this._cache_content=false;this._content_cache_key='';}q.prototype.getElement=function(){"use strict";return this._element;};q.prototype.setHandler=function(r){"use strict";this._handler=r;return this;};q.prototype.go=function(r,s){"use strict";if(arguments.length>=2||typeof r=='string'){this._src=r;this._data=s||{};}else if(arguments.length==1)this._data=r;this.refresh();return this;};q.prototype.setAllowCrossPageTransition=function(r){"use strict";this._allow_cross_page_transition=r;return this;};q.prototype.setBundleOption=function(r){"use strict";this._is_bundle=r;return this;};q.prototype.setErrorHandler=function(r){"use strict";this._errorHandler=r;return this;};q.prototype.setTransportErrorHandler=function(r){"use strict";this.transportErrorHandler=r;return this;};q.prototype.refresh=function(){"use strict";if(this._use_ajaxpipe){l.setIsUIPageletRequest(true);this._request=new h();this._request.setCanvasId(this._id).setAppend(this._append).setConstHeight(this._constHeight).setJSNonBlock(this._jsNonblock).setAutomatic(this._automatic).setDisplayCallback(this._displayCallback).setFinallyHandler(this._finallyHandler).setAllowIrrelevantRequests(this._allowIrrelevantRequests);if(this._errorHandler)this._request.setErrorHandler(this._errorHandler);if(this.transportErrorHandler)this._request.setTransportErrorHandler(this.transportErrorHandler);}else{if(this._cache_content){var r=m.getContent(this._content_cache_key);if(r!==null){this.handleContent(r);return this;}}var s=function(w){this._request=null;var x=k(w.getPayload());this.handleContent(x);if(this._cache_content)m.setContent(this._content_cache_key,x);}.bind(this),t=this._displayCallback,u=this._finallyHandler;this._request=new i().setMethod('GET').setReadOnly(true).setOption('bundle',this._is_bundle).setHandler(function(w){if(t){t(s.bind(null,w));}else s(w);u&&u();});if(this._errorHandler)this._request.setErrorHandler(this._errorHandler);if(this.transportErrorHandler)this._request.setTransportErrorHandler(this.transportErrorHandler);if(this._use_post_request)this._request.setMethod('POST');}var v=Object.assign({},this._context_data,this._data);if(this._actorID)v[g.PARAMETER_ACTOR]=this._actorID;this._request.setURI(this._src).setAllowCrossPageTransition(this._allow_cross_page_transition).setData({data:JSON.stringify(v)}).send();return this;};q.prototype.handleContent=function(r){"use strict";if(this._append){j.appendContent(this._element,r);}else j.setContent(this._element,r);this._handler();};q.prototype.cancel=function(){"use strict";if(this._request)this._request.abort();};q.prototype.setUseAjaxPipe=function(r){"use strict";this._use_ajaxpipe=!!r;return this;};q.prototype.setUsePostRequest=function(r){"use strict";this._use_post_request=!!r;return this;};q.prototype.setAppend=function(r){"use strict";this._append=!!r;return this;};q.prototype.setJSNonBlock=function(r){"use strict";this._jsNonblock=!!r;return this;};q.prototype.setAutomatic=function(r){"use strict";this._automatic=!!r;return this;};q.prototype.setDisplayCallback=function(r){"use strict";this._displayCallback=r;return this;};q.prototype.setConstHeight=function(r){"use strict";this._constHeight=!!r;return this;};q.prototype.setFinallyHandler=function(r){"use strict";this._finallyHandler=r;return this;};q.prototype.setAllowIrrelevantRequests=function(r){"use strict";this._allowIrrelevantRequests=r;return this;};q.prototype.setActorID=function(r){"use strict";this._actorID=r;return this;};q.prototype.setCacheContent=function(r){"use strict";this._cache_content=r;return this;};q.prototype.setContentCacheKey=function(r){"use strict";this._content_cache_key=r;return this;};q.appendToInline=function(r,s){"use strict";var t=p(r),u=p(s);if(t&&u){while(u.firstChild)j.appendContent(t,u.firstChild);j.remove(u);}};q.loadFromEndpoint=function(r,s,t,u){"use strict";u=u||{};var v='/ajax/pagelet/generic.php/'+r;if(u.intern)v='/intern'+v;var w=new n(v.replace(/\/+/g,'/'));if(u.subdomain)w.setSubdomain(u.subdomain);var x=false,y='';if(u.contentCacheKey){x=true;y=r+','+String(u.contentCacheKey);}var z=new q(s,w,t).setUseAjaxPipe(u.usePipe).setBundleOption(u.bundle!==false).setAppend(u.append).setJSNonBlock(u.jsNonblock).setAutomatic(u.automatic).setDisplayCallback(u.displayCallback).setConstHeight(u.constHeight).setAllowCrossPageTransition(u.crossPage).setFinallyHandler(u.finallyHandler||o).setErrorHandler(u.errorHandler).setTransportErrorHandler(u.transportErrorHandler).setAllowIrrelevantRequests(u.allowIrrelevantRequests).setActorID(u.actorID).setCacheContent(x).setContentCacheKey(y).setUsePostRequest(u.usePostRequest);u.handler&&z.setHandler(u.handler);z.go();return z;};q.loadFromEndpointBatched=function(r,s,t){"use strict";var u=r.slice(0,t),v=r.slice(t);if(v.length>0){var w=u[u.length-1],x=o;if(w.options&&w.options.finallyHandler)x=w.options.finallyHandler;w.options=Object.assign({},w.options,{finallyHandler:function(){x();window.setTimeout(function(){q.loadFromEndpointBatched(v,s,t);},1);}});}u.forEach(function(y){q.loadFromEndpoint(y.controller,y.target_element,y.data,Object.assign({},y.options,s,{bundle:true}));});};e.exports=q;},null);
__d("AppsDivebarDisplayController",["AppsDivebarConfigData","AsyncRequest","Arbiter","CSS","UIPagelet","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m='173',n={isVisible:function(){if(typeof(this._visible)!='undefined')return this._visible;this._visible=!g.hidden;return this._visible;},showApps:function(){this._visible=true;var o={fb_source_category:'sidebar'};k.loadFromEndpoint('GamesDivebarPagelet','pagelet_canvas_nav_content',o);j.show('apps_gripper');j.show('pagelet_canvas_nav_content');j.addClass('pagelet_canvas_nav_content',"_4woj");i.inform('AppsDivebar/show-apps');new h('/ajax/feed/apps/resize').setData({height:''+m,menu:true}).setMethod('POST').send();},hideApps:function(){this._visible=false;j.hide('pagelet_canvas_nav_content');j.hide('apps_gripper');i.inform('AppsDivebar/hide-apps');new h('/ajax/feed/apps/resize').setData({height:'1',menu:true}).setMethod('POST').send();}};e.exports=n;},null);
__d("AsyncLoader",["AsyncRequest","BaseAsyncLoader"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();function i(j,k){this._endpoint=j;this._type=k;}Object.assign(i.prototype,h.prototype);i.prototype.send=function(j,k,l,m,n){new g(j).setData({ids:k}).setHandler(m).setErrorHandler(n).setAllowCrossPageTransition(true).setMethod('GET').setReadOnly(true).send();};e.exports=i;},null);
__d("ChatDispatcher",["Dispatcher"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';e.exports=new g();},null);
__d("ChatSidebarActions",["ChatDispatcher","keyMirror"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';var i=h({INIT:null,HIDE:null,LOADED:null,SET_ENABLED:null,SHOW:null,TOGGLE:null}),j={Types:i,init:function(){g.dispatch({type:i.INIT});},loaded:function(){g.dispatch({type:i.LOADED});},disable:function(){g.dispatch({type:i.SET_ENABLED,enabled:false});},enable:function(){g.dispatch({type:i.SET_ENABLED,enabled:true});},hide:function(){g.dispatch({type:i.HIDE});},show:function(){g.dispatch({type:i.SHOW});},toggle:function(){g.dispatch({type:i.TOGGLE});}};e.exports=j;},null);
__d("CSSClassTransition",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g=[];function h(){}Object.assign(h,{go:function(i,j,k,l){var m;for(var n=0;n<g.length;n++)if(g[n](i,j,k,l)===true)m=true;if(!m)i.className=j;},registerHandler:function(i){g.push(i);return {remove:function(){var j=g.indexOf(i);if(j>=0)g.splice(j,1);}};}});e.exports=h;},null);
__d("WebMessengerEvents",["Arbiter"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h=Object.assign(new g(),{MASTER_DOM_CHANGED:'master-dom-changed',DETAIL_DOM_CHANGED:'detail-dom-changed',FOCUS_COMPOSER:'focus-composer',FOCUS_SEARCH:'focus-search',FOCUS_AND_SELECT_SEARCH:'focus-and-select-search',STICKER_CLICKED:'sticker-clicked',SUBMIT_REPLY:'submit-reply',UPDATE_SELECTION:'update-selection',masterDOMChanged:function(){this.inform(h.MASTER_DOM_CHANGED);},detailDOMChanged:function(){this.inform(h.DETAIL_DOM_CHANGED);},focusComposer:function(){this.inform(h.FOCUS_COMPOSER);},focusSearch:function(){this.inform(h.FOCUS_SEARCH);},focusAndSelectSearch:function(){this.inform(h.FOCUS_AND_SELECT_SEARCH);},updateSelection:function(i){this.inform(h.UPDATE_SELECTION,i);},stickerClicked:function(i,j){this.inform(h.STICKER_CLICKED,{packID:i,stickerID:j});},submitReply:function(){this.inform(h.SUBMIT_REPLY);}});e.exports=h;},null);
__d("WebMessengerSubscriptionsHandler",["SubscriptionsHandler"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h=new g('webmessenger');e.exports=h;},null);
__d("isWebMessengerURI",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(h){return (/^(\/messages)/).test(h.getPath());}e.exports=g;},null);
__d("WebMessengerWidthControl",["Arbiter","BlueBar","CSS","CSSClassTransition","DOMDimensions","Event","Style","URI","ViewportBounds","WebMessengerEvents","WebMessengerSubscriptionsHandler","$","cx","isWebMessengerURI","requestAnimationFrame","setTimeoutAcrossTransitions","shield","throttle"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){b.__markCompiled&&b.__markCompiled();var y=205,z=981,aa=257,ba=18,ca=848,da=724,ea=.57,fa=56,ga,ha,ia;function ja(oa,pa,qa){this.masterChanged=oa;this.detailChaned=pa;q.addSubscriptions(l.listen(window,'resize',x(w(ka,this,this),100)),g.subscribe(['sidebar/initialized','sidebar/show','sidebar/hide','minisidebar/show'],w(ka,this,this),g.SUBSCRIBE_NEW));var ra=na()?fa:0;if(qa)ra=y;this._width=na()?0:ca;ia=true;ka(this,ra);}function ka(oa,pa){var qa=o.getRight()+o.getLeft();qa=qa||pa||0;var ra=k.getViewportWithoutScrollbarDimensions().width-qa,sa=Math.round(Math.max(0,ra/2-z/2));ra=z+sa-aa;ra-=ba;ra=Math.max(da,Math.min(ca,ra));if(!isNaN(ra)&&oa._width!==ra){oa._width=ra;var ta=Math.round(ra/(1+ea)),ua=ra-ta;oa.masterChanged(ua);oa.detailChaned(ta);if(na()){var va=ra+aa;la(function(){if(ha){document.body.className=ha;ha='';}ma(va+'px');i.removeClass(document.body,"_5uj5");ia&&p.detailDOMChanged();ia=false;},ha);}}}function la(oa,pa){pa&&i.addClass(document.documentElement,"_5uj6");u(oa);pa&&v(i.removeClass.bind(null,document.documentElement,"_5uj6"),1000);}function ma(oa){m.set(h.getNavRoot(),'width',oa);m.set(r('globalContainer'),'width',oa);}function na(){if(!ga)ga=i.hasClass(document.body,"_6nw");return ga;}j.registerHandler(function(oa,pa,qa,ra){function sa(ta){return na()&&t(new n(ta));}if(sa(ra)){ha=pa;return true;}else if(sa(qa)){la(function(){oa.className=pa;ma('');},true);return true;}});e.exports=ja;},null);
__d("ChatQuietLinks",["Event","DOM","UserAgent_DEPRECATED","DataStore","Parent"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l={},m={silenceLinks:function(q){n(q,this.removeEmptyHrefs.bind(this));},nukeLinks:function(q){n(q,this.removeAllHrefs.bind(this));},removeEmptyHrefs:function(q){o(q,function(r){return !r||r==='#';});},removeAllHrefs:function(q){o(q);}};function n(q,r){var s=!!i.chrome(),t=!!i.chrome()||i.ie()>=9||i.firefox()>=4;if(l[h.getID(q)])return;l[h.getID(q)]=true;if(!t)return;if(!s){r&&r(q);return;}g.listen(q,'mouseover',function u(v){var w=k.byTag(v.getTarget(),'a');if(w){var x=w.getAttribute('href');if(p(x)){j.set(w,'stashedHref',w.getAttribute('href'));w.removeAttribute('href');}}});g.listen(q,'mouseout',function u(v){var w=k.byTag(v.getTarget(),'a'),x=w&&j.remove(w,'stashedHref');if(p(x))w.setAttribute('href',x);});g.listen(q,'mousedown',function(u){if(!u.isDefaultRequested())return true;var v=k.byTag(u.getTarget(),'a'),w=v&&j.get(v,'stashedHref');if(p(w))v.setAttribute('href',w);});}function o(q,r){var s=h.scry(q,'a');if(r)s=s.filter(function(t){return r(t.getAttribute('href'));});s.forEach(function(t){t.removeAttribute('href');t.setAttribute('tabindex',0);});}function p(q){return q&&q!=='#';}e.exports=m;},null);
__d("Dock",["Event","shield","Arbiter","ArbiterMixin","BlueBar","ChatQuietLinks","CSS","DataStore","DOM","Parent","Scroll","Style","Toggler","Vector","csx","emptyFunction","WebMessengerWidthControl"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){b.__markCompiled&&b.__markCompiled();b('WebMessengerWidthControl');function w(){}Object.assign(w,j,{MIN_HEIGHT:140,INITIAL_FLYOUT_HEIGHT_OFFSET:10,init:function(x){this.init=v;this.rootEl=x;this.calculateViewportDimensions();this.calculateFlyoutHeightOffset();l.removeEmptyHrefs(this.rootEl);g.listen(x,'click',this._onClick.bind(this));g.listen(window,'resize',this._onWindowResize.bind(this));s.subscribe(['show','hide'],function(y,z){var aa=z.getActive();if(!o.contains(x,aa))return;if(m.hasClass(aa,'fbNub')){this.notifyNub(aa,y);if(y==='show')this._resizeNubFlyout(aa);}else{var ba=p.byClass(aa,'fbNubFlyout');if(ba)m.conditionClass(ba,'menuOpened',y==='show');}}.bind(this));this.inform('init',{},i.BEHAVIOR_PERSISTENT);},calculateViewportDimensions:function(){return (this.viewportDimensions=t.getViewportDimensions());},calculateFlyoutHeightOffset:function(){this.flyoutHeightOffset=this.INITIAL_FLYOUT_HEIGHT_OFFSET+t.getElementDimensions(this.rootEl).y;var x=k.getBar();if(x){var y=r.isFixed(x)?'viewport':'document';this.flyoutHeightOffset+=t.getElementPosition(x,y).y+t.getElementDimensions(x).y;}},toggle:function(x){var y=this._findFlyout(x);if(!y)return;this.subscribe('init',function(){s.toggle(x);});},show:function(x){this.subscribe('init',function(){s.show(x);});},showNub:function(x){m.show(x);},hide:function(x){this.subscribe('init',function(){var y=s.getInstance(x);o.contains(x,y.getActive())&&y.hide();});},hideNub:function(x){m.hide(x);this.hide(x);},setUseMaxHeight:function(x,y){m.conditionClass(x,'maxHeight',y!==false);this._resizeNubFlyout(x);},_resizeNubFlyout:function(x){var y=this._findFlyout(x);if(!y||m.hasClass(x,'placeholder')||!(m.hasClass(x,'openToggler')||m.hasClass(x,'opened')))return;var z=o.find(y,'div.fbNubFlyoutOuter'),aa=o.find(z,'div.fbNubFlyoutInner'),ba=o.find(aa,'div.fbNubFlyoutBody'),ca=q.getTop(ba),da=ba.offsetHeight;r.set(ba,'height','auto');var ea=t.getElementDimensions(y),fa=t.getElementDimensions(ba),ga=this.getMaxFlyoutHeight(x);r.set(y,'max-height',ga+'px');r.set(z,'max-height',ga+'px');ea=t.getElementDimensions(y);var ha=t.getElementDimensions(aa),ia=ha.y-fa.y,ja=ea.y-ia,ka=parseInt(ba.style.height||ba.clientHeight,10),la=ja!==ka;if(ea.y>ia&&la)r.set(ba,'height',ja+'px');m.removeClass(y,'swapDirection');var ma=t.getElementPosition(y).x;m.conditionClass(y,'swapDirection',function(){if(ma<0)return true;return (ma+ea.x>this.viewportDimensions.x);}.bind(this)());if(la&&ca+da>=fa.y){q.setTop(ba,ba.scrollHeight);}else q.setTop(ba,ca);this.notifyNub(x,'resize');},getMaxFlyoutHeight:function(x){var y=this._findFlyout(x),z=t.getElementPosition(y,'viewport'),aa=t.getElementDimensions(y),ba=Math.max(this.MIN_HEIGHT,this.viewportDimensions.y-this.flyoutHeightOffset)-(this.viewportDimensions.y-z.y-aa.y);return Math.max(ba,0);},resizeAllFlyouts:function(){var x=this._getAllNubs(),y=x.length;while(y--)this._resizeNubFlyout(x[y]);},hideAllFlyouts:function(){var x=this._getAllNubs(),y=x.length;while(y--)this.hide(x[y]);},_getAllNubs:function(){var x=o.scry(this.rootEl,"div._50-v.openToggler");return x.concat(o.scry(this.rootEl,"div._50-v.opened"));},_onClick:function(event){var x=event.getTarget(),y=p.byClass(x,'fbNub');if(y){if(p.byClass(x,'fbNubFlyoutTitlebar')){var z=p.byTag(x,'a'),aa=x.nodeName=='INPUT'&&x.getAttribute('type')=='submit';if(!z&&!aa){this.hide(y);return false;}}this.notifyNub(y,'click');}},_onWindowResize:function(event){this.calculateViewportDimensions();this.resizeAllFlyouts();},_findFlyout:function(x){return m.hasClass(x,'fbNubFlyout')?x:o.scry(x,'div.fbNubFlyout')[0]||null;},registerNubController:function(x,y){n.set(x,'dock:nub:controller',y);y.subscribe('nub/button/content-changed',h(this.inform,this,'resize',x));y.subscribe('nub/flyout/content-changed',h(this._resizeNubFlyout,this,x));},unregisterNubController:function(x){n.remove(x,'dock:nub:controller');},notifyNub:function(x,y,z){var aa=n.get(x,'dock:nub:controller');aa&&aa.inform(y,z);}});e.exports=a.Dock||w;},null);
__d("NubController",["ArbiterMixin","Dock"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();function i(){}Object.assign(i.prototype,g,{init:function(j){this.el=j;h.registerNubController(j,this);return this;},buttonContentChanged:function(){this.inform('nub/button/content-changed');},flyoutContentChanged:function(){this.inform('nub/flyout/content-changed');},hide:function(){h.hide(this.el);},show:function(){h.show(this.el);}});e.exports=i;},null);
__d("BuddyListNub",["Arbiter","AvailableList","ChannelConnection","ChannelConstants","ChatSidebarActions","ChatVisibility","CSS","Dock","DOM","Event","JSLogger","JSXDOM","KeyEventController","Keys","NubController","OrderedFriendsList","Parent","PresencePrivacy","PresenceStatus","Toggler","csx","cx","setTimeoutAcrossTransitions","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da){b.__markCompiled&&b.__markCompiled();var ea=32,fa=q.create('buddylist_nub');for(var ga in u)if(u.hasOwnProperty(ga))ia[ga]=u[ga];var ha=u===null?null:u.prototype;ia.prototype=Object.create(ha);ia.prototype.constructor=ia;ia.__superConstructor__=u;function ia(ja,ka,la){"use strict";u.call(this);ha.init.call(this,ja);this.root=ja;this.orderedList=ka;this.typeahead=la;this.button=o.find(ja,'a.fbNubButton');this.unreadCount=o.find(ja,"span._5ayx");this.label=o.find(ja,'span.label');this.body=o.scry(ja,'div.fbNubFlyoutBody')[0];this.container=w.byClass(ja,"_56ox");this.typeaheadContainer=o.find(ja,'.fbChatTypeaheadViewContainer');var ma=o.find(ja,'div.fbNubFlyoutTitlebar');z.createInstance(ma).setSticky(false);ka.subscribe('render',this.flyoutContentChanged.bind(this));ka.setScrollContainer(this.body);h.subscribe('buddylist/availability-changed',this._updateCount.bind(this));g.subscribe('chat/connect',this._handleConnect.bind(this));g.subscribe('chat/option-changed',function(na,oa){if(oa.name=='hide_groups')this.onResize();}.bind(this));x.subscribe('privacy-user-presence-changed',this._handleVisibilityChange.bind(this));this.message=o.find(ja,"div._4mq1");this.warningMsgText=null;this.warningMsgEventListener=null;this.showWarningTimeout=null;i.subscribe(i.CONNECTED,this._handleChannelConnected.bind(this));i.subscribe(i.SHUTDOWN,this._handleChannelShutdown.bind(this));i.subscribe(i.RECONNECTING,this._handleChannelReconnecting.bind(this));i.subscribe([i.MUTE_WARNING,i.UNMUTE_WARNING],this._updateView.bind(this));this.subscribe('show',this.onShow.bind(this));this.subscribe('hide',this.onHide.bind(this));this.subscribe('resize',this.onResize.bind(this));p.listen(ja,'keydown',this._onKeyDown.bind(this));p.listen(this.button,'click',this.onButtonClick.bind(this));s.registerKey('q',function(event){if(this._isOpen){la.getCore().getElement().focus();}else{this.onButtonClick();this.show();}event.prevent();}.bind(this));la.getCore().subscribe('escape',this.hide.bind(this));la.subscribe(['respond','reset'],function(na,oa){if(this._isOpen){if(oa&&oa.value&&oa.value===la.getCore().getValue()&&la.getView().isVisible()){n.setUseMaxHeight(this.root,false);this._hideBuddyList();}else this._showBuddyList();this.flyoutContentChanged();}}.bind(this));g.subscribe('sidebar/show',this.hide.bind(this));g.subscribe('minisidebar/show',this.hide.bind(this));g.subscribe('sidebar/hide',this._onSidebarHide.bind(this));this._orderedListCount=v.getList().length;g.inform('buddylist-nub/initialized',this,g.BEHAVIOR_PERSISTENT);this._handleVisibilityChange();fa.log('buddylist_initialized');}ia.prototype.getButton=function(){"use strict";return this.button;};ia.prototype.getRoot=function(){"use strict";return this.root;};ia.prototype._handleConnect=function(ja){"use strict";this._updateView(true);};ia.prototype._getShutdownReason=function(ja){"use strict";switch(ja){case j.HINT_AUTH:return da._("Your session has timed out. Please log in.");case j.HINT_CONN:return da._("Facebook {Chat} is currently unavailable.",[da.param("Chat",da._("Chat"))]);case j.HINT_MAINT:return da._("Facebook {Chat} is currently down for maintenance.",[da.param("Chat",da._("Chat"))]);default:return da._("Facebook {Chat} is currently unavailable.",[da.param("Chat",da._("Chat"))]);}};ia.prototype._getReconnectMsg=function(ja){"use strict";var ka;if(ja===null||false===navigator.onLine){ka=da._("Unable to connect to chat. Check your Internet connection.");}else if(ja>j.WARNING_COUNTDOWN_THRESHOLD_MSEC){var la=o.create('a',{href:'#',className:'fbChatReconnectLink'},da._("Try again")),ma=o.create('div',null,la);ka=o.create('div',{},da._("Unable to connect to chat."));o.appendContent(ka,ma);}else if(ja>1000){ka=da._("Unable to connect to chat. Reconnecting in {seconds}...",[da.param("seconds",Math.floor(ja/1000))]);}else ka=da._("Unable to connect to chat. Reconnecting...");return ka;};ia.prototype._resetShowWarningTimeout=function(){"use strict";if(this.showWarningTimeout){clearTimeout(this.showWarningTimeout);this.showWarningTimeout=null;}};ia.prototype._handleChannelConnected=function(ja){"use strict";this._resetShowWarningTimeout();if(this.orderedList.isVisible())l.goOnline();this.warningMsgText=null;this._updateView();};ia.prototype._handleChannelShutdown=function(ja,ka){"use strict";this._resetShowWarningTimeout();this.warningMsgText=this._getShutdownReason(ka);this._updateView();};ia.prototype._handleChannelReconnecting=function(ja,ka){"use strict";this._resetShowWarningTimeout();this.warningMsgText=this._getReconnectMsg(ka);if(ka>1000){if(ka>j.WARNING_COUNTDOWN_THRESHOLD_MSEC){if(this.warningMsgEventListener){this.warningMsgEventListener.remove();this.warningMsgEventListener=null;}this.warningMsgEventListener=p.listen(this.message,'click',function(event){if(m.hasClass(event.getTarget(),'fbChatReconnectLink')){this._tryReconnect();event.kill();}}.bind(this));}this.showWarningTimeout=ca(this._handleChannelReconnecting.bind(this,ja,ka-1000),1000);}this._updateView();};ia.prototype._tryReconnect=function(){"use strict";if(i.disconnected())i.reconnect();};ia.prototype._handleVisibilityChange=function(){"use strict";this._updateView();if(!l.isOnline())this.hide();};ia.prototype._updateView=function(ja){"use strict";var ka=this.container;if(ka){m.conditionClass(ka,'offline',!l.isOnline());m.conditionClass(ka,'error',i.disconnected());}if(i.disconnected())o.setContent(this.message,this.warningMsgText);var la,ma;if(!l.isOnline()){la=da._("{Chat} (Off)",[da.param("Chat",da._("Chat"))]);}else if(i.disconnected()){la=da._("{Chat} (Disconnected)",[da.param("Chat",da._("Chat"))]);}else{var na=y.getOnlineCount();if(na){var oa=r.span({className:"count"},"(",na,")");la=da._({"*":"{Chat} {number-available}"},[da.param("Chat",da._("Chat")),da.param("number-available",oa,[0,na])]);}else{la=da._("Chat");ma=true;}}this._setUnread(this._unreadMessageCount);this._setLabel(la,ma);this.buttonContentChanged();};ia.prototype.onButtonClick=function(){"use strict";if(m.shown(this.typeahead.getElement())){var ja=this.subscribe('show',function(){this.typeahead.getCore().getElement().focus();}.bind(this));setTimeout(this.unsubscribe.bind(this,ja),0);}};ia.prototype.onHide=function(){"use strict";this._isOpen=false;if(this._buddyListRenderSubscription){this.orderedList.unsubscribe(this._buddyListRenderSubscription);this._buddyListRenderSubscription=null;}this._hideBuddyList();this.typeahead.getCore().reset();};ia.prototype._onKeyDown=function(event){"use strict";var ja=p.getKeyCode(event);if(ja===t.ESC&&!m.hasClass(this.root,'menuOpened')){this.hide();return false;}else if(ja==t.RETURN)k.enable();};ia.prototype._onSidebarHide=function(event){"use strict";this.getButton().focus();};ia.prototype.onResize=function(){"use strict";var ja=n.getMaxFlyoutHeight(this.root)-60,ka=Math.max(250,ja);this.orderedList.setNumTopFriends(Math.floor(ka/ea));};ia.prototype._showBuddyList=function(){"use strict";if(!this._buddyListRenderSubscription)this._buddyListRenderSubscription=this.orderedList.subscribe('render',n.setUseMaxHeight.bind(n,this.root,false));m.hide(this.typeaheadContainer);this.orderedList.show();fa.bump('buddylist_show');};ia.prototype._hideBuddyList=function(){"use strict";m.show(this.typeaheadContainer);this.orderedList.hide();fa.bump('buddylist_hide');};ia.prototype.onShow=function(){"use strict";this._isOpen=true;if(i.disconnected()){this._tryReconnect();this._showBuddyList();}else l.goOnline(this._showBuddyList.bind(this));};ia.prototype._setLabel=function(ja,ka){"use strict";var la=this.label.textContent||this.label.innerText;if(la!==ja){var ma=this.label.cloneNode(true);o.setContent(ma,ja);o.replace(this.label,ma);this.label=ma;}this.throbber&&m.conditionShow(this.throbber,!!ka);};ia.prototype._setUnread=function(ja){"use strict";m.conditionShow(this.unreadCount,!!ja);if(ja){ja=r.span({className:"_51jx _5ayw"},ja);o.setContent(this.unreadCount,ja);}};ia.prototype._updateCount=function(){"use strict";this._updateView();};e.exports=ia;},null);
__d("ChatHovercard",["Arbiter","AsyncLoader","Bootloader","JSLogger","debounce"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=5,m=new h('/ajax/chat/hovercard/sidebar.php','hover'),n=j.create('chat_hovercard');g.subscribe('Hovercard/dirty',m.reset.bind(m));function o(s,t){m.get(s,function(u){setTimeout(function(){if(!u){n.error('fetch_failure',{id:s});return;}i.loadModules(["Hovercard"],function(v){var w=v.getDialog(u);if(!w){n.error('no_hovercard',{id:s,endpoint:u});return;}if(s==t.getActiveID())t.showHovercard(s,w);});},0);});}function p(s,t){var u=[];function v(y){if(y>=0&&y<s.length)u.push(s[y]);}var w=s.indexOf(t);if(w>-1){v(w);for(var x=1;x<l;x++){v(w+x);v(w-x);}}return u.filter(function(y){return y;});}function q(s,t){var u=t.getActiveID();if(u){var v=s.getShowingUsers(),w=p(v,u);m.get(w,function(){});}}function r(s){var t=s.getHoverController();t.registerDefault(o);t.subscribe('hover',k(q.bind(null,s,t),100));}e.exports=r;},null);
__d("ChatOptions",["Arbiter","ChannelConstants","ChatSidebarActions","JSLogger","PresenceUtil","ChatOptionsInitialData"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=j.create('chat_options'),m={};(function(){var o=b('ChatOptionsInitialData');for(var p in o){var q=o[p];m[p]=!!q;}})();var n=Object.assign(new g(),{getSetting:function(o){return m[o];},setSetting:function(o,p,q){if(o==='sidebar_mode'){p?i.enable():i.disable();return;}if(this.getSetting(o)==p)return;if(q){q='from_'+q;l.log(q,{name:o,new_value:p,old_value:this.getSetting(o)});}m[o]=!!p;g.inform('chat/option-changed',{name:o,value:p});}});g.subscribe(h.getArbiterType('setting'),function(o,p){var q=p.obj;if(q.window_id===k.getSessionID())return;n.setSetting(q.setting,!!q.value,'channel');});g.subscribe(j.DUMP_EVENT,function(o,p){p.chat_options=m;});e.exports=n;},null);
__d("ChatOrderedListHover",["ArbiterMixin","CSS","ErrorUtils","Event","LayerHideOnBlur","Parent","cx","mixin","setTimeoutAcrossTransitions","shield"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){b.__markCompiled&&b.__markCompiled();function q(w){h.addClass(w,'fetching');}function r(w){h.removeClass(w,'fetching');}var s=n(g);for(var t in s)if(s.hasOwnProperty(t))v[t]=s[t];var u=s===null?null:s.prototype;v.prototype=Object.create(u);v.prototype.constructor=v;v.__superConstructor__=s;function v(w){"use strict";s.call(this);this._orderedList=w;this._root=w.getRoot();j.listen(this._root,'mouseover',this._mouseOver.bind(this));j.listen(this._root,'mouseleave',this._mouseLeave.bind(this));w.subscribe('click',p(this._hide,this));}v.prototype._mouseOver=function(event){"use strict";if(this._paused)return;var w=event.getTarget(),x=l.byClass(w,"_42fz")||l.byClass(w,"_5a58");x&&this._setActiveItem(x);};v.prototype._mouseLeave=function(event){"use strict";this._setActiveItem(null);};v.prototype._clearTimeouts=function(){"use strict";this._showTimeout&&clearTimeout(this._showTimeout);this._showTimeout=null;this._hideTimeout&&clearTimeout(this._hideTimeout);this._hideTimeout=null;};v.prototype._hide=function(){"use strict";if(this._showingDialog){this._showingDialog.hide();this._showingDialog=null;this._showingID=null;}};v.prototype._show=function(){"use strict";var w=this.getActiveID(),x=false;if(this._defaultHandler){x=true;i.applyWithGuard(this._defaultHandler,{},[w,this]);}if(x&&this._showingID!=this.getActiveID())q(this._activeItem);};v.prototype._setActiveItem=function(w){"use strict";if(w!=this._activeItem){this._clearTimeouts();this._activeItem&&r(this._activeItem);this._activeItem=null;var x=w?0:100;this._hideTimeout=o(function(){if(this.getActiveID()!=this._showingID)this._hide();}.bind(this),x);if(w){this._activeItem=w;var y=x+500;this._showTimeout=o(function(){this._show();}.bind(this),y);this.inform('hover');}else this.inform('leave');}};v.prototype.registerDefault=function(w){"use strict";this._defaultHandler=w;};v.prototype.getActiveID=function(){"use strict";var w=this._activeItem&&this._orderedList.getUserForNode(this._activeItem);return w||null;};v.prototype.showHovercard=function(w,x){"use strict";if(w==this.getActiveID()&&w!=this._showingID){this._clearTimeouts();r(this._activeItem);this._hide();this._showingDialog=x;this._showingID=w;var y=x.subscribe('mouseenter',this._setActiveItem.bind(this,this._activeItem)),z=x.subscribe('mouseleave',function(){y.unsubscribe();this._setActiveItem(null);}.bind(this)),aa=x.subscribe('hide',function(){this.inform('hovercard_hide');y.unsubscribe();z.unsubscribe();aa.unsubscribe();}.bind(this));x.enableBehavior(k).setContext(this._activeItem).setPosition('left').show();this.inform('hovercard_show');}};Object.assign(v.prototype,{_root:null,_activeItem:null,_hideTimeout:null,_showTimeout:null,_showingDialog:null,_showingID:null,_defaultHandler:null});e.exports=v;},null);
__d("ChatSidebarConstants",["ChatConfig"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h=g.get('divebar_new_design',false),i={LITESTAND_CLASSIC_SIZE:32,IMAGE_SIZE:h?32:28};Object.assign(i,{getImageSize:function(j){if(j===false)return i.IMAGE_SIZE;return i.LITESTAND_CLASSIC_SIZE;},getItemHeight:function(j){if(h)return i.IMAGE_SIZE+8;if(j===false)return i.IMAGE_SIZE+4;return i.LITESTAND_CLASSIC_SIZE+4;}});e.exports=i;},null);
__d("AbstractBadge.react",["React","cx","invariant","joinClasses"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=g,l=k.PropTypes;function m(o){return parseInt(o,10)===o;}var n=g.createClass({displayName:"AbstractBadge",propTypes:{count:l.number.isRequired,maxcount:l.number},getDefaultProps:function(){return {maxcount:20};},render:function(){var o=this.props.count,p=this.props.maxcount;i(m(o));i(m(p));var q=(("_51lp")+(o>p?' '+"_51lr":'')+(o===0?' '+"hidden_elem":''));return (g.createElement("span",g.__spread({},this.props,{className:j(this.props.className,q)}),o>p?p+'+':o));}});e.exports=n;},null);
__d("XUIBadge.react",["React","AbstractBadge.react","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=g,l=k.PropTypes,m=g.createClass({displayName:"XUIBadge",propTypes:{type:l.oneOf(['regular','special'])},getDefaultProps:function(){return {type:'regular'};},render:function(){var n=this.props.type,o=(("_5ugh")+(n==='regular'?' '+"_5ugf":'')+(n==='special'?' '+"_5ugg":''));return (g.createElement(h,g.__spread({},this.props,{className:j(this.props.className,o),type:null})));}});e.exports=m;},null);
__d("ChatSidebarItem.react",["AvailableListConstants","XUIBadge.react","ChatConfig","ChatSidebarConstants","Image.react","Link.react","ReactComponentWithPureRenderMixin","React","SplitImage.react","TextWithEmoticons.react","Timestamp.react","cx","ix"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){b.__markCompiled&&b.__markCompiled();var t=n,u=t.PropTypes,v=i.get('divebar_new_design',false),w=9,x=n.createClass({displayName:"ChatSidebarItem",mixins:[m],propTypes:{image:u.string,images:u.array,birthday:u.bool,context:u.string,detailedStatus:u.string,href:u.string,imageSize:u.number,name:u.string,onClick:u.func,status:u.number,statusTime:u.string,unreadCount:u.number,nowData:u.object},render:function(){var y=(("_55ln")+(this.props.context?' '+"_55lo":'')+(this.props.unreadCount?' '+"_5bom":'')+(v?' '+"_55za":'')),z=(("_55lr")+(this.props.nowData&&this.props.nowData.location?' '+"_3zz8":''));return (n.createElement(l,{className:y,href:{url:this.props.href},onClick:this.props.onClick,rel:"ignore"},n.createElement("div",{className:"_55lp"},n.createElement("div",{className:"_56p9"},n.createElement(o,{size:this.props.imageSize||j.IMAGE_SIZE,srcs:this.props.image||this.props.images}),n.createElement("div",{className:"_568w"})),n.createElement("div",{className:"_5bon"},this.renderBirthday(),this.renderUnreadCount(),this.renderStatus()),n.createElement("div",{className:z},n.createElement(p,{renderEmoticons:true,renderEmoji:true,text:this.props.name}),this.renderLocation()),n.createElement("div",{className:"_55ls"},this.props.context))));},renderUnreadCount:function(){var y=this.props.unreadCount;if(!y)return null;return (n.createElement(h,{count:y,maxcount:w,type:"regular"}));},renderLocation:function(){if(i.get('badger_www_nub')&&this.props.nowData&&this.props.nowData.location)return (n.createElement("span",{className:"_3zz9"},this.props.nowData.location));return null;},renderStatus:function(){if(i.get('badger_www_nub')&&this.props.nowData&&this.props.nowData.icon&&this.props.nowData.background_color){var y=this.props.nowData,z={backgroundColor:'#'+y.background_color},aa=y.icon.filepath?'/'+y.icon.filepath:y.icon.uri,ba=n.createElement(k,{className:"_568_ _5jvt",src:aa,style:z}),ca=n.createElement(q,{className:"_568-",minimize:true,time:this.props.nowData.timestamp});return (n.createElement("div",{className:"_568z"},ca,ba));}var da=this.getStatusSrc();if(!da&&!this.props.statusTime)return null;var ea=da?n.createElement(k,{className:"_568_",src:da}):null,fa=true,ga=this.props.unreadCount||0;if(i.get('remove_lat')){ea=this.props.statusTime?null:ea;fa=false;}else if(ga>0){ea=this.props.statusTime?null:ea;fa=false;}return (n.createElement("div",{className:"_568z"},fa?this.renderLastActiveTime():null,this.renderDetailedPresence(),ea));},renderLastActiveTime:function(){return (n.createElement("div",{className:"_568-"},this.props.statusTime));},renderDetailedPresence:function(){if(i.get('remove_surface')){return null;}else{var y=this.props.unreadCount||0;if(y>0)return null;}return (n.createElement("div",{className:"_5t35"},this.props.detailedStatus));},renderBirthday:function(){if(!this.props.birthday)return null;var y=s('/images/gifts/icons/cake_icon.png');return (n.createElement(k,{className:"_5dv3",src:y}));},getStatusSrc:function(){switch(this.props.status){case g.ACTIVE:return v?s('/images/chat/sidebar/buddylist_nub/greenDot.png'):s('/images/litestand_classic/sidebar/online.png');case g.MOBILE:return v?s('/images/chat/sidebar/buddylist_nub/phone.png'):s('/images/litestand_classic/sidebar/pushable.png');}return null;}});e.exports=x;},null);
__d("MercuryThreadMetadataRawRenderer",["Event","CSS","DOM","MercuryActionStatus","MercuryErrorInfo","MercuryStatusTemplates","TooltipData","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();var p={renderParticipantListWithNoThreadName:function(q,r,s,t,u,v){var w={callback:true,check_length:true,show_unread_count:true};v=v||{};var x={};for(var y in v)if(w[y]){x[y]=v[y];delete v[y];}var z=s.map(function(ea){return t[ea];}),aa=this.renderRawParticipantList(q,z,s.length,v);aa=this.renderRawTitleWithUnreadCount(aa,x.show_unread_count?r.unread_count:0);var ba=v.abbr_mode,ca={};for(var da in v)ca[da]=v[da];ca.abbr_mode=true;u.forEach(function(ea){var fa=u.length>1?this._cloneIfDOMElement(aa):aa;i.setContent(ea,fa);if(x.check_length&&!ba&&ea.scrollWidth>ea.clientWidth){var ga=this.renderRawParticipantList(q,z,s.length,ca),ha=this.renderRawTitleWithUnreadCount(ga,x.show_unread_count?r.unread_count:0);i.setContent(ea,ha);}}.bind(this));x.callback&&x.callback(aa);},renderRawParticipantList:function(q,r,s,t){var u={abbr_mode:true,last_separator_uses_and:true,names_renderer:true};t=t||{};var v=null;if(t.names_renderer){v=t.names_renderer(r);}else v=r.map(function(x){return x.name;});var w=null;if(v.length===0){if(!q){w=o._("New Message");}else w=o._("No Participants");}else if(v.length==1){w=v[0];}else if(v.length==2){if(t.last_separator_uses_and){w=o._("{participant1} and {participant2}",[o.param("participant1",v[0]),o.param("participant2",v[1])]);}else w=o._("{participant1}, {participant2}",[o.param("participant1",v[0]),o.param("participant2",v[1])]);}else if(t.last_separator_uses_and){if(t.abbr_mode){w=o._("{participant1} and {others_link}",[o.param("participant1",v[0]),o.param("others_link",this.renderRawParticipantCount({render_subset:true,count:s-1}))]);}else if(v.length==3){w=o._("{participant1}, {participant2} and {participant3}",[o.param("participant1",v[0]),o.param("participant2",v[1]),o.param("participant3",v[2])]);}else w=o._("{participant1}, {participant2} and {others_link}",[o.param("participant1",v[0]),o.param("participant2",v[1]),o.param("others_link",this.renderRawParticipantCount({render_subset:true,count:s-2}))]);}else if(v.length==3){w=o._("{participant1}, {participant2}, {participant3}",[o.param("participant1",v[0]),o.param("participant2",v[1]),o.param("participant3",v[2])]);}else w=o._("{participant1}, {participant2}, {participant3}, {others_link}",[o.param("participant1",v[0]),o.param("participant2",v[1]),o.param("participant3",v[2]),o.param("others_link",this.renderRawParticipantCount({render_subset:true,count:s-3}))]);if(Array.isArray(w))w=i.create('span',{},w);return w;},renderRawTitleWithUnreadCount:function(q,r){var s=q;if(r&&r>1)s=i.create('span',{},o._("{conversation_title} ({unread_count})",[o.param("conversation_title",q),o.param("unread_count",r)]));return s;},renderRawParticipantCount:function(q){var r=q.render_subset,s;if(!r){s=q.count>1?o._({"*":"{num} people"},[o.param("num",q.count,[0])]):o._("1 person");}else s=q.count>1?o._({"*":"{others_count} others"},[o.param("others_count",q.count,[0])]):o._("1 other");return s;},renderShortNames:function(q){if(q.length==1)return [q[0].name];return q.map(function(r){return r.short_name;});},renderStatusIndicator:function(q,r,s){var t;if(q==j.RESENDING){t=this.renderResendIndicator();}else if(q!==(void 0)&&q!=j.UNSENT&&q!=j.UNCONFIRMED&&q!=j.SUCCESS)t=this.renderErrorIndicator(r,s);return t;},renderResendIndicator:function(){return l[':fb:mercury:resend-indicator'].render();},renderErrorIndicator:function(q,r){if(!q)return null;var s=l[':fb:mercury:error-indicator'].render(),t=q.is_transient,u=k.getMessage(q);if(t)if(k.isConnectionError(q)){u=o._("{message} Check your internet connection and click to try again.",[o.param("message",u)]);}else u=o._("{message} Click to send again.",[o.param("message",u)]);m.set(s,u,'above','center');if(r&&t){g.listen(s,'click',r);s.setAttribute('tabindex','0');h.addClass(s,"_55q-");}return s;},_cloneIfDOMElement:function(q){if(q&&q.cloneNode){return q.cloneNode();}else return q;}};e.exports=p;},null);
__d("Tooltip.react",["React","TooltipMixin"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i=g,j=i.PropTypes,k=g.createClass({displayName:"Tooltip",propTypes:{display:j.oneOf(['inline','block'])},getDefaultProps:function(){return {display:'inline'};},mixins:[h],render:function(){if(this.props.display==='block')return (g.createElement("div",g.__spread({},this.props),this.props.children));return g.createElement("span",g.__spread({},this.props),this.props.children);}});e.exports=k;},null);
__d("ChatSidebarThread.react",["ChatSidebarItem.react","ChatOpenTab","WebMessengerPermalinkConstants","React","MercuryThreadMetadataRawRenderer","Tooltip.react","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();var n=j,o=n.PropTypes,p=j.createClass({displayName:"ChatSidebarThread",getInitialState:function(){return {maxNumParticipantsToRender:10};},propTypes:{image:o.string,imageSize:o.number,name:o.string,participants:o.array,numOtherParticipants:o.number,referrer:o.string,status:o.number,threadFBID:o.string,unreadCount:o.number},_renderParticipants:function(){var s=[],t=this.props.participants.length,u=this.props.numOtherParticipants,v=Math.min(this.state.maxNumParticipantsToRender,t);if(u-v==1)v--;for(var w=0;w<v;w++){var x=this.props.participants[w];s.push(j.createElement("li",{key:x.id},x.name));}if(v<u)s.push(j.createElement("li",{key:"more-participants"},m._("and {num} more...",[m.param("num",u-v)])));return (j.createElement("ul",null,s));},render:function(){var s=this.props.name,t=q(this.props.threadFBID,this.props.participants,this.props.numOtherParticipants),u=s?t:undefined,v=i.getURIPathForThreadID(this.props.threadFBID),w=r(this.props.image,this.props.participants),x=s?s:t;return (j.createElement(l,{display:"block",position:"above",tooltip:this._renderParticipants()},j.createElement(g,{context:u,href:v,imageSize:this.props.imageSize,image:this.props.image,images:w,name:x,onClick:this._openTab,referrer:this.props.referrer,status:this.props.status,unreadCount:this.props.unreadCount})));},_openTab:function(s){s.preventDefault();h.openThread(this.props.threadFBID,this.props.referrer);}});function q(s,t,u){return k.renderRawParticipantList(s,t,u,{names_renderer:k.renderShortNames});}function r(s,t){if(s)return null;return t.map(function(u){return u.image_src;});}e.exports=p;},null);
__d("ChatSidebarGroupThreadsGroup.react",["ChannelConnection","ChatSidebarThread.react","ChatSidebarSections","ChatSidebarConstants","PresencePrivacy","PresenceStatus","React","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();var o=m,p=o.PropTypes,q=m.createClass({displayName:"ChatSidebarGroupThreadsGroup",propTypes:{groups:p.array.isRequired},render:function(){return (m.createElement("ul",null,this.props.groups.map(this._renderGroup)));},_renderGroup:function(r){var s=r.mercury_thread.participants,t=g.disconnected()||k.isUserOffline();return (m.createElement("li",{className:(("_42fz")+(t?' '+"_570-":'')),"data-id":r.uid,key:r.uid},m.createElement(h,{image:r.mercury_thread.image_src,imageSize:j.getImageSize(),name:r.mercury_thread.name,participants:r.participants_to_render,numOtherParticipants:s.length-1,referrer:i.ORDERED_LIST,status:l.getGroup(s),threadFBID:r.uid})));}});e.exports=q;},null);
__d("ChatSidebarStore",["ChatDispatcher","ChatOptionsInitialData","ChatSidebarActions","FluxStore","performanceAbsoluteNow"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';for(var l in j)if(j.hasOwnProperty(l))n[l]=j[l];var m=j===null?null:j.prototype;n.prototype=Object.create(m);n.prototype.constructor=n;n.__superConstructor__=j;function n(){j.call(this,g);this.$ChatSidebarStore0={initialized:false,initTime:k(),loaded:false,visible:true,enabled:!!h.sidebar_mode};this.$ChatSidebarStore1={};}n.prototype.__onDispatch=function(o){var p=o.type;this.$ChatSidebarStore1=Object.assign({},this.$ChatSidebarStore0);switch(p){case i.Types.INIT:if(!this.$ChatSidebarStore1.initialized)this.$ChatSidebarStore0.initTime=k();this.$ChatSidebarStore0.initialized=true;break;case i.Types.HIDE:this.$ChatSidebarStore0.visible=false;break;case i.Types.LOADED:this.$ChatSidebarStore0.loaded=true;break;case i.Types.SHOW:this.$ChatSidebarStore0.visible=true;break;case i.Types.SET_ENABLED:this.$ChatSidebarStore0.enabled=o.enabled;break;case i.Types.TOGGLE:this.$ChatSidebarStore0.enabled=!this.$ChatSidebarStore0.enabled;break;}for(var q in this.$ChatSidebarStore0)if(this.$ChatSidebarStore0.hasOwnProperty(q))if(this.$ChatSidebarStore0[q]!==this.$ChatSidebarStore1[q]){this.__emitChange();break;}};n.prototype.getPrevState=function(){return this.$ChatSidebarStore1;};n.prototype.getState=function(){return this.$ChatSidebarStore0;};n.prototype.isInitialized=function(){return this.$ChatSidebarStore0.initialized;};n.prototype.isLoaded=function(){return this.$ChatSidebarStore0.loaded;};n.prototype.isHidden=function(){return !this.$ChatSidebarStore0.visible;};n.prototype.isEnabled=function(){return this.$ChatSidebarStore0.enabled;};n.prototype.getInitTime=function(){return this.$ChatSidebarStore0.initTime;};e.exports=new n();},null);
__d("ChatSidebarVisibility",["ChatConfig","ChatSidebarStore","DOMDimensions","OrderedFriendsList"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';var k=g.get('sidebar.min_friends'),l=g.get('sidebar.minimum_width'),m=g.get('minisidebar.minimum_width'),n={getViewport:function(){return i.getViewportWithoutScrollbarDimensions();},hasLowFriendCount:function(){return j.getActiveList().length<=k;},isViewportCapable:function(){var o=n.getViewport();return o.width>l;},shouldShowSidebar:function(){return n.isViewportCapable()&&!h.isHidden()&&!n.hasLowFriendCount();},isViewportCapableForMiniSidebar:function(){var o=n.getViewport();return o.width>m&&o.width<=l;},shouldShowMiniSidebar:function(){return !g.get('divebar_new_design',false)&&n.isViewportCapableForMiniSidebar()&&!h.isHidden()&&!n.hasLowFriendCount();}};e.exports=n;},null);
__d("ChatSidebarLog",["AsyncSignal","Banzai","BanzaiLogger","Bootloader","ChatPerfEvent","csx","DOM","ErrorUtils","ModuleDependencies","JSLogger","Run","performanceAbsoluteNow"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){b.__markCompiled&&b.__markCompiled();var s=p.create('chat_sidebar_load'),t=null,u=null,v=false,w=(Math.random()*2147483648|0).toString(36),x=Date.now(),y=null,z=false;q.onLoad(function(){v=true;});try{d(['ChatSidebarStore','ChatSidebarVisibility'],function(ga,ha){t=ga;u=ha;});}catch(aa){s.warn('exception',{reason:aa.toString()});}function ba(ga,ha){if(ga&&ga.length>ha)return ga[ha];return null;}function ca(ga){if(ga.name=='SyntaxError'||/syntaxerror/i.test(ga.message))z=true;}function da(){if(!y)y=i.create(Object.assign({retry:true},h.VITAL));return y;}function ea(ga,ha){setTimeout(function(){var ia=o.getMissing('ChatSidebar'),ja=j.getErrorUrls(),ka=j.getLoadingUrls(),la=[];for(var ma in ka)la.push({url:ma,time:ka[ma]});la.sort(function(ta,ua){return ua.time-ta.time;});var na={};for(var oa=0,pa=la.length;oa<pa;oa++)na[la.url]=la.time;var qa={start_gap:x-j.getStartTime(),page_loaded:v,page_id:w,timeout:ga,missing_total:ia?ia.length:null,module_1:ba(ia,0),module_2:ba(ia,1),module_3:ba(ia,2),error_url_total:ja.length,error_url_1:ba(ja,0),error_url_2:ba(ja,1),error_url_3:ba(ja,2),loading_url_total:la.length,loading_url_1:ba(la,0)?ba(la,0).url:null,loading_time_1:ba(la,0)?ba(la,0).time:null,loading_url_2:ba(la,1)?ba(la,1).url:null,loading_time_2:ba(la,1)?ba(la,1).time:null,loading_url_3:ba(la,2)?ba(la,2).url:null,loading_time_3:ba(la,2)?ba(la,2).time:null},ra=null;if(!t){s.warn('require_'+ga,{missing:ia});ra='require';}if(t&&!t.isInitialized()){s.warn('init_'+ga,{missing:ia});ra='init';}if(t&&t.isInitialized()&&t.isEnabled()&&u&&u.shouldShowSidebar()){var sa=m.scry(ha,"._42fz");if(!sa||sa.length===0){s.warn('render_'+ga,{missing:ia});ra='render';}}if(ra){qa.symptom=ra;new g('/ajax/chat/sidebar_load.php',qa).send();da().log('SidebarLoadFailureLoggerConfig',{start_gap:x-j.getStartTime(),page_loaded:v,page_id:w,timeout:ga,symptom:ra,has_syntax_error:z});}},ga);}var fa={start:function(ga){this._serverStartTime=r();n.addListener(ca);ea(5000,ga);ea(10000,ga);ea(15000,ga);ea(30000,ga);ea(60000,ga);},logRendered:function(){if(this._loggedPerformance)return;var ga=r();if(this._serverStartTime)i.log('ChatPerfLoggerConfig',{event:k.SIDEBAR_FROM_SERVER_TTI,duration:ga-this._serverStartTime});var ha=t&&t.getInitTime();if(ha)i.log('ChatPerfLoggerConfig',{event:k.SIDEBAR_FROM_CLIENT_TTI,duration:ga-ha});this._loggedPerformance=true;}};e.exports=fa;},null);
__d("ChatSidebarUser.react",["ChatOpenTab","ChatSidebarItem.react","WebMessengerPermalinkConstants","ReactComponentWithPureRenderMixin","React"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=k,m=l.PropTypes,n=k.createClass({displayName:"ChatSidebarUser",mixins:[j],propTypes:{birthday:m.bool,detailedStatus:m.string,image:m.string,imageSize:m.number,name:m.string,sectionName:m.string.isRequired,slot:m.number,status:m.number,statusTime:m.string,unreadCount:m.number,userID:m.string.isRequired,nowData:m.object},_openTab:function(event){g.openUserTab(this.props.userID,this.props.sectionName,{global_slot:this.props.slot});return event.preventDefault();},render:function(){var o=i.getURIPathForIDOrVanity(this.props.userID);return (k.createElement(h,{onClick:this._openTab,href:o,imageSize:this.props.imageSize,image:this.props.image,name:this.props.name,status:this.props.status,birthday:this.props.birthday,statusTime:this.props.statusTime,detailedStatus:this.props.detailedStatus,context:this.props.context,unreadCount:this.props.unreadCount,nowData:this.props.nowData}));}});e.exports=n;},null);
__d("ChatUnreadCount",["ArbiterMixin","ChatConfig","Map","MercuryIDs","MercurySingletonMixin","MercuryThreadInformer","MercuryThreads","MercuryUnreadState","mixin"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();var p=o(g);for(var q in p)if(p.hasOwnProperty(q))s[q]=p[q];var r=p===null?null:p.prototype;s.prototype=Object.create(r);s.prototype.constructor=s;s.__superConstructor__=p;function s(t){"use strict";p.call(this);this.$ChatUnreadCount0=t;this.$ChatUnreadCount1=l.getForFBID(t);this.$ChatUnreadCount2=m.getForFBID(t);this.$ChatUnreadCount3=new i();this.$ChatUnreadCount4=n.getForFBID(t);this.setupSubscriptions();}s.prototype.getUnreadCountForUID=function(t){"use strict";if(!h.get('unread_count_enabled')||!t)return null;var u=j.getThreadIDFromUserID(t);if(!this.$ChatUnreadCount4.getIsThreadUnread(u)){this.$ChatUnreadCount3["delete"](t);return 0;}var v=this.$ChatUnreadCount2.getOrFetch(u),w=v&&v.unread_count;this.$ChatUnreadCount3.set(t,w);return w;};s.prototype.setupSubscriptions=function(){"use strict";if(!h.get('unread_count_enabled'))return;this.$ChatUnreadCount1.subscribe('threads-updated',function(t,u){var v=Object.keys(u).some(function(w){var x=j.getUserIDFromThreadID(w);if(x===null)return false;var y=this.$ChatUnreadCount3.get(x)||0;return this.getUnreadCountForUID(x)!==y;}.bind(this));if(v)this.inform('unread-count-changed');}.bind(this));this.$ChatUnreadCount1.subscribe('unread-updated',function(){return this.inform('unread-count-changed');}.bind(this));};Object.assign(s,k);e.exports=s;},null);
__d("ChatSidebarUserGroup.react",["AvailableList","AvailableListConstants","ChannelConnection","ChatContexts","ChatSidebarSections","ChatSidebarUser.react","LastMobileActiveTimes","PresencePrivacy","PresenceStatus","React","ShortProfiles","SubscriptionsHandler","WorkModeConfig","cx","shield","ChatUnreadCount"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){b.__markCompiled&&b.__markCompiled();var v=b('ChatUnreadCount').get(),w=p,x=w.PropTypes,y=Object.keys(k).map(function(aa){return k[aa];}),z=p.createClass({displayName:"ChatSidebarUserGroup",propTypes:{ids:x.array.isRequired,sectionName:x.oneOf(y).isRequired,nowDataFetcher:x.func},getInitialState:function(){return {userData:[]};},_onAvailabilityChanged:function(aa,ba){if(!ba||this.props.ids.indexOf(ba)!==-1)this.forceUpdate();},componentWillMount:function(){this.componentWillReceiveProps(this.props);this._subscriptions=new r();this._subscriptions.addSubscriptions(g.subscribe(h.ON_AVAILABILITY_CHANGED,this._onAvailabilityChanged),v.subscribe('unread-count-changed',u(this.forceUpdate,this)));},componentWillUnmount:function(){this._subscriptions.release();},componentWillReceiveProps:function(aa){q.getMulti(aa.ids,function(ba){var ca=aa.ids.map(function(da){return ba[da];});this.setState({userData:ca});}.bind(this));},_renderProfile:function(aa,ba){var ca=s.is_work_user;if(aa.id===0||!(aa.is_friend||aa.is_messenger_only||ca))return null;var da=o.get(aa.id),ea=(da!==h.ACTIVE)?m.getShortDisplay(aa.id):null,fa=(da===h.ACTIVE)?o.getDetailedActivePresence(aa.id):null,ga=i.disconnected()||!n.allows(aa.id),ha=j.getShortDisplay(aa.id),ia=this.props.nowDataFetcher?this.props.nowDataFetcher(aa.id):null;return (p.createElement("li",{className:(("_42fz")+(ha?' '+"_52zj":'')+(ga?' '+"_570-":'')),"data-id":aa.id,key:aa.id},p.createElement(l,{birthday:aa.is_birthday,context:ha,detailedStatus:fa,image:aa.thumbSrc,imageSize:this.props.imageSize,name:aa.name,sectionName:this.props.sectionName,slot:ba,status:da,statusTime:ea,userID:aa.id,nowData:ia,unreadCount:v.getUnreadCountForUID(aa.id)})));},render:function(){return (p.createElement("ul",p.__spread({},this.props),this.state.userData.map(this._renderProfile)));}});e.exports=z;},null);
__d("NowPoller",["Arbiter","Poller","XNowQueryController"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=5000;function k(n,o){"use strict";this.$NowPoller0=n;this.$NowPoller1=new h({interval:j,setupRequest:this.$NowPoller2.bind(this),clearOnQuicklingEvents:false,dontStart:true});this.$NowPoller3=o;this.$NowPoller4=null;}k.prototype.$NowPoller2=function(n){"use strict";this.$NowPoller5=Date.now();n.setHandler(this.$NowPoller6.bind(this)).setErrorHandler(this.$NowPoller7.bind(this)).setOption('suppressErrorAlerts',true).setOption('retries',1).setData({section:this.$NowPoller3,includeusers:this.$NowPoller4}).setURI(i.getURIBuilder().getURI()).setAllowCrossPageTransition(true);};k.prototype.$NowPoller6=function(n){"use strict";var o=n.getPayload();this.$NowPoller0({pinnedfriends:o.pinned,topfriends:o.top_friends,mostrecent:o.most_recent,self:o.self});};k.prototype.$NowPoller7=function(n){"use strict";};k.prototype.setIncludeUsers=function(n){"use strict";this.$NowPoller4=n;};k.prototype.start=function(){"use strict";setTimeout(this.$NowPoller1.start.bind(this.$NowPoller1),0);};k.prototype.restart=function(){"use strict";if(this.$NowPoller1.isMuted()){this.$NowPoller1.resume();this.forceUpdate();}};k.prototype.stop=function(){"use strict";this.$NowPoller1.mute();};k.prototype.forceUpdate=function(){"use strict";this.$NowPoller1.request();};var l,m;k.start=function(){if(!l){l=new k(function(n){g.inform('Now/updatedData',n);},'all');if(m)l.setIncludeUsers(m);l.start();}};k.setIncludeUsers=function(n){m=n;if(l)l.setIncludeUsers(m);};k.forceUpdate=function(){if(l)l.forceUpdate();};k.listenForUpdate=function(n){g.subscribe('Now/updatedData',function(o,p){n(p);});};e.exports=k;},null);
__d("ChatSidebarOrderedList.react",["Animation","BanzaiODS","ChatConfig","ChatQuietLinks","ChatSidebarConstants","ChatSidebarGroupThreadsGroup.react","ChatSidebarLog","ChatSidebarSections","ChatSidebarUserGroup.react","NowPoller","PresencePrivacy","ReactComponentWithPureRenderMixin","React","Scroll","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){b.__markCompiled&&b.__markCompiled();var w='chat_sidebar_visibility',x=i.get('divebar_new_design',false),y=s,z=y.PropTypes;h.setEntitySample(w,.0001);var aa=s.createClass({displayName:"ChatSidebarOrderedList",propTypes:{topUsers:z.array.isRequired,availableUsers:z.array.isRequired,isSidebar:z.bool.isRequired,scrollContainer:z.object,groups:z.array.isRequired,showNow:z.bool},getInitialState:function(){return {nowData:{}};},componentDidMount:function(){m.logRendered&&m.logRendered();j.nukeLinks(s.findDOMNode(this));this._logFriendCount();if(this.props.showNow){p.listenForUpdate(function(ca){return this.setState({nowData:ca});}.bind(this));p.start();}},_scrollToSeparator:function(ca){if(!this.props.scrollContainer)return;var da=this.props.scrollContainer.scrollHeight,ea=this.props.scrollContainer.clientHeight,fa=t.getTop(this.props.scrollContainer),ga=Math.min(ca.offsetTop,da-ea);if(fa!==ga){var ha=Math.abs(ga-fa)/this.props.scrollContainer.clientHeight*500;new g(this.props.scrollContainer).to('scrollTop',ga).ease(g.ease.end).duration(ha).go();}},_renderOfflineSection:function(){var ca=k.getImageSize(this.props.isSidebar),da=this.props.topUsers.filter(function(fa){return !q.allows(fa);});da.splice(-2);var ea=(s.createElement("a",{ajaxify:"/ajax/chat/privacy/settings_dialog.php?ref=whitelist_separator",href:"#",rel:"dialog"},v._("Edit")));return [s.createElement("div",{key:"users_separator1",className:"_554m"},s.createElement(ba,null,v._("MORE FRIENDS"))),s.createElement("div",{key:"users_separator2",className:"_554m blackbirdWhitelist"},s.createElement("div",{className:"_554o"},s.createElement("div",{className:"_554n"},s.createElement("div",{className:"_5v-d"},s.createElement("span",{className:"_554t"},v._("These friends can't see you on chat. {=link}",[v.param("=link",ea)])))))),s.createElement(o,{key:n.OFFLINE_USERS,sectionName:n.OFFLINE_USERS,ids:da,imageSize:ca})];},_renderOnlineSection:function(){if(this.props.availableUsers.length===0)return null;var ca=k.getImageSize(this.props.isSidebar);return [s.createElement("div",{key:"users_separator",ref:"usersSeparator",onClick:function(){return this._scrollToSeparator(s.findDOMNode(this.refs.usersSeparator));}.bind(this),className:"_554m moreOnlineFriends"},s.createElement(ba,null,v._("{MORE ONLINE FRIENDS} ({=count})",[v.param("MORE ONLINE FRIENDS",v._("MORE FRIENDS")),v.param("=count",this.props.availableUsers.length)]))),s.createElement(o,{key:n.MORE_ONLINE_FRIENDS,sectionName:n.MORE_ONLINE_FRIENDS,ids:this.props.availableUsers,imageSize:ca})];},_renderGroupsSection:function(){if(this.props.groups.length===0)return null;return [s.createElement("div",{key:"group_separator",ref:"groupSeparator",onClick:function(){return this._scrollToSeparator(s.findDOMNode(this.refs.groupSeparator));}.bind(this),className:"_554m moreOnlineFriends"},s.createElement(ba,null,v._("GROUP CONVERSATIONS"))),s.createElement(l,{key:"group_threads_section",groups:this.props.groups})];},render:function(){var ca=k.getImageSize(this.props.isSidebar),da=this.props.topUsers;if(q.getVisibility()==q.ONLINE)da=this.props.topUsers.filter(function(ka){return q.allows(ka);});var ea=(q.getOnlinePolicy()==q.ONLINE_TO_WHITELIST&&q.getVisibility())?this._renderOfflineSection():this._renderOnlineSection(),fa=null,ga=null;if(this.props.showNow&&this.state.nowData){var ha=da,ia=[];if(this.state.nowData.pinnedfriends)ia=this.state.nowData.pinnedfriends.map(function(ka){return ka.user_id;});if(this.state.nowData.topfriends)da=this.state.nowData.topfriends.map(function(ka){return ka.user_id;});ha=ha.filter(function(ka){return (ia.indexOf(ka)==-1);});p.setIncludeUsers(ha);ha=ha.filter(function(ka){return (da.indexOf(ka)==-1);});ha.forEach(function(ka){da.push(ka);});var ja=function(ka){var la=null;if(this.state.nowData.pinnedfriends)this.state.nowData.pinnedfriends.forEach(function(ma){if(ma.user_id==ka)la=ma;});if(this.state.nowData.topfriends)this.state.nowData.topfriends.forEach(function(ma){if(ma.user_id==ka)la=ma;});return la;}.bind(this);fa=s.createElement("div",null,s.createElement(ba,null,v._("PINNED FRIENDS")),s.createElement(o,{ids:ia,imageSize:ca,key:n.NOW_PINNED_LIST,nowDataFetcher:ja,sectionName:n.NOW_PINNED_LIST}));ga=s.createElement("div",null,s.createElement(ba,null,v._("TOP FRIENDS")),s.createElement(o,{key:n.ORDERED_LIST,ids:da,imageSize:ca,nowDataFetcher:ja,sectionName:n.ORDERED_LIST}));}else ga=s.createElement(o,{key:n.ORDERED_LIST,ids:da,imageSize:ca,sectionName:n.ORDERED_LIST});return (s.createElement("li",{className:x?"_bxd":null},fa,ga,this._renderGroupsSection(),ea));},_logFriendCount:function(){this._logTimeout=setTimeout(function(){h.bumpEntityKey(w,this.props.availableUsers.length===0?'state_list_empty':'state_list_mounted');}.bind(this),5000);}}),ba=s.createClass({displayName:"ChatSidebarSeparator",mixins:[r],render:function(){var ca=x?null:s.createElement("div",{className:"_554q"},s.createElement("span",{className:"_554r"}));return (s.createElement("div",{className:"_554o"},s.createElement("div",{className:"_554n"},s.createElement("span",{className:"_554p"},this.props.children),ca)));}});e.exports=aa;},null);
__d("ChatSortUsers",["AvailableListConstants","OrderedFriendsList","PresencePrivacy","PresenceStatus","ShortProfiles","TokenizeUtil"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();function m(q,r){var s=i.allows(q),t=i.allows(r);if(s!==t)return s?-1:1;return 0;}var n={};function o(q){if(n[q])return n[q];var r=(k.getNowUnsafe(q)||{}).name;if(r)return n[q]=l.flatten(r);return '~';}var p={sortAlphabetical:function(q,r){var s=o(q),t=o(r);if(s!==t)return s<t?-1:1;return 0;},sortMobile:function(q,r){var s=j.get(q)===g.MOBILE,t=j.get(r)===g.MOBILE;if(s!==t)return t?-1:1;return p.sortAlphabetical(q,r);},sortCoefficient:function(q,r){var s=h.getRank(q),t=h.getRank(r);if(s!==t)return s-t;return p.sortAlphabetical(q,r);},sort:function(q,r){var s=m(q,r);if(s!==0)return s;return p.sortCoefficient(q,r);}};e.exports=p;},null);
__d("ChatOrderedList",["Arbiter","ArbiterMixin","AvailableList","AvailableListConstants","CSS","ChatConfig","ChatOptions","ChatHovercard","ChatOrderedListHover","ChatSidebarConstants","ChatSidebarInboxConfig","ChatSidebarOrderedList.react","ChatSortUsers","ChatVisibility","DOM","DataStore","JSLogger","OrderedFriendsList","Parent","PresencePrivacy","PresenceStatus","React","createObjectFrom","csx","debounceAcrossTransitions","mixin","shield"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga){b.__markCompiled&&b.__markCompiled();var ha=null,ia=fa(h);for(var ja in ia)if(ia.hasOwnProperty(ja))la[ja]=ia[ja];var ka=ia===null?null:ia.prototype;la.prototype=Object.create(ka);la.prototype.constructor=la;la.__superConstructor__=ia;function la(ma,na){"use strict";ia.call(this);this._isSidebar=ma;this._root=na;this._isVisible=false;this._excludedIds={};this._numTopFriends=5;this._groups=[];this._hoverController=null;this._orderedList=u.find(this._root,'.fbChatOrderedList');this._scrollableOrderedList=y.byClass(this._root,'scrollableOrderedList');this._scrollableArea=y.byClass(this._root,'scrollable');if(this._isSidebar)new n(this);g.subscribe(w.DUMP_EVENT,function(oa,pa){pa.chat_lists=pa.chat_lists||{sorted_list:this.getCachedSortedList(),ordered_list:x.getList(),available_list:la.getAvailableList(this._excludedIds),excluded_list:this._excludedIds};}.bind(this));z.subscribe('privacy-user-presence-changed',ga(this._render,this));i.subscribe(j.ON_AVAILABILITY_CHANGED,ga(this._render,this));}la.prototype.getShowingUsers=function(){"use strict";return u.scry(this._root,"li._42fz,li._5a58").map(this.getUserForNode);};la.prototype.getUserForNode=function(ma){"use strict";return v.get(ma,'id')||v.get(ma,'serverthreadid');};la.prototype.getHoverController=function(){"use strict";if(!this._hoverController)this._hoverController=new o(this);return this._hoverController;};la.prototype.getItemHeight=function(){"use strict";return p.getItemHeight(this._isSidebar);};la.prototype.getRoot=function(){"use strict";return this._root;};la.prototype.getSortedList=function(ma){"use strict";return la.getSortedList(ma||this._excludedIds,this._numTopFriends);};la.prototype.getCachedSortedList=function(ma){"use strict";if(ha==null)ha=this.getSortedList(ma);return ha;};la.prototype.hide=function(){"use strict";if(!this._isVisible)return;this._isVisible=false;k.hide(this._scrollableOrderedList||this._root);this.inform('hide');};la.prototype.setNumTopFriends=function(ma){"use strict";var na=la.getGroups(),oa=ma-na.length;if(oa>l.get('min_top_friends'))ma=oa;if(ma!==this._numTopFriends||na.length!==this._groups.length){this._groups=na;this._numTopFriends=ma;this._render();}};la.prototype._renderOrderedList=function(){"use strict";if(!this._isVisible)return;var ma=la.getSortedList({},this._numTopFriends),na=la.getAvailableList(ca(ma));na.sort(s.sortMobile);var oa=q.component;if(oa){ba.render(ba.createElement(oa,{showCount:q.show_count,showPresence:q.show_presence,threadCount:this._numTopFriends}),this._orderedList);}else ba.render(ba.createElement(r,{availableUsers:na,isSidebar:this._isSidebar,scrollContainer:this._scrollContainer,topUsers:ma,groups:la.getGroups(),showNow:l.get('badger_www_nub')}),this._orderedList);this.inform('render');};la.prototype._render=function(){"use strict";this._render=ea(this._renderOrderedList.bind(this),300);this._render();};la.prototype.show=function(){"use strict";if(this._isVisible)return;this._isVisible=true;k.show(this._scrollableOrderedList||this._root);this._render();this.inform('show');};la.prototype.isVisible=function(){"use strict";return this._isVisible;};la.prototype.setScrollContainer=function(ma){"use strict";if(u.contains(ma,this._root))this._scrollContainer=ma;};la.getGroups=function(){"use strict";if(!m.getSetting('hide_groups')){return x.getGroups();}else return [];};la.getSortedList=function(ma,na){"use strict";var oa=x.getList().filter(function(ra){return !(ra in ma)&&z.getFriendVisibility(ra)!==z.BLACKLISTED;});if(!t.isOnline())if(z.getOnlinePolicy()===z.ONLINE_TO_WHITELIST)oa=this._filterByWhitelist(oa);var pa=oa.slice(0,na);if(pa.length===na){var qa=la.getAvailableList(pa.concat(ma)).length;qa&&pa.splice(-1);}ha=pa.slice();return pa;};la._filterByWhitelist=function(ma){"use strict";var na=ma,oa={},pa,qa;ma=[];for(pa=0;pa<na.length;++pa){qa=na[pa];if(z.allows(qa)){oa[qa]=true;ma.push(qa);}}var ra=z.getWhitelist();for(pa=0;pa<ra.length;++pa){qa=ra[pa];if(!(qa in oa))ma.push(qa);}for(pa=0;pa<na.length;++pa){qa=na[pa];if(!z.allows(qa))ma.push(qa);}return ma;};la.getAvailableList=function(ma){"use strict";var na;if(!na)na=aa.getOnlineIDs();return na.filter(function(oa){return !(oa in ma);});};e.exports=la;},null);
__d("ChatTabActions",["ChatDispatcher","keyMirror"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';var i=h({CLOSE_TAB:null,CLOSE_ALL_TABS:null,CLOSE_FRAGILE_TABS:null,LOWER_TAB:null,OPEN_FRAGILE_TAB:null,OPEN_TAB:null,PERSIST_LOCAL_STATE:null,PROMOTE_TAB:null,RAISE_TAB:null}),j={Types:i,closeTab:function(k,l){g.dispatch({actionType:i.CLOSE_TAB,reason:l,threadID:k});},closeAllTabs:function(){g.dispatch({actionType:i.CLOSE_ALL_TABS});},closeFragileTabs:function(){g.dispatch({actionType:i.CLOSE_FRAGILE_TABS});},lowerTab:function(k){g.dispatch({actionType:i.LOWER_TAB,threadID:k});},openFragileTab:function(k){g.dispatch({actionType:i.OPEN_FRAGILE_TAB,threadID:k});},openTab:function(k){g.dispatch({actionType:i.OPEN_TAB,threadID:k});},persistLocalState:function(){g.dispatch({actionType:i.PERSIST_LOCAL_STATE});},promoteTab:function(k){g.dispatch({actionType:i.PROMOTE_TAB,threadID:k});},raiseTab:function(k,l,m){g.dispatch({actionType:i.RAISE_TAB,signatureID:m,threadID:k,userAction:l});}};e.exports=j;},null);
__d("ChatSidebarComposeLink.react",["ChatOpenTab","React","TooltipLink.react","URI","fbt"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=h,m=l.PropTypes,n=h.createClass({displayName:"ChatSidebarComposeLink",propTypes:{className:m.string.isRequired},componentDidMount:function(){g.listenOpenEmptyTab(h.findDOMNode(this),'sidebar');},render:function(){var o=k._("New Message");return (h.createElement(i,{ajaxify:new j('/ajax/messaging/composer.php'),className:this.props.className,tooltip:o,rel:"dialog"}));}});e.exports=n;},null);
__d("SidebarFitWindowHeight",["Arbiter","ArbiterMixin","Event","Style","SubscriptionsHandler","UITinyViewportAction","Vector","mixin","queryThenMutateDOM"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();var p=n(h);for(var q in p)if(p.hasOwnProperty(q))s[q]=p[q];var r=p===null?null:p.prototype;s.prototype=Object.create(r);s.prototype.constructor=s;s.__superConstructor__=p;function s(t){"use strict";p.call(this);this.$SidebarFitWindowHeight0=t;this.onViewportUpdate();l.subscribe('change',this.onViewportUpdate.bind(this));}s.prototype.onViewportUpdate=function(){"use strict";if(l.isTiny()){this.onScroll();var t=this.onScroll.bind(this);this.$SidebarFitWindowHeight1=new k();this.$SidebarFitWindowHeight1.addSubscriptions(i.listen(window,'scroll',t),g.subscribe('dom-scroll',t));}else{if(this.$SidebarFitWindowHeight2!==0){j.set(this.$SidebarFitWindowHeight0,'margin-top','0');this.$SidebarFitWindowHeight2=0;}this.$SidebarFitWindowHeight1&&this.$SidebarFitWindowHeight1.release();}};s.prototype.onScroll=function(){"use strict";o(this.updateScrollPosition.bind(this),this.resizeSidebar.bind(this),'SidebarFitWindowHeight/scroll');};s.prototype.updateScrollPosition=function(){"use strict";this.$SidebarFitWindowHeight3=m.getScrollPosition().y;this.$SidebarFitWindowHeight4||(this.$SidebarFitWindowHeight4=this.$SidebarFitWindowHeight0.offsetHeight);};s.prototype.resizeSidebar=function(){"use strict";var t=-Math.max(Math.min(this.$SidebarFitWindowHeight3,this.$SidebarFitWindowHeight4),0);j.set(this.$SidebarFitWindowHeight0,'margin-top',t+'px');if(t!=this.$SidebarFitWindowHeight2){this.$SidebarFitWindowHeight2=t;this.inform('resized',t);}};s.prototype.getOffset=function(){"use strict";return this.$SidebarFitWindowHeight2;};e.exports=s;},null);
__d("ChatSidebar",["Arbiter","ArbiterMixin","AsyncRequest","BanzaiODS","Bootloader","ChatConfig","ChatImpressionLogger","ChatSidebarActions","ChatSidebarComposeLink.react","ChatSidebarStore","ChatSidebarVisibility","CSS","DOM","DOMDimensions","Event","JSLogger","LitestandClassicPlaceHolders","MercuryConfig","Parent","PresencePrivacy","React","ReactComponentRenderer","Run","ScrollableArea","SidebarFitWindowHeight","Style","ViewportBounds","createArrayFromMixed","csx","cx","debounce","emptyFunction","ge"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma){b.__markCompiled&&b.__markCompiled();var na='chat_sidebar_visibility',oa,pa,qa=false,ra=false,sa,ta,ua,va,wa,xa,ya,za,ab=null,bb,cb=v.create('chat_sidebar');j.setEntitySample(na,.0001);function db(){r.removeClass(document.documentElement,'sidebarMode');if(!p.isInitialized()||(!nb.isVisible()&&!ra)){g.inform('reflow');ga.inform('change');return;}qa=false;ra=false;ab=null;xa.hide();za.getCore().reset();r.hide(va);r.hide(ta);r.hide(ua);r.removeClass(document.documentElement,'miniSidebar');r.removeClass(va,"_51xq");sa&&sa.setProps({shown:false},function(){return jb(false);});cb.log('minisidebar_hide');g.inform('sidebar/hide',nb);g.inform('reflow');ga.inform('change');}function eb(){var ob=q.shouldShowSidebar(),pb=q.shouldShowMiniSidebar();if(p.isEnabled()&&(ob||pb)){if(ob){hb();ib();}else kb();}else db();if(!p.isInitialized()){mb();n.init();}ab=null;}function fb(){if(za&&nb.isVisible())za.getCore().getElement().focus();}function gb(ob){var pb=q.getViewport().height;ob.forEach(function(qb){if(qb&&qb!==oa)pb-=t.getElementDimensions(qb).height;});if(bb)pb-=bb.getOffset();if(ya)pb-=t.getElementDimensions(ya).height;return Math.max(0,pb);}function hb(){if(nb.isVisible())return;r.hide(ta);r.show(ua);r.removeClass(document.documentElement,'miniSidebar');r.removeClass(va,"_51xq");sa&&sa.setProps({shown:false},function(){return jb(false);});qa=true;ra=false;ab=null;r.show(va);r.addClass(document.documentElement,'sidebarMode');xa.show();cb.log('sidebar_show');g.inform('sidebar/show',nb);w.destroy('sidebar');ga.inform('change');}function ib(){var ob=gb(ha(ua.childNodes)),pb=xa.getItemHeight(),qb=8,rb=Math.floor((ob-qb)/pb);fa.set(oa,'height',ob+'px');xa.setNumTopFriends(rb);if(x.ScrollableSidebarTypeaheadGK){za.getView().setMaxHeight(ob);}else{var sb=Math.floor((ob-qb)/pb);sb=(sb-2)>0?sb-2:0;za.getData().setMaxResults(sb);}g.inform('sidebar/resized',nb);g.inform('reflow');}function jb(ob){if(va===null)return;r.conditionClass(va,"_2e4g",ob);}function kb(){r.hide(ua);r.show(ta);r.show(va);r.addClass(document.documentElement,'sidebarMode');r.addClass(document.documentElement,'miniSidebar');r.addClass(va,"_51xq");var ob=gb([]);if(!sa){k.loadModules(["ChatMiniSidebar.react","ChatSearchSource"],function(pb,qb){if(!pa)pa=new qb({queryRequests:[{uri:'/ajax/mercury/composer_query.php'}]});sa=new ba(pb,ta);sa.setProps({dataSource:pa,height:ob,maxEntries:50,onClickSearch:jb,onToggleSidebar:nb.toggle,shown:true});});}else sa.setProps({height:ob,shown:true});qa=false;ra=true;w.destroy('sidebar');cb.log('minisidebar_show');g.inform('minisidebar/show',nb);g.inform('reflow');ga.inform('change');}function lb(){new i('/ajax/chat/settings.php').setHandler(la).setErrorHandler(la).setData({sidebar_mode:p.isEnabled()}).setAllowCrossPageTransition(true).send();}function mb(){var ob=true;if(!p.isEnabled()){cb.log('state_not_enabled');ob=false;}if(!q.isViewportCapable())if(!q.isViewportCapableForMiniSidebar()){cb.log('state_not_shown_viewport_mini');ob=false;}if(ob)j.bumpEntityKey(na,'state_viewport_can_show');if(p.isHidden()){cb.log('state_not_shown_hidden');ob=false;}if(q.hasLowFriendCount()){cb.log('state_not_shown_num_friends');ob=false;}var pb=ob?'state_shown':'state_not_shown';cb.log(pb);j.bumpEntityKey(na,pb);}var nb={init:function(ob,pb,qb,rb){nb.init=la;n.loaded();va=ob;xa=pb;za=qb;wa=rb;oa=s.find(ob,'div.fbChatSidebarBody');ta=s.find(ob,"._51x-");ua=s.find(ob,"._51x_");ya=s.find(ob,"._5qqe");var sb=s.find(ob,"._x1u");if(sb)aa.render(aa.createElement(o,{className:"_3a-4 _5q85"}),sb);if(l.get('sidebar_react_dropdown',false)){var tb=s.find(ob,"._1ltf");if(tb)ca.onAfterLoad(function(){k.loadModules(["ChatSidebarDropdown.react"],function(ub){aa.render(aa.createElement(ub,{isNormalSidebar:true,onToggleSidebar:function(){return n.toggle();}}),tb);});});}u.listen(window,'resize',eb);ca.onAfterLoad(function(){k.loadModules(["ChatSidebarSheet"],function(ub){var vb=new ub(ob);vb.subscribe('updated',eb);});});xa.setScrollContainer(y.byClass(xa.getRoot(),'uiScrollableAreaWrap'));xa.subscribe(['render','show','hide'],ka(function(ub){var vb=da.getInstance(xa.getRoot());vb&&vb.adjustGripper();}));g.subscribe('chat/option-changed',function(ub,vb){if(vb.name==='hide_groups')eb();});g.subscribe(['AppsDivebar/show-apps','AppsDivebar/hide-apps'],eb);qb.getCore().subscribe('sidebar/typeahead/active',nb.updateOnActiveTypeahead);qb.subscribe('reset',function(){if(!qb.getCore().getValue()&&!xa.isVisible())nb.updateOnActiveTypeahead(null,false);});g.subscribeOnce('buddylist-nub/initialized',function(ub,vb){u.listen(vb.getButton(),'click',function(event){var wb=p.isHidden();n.show();n.enable();var xb=q.shouldShowSidebar()||q.shouldShowMiniSidebar();if(wb&&!xb)n.hide();return !xb;});});z.subscribe('privacy-user-presence-changed',eb);eb();m.init(xa);ga.addPersistentRight(nb.getVisibleWidth);nb.inform('sidebar/initialized',nb,g.BEHAVIOR_PERSISTENT);g.inform('sidebar/initialized',nb,g.BEHAVIOR_PERSISTENT);bb=new ea(ya);bb.subscribe('resized',eb);p.addListener(function(){var ub=p.getState(),vb=p.getPrevState();if(ub.enabled!==vb.enabled){if(ub.enabled){eb();setTimeout(fb,0);}else db();lb();}});},updateOnActiveTypeahead:function(ob,pb){if(!qa)return;if(pb){xa.hide();}else{xa.show();eb();}},ensureLoaded:function(){if(!p.isEnabled())return;if(p.isLoaded())return;if(ma('pagelet_sidebar'))return;d(['UIPagelet'],function(ob){var pb=s.create('div',{id:'pagelet_sidebar'});s.appendContent(document.body,pb);ob.loadFromEndpoint('SidebarPagelet','pagelet_sidebar');});n.loaded();},hide:function(){if(p.isHidden())return;n.hide();db();},unhide:function(){if(!p.isHidden())return;n.show();eb();},getVisibleWidth:function(){if((!qa&&!ra)||!va)return 0;if(ab===null){ab=va.offsetWidth;if(ra)ab=206;}return ab;},isVisible:function(){return qa;},resize:eb,toggle:function(){n.toggle();}};Object.assign(nb,h);e.exports=nb;},null);
__d("ChatSidebarDropdown",["AppsDivebarDisplayController","Arbiter","AsyncRequest","ChatOptions","ChatSidebar","ChatSidebarActions","ChatTabActions","ChatVisibility","CSS","JSLogger","PresenceState","cx","ge"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){b.__markCompiled&&b.__markCompiled();function t(u,v,w,x,y){"use strict";this._menu=v;this._popover=u.getPopover();this._selectedValues={};this._menuIsRendered=false;this._editingFavoriteList=false;this._hasAppsOption=y;this._logger=p.create('blackbird');this._menu.subscribe('itemclick',this._onClick.bind(this));this._popover.subscribe('init',this._onLayerInit.bind(this));this._popover.subscribe('show',this._updateTickerVisibility.bind(this));h.subscribe('chat/option-changed',this._onOptionChanged.bind(this));}t.prototype._onLayerInit=function(){"use strict";this._menuIsRendered=true;o.addClass(this._popover.getLayer().getContentRoot(),"_5vm9");this._displayBrowserNotificationsIfNeeded();this._updateVisibility();h.subscribe('chat-visibility/go-online',this._updateVisibility.bind(this));h.subscribe('chat-visibility/go-offline',this._updateVisibility.bind(this));this._updateSelectedItems();if(this._editingFavoriteList)this._updateEditFavoriteListLabel(this._editingFavoriteList);if(this._hasAppsOption)this._registerAppHandlers();};t.prototype._updateSelectedItems=function(){"use strict";this._menu.forEachItem(function(u){var v=u.getValue&&u.getValue();if(v in this._selectedValues){var w=this._selectedValues[v];if(w){u.select();}else u.deselect();}}.bind(this));};t.prototype._registerAppHandlers=function(){"use strict";this._updateAppsVisibility();h.subscribe('AppsDivebar/hide-apps',this._updateAppsVisibility.bind(this));h.subscribe('AppsDivebar/show-apps',this._updateAppsVisibility.bind(this));};t.prototype._updateTickerVisibility=function(){"use strict";var u=s('pagelet_ticker');o.conditionClass(this._popover.getLayer().getContentRoot(),"_2rox",!u||u.offsetHeight===0);};t.prototype._updateAppsVisibility=function(){"use strict";o.conditionClass(this._popover.getLayer().getContentRoot(),"_2vh",!g.isVisible());};t.prototype._updateVisibility=function(){"use strict";o.conditionClass(this._popover.getLayer().getContentRoot(),"_5vma",!n.isOnline());};t.prototype._displayBrowserNotificationsIfNeeded=function(){"use strict";if(window.webkitNotifications){var u;this._menu.forEachItem(function(v){if(v.getValue&&v.getValue()==='browser_notif')u=v;});if(u){o.show(u.getRoot());if(window.webkitNotifications.checkPermission()!==0)u.deselect();}}};t.prototype._onChangeSettingResponse=function(u,v,w){"use strict";q.doSync();};t.prototype._onChangeSettingError=function(u,v,w){"use strict";j.setSetting(u,!v,'sidebar_menu_error');};t.prototype._onChangeFinally=function(){"use strict";this._pendingChange=false;};t.prototype._onOptionChanged=function(u,v){"use strict";var w=v.name,x=v.value;if(this._menuIsRendered){this._menu.forEachItem(function(y){if(y.getValue&&(y.getValue()===w))if(y.isSelected()&&!x){y.deselect();}else if(!y.isSelected()&&x)y.select();});}else this._selectedValues[w]=x;};t.prototype._onClick=function(u,v){"use strict";if(this._pendingChange)return false;var w=false,x=v.item.getValue(),y=true;switch(x){case 'sidebar':this.toggleSidebar();break;case 'online':if(!n.isOnline()){n.goOnline();}else this._logVisibilityChange(x,true);w=true;break;case 'offline':if(n.isOnline()){n.goOffline();}else this._logVisibilityChange(x,true);w=true;break;case 'advanced_settings':case 'turn_off_dialog':h.inform('chat/advanced-settings-dialog-opened');w=true;this._logVisibilityChange(x,false);break;case 'browser_notif':if(!v.item.isSelected()&&window.webkitNotifications&&window.webkitNotifications.checkPermission()!==0){window.webkitNotifications.requestPermission(function(){this.changeSetting(x,!v.item.isSelected());}.bind(this));}else this.changeSetting(x,!v.item.isSelected());w=true;break;case 'sound':this.changeSetting(x,!v.item.isSelected());w=true;break;case 'close_all_tabs':m.closeAllTabs();this._logVisibilityChange(x,false);w=true;break;case 'show_apps':if(!g.isVisible()){g.showApps();k.resize();}w=true;break;case 'hide_apps':if(g.isVisible()){g.hideApps();k.resize();}w=true;break;case 'show_ticker':h.inform('ChatSidebarDropdown/openTicker');w=true;break;case 'hide_ticker':h.inform('ChatSidebarDropdown/closeTicker');w=true;break;case 'hide_groups':var z=v.item.isSelected();this.changeSetting('hide_groups',!z);w=true;break;}if(w){this.hideMenu();return y;}};t.prototype._logVisibilityChange=function(u,v){"use strict";this._logger.error(v?'sidebar_dropdown_visibility_error':'sidebar_dropdown_set_visibility',{action:u});};t.prototype.changeSetting=function(u,v){"use strict";if(this._pendingChange)return false;this._pendingChange=true;var w={};w[u]=v;j.setSetting(u,v,'sidebar_menu');new i('/ajax/chat/settings.php').setHandler(this._onChangeSettingResponse.bind(this,u,v)).setErrorHandler(this._onChangeSettingError.bind(this,u,v)).setFinallyHandler(this._onChangeFinally.bind(this)).setData(w).setAllowCrossPageTransition(true).send();};t.prototype.hideMenu=function(){"use strict";if(this._menuIsRendered)this._popover.hideLayer();};t.prototype.toggleSidebar=function(){"use strict";l.toggle();this.hideMenu();return false;};e.exports=t;},null);
__d("MercuryTypeaheadDataSource",["Banzai","BanzaiLogger","CurrentUser","DataSource","MercuryParticipantTypes","MercuryTypeaheadConstants","OrderedFriendsList","ShortProfiles","WorkModeConfig","debounce"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){b.__markCompiled&&b.__markCompiled();var q=500,r=[],s={},t={},u={},v=false,w=false;for(var x in j)if(j.hasOwnProperty(x))z[x]=j[x];var y=j===null?null:j.prototype;z.prototype=Object.create(y);z.prototype.constructor=z;z.__superConstructor__=j;function z(aa){"use strict";aa=aa||{};aa.kanaNormalization=true;j.call(this,aa);this.logQuery=p(function(ba){this.$MercuryTypeaheadDataSource0(ba);},q,this,true);this.logResponse=p(function(ba){this.$MercuryTypeaheadDataSource0(ba);},q,this,true);}z.prototype.dirty=function(){"use strict";this.$MercuryTypeaheadDataSource1=r;this.localCache=t;this.queryCache=s;this.queryIDs=u;return this;};z.prototype.bootstrap=function(){"use strict";if(v||w)return false;this.$MercuryTypeaheadDataSource0({event:'bootstrap_start'});w=true;n.fetchAll().then(function(){this.updateBootstrapData();this.$MercuryTypeaheadDataSource0({event:'bootstrap_end'});w=false;v=true;}.bind(this),function(){this.$MercuryTypeaheadDataSource0({event:'bootstrap_failure'});}.bind(this));return true;};z.prototype.updateBootstrapData=function(){"use strict";var aa=this.getCachedShortProfileIDs(),ba=o.is_work_user?k.FB4C:k.FRIEND,ca=aa.map(function(da){var ea=n.getNow(da),fa=da==i.getID()?ba:ea.type,ga=[ea.additionalName,ea.alternateName].concat(ea.searchTokens||[]).join(' ');return {uid:da,index:m.getActiveRank(da),text:ea.name,tokens:ga,localized_text:ea.name,additional_text:ea.additionalName,photo:ea.thumbSrc,render_type:fa,type:l.USER_TYPE};});if(ca.length)this.addEntries(ca);};z.prototype.query=function(aa,ba,ca,da){"use strict";var ea=ba||aa.length===1;return y.query.call(this,aa,ea,ca,da);};z.prototype.getQueryData=function(aa,ba){"use strict";return Object.assign({},y.getQueryData.call(this,aa,ba),{needs_friends:!this.isBootstrapped()});};z.prototype.setEntry=function(aa,ba){"use strict";this.$MercuryTypeaheadDataSource1[aa]=ba;};z.prototype.getEntry=function(aa){"use strict";return this.$MercuryTypeaheadDataSource1[aa]||null;};z.prototype.getCachedShortProfileIDs=function(){"use strict";var aa=n.getCachedProfileIDs(),ba=aa.filter(function(ca){var da=n.getNow(ca);return (ca==i.getID()||da.type===k.FRIEND||da.type===k.FB4C);});return ba;};z.prototype.isBootstrapped=function(){"use strict";return v;};z.prototype.isBootstrapping=function(){"use strict";return w;};z.prototype.processEntries=function(aa,ba){"use strict";aa=aa.map(function(ca){if(ca.index==null&&(ca.render_type===k.FRIEND||ca.render_type===k.FB4C))ca.index=m.getActiveRank(ca.uid);return ca;});return y.processEntries.call(this,aa);};z.prototype.mergeUids=function(aa,ba,ca,da){"use strict";var ea=ba.sort(function(fa,ga){return this.getEntry(fa).index-this.getEntry(ga).index;}.bind(this));return y.mergeUids.call(this,aa,ea,ca,da);};z.prototype.$MercuryTypeaheadDataSource0=function(aa){"use strict";if(!g.isEnabled('mercury_typeahead_logging'))return;h.log('MercuryQueryResultsLoggerConfig',aa);};e.exports=z;},null);
__d("ChatSidebarTypeaheadDataSource",["MercuryConfig","MercuryTypeaheadDataSource","ShortProfiles"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();for(var j in h)if(h.hasOwnProperty(j))l[j]=h[j];var k=h===null?null:h.prototype;l.prototype=Object.create(k);l.prototype.constructor=l;l.__superConstructor__=h;function l(m){"use strict";m=m||{};m.kanaNormalization=true;if(g.ScrollableSidebarTypeaheadGK)m.maxResults=30;h.call(this,m);}l.prototype.init=function(){"use strict";k.init.call(this);this.updateBootstrapData();};l.prototype.bootstrap=function(){"use strict";k.bootstrap.call(this);};l.prototype.updateBootstrapData=function(){"use strict";if(this.isBootstrapped())return;k.updateBootstrapData.call(this);};l.prototype.fetchAll=function(){"use strict";i.fetchAll();};l.prototype.refreshData=function(){"use strict";this.fetchAll();d(['AvailableList'],function(m){m.update();}.bind(this));};l.prototype.query=function(m,n,o,p){"use strict";this.logQuery({event:'query_dive_bar',query:m});return k.query.call(this,m,n,o,p);};l.prototype.respond=function(m,n,o){"use strict";var p=k.respond.call(this,m,n,o);this.logResponse({event:'query_response_dive_bar',response_query:m,response_uids:n});return p;};e.exports=l;},null);
__d("ChatTypeaheadBehavior",["BanzaiLogger","ChatOpenTab","ChatTypeaheadEvent","CSS","MercuryTypeaheadConstants","Parent","Rect","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();function o(q,r){var s=l.byClass(q,"_4oes");if(s)j.conditionClass(s,"_5q83",r);}function p(q){"use strict";this._typeahead=q;this._loggedQuery=false;}p.prototype.enable=function(){"use strict";var q=this._typeahead;this._subscriptions=[q.subscribe('focus',function(){this._loggedQuery=false;q.getData().refreshData();o(q.getElement(),true);}.bind(this)),q.subscribe('blur',function(r){if(this._loggedQuery)g.log('ChatTypeaheadLoggerConfig',{event:i.ABANDONED_QUERY,max_results:q.getData().getMaxResults(),num_friend_results:q.getView().results.filter(function(s){return s.render_type===k.FRIEND_TYPE;}).length,query:q.getCore().value});q.getCore().reset();o(q.getElement(),false);this._loggedQuery=false;}.bind(this)),q.subscribe('respond',function(r,s){if(!this._loggedQuery&&q.getCore().getValue().length>0){g.log('ChatTypeaheadLoggerConfig',{event:i.NEW_QUERY});this._loggedQuery=true;}if(s.value&&s.value===q.getCore().getValue()){if(!s.results.length){var t=s.value.toLowerCase(),u=q.getData().getQueryCache();if(!s.isAsync&&!u.hasOwnProperty(t))return;q.getView().showNoResults();}j.addClass(q.getElement(),'hasValue');}}.bind(this)),q.subscribe('reset',function(){j.removeClass(q.getElement(),'hasValue');}),q.subscribe('select',function(r,s){var t=s.selected.uid;if(s.selected.mercury_thread&&!s.selected.mercury_thread.is_canonical)t=s.selected.mercury_thread.thread_fbid;q.getView().hide();g.log('ChatTypeaheadLoggerConfig',{event:i.RESULT_SELECTED,max_results:q.getData().getMaxResults(),result_type:s.selected.render_type});this._loggedQuery=false;h.openTabByType(t,s.selected.type,'typeahead');}.bind(this)),q.subscribe('highlight',function(r,s){if(s.index>=0){var t=q.getView().getItems()[s.index];if(t){var u=new m(t),v=t.offsetParent,w=u.boundWithin(new m(v)).getPositionVector();u.getPositionVector().sub(w).scrollElementBy(v);}}})];};p.prototype.disable=function(){"use strict";this._subscriptions.forEach(function(q){this._typeahead.unsubscribe(q);},this);this._subscriptions=null;};Object.assign(p.prototype,{_subscriptions:null});e.exports=p;},null);
__d("ChatTypeaheadCore",["Event","Keys","TypeaheadCore","emptyFunction","shield"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();for(var l in i)if(i.hasOwnProperty(l))n[l]=i[l];var m=i===null?null:i.prototype;n.prototype=Object.create(m);n.prototype.constructor=n;n.__superConstructor__=i;function n(){"use strict";if(i!==null)i.apply(this,arguments);}n.prototype.init=function(o,p,q){"use strict";m.init.call(this,o,p,q);this.informBeginActive=false;this.informEndActive=false;this.data.subscribe('respond',function(){if(this.informBeginActive){this.informBeginActive=false;this.inform('sidebar/typeahead/active',true);}else if(this.informEndActive){this.informEndActive=false;this.inform('sidebar/typeahead/active',false);}}.bind(this));};n.prototype.keydown=function(event){"use strict";this.data.fetchAll();var o=g.getKeyCode(event);if(o===h.ESC){this.view.clearContent();setTimeout(k(this.reset,this),0);if(!this.getValue()){this.element.blur();this.inform('escape');}return event.kill();}return m.keydown.call(this,event);};n.prototype.checkValue=function(){"use strict";var o=this.getValue(),p=this.value;if(o==p)return;if(p&&!o){this.typeaheadActive=false;this.informEndActive=true;}else if(!p&&o){this.typeaheadActive=true;this.informBeginActive=true;this.inform('sidebar/typeahead/preActive');}m.checkValue.call(this);};Object.assign(n.prototype,{handleTab:j});e.exports=n;},null);
__d("ChatSidebarHeader.react",["React","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=g.createClass({displayName:"ReactChatSidebarHeader",render:function(){return (g.createElement("div",g.__spread({},this.props,{className:i(this.props.className,"_55ob")}),g.createElement("div",{className:"_55oc"},this.props.children)));}});e.exports=j;},null);
__d("ChatTypeaheadRenderer",["AvailableListConstants","ChatConfig","ChatSidebarConstants","ChatSidebarHeader.react","ChatSidebarSections","ChatSidebarThread.react","ChatSidebarUser.react","ChatTypeaheadConstants","DOM","LastMobileActiveTimes","MercuryIDs","PresenceStatus","React","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){b.__markCompiled&&b.__markCompiled();var u={};function v(aa,ba){if(!(aa in u))u[aa]=o.create('li');s.render(ba,u[aa]);return u[aa];}function w(aa){return v(aa.text,s.createElement(j,{className:((h.get('divebar_new_design',false)?"_4ebb":''))},aa.text));}function x(aa){var ba=aa.mercury_thread.participants.map(function(ca){return q.getUserIDFromParticipantID(ca);});return v(aa.uid,s.createElement(l,{image:aa.mercury_thread.image_src,imageSize:i.getImageSize(),name:aa.mercury_thread.name,participants:aa.participants_to_render,numOtherParticipants:ba.length-1,referrer:k.TYPEAHEAD,status:r.getGroup(ba),threadFBID:aa.uid}));}function y(aa){var ba=r.get(aa.uid),ca=(ba===g.MOBILE)?p.getShortDisplay(aa.uid):null,da=(aa.render_type==n.NON_FRIEND_TYPE||aa.render_type==n.PAGE_TYPE||aa.render_type==n.FB4C_TYPE)?aa.subtext:null,ea=null;if(ba===g.ACTIVE)ea=r.getDetailedActivePresence(aa.uid);return v(aa.uid,s.createElement(m,{image:aa.photo,imageSize:i.getImageSize(),name:aa.text,sectionName:k.TYPEAHEAD,status:ba,statusTime:ca,detailedStatus:ea,userID:aa.uid,context:da}));}function z(aa,ba){if(aa.type===n.HEADER_TYPE)return w(aa);if(aa.type==n.THREAD_TYPE)return x(aa);return y(aa);}e.exports=z;},null);
__d("escapeRegex",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(h){return h.replace(/([.?*+\^$\[\]\\(){}|\-])/g,"\\$1");}e.exports=g;},null);
__d("MercuryThreadSearchUtils",["escapeRegex","TokenizeUtil"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i={wordsInString:function(j){return (j||'').split(/\s+/).filter(function(k){return k.trim().length>0;});},anyMatchPredicate:function(j,k){for(var l=0;l<j.length;l++)if(k(j[l]))return true;return false;},allMatchPredicate:function(j,k){for(var l=0;l<j.length;l++)if(!k(j[l]))return false;return true;},queryWordMatchesAnyNameWord:function(j,k){var l=new RegExp('^'+g(j),'i');return this.anyMatchPredicate(k,function(m){var n=h.parse(m).flatValue;return l.test(n);});},queryMatchesName:function(j,k){var l=this.wordsInString(j),m=this.wordsInString(k);return this.allMatchPredicate(l,function(n){return this.queryWordMatchesAnyNameWord(n,m);}.bind(this));}};e.exports=i;},null);
__d("ChatTypeaheadView",["BucketedTypeaheadView","ChatTypeaheadConstants","CurrentUser","DOM","MercuryConfig","React","ScrollableArea","MercuryThreadSearchUtils","Style","WorkModeConfig","XUISpinner.react","arrayContains","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){b.__markCompiled&&b.__markCompiled();for(var u in g)if(g.hasOwnProperty(u))w[u]=g[u];var v=g===null?null:g.prototype;w.prototype=Object.create(v);w.prototype.constructor=w;w.__superConstructor__=g;function w(x,y){"use strict";if(k.ScrollableSidebarTypeaheadGK){var z=m.renderDOM();j.appendContent(x,z.root);var aa=m.fromNative(z.root);g.call(this,z.content,y);this.$ChatTypeaheadView0=z;this.$ChatTypeaheadView1=aa;}else g.call(this,x,y);this.showingLoadingIndicator=false;this.typeObjects={};this.typeObjectsOrder=[];this.typeObjects[h.NON_FRIEND_TYPE]={uid:h.NON_FRIEND_TYPE,type:h.HEADER_TYPE,text:t._("MORE PEOPLE")};this.typeObjectsOrder.push(h.NON_FRIEND_TYPE);this.typeObjects[h.PAGE_TYPE]={disabled:true,uid:h.PAGE_TYPE,type:h.HEADER_TYPE,text:t._("BUSINESSES")};this.typeObjectsOrder.push(h.PAGE_TYPE);this.typeObjects[h.THREAD_TYPE]={uid:h.THREAD_TYPE,type:h.HEADER_TYPE,text:t._("GROUP CONVERSATIONS")};this.typeObjectsOrder.push(h.THREAD_TYPE);this.typeObjects[h.FB4C_TYPE]={uid:h.FB4C_TYPE,type:h.HEADER_TYPE,text:t._("CO-WORKERS")};this.typeObjects[h.FRIEND_TYPE]={disabled:true,uid:h.FRIEND_TYPE,type:h.HEADER_TYPE,text:t._("FRIENDS")};this.typeObjectsOrder.push(h.FB4C_TYPE);this.typeObjectsOrder.push(h.FRIEND_TYPE);}w.prototype.reset=function(){"use strict";if(this.value==='')this.clearContent();this.index=-1;this.items=[];this.results=[];this.value='';this.inform('reset');return this;};w.prototype.clearContent=function(){"use strict";this.hideLoadingIndicator();j.empty(this.content);};w.prototype.buildBuckets=function(x,y){"use strict";var z=y.filter(function(aa){var ba=aa.render_type||aa.type;if(ba==='thread'){var ca='fbid:'+i.getID();if(!r(aa.mercury_thread.participants,ca))return false;var da=aa.participants_to_render.some(function(fa){return n.queryMatchesName(x,fa.name);}),ea=n.queryMatchesName(x,aa.mercury_thread.name);if(!da&&!ea)return false;}return true;}).reverse();return v.buildBuckets.call(this,x,z);};w.prototype.getDefaultIndex=function(x){"use strict";if(x.length===0)return -1;var y=x.length-1;while(!this.isHighlightable(x[y])&&y>=0)y--;return y;};w.prototype.showLoadingIndicator=function(){"use strict";if(!this.showingLoadingIndicator){l.render(l.createElement("div",{className:"spinnerContainer"},l.createElement(q,{className:"_3-8i",background:"light",size:"small",paused:false})),this.content);this.showingLoadingIndicator=true;}};w.prototype.hideLoadingIndicator=function(){"use strict";if(this.showingLoadingIndicator){l.unmountComponentAtNode(this.content);this.showingLoadingIndicator=false;}};w.prototype.showNoResults=function(){"use strict";var x=t._("Friend not found.");if(p.is_work_user)x=t._("Co-worker not found.");this.hideLoadingIndicator();j.setContent(this.content,j.create('div',{className:"noResults _3-9a"},x));};w.prototype.hide=function(){"use strict";this.clearContent();return v.hide.call(this);};w.prototype.next=function(){"use strict";v.next.call(this);if(k.ScrollableSidebarTypeaheadGK)this.$ChatTypeaheadView1.scrollIntoView(this.selected,false);};w.prototype.prev=function(){"use strict";v.prev.call(this);if(k.ScrollableSidebarTypeaheadGK)this.$ChatTypeaheadView1.scrollIntoView(this.selected,false);};w.prototype.setMaxHeight=function(x){"use strict";o.set(this.$ChatTypeaheadView0.wrap,'max-height',x+'px');};w.prototype.render=function(x,y,z){"use strict";if(k.ScrollableSidebarTypeaheadGK)var aa=this.value!==x||this.$ChatTypeaheadView1.isScrolledToBottom();if(!y.length){if(x&&x.length>1)this.showLoadingIndicator();}else this.hideLoadingIndicator();v.render.call(this,x,y,z);if(k.ScrollableSidebarTypeaheadGK&&aa)this.$ChatTypeaheadView1.scrollToBottom(false);};e.exports=w;},null);
__d("legacy:ChatTypeaheadBehavior",["ChatTypeaheadBehavior"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();if(!a.TypeaheadBehaviors)a.TypeaheadBehaviors={};a.TypeaheadBehaviors.chatTypeahead=function(h){h.enableBehavior(g);};},3);
__d("NotificationBeeperModuleLoader",["BootloadedComponent.react","JSResource","React"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j={load:function(k,l){i.render(i.createElement(g,i.__spread({bootloadPlaceholder:i.createElement("span",null),bootloadLoader:h('NotificationBeeper.react')},k)),l);}};e.exports=j;},null);
__d("HovercardLink",["Bootloader","URI"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i={getBaseURI:function(){return new h('/ajax/hovercard/hovercard.php');},constructEndpoint:function(j,k){return i.constructEndpointWithGroupAndLocation(j,k,null);},constructEndpointWithLocation:function(j,k){return i.constructEndpointWithGroupAndLocation(j,null,k);},constructEndpointWithGroupAndLocation:function(j,k,l,m){g.loadModules(["Hovercard"],function(){});var n=new h(i.getBaseURI()).setQueryData({id:j.id}),o={};if((j.weakreference||m)&&k)o.group_id=k;if(l)o.hc_location=l;n.addQueryData({extragetparams:JSON.stringify(o)});return n;}};e.exports=i;},null);
__d("getDOMImageSize",["URI"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();function h(m){m.onload=null;m.onerror=null;m.onreadystatechange=null;m._callback=null;m._thisObj=null;m._srcStr=null;m.parentNode&&m.parentNode.removeChild(m);}function i(){var m=this;if(m._callback)m._callback.call(m._thisObj,m.naturalWidth||m.width,m.naturalHeight||m.height,m._srcStr);h(m);}function j(){var m=this;if(m.readyState==='complete')i.call(m);}function k(){var m=this;if(m._callback)m._callback.call(m._thisObj,0,0,m._srcStr);h(m);}function l(m,n,o){o=o||null;if(!m){n.call(o,0,0,'');return;}var p=document.body;if(!p){setTimeout(l.bind(this,m,n,o),500);return;}var q;if(typeof m==='string'){q=m;}else if(typeof m==='object')if(typeof m.width==='number'&&typeof m.height==='number'){if(typeof m.src==='string'){q=m.src;if(m.naturalWidth&&m.naturalHeight){n.call(o,m.naturalWidth,m.naturalHeight,q);return;}}if(typeof m.uri==='string'){q=m.uri;if(m.width&&m.height){n.call(o,m.width,m.height,q);return;}}}else if(m instanceof g)q=m.toString();if(!q){n(0,0,m);return;}var r=document.createElement('img');r.onreadystatechange=j;r.onload=i;r.onerror=k;r._callback=n;r._thisObj=o;r._srcStr=q;r.src=q;r.style.cssText='position:absolute;left:0;top:0;width:auto;height:auto;clip:rect(0 0 0 0);';p.insertBefore(r,p.firstChild);}e.exports=l;},null);
__d("CachedDOMImageSizePool",["debounce","getDOMImageSize"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();function i(j,k){"use strict";this.$CachedDOMImageSizePool0={};this.$CachedDOMImageSizePool1=k;this.$CachedDOMImageSizePool2=0;this.$CachedDOMImageSizePool3=j;this.$CachedDOMImageSizePool4=g(this.$CachedDOMImageSizePool5,5000,this);this.$CachedDOMImageSizePool6={};this.$CachedDOMImageSizePool7={};}i.prototype.get=function(j,k,l){"use strict";if(!j){k.call(l,0,0,j);return;}var m=this.$CachedDOMImageSizePool0[j];if(m){m.lastAccessTime=Date.now();k.call(l,m.width,m.height,m.src);}else if(this.$CachedDOMImageSizePool6[j]){this.$CachedDOMImageSizePool6[j].push(k);this.$CachedDOMImageSizePool7[j].push(l);}else{this.$CachedDOMImageSizePool6[j]=[k];this.$CachedDOMImageSizePool7[j]=[l];h(j,this.$CachedDOMImageSizePool8,this);}};i.prototype.set=function(j,k,l){"use strict";if(this.$CachedDOMImageSizePool2>this.$CachedDOMImageSizePool3)this.$CachedDOMImageSizePool4();var m=this.$CachedDOMImageSizePool0;if(j&&!m[j]){var n={width:k,height:l,src:j,lastAccessTime:Date.now()};m[j]=n;this.$CachedDOMImageSizePool2++;}};i.prototype.$CachedDOMImageSizePool8=function(j,k,l){"use strict";this.set(l,j,k);var m=this.$CachedDOMImageSizePool6[l],n=this.$CachedDOMImageSizePool7[l];for(var o=0,p=m.length;o<p;o++)m[o].call(n[o],j,k,l);delete this.$CachedDOMImageSizePool6[l];delete this.$CachedDOMImageSizePool7[l];};i.prototype.$CachedDOMImageSizePool5=function(){"use strict";var j=Date.now(),k=this.$CachedDOMImageSizePool0,l=this.$CachedDOMImageSizePool2,m=this.$CachedDOMImageSizePool1;for(var n in k){var o=k[n];if((j-o.lastAccessTime)>m){delete k[n];l--;}}this.$CachedDOMImageSizePool2=l;};e.exports=i;},null);
__d("BackgroundImage.react",["CachedDOMImageSizePool","React","XUISpinner.react","cx","invariant","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m=h,n=m.PropTypes,o='(-?(\\d+\\.)?\\d+(px|\\%))',p=new RegExp('^'+o+'?(\\s'+o+')?$','g'),q=new g(50,10*60*1000),r=h.createClass({displayName:"BackgroundImage",propTypes:{src:n.string,width:n.number.isRequired,height:n.number.isRequired,backgroundSize:n.oneOf(['contain','cover','containinside','coverinside']),loadingIndicatorStyle:n.oneOf(['none','large','small']),backgroundPosition:function(s,t,u){var v=s[t];if(v){k(typeof v==='string');k(v.match(p));}},onImageLoad:n.func,optimizeResizeSpeed:n.bool,onContextMenu:n.func},getInitialState:function(){return {imageWidth:null,imageHeight:null,imageSrc:this.props.src,loading:true};},getDefaultProps:function(){return {optimizeResizeSpeed:false,loadingIndicatorStyle:'none'};},componentDidMount:function(){this._resolveImageSize();},componentDidUpdate:function(s){if(this.props.src!==this.state.imageSrc)this.setState({imageWidth:0,imageHeight:0,imageSrc:this.props.src,loading:true},this._resolveImageSize);},_resolveImageSize:function(){var s=this.state.imageSrc;if(s)q.get(s,this._onImageSizeResolved,this);},render:function(){var s={width:this.props.width+'px',height:this.props.height+'px'},t=l(this.props.className,"_5f0d");return (h.createElement("div",h.__spread({},this.props,{className:l(this.props.className,t),style:Object.assign({},(this.props.style||{}),s),onContextMenu:this.props.onContextMenu}),this._renderImage(),this._renderContent(),this._renderLoadingIndicator()));},_renderLoadingIndicator:function(){if(!this.state.loading||this.props.loadingIndicatorStyle==='none')return null;return (h.createElement("div",{className:"_1qe- _5lar"},h.createElement("div",{className:"_1qe_"},h.createElement("div",{className:"_1qf0"},h.createElement(i,{size:this.props.loadingIndicatorStyle})))));},_renderContent:function(){if(this.props.children)return (h.createElement("div",{className:"_1qe-"},h.createElement("div",{className:"_1qe_"},h.createElement("div",{className:"_1qf0"},this.props.children))));},_renderImage:function(){if(!this.state.imageWidth||!this.state.imageHeight)return;var s=this.props.width,t=this.props.height,u,v;switch(this.props.backgroundSize){case 'cover':u='cover';v=false;break;case 'coverinside':u='cover';v=true;break;case 'contain':u='contain';v=false;break;case 'containinside':u='contain';v=true;}var w=this.state.imageWidth,x=this.state.imageHeight,y=s/t,z=w/x;if(u==='contain')if((w>s||!v)&&z>=y){w=s;x=w/z;}else if(x>t||!v){x=t;w=x*z;}if(u==='cover')if((w>s||!v)&&z>=y){x=t;w=x*z;}else if(x>t||!v){w=s;x=w/z;}var aa=this._getImageStyle(w,x);return (h.createElement("img",{alt:"",className:(("_5i4g")+(this.props.optimizeResizeSpeed?' '+"_5sjv":'')),style:aa,src:this.state.imageSrc}));},_getImageStyle:function(s,t){var u;if(this.props.backgroundPosition){u=this.props.backgroundPosition.split(' ');}else u=['50%','50%'];return {width:Math.round(s)+'px',height:Math.round(t)+'px',left:this._getBackgroundPositionPxValue('left',u[0],s,t),top:this._getBackgroundPositionPxValue('top',u[1]||u[0],s,t)};},_getBackgroundPositionPxValue:function(s,t,u,v){var w=parseFloat(t),x=t.substr(w.toString().length);if(x==='px')return t;if(s==='left'){return Math.round((this.props.width-u)*(w/100))+'px';}else return Math.round((this.props.height-v)*(w/100))+'px';},_onImageSizeResolved:function(s,t,u){if(!this.isMounted()||this.state.imageSrc!==u)return;var v=this.props.onImageLoad?this.props.onImageLoad.bind(null,s,t):null;this.setState({imageWidth:s,imageHeight:t,loading:false},v);}});e.exports=r;},null);
__d("MercuryMessageError.react",["CurrentUser","ImmutableObject","MercuryErrorInfo","MercuryMessageActions","React","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();'use strict';var n=k,o=n.PropTypes,p=k.createClass({displayName:"MercuryMessageError",propTypes:{authorFBID:o.string,message:o.instanceOf(h).isRequired},getDefaultProps:function(){return {authorFBID:g.getID()};},render:function(){var q=this.props.message,r=q.error_data;return (k.createElement("div",k.__spread({},this.props,{className:m(this.props.className,this._getClassNameFromStatus(q)),tabIndex:i.isTransient(r)?0:null,onClick:i.isTransient(r)?this.messageResend:null}),k.createElement("div",{className:"_2fs1"}),k.createElement("span",{dangerouslySetInnerHTML:{__html:this._getTextFromStatus(q)}})));},messageResend:function(){j.getForFBID(this.props.authorFBID).resend(this.props.message);},_getClassNameFromStatus:function(q){if(i.hasErrorStatus(q)){return (("_2fs2")+(' '+"_2fs3")+(i.isTransient(q.error_data)?' '+"_2fs4":'')+(i.isPermanent(q.error_data)?' '+"_2fs5":''));}else return "_2fs6 _2fs2";},_getTextFromStatus:function(q){var r='',s=q.error_data;if(i.hasErrorStatus(q))r=i.getMessage(s);if(typeof r==='object'&&r.__html)r=r.__html;return r;}});e.exports=p;},null);
__d("SyncRequestTitle.react",["React","fbt","cx"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=g,k=j.PropTypes,l=g.createClass({displayName:"SyncRequestTitle",propTypes:{appName:k.string.isRequired,isSender:k.bool.isRequired,receiverName:k.string.isRequired,senderName:k.string.isRequired},render:function(){if(this.props.isSender){return (g.createElement("div",null,h._("Waiting for {receiver} to accept your invite to play {app_name}.",[h.param("receiver",g.createElement("span",{className:"_dg4"},this.props.receiverName)),h.param("app_name",g.createElement("span",{className:"_dg5"},this.props.appName))])));}else return (g.createElement("div",null,h._("{sender} wants to play {app_name} with you, right now.",[h.param("sender",g.createElement("span",{className:"_dg4"},this.props.senderName)),h.param("app_name",g.createElement("span",{className:"_dg5"},this.props.appName))])));}});e.exports=l;},null);
__d("SyncRequestAcceptedMessage.react",["React","fbt","cx"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';var j=g,k=j.PropTypes,l=g.createClass({displayName:"SyncRequestAcceptedMessage",propTypes:{appName:k.string.isRequired,isSender:k.bool.isRequired,receiverName:k.string.isRequired,senderName:k.string.isRequired},render:function(){if(this.props.isSender){return (g.createElement("div",null,h._("{receiver} accepted your invite to play {app name}.",[h.param("receiver",g.createElement("span",{className:"_dg4"},this.props.receiverName)),h.param("app name",g.createElement("span",{className:"_dg5"},this.props.appName))])));}else return (g.createElement("div",null,h._("You accepted an invite from {sender} to play {app name}.",[h.param("sender",g.createElement("span",{className:"_dg4"},this.props.senderName)),h.param("app name",g.createElement("span",{className:"_dg5"},this.props.appName))])));}});e.exports=l;},null);
__d("SyncRequestRejectedMessage.react",["AsyncRequest","Link.react","React","URI","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m=i,n=m.PropTypes,o=i.createClass({displayName:"SyncRequestRejectedMessage",propTypes:{requestId:n.string.isRequired,app:n.object.isRequired,isSender:n.bool.isRequired,receiver:n.object.isRequired,sender:n.object.isRequired},render:function(){if(this.props.isSender){return (i.createElement("div",null,l._("{receiver} declined your invite to play {app_name}.",[l.param("receiver",i.createElement("span",{className:"_dg4"},this.props.receiver.name)),l.param("app_name",i.createElement("span",{className:"_dg5"},this.props.app.name))])));}else return (i.createElement("div",null,l._("You declined an invite from {sender} to play {app_name}.",[l.param("sender",i.createElement("span",{className:"_dg4"},this.props.sender.name)),l.param("app_name",i.createElement("span",{className:"_dg5"},this.props.app.name))]),i.createElement("div",{className:"_13n7"},i.createElement("div",null,i.createElement(h,{onClick:this._submitBlockApp},l._("Block {app}",[l.param("app",this.props.app.name)]))),i.createElement("div",null,i.createElement(h,{onClick:this._submitBlockUser},l._("Block requests from {sender}",[l.param("sender",this.props.sender.name)]))))));},_submitBlockApp:function(){var p=new j('/games/block_app/'),q=new g().setURI(p);q.setData({app_id:this.props.app.id,source:'sync_request'});q.send();},_submitBlockUser:function(){var p=new j('/games/block_user/'),q=new g().setURI(p);q.setData({app_id:this.props.app.id,blockee_uid:this.props.sender.id});q.send();}});e.exports=o;},null);
__d("SyncRequestExpiredMessage.react",["React","fbt","cx"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=g,k=j.PropTypes,l=g.createClass({displayName:"SyncRequestExpiredMessage",propTypes:{appName:k.string.isRequired,isSender:k.bool.isRequired,receiverName:k.string.isRequired,senderName:k.string.isRequired},render:function(){if(this.props.isSender){return (g.createElement("div",null,h._("{receiver} missed your invite to play {app name}.",[h.param("receiver",g.createElement("span",{className:"_dg4"},this.props.receiverName)),h.param("app name",g.createElement("span",{className:"_dg5"},this.props.appName))])));}else return (g.createElement("div",null,h._("You missed an invite from {sender} to play {app name}.",[h.param("sender",g.createElement("span",{className:"_dg4"},this.props.senderName)),h.param("app name",g.createElement("span",{className:"_dg5"},this.props.appName))])));}});e.exports=l;},null);
__d("SyncRequestCanceledMessage.react",["React","cx","fbt"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';var j=g,k=j.PropTypes,l=g.createClass({displayName:"SyncRequestCanceledMessage",propTypes:{appName:k.string.isRequired,isSender:k.bool.isRequired,receiverName:k.string.isRequired,senderName:k.string.isRequired},render:function(){if(this.props.isSender){return (g.createElement("div",null,i._("You canceled an invite to {receiver} to play {app name}.",[i.param("receiver",g.createElement("span",{className:"_dg4"},this.props.receiverName)),i.param("app name",g.createElement("span",{className:"_dg5"},this.props.appName))])));}else return (g.createElement("div",null,i._("{sender} canceled an invitation to play {app name}.",[i.param("sender",g.createElement("span",{className:"_dg4"},this.props.senderName)),i.param("app name",g.createElement("span",{className:"_dg5"},this.props.appName))])));}});e.exports=l;},null);
__d("SyncRequestTimer.react",["React","fbt"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i=g,j=i.PropTypes;function k(m){if(m){m=Math.ceil(m);var n=m%60;if(n<10)n='0'+n;var o=Math.floor(m/60);return o+':'+n;}else return "0:00";}var l=g.createClass({displayName:"SyncRequestTimer",propTypes:{timeRemaining:j.number.isRequired,isSender:j.bool.isRequired,receiverName:j.string.isRequired},render:function(){if(this.props.isSender){return (g.createElement("div",null,h._("({time_remaining} remaining)",[h.param("time_remaining",k(this.props.timeRemaining))])));}else return (g.createElement("div",null,h._("You have {time_remaining} to accept.",[h.param("time_remaining",k(this.props.timeRemaining))])));}});e.exports=l;},null);
__d("XSyncRequestSubmitController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/platform\/games\/sync_requests\/submit\/",{request_id:{type:"Int",required:true},sender:{type:"Int",required:true},action:{type:"Int",required:true}});},null);
__d("SyncRequest.react",["Arbiter","AsyncRequest","ChannelConstants","React","SyncRequestStatusEnum","SyncRequestTitle.react","SyncRequestAcceptedMessage.react","SyncRequestRejectedMessage.react","SyncRequestExpiredMessage.react","SyncRequestCanceledMessage.react","SyncRequestTimer.react","XUIButton.react","XSyncRequestSubmitController","cx","fbt","getObjectValues"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){b.__markCompiled&&b.__markCompiled();var w=j,x=w.PropTypes,y=j.createClass({displayName:"SyncRequest",propTypes:{app:x.object.isRequired,creationTime:x.number.isRequired,requestId:x.string.isRequired,receiver:x.object.isRequired,sender:x.object.isRequired,status:x.oneOf(v(k)).isRequired,timeout:x.number.isRequired,timeRemaining:x.number.isRequired,viewerId:x.number.isRequired,onStatusUpdate:x.func},componentWillMount:function(){if(this.props.status===k.PENDING){var z=g.subscribe(i.getArbiterType('sync_request_updated'),function(ca,da){da=da.obj;if(da.id.toString()!==this.props.requestId)return;this.setState({status:da.status});}.bind(this));this.setState({statusEvent:z});}var aa=null;if(this.props.status===k.PENDING){var ba=function(){this.setState({time_remaining:(this.state.time_remaining-1)});if(this.state.time_remaining<=0){clearInterval(this.state.counter);var ca={counter:null,time_remaining:0};if(this.state.status===k.PENDING)ca.status=k.EXPIRED;this.setState(ca);}};aa=setInterval(ba.bind(this),1000);}this.setState({time_remaining:this.props.timeRemaining,counter:aa});},componentWillUnmount:function(){if(this.state.counter)clearInterval(this.state.counter);g.unsubscribe(this.state.statusEvent);},getInitialState:function(){return {buttonsDisabled:false,time:Date.now(),status:this.props.status,viewerIsSender:this.props.viewerId===this.props.sender.id};},componentDidUpdate:function(z,aa){if(this.props.status!=k.PENDING)this.state.status=this.props.status;if(this.props.onStatusUpdate)this.props.onStatusUpdate(this.state.status,aa.status);},render:function(){var z;switch(this.state.status){case k.PENDING:var aa;if(!this.state.viewerIsSender){aa=[j.createElement(r,{use:"confirm",onClick:this._handleAccept,disabled:this.state.buttonsDisabled,label:u._("Accept")}),j.createElement(r,{use:"default",onClick:this._handleReject,disabled:this.state.buttonsDisabled,label:u._("Decline")})];}else aa=j.createElement(r,{use:"default",onClick:this._handleCancel,disabled:this.state.buttonsDisabled,label:u._("Cancel")});z=(j.createElement("div",null,j.createElement("div",{className:"_372m"},j.createElement(l,{appName:this.props.app.name,isSender:this.state.viewerIsSender,receiverName:this.props.receiver.name,senderName:this.props.sender.name})),j.createElement("div",{className:"_372n"},j.createElement(q,{isSender:this.state.viewerIsSender,timeRemaining:this.state.time_remaining,receiverName:this.props.receiver.name})),j.createElement("div",{className:"_372o"},aa)));break;case k.ACCEPTED:z=j.createElement("div",{className:"_372p mvs"},j.createElement(m,{appName:this.props.app.name,isSender:this.state.viewerIsSender,receiverName:this.props.receiver.name,senderName:this.props.sender.name}));break;case k.REJECTED:z=j.createElement("div",{className:"_372p mvs"},j.createElement(n,{requestId:this.props.requestId,app:this.props.app,isSender:this.state.viewerIsSender,receiver:this.props.receiver,sender:this.props.sender}));break;case k.EXPIRED:z=j.createElement("div",{className:"_372p mvs"},j.createElement(o,{appName:this.props.app.name,isSender:this.state.viewerIsSender,receiverName:this.props.receiver.name,senderName:this.props.sender.name}));break;case k.CANCELED:z=j.createElement("div",{className:"_372p mvs"},j.createElement(p,{appName:this.props.app.name,isSender:this.state.viewerIsSender,receiverName:this.props.receiver.name,senderName:this.props.sender.name}));break;default:throw new Error('The request status `%s` is unknown.',this.state.status);}return (j.createElement("div",{className:"_372q"},z));},_handleAccept:function(){this._handleStatusUpdate(k.ACCEPTED);var z=window.open(this.props.app.uri);if(z)z.focus();},_handleReject:function(){this._handleStatusUpdate(k.REJECTED);},_handleCancel:function(){this._handleStatusUpdate(k.CANCELED);},_handleStatusUpdate:function(z){this.setState({status:z,buttonsDisabled:true});var aa=s.getURIBuilder().setInt('request_id',this.props.requestId).setInt('sender',this.props.sender.id).setInt('action',z).getURI();new h().setURI(aa).setHandler(function(ba){this.setState({status:z});}.bind(this)).setErrorHandler(function(ba){this.setState({buttonsDisabled:false});}.bind(this)).send();}});e.exports=y;},null);
__d("str2rstr",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(h){var i="",j,k;for(var l=0;l<h.length;l++){j=h.charCodeAt(l);k=l+1<h.length?h.charCodeAt(l+1):0;if(55296<=j&&j<=56319&&56320<=k&&k<=57343){j=65536+((j&1023)<<10)+(k&1023);l++;}if(j<=127){i+=String.fromCharCode(j);}else if(j<=2047){i+=String.fromCharCode(192|((j>>>6)&31),128|(j&63));}else if(j<=65535){i+=String.fromCharCode(224|((j>>>12)&15),128|((j>>>6)&63),128|(j&63));}else if(j<=2097151)i+=String.fromCharCode(240|((j>>>18)&7),128|((j>>>12)&63),128|((j>>>6)&63),128|(j&63));}return i;}e.exports=g;},null);
__d("md5",["str2rstr"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();function h(u,v){var w=u[0],x=u[1],y=u[2],z=u[3];w=j(w,x,y,z,v[0],7,-680876936);z=j(z,w,x,y,v[1],12,-389564586);y=j(y,z,w,x,v[2],17,606105819);x=j(x,y,z,w,v[3],22,-1044525330);w=j(w,x,y,z,v[4],7,-176418897);z=j(z,w,x,y,v[5],12,1200080426);y=j(y,z,w,x,v[6],17,-1473231341);x=j(x,y,z,w,v[7],22,-45705983);w=j(w,x,y,z,v[8],7,1770035416);z=j(z,w,x,y,v[9],12,-1958414417);y=j(y,z,w,x,v[10],17,-42063);x=j(x,y,z,w,v[11],22,-1990404162);w=j(w,x,y,z,v[12],7,1804603682);z=j(z,w,x,y,v[13],12,-40341101);y=j(y,z,w,x,v[14],17,-1502002290);x=j(x,y,z,w,v[15],22,1236535329);w=k(w,x,y,z,v[1],5,-165796510);z=k(z,w,x,y,v[6],9,-1069501632);y=k(y,z,w,x,v[11],14,643717713);x=k(x,y,z,w,v[0],20,-373897302);w=k(w,x,y,z,v[5],5,-701558691);z=k(z,w,x,y,v[10],9,38016083);y=k(y,z,w,x,v[15],14,-660478335);x=k(x,y,z,w,v[4],20,-405537848);w=k(w,x,y,z,v[9],5,568446438);z=k(z,w,x,y,v[14],9,-1019803690);y=k(y,z,w,x,v[3],14,-187363961);x=k(x,y,z,w,v[8],20,1163531501);w=k(w,x,y,z,v[13],5,-1444681467);z=k(z,w,x,y,v[2],9,-51403784);y=k(y,z,w,x,v[7],14,1735328473);x=k(x,y,z,w,v[12],20,-1926607734);w=l(w,x,y,z,v[5],4,-378558);z=l(z,w,x,y,v[8],11,-2022574463);y=l(y,z,w,x,v[11],16,1839030562);x=l(x,y,z,w,v[14],23,-35309556);w=l(w,x,y,z,v[1],4,-1530992060);z=l(z,w,x,y,v[4],11,1272893353);y=l(y,z,w,x,v[7],16,-155497632);x=l(x,y,z,w,v[10],23,-1094730640);w=l(w,x,y,z,v[13],4,681279174);z=l(z,w,x,y,v[0],11,-358537222);y=l(y,z,w,x,v[3],16,-722521979);x=l(x,y,z,w,v[6],23,76029189);w=l(w,x,y,z,v[9],4,-640364487);z=l(z,w,x,y,v[12],11,-421815835);y=l(y,z,w,x,v[15],16,530742520);x=l(x,y,z,w,v[2],23,-995338651);w=m(w,x,y,z,v[0],6,-198630844);z=m(z,w,x,y,v[7],10,1126891415);y=m(y,z,w,x,v[14],15,-1416354905);x=m(x,y,z,w,v[5],21,-57434055);w=m(w,x,y,z,v[12],6,1700485571);z=m(z,w,x,y,v[3],10,-1894986606);y=m(y,z,w,x,v[10],15,-1051523);x=m(x,y,z,w,v[1],21,-2054922799);w=m(w,x,y,z,v[8],6,1873313359);z=m(z,w,x,y,v[15],10,-30611744);y=m(y,z,w,x,v[6],15,-1560198380);x=m(x,y,z,w,v[13],21,1309151649);w=m(w,x,y,z,v[4],6,-145523070);z=m(z,w,x,y,v[11],10,-1120210379);y=m(y,z,w,x,v[2],15,718787259);x=m(x,y,z,w,v[9],21,-343485551);u[0]=s(w,u[0]);u[1]=s(x,u[1]);u[2]=s(y,u[2]);u[3]=s(z,u[3]);}function i(u,v,w,x,y,z){v=s(s(v,u),s(x,z));return s((v<<y)|(v>>>(32-y)),w);}function j(u,v,w,x,y,z,aa){return i((v&w)|((~v)&x),u,v,y,z,aa);}function k(u,v,w,x,y,z,aa){return i((v&x)|(w&(~x)),u,v,y,z,aa);}function l(u,v,w,x,y,z,aa){return i(v^w^x,u,v,y,z,aa);}function m(u,v,w,x,y,z,aa){return i(w^(v|(~x)),u,v,y,z,aa);}function n(u){var v=u.length,w=[1732584193,-271733879,-1732584194,271733878],x;for(x=64;x<=u.length;x+=64)h(w,o(u.substring(x-64,x)));u=u.substring(x-64);var y=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(x=0;x<u.length;x++)y[x>>2]|=u.charCodeAt(x)<<((x&3)<<3);y[x>>2]|=128<<((x&3)<<3);if(x>55){h(w,y);for(x=0;x<16;x++)y[x]=0;}y[14]=v*8;h(w,y);return w;}function o(u){var v=[],w=0;while(w<64)v[w>>2]=u.charCodeAt(w++)|(u.charCodeAt(w++)<<8)|(u.charCodeAt(w++)<<16)|(u.charCodeAt(w++)<<24);return v;}var p='0123456789abcdef'.split('');function q(u){var v='',w=0;for(;w<4;w++)v+=p[(u>>((w<<3)+4))&15]+p[(u>>(w<<3))&15];return v;}function r(u){for(var v=0;v<u.length;v++)u[v]=q(u[v]);return u.join('');}var s=function(u,v){return (u+v)&4294967295;};function t(u){if(null===u||(void 0)===u){return null;}else{for(var v=0;v<u.length;v++)if(u[v]>"\u007F"){u=g(u);break;}return r(n(u));}}if(t('hello')!='5d41402abc4b2a76b9719d911017c592')s=function(u,v){var w=(u&65535)+(v&65535),x=(u>>16)+(v>>16)+(w>>16);return (x<<16)|(w&65535);};e.exports=t;},null);
__d("LineClamp.react",["React","cx","getVendorPrefixedName","joinClasses"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';var k=g,l=k.PropTypes,m=i('lineClamp'),n=g.createClass({displayName:"LineClamp",propTypes:{customEllipsis:l.node,disableNative:l.bool,lineHeight:l.number,lines:l.number.isRequired},_renderEllipsis:function(){var o;if(this.props.lineHeight)o={bottom:this.props.lineHeight+'px'};return (g.createElement("div",{style:o,className:"_4ik3",key:"ellipsis"},this.props.customEllipsis?this.props.customEllipsis:'\u2026'));},render:function(){var o=!!m&&!this.props.disableNative,p=j(this.props.className,(("_4ik4")+(o?' '+"_4ik5":''))),q=this.props.children,r={};if(this.props.lineHeight)r={height:this.props.lineHeight*this.props.lines,lineHeight:this.props.lineHeight+'px'};if(o){r[m]=this.props.lines;}else{p=j(p,'clearfix');q=[g.createElement("div",{className:"_4ik6",key:"inner"},q),this._renderEllipsis()];}return (g.createElement("div",{className:p,style:r},q));}});e.exports=n;},null);
__d("Deferred",["Promise"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();function h(){"use strict";this.$Deferred0=false;this.$Deferred1=new g(function(i,j){this.$Deferred2=(i);this.$Deferred3=(j);}.bind(this));}h.prototype.getPromise=function(){"use strict";return this.$Deferred1;};h.prototype.resolve=function(i){"use strict";this.$Deferred0=true;this.$Deferred2(i);};h.prototype.reject=function(i){"use strict";this.$Deferred0=true;this.$Deferred3(i);};h.prototype.then=function(){"use strict";return g.prototype.then.apply(this.$Deferred1,arguments);};h.prototype.done=function(){"use strict";g.prototype.done.apply(this.$Deferred1,arguments);};h.prototype.isSettled=function(){"use strict";return this.$Deferred0;};e.exports=h;},null);
__d("transferTextStyles",["Style"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h={fontFamily:null,fontSize:null,fontStyle:null,fontWeight:null,lineHeight:null,wordWrap:null};function i(j,k){for(var l in h)if(h.hasOwnProperty(l))h[l]=g.get(j,l);g.apply(k,h);}e.exports=i;},null);
__d("TextMetrics",["DOM","Style","UserAgent_DEPRECATED","transferTextStyles"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();function k(m){var n=m.clientWidth,o=(h.get(m,'-moz-box-sizing')=='border-box');if(o&&i.firefox()<29)return n;var p=h.getFloat(m,'paddingLeft')+h.getFloat(m,'paddingRight');return n-p;}function l(m,n){this._node=m;this._flexible=!!n;var o='textarea',p='textMetrics';if(this._flexible){o='div';p+=' textMetricsInline';}this._shadow=g.create(o,{className:p});j(m,this._shadow);document.body.appendChild(this._shadow);}l.prototype.measure=function(m){var n=this._node,o=this._shadow;m=(m||n.value)+'...';if(!this._flexible){var p=k(n);h.set(o,'width',Math.max(p,0)+'px');}if(n.nodeName==='TEXTAREA'){o.value=m;}else g.setContent(o,m);return {width:o.scrollWidth,height:o.scrollHeight};};l.prototype.destroy=function(){g.remove(this._shadow);};e.exports=l;},null);
__d("CurrentLocale",["LocaleInitialData"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h={};h.get=function(){return g.locale;};e.exports=h;},null);
__d("xuiglyph",["ix"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';function h(i){if(typeof i==='string')i={name:i};var j=Object.assign({name:(void 0),shade:'dark',size:'small'},i);return g.call(null,j.name+':'+j.shade+':'+j.size);}e.exports=h;},null);
__d("TrackingNodes",["TrackingNodeTypes"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h={types:g,BASE_CODE_START:58,BASE_CODE_END:126,BASE_CODE_SIZE:69,PREFIX_CODE_START:42,PREFIX_CODE_END:47,PREFIX_CODE_SIZE:6,TN_URL_PARAM:'__tn__',encodeTN:function(i,j){var k=(i-1)%h.BASE_CODE_SIZE,l=parseInt((i-1)/h.BASE_CODE_SIZE,10);if(i<1||l>h.PREFIX_CODE_SIZE)throw Error('Invalid tracking node: '+i);var m="";if(l>0)m+=String.fromCharCode(l-1+h.PREFIX_CODE_START);m+=String.fromCharCode(k+h.BASE_CODE_START);if(typeof j!="undefined"&&j>0)m+=String.fromCharCode(48+Math.min(j,10)-1);return m;},decodeTN:function(i){if(i.length===0)return [0];var j=i.charCodeAt(0),k=1,l,m;if(j>=h.PREFIX_CODE_START&&j<=h.PREFIX_CODE_END){if(i.length==1)return [0];m=j-h.PREFIX_CODE_START+1;l=i.charCodeAt(1);k=2;}else{m=0;l=j;}if(l<h.BASE_CODE_START||l>h.BASE_CODE_END)return [0];var n=m*h.BASE_CODE_SIZE+(l-h.BASE_CODE_START)+1;if(i.length>k&&(i.charAt(k)>='0'&&i.charAt(k)<='9'))return [k+1,[n,parseInt(i.charAt(k),10)+1]];return [k,[n]];},parseTrackingNodeString:function(i){var j=[];while(i.length>0){var k=h.decodeTN(i);if(k.length==1)return [];j.push(k[1]);i=i.substring(k[0]);}return j;},getTrackingInfo:function(i,j){return '{"tn":"'+h.encodeTN(i,j)+'"}';},addDataAttribute:function(i,j,k){if(j===(void 0))return;['data-ft','data-gt'].forEach(function(l){var m;if(i.getAttribute){m=i.getAttribute(l)||"{}";}else if(i.props){m=i.props[l]||"{}";}else return;var n=h.encodeTN(j,k);try{m=JSON.parse(m);if(m.tn&&m.tn===n)return;m.tn=n;if(i.setAttribute){i.setAttribute(l,JSON.stringify(m));}else if(i.props){i.props[l]=JSON.stringify(m);}else return;}catch(o){}});}};e.exports=h;},null);
__d("QPRenderer",["$","CSS","XQuickPromotionSimpleLoggingController","AsyncSignal"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=function(p,event,q){var r=i.getURIBuilder().setInt('qp_id',p).setString('qp_event',event).setStringToStringMap('qp_instance_log_data',q).getURI();new j(r,{}).send();},l=function(p,q,r){var s=i.getURIBuilder().setInt('qp_id',p).setEnum('qp_action',q).setStringToStringMap('qp_instance_log_data',r).getURI();new j(s,{}).send();},m=function(p,q,r,s,t,u){o(p,r,g(s),u,function(){if(t)h.hide(q);});},n=function(p,q,r){q.show();k(p,'view',{});q.subscribe('cancel',function(){k(p,'dialog_cancel',{});});for(var s=0;s<r.length;s++){var t=r[s],u=g(t.element_id);o(p,t.action,u,t.instance_log_data,function(){if(t.should_close)q.hide();});if(t.action=='primary')u.focus();}},o=function(p,q,r,s,t){r.addEventListener('click',function(){var u=i.getURIBuilder().setInt('qp_id',p).setEnum('qp_action',q).setStringToStringMap('qp_instance_log_data',s).getURI();new j(u,{}).send();t();});};f.setAction=m;f.setDialogActionsAndShow=n;f.logAction=l;f.logEvent=k;},null);
__d("DragDropFileUpload",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();f.isSupported=function(){return typeof(FileList)!=="undefined";};},null);
__d("DocumentDragDrop",["Event","Arbiter","CSS","DOM","DOMQuery","DragDropFileUpload","emptyFunction","getObjectValues"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();var o={},p=0;function q(){p=0;n(o).forEach(function(v){i.removeClass(v.element,v.className);h.inform('dragleave',{element:v.element});});}var r=null;function s(){r&&clearTimeout(r);r=setTimeout(function(){q();},500);}function t(){if(!l.isSupported())return;g.listen(document,'dragenter',function(v){if(p===0)n(o).forEach(function(w){i.addClass(w.element,w.className);h.inform('dragenter',{element:w.element,event:v});});p++;s();});g.listen(document,'dragleave',function(v){p--;if(p===0)q();s();});g.listen(document,'drop',function(v){q();var w=v.getTarget();if(k.isNodeOfType(v.getTarget(),'input'))if(w.type==='file')return;v.prevent();});g.listen(document,'dragover',g.prevent);document.addEventListener('dragover',s,true);t=m;}var u={init:function(){t();},registerStatusElement:function(v,w){t();o[j.getID(v)]={element:v,className:w};if(p>0)i.addClass(v,w);},removeStatusElement:function(v){var w=j.getID(v),x=o[w];if(x){i.removeClass(x.element,x.className);delete o[w];}}};e.exports=u;},null);
__d("DragDropTarget",["Arbiter","Event","SubscriptionsHandler","CSS","DataTransfer","DocumentDragDrop","DragDropFileUpload","emptyFunction"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();function o(p){this._element=p;this._listeners=new i();this._statusElem=p;this._dragEnterCount=0;this._enabled=false;}Object.assign(o.prototype,{_onFilesDropCallback:n,_onURLDropCallback:n,_onPlainTextDropCallback:n,_onDropCallback:n,_fileFilterFn:n.thatReturnsArgument,setOnDocumentDragEnterCallback:function(p){this._onDocumentDragEnterCallback=p;return this;},setOnDocumentDragLeaveCallback:function(p){this._onDocumentDragLeaveCallback=p;return this;},setOnDragEnterCallback:function(p){this._onDragEnterCallback=p;return this;},setOnDragLeaveCallback:function(p){this._onDragLeaveCallback=p;return this;},setOnFilesDropCallback:function(p){this._onFilesDropCallback=p;return this;},setOnURLDropCallback:function(p){this._onURLDropCallback=p;return this;},setOnPlainTextDropCallback:function(p){this._onPlainTextDropCallback=p;return this;},setOnDropCallback:function(p){this._onDropCallback=p;return this;},enable:function(){if(!m.isSupported())return this;this._listeners.engage();l.registerStatusElement(this._statusElem,'fbWantsDragDrop');this._listeners.addSubscriptions(h.listen(this._element,'dragenter',this._onDragEnter.bind(this)),h.listen(this._element,'dragleave',this._onDragLeave.bind(this)),h.listen(this._element,'dragover',this._onDragOver.bind(this)),h.listen(this._element,'drop',function(p){this._dragEnterCount=0;j.removeClass(this._statusElem,'fbDropReady');j.removeClass(this._statusElem,'fbDropReadyPhoto');j.removeClass(this._statusElem,'fbDropReadyPhotos');j.removeClass(this._statusElem,'fbDropReadyLink');var q={},r=false,s=this._fileFilterFn(p.dataTransfer.files);if(s.length){this._onFilesDropCallback(s,p);q.files=s;r=true;}var t=p.dataTransfer.getData('url')||p.dataTransfer.getData('text/uri-list');if(t){this._onURLDropCallback(t,p);q.url=t;r=true;}var u=p.dataTransfer.getData('text/plain');if(u){this._onPlainTextDropCallback(u,p);q.plainText=u;r=true;}if(r)this._onDropCallback(q,p);p.kill();}.bind(this)));this._listeners.addSubscriptions(g.subscribe('dragenter',this._onDocumentDragEnter.bind(this)),g.subscribe('dragleave',this._onDocumentDragLeave.bind(this)));this._enabled=true;return this;},disable:function(){if(!this._enabled)return this;l.removeStatusElement(this._statusElem,'fbWantsDragDrop');j.removeClass(this._statusElem,'fbDropReady');j.removeClass(this._statusElem,'fbDropReadyPhoto');j.removeClass(this._statusElem,'fbDropReadyPhotos');j.removeClass(this._statusElem,'fbDropReadyLink');this._listeners.release();this._enabled=false;return this;},setFileFilter:function(p){this._fileFilterFn=p;return this;},setStatusElement:function(p){this._statusElem=p;return this;},_onDragEnter:function(p){if(this._dragEnterCount===0){var q=new k(p.dataTransfer);j.addClass(this._statusElem,'fbDropReady');if(q.isLink()||!q.isImage()){j.addClass(this._statusElem,'fbDropReadyLink');}else if(q.getCount()>1){j.addClass(this._statusElem,'fbDropReadyPhotos');}else j.addClass(this._statusElem,'fbDropReadyPhoto');this._onDragEnterCallback&&this._onDragEnterCallback();}this._dragEnterCount++;p.preventDefault();},_onDragLeave:function(p){this._dragEnterCount=Math.max(this._dragEnterCount-1,0);if(this._dragEnterCount===0){j.removeClass(this._statusElem,'fbDropReady');j.removeClass(this._statusElem,'fbDropReadyPhoto');j.removeClass(this._statusElem,'fbDropReadyPhotos');j.removeClass(this._statusElem,'fbDropReadyLink');this._onDragLeaveCallback&&this._onDragLeaveCallback();}},_onDragOver:function(p){if(!p.dataTransfer){h.kill(p);return;}var q=p.dataTransfer.effectAllowed;p.dataTransfer.dropEffect=(q=='move'||q=='linkMove')?'move':'copy';h.kill(p);},_onDocumentDragEnter:function(event,p){if(this._onDocumentDragEnterCallback&&p.element==this._element)this._onDocumentDragEnterCallback();},_onDocumentDragLeave:function(event,p){this._dragEnterCount=0;this._onDragLeave(event);if(this._onDocumentDragLeaveCallback&&p.element==this._element)this._onDocumentDragLeaveCallback();}});e.exports=o;},null);
__d("TickerController",["Animation","Arbiter","AsyncSignal","Bootloader","CSS","DOM","Parent","UIPagelet","Vector","$","emptyFunction","ge"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){b.__markCompiled&&b.__markCompiled();var s=1,t=2,u=3,v=4,w=15000,x=null,y={},z={},aa={setActiveInstance:function(ba){x=ba;},getActiveInstance:function(){return x;},clearRHCplaceholder:function(){y.pagelet_rhc_ticker=null;},registerInstance:function(ba,ca,da){z[ba.id]={root:ba,scrollable_area:ca,config:da};j.loadModules(["TickerStoryList"],function(ea){return new ea(ba,ca,da);});},callWithInstance:function(ba,ca){if(!ba)return;var da=m.byClass(p(ba),'fbFeedTicker');j.loadModules(["TickerStoryList"],function(ea){var fa=da?ea.instances()[da.id]:null,ga=z[da.id];if(!fa&&ga){fa=new ea(ga.root,ga.scrollable_area,ga.config);delete z[da.id];}ca(fa);});},isLoaded:function(ba){var ca=y[ba.id];return !ca||ca.status==u;},show:function(ba,ca){j.loadModules(["TickerStoryList"],function(da){return aa._showImpl(da,ba,ca);});},_showImpl:function(ba,ca,da){da=da||q;for(var ea in ba.instances()){var fa=r(ea);if(!fa||fa.parentNode.id==ca.id)continue;aa.hide(fa.parentNode);}aa._doPositionChange(ca);k.show(ca);var ga=y[ca.id];if(ga&&ga.status==s){var ha=(o.getElementDimensions(ca).y||0)>0,ia=ca.id==='pagelet_rhc_ticker'&&!k.hasClass(ca,'hidden_rhc_ticker');if(ha||ia){aa._fetchTickerForPlaceholder(ca,da);}else h.subscribe('Ticker/resized',function(){if(ga.status==s)aa._fetchTickerForPlaceholder(ca,da);});}else{var ja=l.scry(ca,'.fbFeedTicker')[0];aa.callWithInstance(ja,function(ka){x=ka;ka&&ka._poll();y[ca.id]={status:v,callback:da};da();});}h.inform('ticker/show',{node:ca,callback:da});},_doPositionChange:function(ba){if(k.shown(ba))return;new i('/common/ods_endpoint.php',{k:'ticker.render.switch.'+ba.id}).send();},hide:function(ba){var ca=l.scry(ba,'.fbFeedTicker')[0];aa.callWithInstance(ca,function(da){da&&da.hideActiveStory();k.hide(ba);});},hideStoriesByClass:function(ba){j.loadModules(["TickerStoryList"],function(ca){for(var da in ca.instances())l.scry(p(da),ba).forEach(k.hide);});},hideStory:function(ba){aa.callWithInstance(ba,function(ca){ca&&ca.hideStory(ba);});},replaceStory:function(ba,ca){var da=l.scry(document.body,'div.fbFeedTickerStory');aa.callWithInstance(da[0],function(ea){var fa=ea._findStoryById(ba);ea.handleRemoveStory();k.hide(fa);l.insertAfter(fa,ca);ca.setAttribute('data-story-id',fa.getAttribute('id'));var ga=setTimeout(function(){return aa.removeMarkup(ca,fa);},w);ca.setAttribute('data-timeout-token',ga);});},removeMarkup:function(ba,ca){k.addClass(ba,'removedStoryMarkup');new g(ba).to('height',0).duration(500).ondone(function(){l.remove(ba);}).go();},undoHideStory:function(ba){aa.callWithInstance(ba,function(ca){ca&&ca.undoHideStory(ba);});},insertStoriesAtBottom:function(ba){x.insertStoriesAtBottom(ba);},_fetchTickerForPlaceholder:function(ba,ca){var da={handler:function(){y[ba.id].status=u;ca();}};n.loadFromEndpoint('TickerEntStoryPagelet',ba.id,y[ba.id].pageletData,da);y[ba.id].status=t;},registerStoryDialog:function(ba,ca){h.subscribe('ticker/init',function(){var da=r(ba);aa.callWithInstance(da,function(ea){ea&&ea.registerStoryDialog(da,ca);});},h.SUBSCRIBE_ALL);},registerPlaceholder:function(ba,ca){var da=y[ba];y[ba]={status:s,pageletData:ca};if(da&&da.status==v){aa.show(p(ba));da.callback();}}};e.exports=aa;},null);
__d("XGamesGripperNoteUpdaterController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/async\/games\/gripper_note_viewed\/",{});},null);
__d("SidebarAppTickerResizer",["Animation","Arbiter","AsyncRequest","ChatSidebar","CSS","cx","debounce","DOMQuery","Event","SimpleDrag","TickerController","$","queryThenMutateDOM","XGamesGripperNoteUpdaterController"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){b.__markCompiled&&b.__markCompiled();var t=1e-07,u=1,v=85,w=173,x=300,y=46,z=90,aa=82,ba=150;function ca(da,ea,fa,ga,ha){"use strict";this.$SidebarAppTickerResizer0=r('pagelet_ticker');this.$SidebarAppTickerResizer1=r('pagelet_canvas_nav_content');this.$SidebarAppTickerResizer2=this.$SidebarAppTickerResizer0.parentNode;this.$SidebarAppTickerResizer3=ha;this.$SidebarAppTickerResizer1.style.height=fa;this.$SidebarAppTickerResizer4(da,ea);if(fa===null)if(ga!==null){this.$SidebarAppTickerResizer5();this.$SidebarAppTickerResizer6(this.$SidebarAppTickerResizer7());}else h.subscribe('AppsDivebar/show-apps',this.$SidebarAppTickerResizer5.bind(this));if(!ha){this.$SidebarAppTickerResizer8();k.hide(da);}h.subscribe('ChatSidebarDropdown/closeTicker',this.$SidebarAppTickerResizer8.bind(this));h.subscribe('ChatSidebarDropdown/openTicker',this.$SidebarAppTickerResizer9.bind(this));h.subscribe('sidebar/show',this.$SidebarAppTickerResizera.bind(this));if(ga){var ia=n.scry(document.body,'#pagelet_ticker')[0],ja=ia&&ia.parentNode,ka,la=function(){if(!k.shown(ja))return;var ma=b('XGamesGripperNoteUpdaterController').getURIBuilder().getURI();new i().setURI(ma).send();ga.show();if(ka)ka.unsubscribe();};if(ja&&k.shown(ja)){la();}else ka=h.subscribe('ticker/show',la);}this.$SidebarAppTickerResizerb=m(this.$SidebarAppTickerResizer5.bind(this),200);o.listen(window,'resize',this.$SidebarAppTickerResizerb);h.inform('Ticker/resized');}ca.prototype.$SidebarAppTickerResizera=function(){"use strict";q.show(this.$SidebarAppTickerResizer0);};ca.prototype.$SidebarAppTickerResizer5=function(da){"use strict";s(function(){this.$SidebarAppTickerResizerc();}.bind(this),function(){var ea=Math.round(parseFloat(this.$SidebarAppTickerResizer0.style.height));if(ea>Math.round(this.$SidebarAppTickerResizerd())||this.$SidebarAppTickerResizere&&this.$SidebarAppTickerResizere>u){var fa=(this.$SidebarAppTickerResizere/this.$SidebarAppTickerResizerf)*100,ga=this.$SidebarAppTickerResizerg(0,this.$SidebarAppTickerResizerd()-fa);if(!(da&&da.type==='resize'))this.$SidebarAppTickerResizerh(ga);j.resize();}}.bind(this));};ca.prototype.$SidebarAppTickerResizerd=function(){"use strict";if(!this.$SidebarAppTickerResizer3)return 0;if(!j.isVisible())return z;return Math.min(z,(this.$SidebarAppTickerResizerf-this.$SidebarAppTickerResizeri-aa)*100/this.$SidebarAppTickerResizerf);};ca.prototype.$SidebarAppTickerResizer4=function(da,ea){"use strict";var fa=new p(da);fa.subscribe('start',this.$SidebarAppTickerResizerj.bind(this));fa.subscribe(['update','end'],this.$SidebarAppTickerResizerk.bind(this));var ga=new p(ea);ga.subscribe('start',this.$SidebarAppTickerResizerj.bind(this));ga.subscribe('update',this.$SidebarAppTickerResizerl.bind(this));ga.subscribe('end',this.$SidebarAppTickerResizerm.bind(this));};ca.prototype.$SidebarAppTickerResizerj=function(da,event){"use strict";this.$SidebarAppTickerResizern=event.clientY;this.$SidebarAppTickerResizerc();this.$SidebarAppTickerResizero();};ca.prototype.$SidebarAppTickerResizerc=function(){"use strict";this.$SidebarAppTickerResizeri=this.$SidebarAppTickerResizer1.offsetTop;this.$SidebarAppTickerResizerp=this.$SidebarAppTickerResizer0.offsetHeight;this.$SidebarAppTickerResizerf=this.$SidebarAppTickerResizer2.offsetHeight;this.$SidebarAppTickerResizere=this.$SidebarAppTickerResizer1.offsetHeight;this.$SidebarAppTickerResizerq=this.$SidebarAppTickerResizere;};ca.prototype.$SidebarAppTickerResizero=function(){"use strict";k.addClass(this.$SidebarAppTickerResizer2,"_4vfq");};ca.prototype.$SidebarAppTickerResizerr=function(){"use strict";k.removeClass(this.$SidebarAppTickerResizer2,"_4vfq");};ca.prototype.$SidebarAppTickerResizerk=function(da,event){"use strict";var ea=(this.$SidebarAppTickerResizere/this.$SidebarAppTickerResizerf)*100,fa=this.$SidebarAppTickerResizerg(event.clientY-this.$SidebarAppTickerResizern,this.$SidebarAppTickerResizerd()-ea);if(da=='end'){this.$SidebarAppTickerResizerr();this.$SidebarAppTickerResizerh(fa);}j.resize();};ca.prototype.$SidebarAppTickerResizerl=function(da,event){"use strict";var ea=-this.$SidebarAppTickerResizere,fa=this.$SidebarAppTickerResizer7()-this.$SidebarAppTickerResizere,ga=this.$SidebarAppTickerResizers(event.clientY-this.$SidebarAppTickerResizern,ea,fa);this.$SidebarAppTickerResizerg(-ga,this.$SidebarAppTickerResizerd());this.$SidebarAppTickerResizerq=this.$SidebarAppTickerResizere+ga;this.$SidebarAppTickerResizerq=Math.max(u,this.$SidebarAppTickerResizerq);this.$SidebarAppTickerResizer1.style.height=this.$SidebarAppTickerResizerq+'px';};ca.prototype.$SidebarAppTickerResizerm=function(da,event){"use strict";var ea=this.$SidebarAppTickerResizerq,fa=this.$SidebarAppTickerResizeru(this.$SidebarAppTickerResizerq),ga=this.$SidebarAppTickerResizerg(this.$SidebarAppTickerResizere-fa,this.$SidebarAppTickerResizerd());if(this.$SidebarAppTickerResizere!=fa){this.$SidebarAppTickerResizer6(fa);this.$SidebarAppTickerResizerh(ga);}new g(this.$SidebarAppTickerResizer1).from('height',ea).to('height',fa).duration(x).go();};ca.prototype.$SidebarAppTickerResizerg=function(da,ea){"use strict";var fa=this.$SidebarAppTickerResizerp+da,ga=(fa/this.$SidebarAppTickerResizerf)*100;ga=Math.max(t,Math.min(ea,ga));this.$SidebarAppTickerResizer0.style.height=ga+'%';if(ga!=t){k.removeClass(this.$SidebarAppTickerResizer0,'hidden_elem');this.$SidebarAppTickerResizera();}return ga;};ca.prototype.$SidebarAppTickerResizeru=function(da){"use strict";var ea=this.$SidebarAppTickerResizerv(),fa=this.$SidebarAppTickerResizer7();return (da<(fa-y))?((da<(ea-y))?u:ea):fa;};ca.prototype.$SidebarAppTickerResizerv=function(){"use strict";return v;};ca.prototype.$SidebarAppTickerResizer7=function(){"use strict";return w;};ca.prototype.$SidebarAppTickerResizerw=function(da){"use strict";var ea=this.$SidebarAppTickerResizer7();return (da<0)?u:(da>ea?ea:da);};ca.prototype.$SidebarAppTickerResizers=function(da,ea,fa){"use strict";return (da<ea)?ea:((da>fa)?fa:da);};ca.prototype.$SidebarAppTickerResizerh=function(da){"use strict";new i('/ajax/feed/ticker/resize').setData({height:''+da}).setMethod('POST').send();h.inform('Ticker/resized');};ca.prototype.$SidebarAppTickerResizer6=function(da){"use strict";new i('/ajax/feed/apps/resize').setData({height:''+da}).setMethod('POST').send();};ca.prototype.$SidebarAppTickerResizerx=function(da){"use strict";var ea=this.$SidebarAppTickerResizerp,fa=this.$SidebarAppTickerResizerf*da/100;new g(this.$SidebarAppTickerResizer0).from('height',ea).to('height',fa).duration(ba).ondone(function(){this.$SidebarAppTickerResizer0.style.height=da+'%';this.$SidebarAppTickerResizerh(da===0?'0.0':da);j.resize();}.bind(this)).go();};ca.prototype.$SidebarAppTickerResizer8=function(){"use strict";this.$SidebarAppTickerResizerc();this.$SidebarAppTickerResizerx(0);};ca.prototype.$SidebarAppTickerResizer9=function(){"use strict";this.$SidebarAppTickerResizer0.style.height='40px';q.show(this.$SidebarAppTickerResizer0,function(){this.$SidebarAppTickerResizerc();var da=((this.$SidebarAppTickerResizerf-this.$SidebarAppTickerResizeri-aa-this.$SidebarAppTickerResizere)*50/this.$SidebarAppTickerResizerf);this.$SidebarAppTickerResizerx(da);}.bind(this));};e.exports=ca;},null);
__d("JewelQPLogging",["QPRenderer"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h=false,i=null,j=false;function k(){if(j)return;if(h&&i){g.logEvent(i.promotion_id,'view',i.instance_log_data?i.instance_log_data:{});j=true;}}var l={onJewelOpened:function(){h=true;k();},updateQPLogData:function(m){i=m;k();}};e.exports=l;},null);
__d("RequestsJewel",["Animation","AccessibilityLogger","Arbiter","AsyncRequest","AsyncSignal","ChannelConstants","CSS","DOM","Event","LinkController","Parent","ScrollableArea","Vector","$","debounce","ge","shield","fbt","JewelQPLogging","requireWeak"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){b.__markCompiled&&b.__markCompiled();var aa=null;z('FriendBrowserCheckboxController',function(fa){return aa=fa;});var ba=530,ca=30,da=160;Object.assign(ea,{instance:null,getInstance:function(){return ea.instance;},replaceJewelTitle:function(fa,ga){n.setContent(t(fa),ga);},updateFromDOM:function(){if(ea.instance)ea.instance.fromDom();},setInitialHeight:function(){if(ea.instance)ea.instance.setHeight();},maybeLoadJewel:function(){if(ea.instance)ea.instance.maybeLoadJewel();}});function ea(fa,ga,ha){"use strict";ea.instance=this;this.countNew=0;this.jewel=fa;this.jewelFlyoutCase=fa.getRoot();this.jewelFlyout=v('fbRequestsFlyout');this.newCountSpan=v('newRequestCount');this.folder=ga;this.doNewMarkRead=ha;this.openTimestamp=0;this.$RequestsJewel0={};this.$RequestsJewel1=0;this.shouldClearPredictionAssocOnClick=false;var ia=v('requestsMarkReadButton');if(ia)o.listen(ia,'click',w(this.$RequestsJewel2,this));this.jewel.subscribe('marked-seen',w(this.$RequestsJewel3,this));this.jewel.subscribe('closed',w(this.$RequestsJewel4,this));this.jewel.subscribe('updated',this.$RequestsJewel5.bind(this));this.jewel.subscribe('opened',this.$RequestsJewel6.bind(this));p.registerHandler(this.$RequestsJewel7.bind(this));i.subscribe(l.getArbiterType('jewel_requests_add'),this.$RequestsJewel8.bind(this));i.subscribe(l.getArbiterType('jewel_friending_notifs'),this.$RequestsJewel9.bind(this));i.subscribe(l.getArbiterType('jewel_requests_remove_old'),this.$RequestsJewela.bind(this));i.subscribe(l.getArbiterType('friend_requests_seen'),this.$RequestsJewelb.bind(this));o.listen(this.jewelFlyout,'submit',function(ka){var la=q.byClass(ka.getTarget(),'objectListItem');if(la){m.removeClass(la,'jewelItemNew');m.addClass(la,'jewelItemResponded');}}.bind(this));var ja=n.find(v('fbRequestsJewel'),'a[rel="toggle"]');o.listen(ja,'focus',function(ka){h.logFocusIn();}.bind(this));this.setupScroll();o.listen(window,'resize',u(function(){this.$RequestsJewelc();}.bind(this)));}ea.prototype.setupScroll=function(){"use strict";var fa=n.scry(this.jewelFlyout,'.uiScrollableAreaWrap')[0];if(fa){this.$RequestsJeweld=fa;this.$RequestsJewele=0;this.$RequestsJewelf=o.listen(fa,'scroll',this.$RequestsJewelg.bind(this),o.Priority.$RequestsJewelh);}};ea.prototype.fromDom=function(){"use strict";n.scry(this.jewelFlyout,'.jewelItemList li.objectListItem').forEach(function(fa){var ga=fa.getAttribute('id');if(ga){var ha=v(ga+'_status'),ia=this.$RequestsJeweli(ga);if(ia.requester)this.$RequestsJewel0[ia.requester]=ga;++this.$RequestsJewel1;}}.bind(this));this.$RequestsJewelj();};ea.prototype.$RequestsJewelk=function(fa){"use strict";var ga=fa.match(/^(\d+)_(\d+)/);return (ga)?{requester:ga[1],type:ga[2]}:(void 0);};ea.prototype.$RequestsJeweli=function(fa){"use strict";var ga=fa?this.$RequestsJewelk(fa):(void 0),ha;if(ga&&ga.requester){ha=parseInt(ga.requester,10);if(isNaN(ha))ha=(void 0);}var ia;if(ga&&ga.type){ia=parseInt(ga.type,10);if(isNaN(ia))ia=(void 0);}return {requester:ha,type:ia};};ea.prototype.$RequestsJewell=function(){"use strict";if(this.countNew>0)this.countNew-=1;};ea.prototype.$RequestsJewel7=function(fa,event){"use strict";var ga=q.byClass(fa,'jewelItemNew');if(ga&&q.byClass(ga,'fbRequestList')&&q.byClass(ga,'beeperEnabled')){var ha=this.$RequestsJewelk(ga.id);ha&&this.$RequestsJewel3(ha.requester,ha.type);this.$RequestsJewell();i.inform('jewel/count-updated',{jewel:'requests',count:this.countNew});m.removeClass(ga,'jewelItemNew');}return true;};ea.prototype.$RequestsJewelm=function(){"use strict";return n.scry(this.jewelFlyout,'.uiScrollableArea')[0];};ea.prototype.$RequestsJewelg=function(){"use strict";var fa=n.scry(this.$RequestsJeweld,'.uiMorePager');if(!fa)return;var ga=fa.pop();if(ga){var ha=s.getElementPosition(ga,'viewport').y;if(ha>0)m.addClass(q.byClass(this.$RequestsJeweld,'uiScrollableArea'),'contentAfter');var ia=n.find(ga,'a');if(!ia)return;var ja=s.getElementPosition(ia,'viewport').y;if(ja==this.$RequestsJewele)return;var ka=s.getElementPosition(this.$RequestsJeweld,'viewport').y+s.getElementDimensions(this.$RequestsJeweld).y;if(ja-300<ka&&ja>0){this.$RequestsJewele=ja;var la=ia.getAttribute('ajaxify');if(la){new j(la).setRelativeTo(ia).setStatusElement(q.byClass(ia,'stat_elem')).send();}else aa&&aa.getInstance('jewel').showMore();}}};ea.prototype.$RequestsJewel9=function(fa,ga){"use strict";if(!ga||this.jewel.isOpen())return;if(ga.obj.notif_type!=='friend_confirmed')return;if(v('fbRequestsJewelLoading')){new j().setURI('/ajax/requests/loader/').send();return;}var ha={};ha.reloadcontent=true;new j().setURI('/ajax/requests/loader/').setData(ha).send();};ea.prototype.$RequestsJewel8=function(fa,ga){"use strict";if(!ga)return;var ha=ga.obj.from,ia=ga.obj.suggester,ja=this.$RequestsJeweli(this.$RequestsJewel0[ha]).type,ka=ja===19&&!ia;if(!ka&&(ja||this.jewel.isOpen()))return;if(v('fbRequestsJewelLoading')){new j().setURI('/ajax/requests/loader/').send();}else{var la={};la.reloadcontent=true;new j().setURI('/ajax/requests/loader/').setData(la).send();}};ea.prototype.$RequestsJewela=function(fa,ga){"use strict";if(!ga||this.jewel.isOpen()||v('fbRequestsJewelLoading')!==null)return;var ha=this.$RequestsJewel0[ga.obj.from],ia=ha&&v(ha);if(ia){if(m.hasClass(ia,'jewelItemNew')){this.$RequestsJewell();i.inform('jewel/count-updated',{jewel:'requests',count:this.countNew});}if(!m.hasClass(ia,'jewelItemResponded')){n.remove(ia);delete this.$RequestsJewel0[ga.obj.from];--this.$RequestsJewel1;this.$RequestsJewelj();}}};ea.prototype.$RequestsJewel2=function(){"use strict";this.jewel.markSeen();this.$RequestsJewelo();};ea.prototype.$RequestsJewel3=function(fa,ga){"use strict";var ha=n.scry(this.jewelFlyout,'li');new k('/ajax/gigaboxx/endpoint/UpdateLastSeenTime.php',{folder:this.folder,first_item:ha[0].id}).send();var ia=typeof fa!='undefined'&&typeof ga!='undefined'?{requester:fa,type:ga}:{};this.doNewMarkRead&&new k('/ajax/requests/mark_read/',ia).send();};ea.prototype.$RequestsJewelb=function(fa,ga){"use strict";i.inform('jewel/count-updated',{jewel:'requests',count:0});};ea.prototype.$RequestsJewelo=function(fa,ga){"use strict";n.scry(this.jewel.root,'li.jewelItemNew').forEach(function(ha){m.removeClass(ha,'jewelItemNew');});};ea.prototype.$RequestsJewel5=function(fa,ga){"use strict";this.countNew=ga.count;m.conditionClass(this.jewelFlyout,'beeperUnread',this.countNew>0);m.conditionClass(this.jewelFlyoutCase,'showRequests',this.countNew>0);if(this.newCountSpan){var ha=this.countNew==1?x._("{num} NEW REQUEST",[x.param("num",this.countNew)]):x._({"*":"{num} NEW REQUESTS"},[x.param("num",this.countNew,[0])]);n.setContent(this.newCountSpan,ha);}};ea.prototype.$RequestsJewelj=function(){"use strict";n.scry(this.jewelFlyout,'li.empty').forEach(function(fa){m.conditionShow(fa,this.$RequestsJewel1<=0);}.bind(this));};ea.prototype.$RequestsJewel6=function(){"use strict";i.inform('requestsJewel/opened');var fa=v('fbRequestsJewelLoading'),ga=this.$RequestsJewelm();if(!fa&&!ga){this.unhandledRequest=true;}else if(fa){var ha=Date.now();if(this.openTimestamp+5000<ha){this.openTimestamp=ha;new j().setURI('/ajax/requests/loader/').setData({log_impressions:true}).send();}}else{var ia=Object.keys(this.$RequestsJewel0);if(ia.length>0)new j().setURI('/friends/requests/log_impressions').setData({ids:ia.join(','),ref:'jewel'}).send();}ga&&r.poke(ga);y.onJewelOpened();};ea.prototype.$RequestsJewel4=function(){"use strict";i.inform('requestsJewel/closed');this.$RequestsJewelo();};ea.prototype.$RequestsJewelp=function(){"use strict";return Math.min(Math.max(s.getViewportDimensions().y-da,ca),ba);};ea.prototype.$RequestsJewelc=function(){"use strict";if(this.$RequestsJewelm())new g(this.$RequestsJewelm()).to('height',this.$RequestsJewelp()+'px').duration(100).go();};ea.prototype.setHeight=function(){"use strict";this.$RequestsJewelm().style.height=this.$RequestsJewelp()+'px';};ea.prototype.maybeLoadJewel=function(){"use strict";if(this.unhandledRequest){this.unhandledRequest=false;this.$RequestsJewel6();}};e.exports=ea;},null);
__d("WaterfallIDGenerator",["CurrentUser","md5"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();function i(){var l=2147483647;return Math.random()*l;}function j(){return Math.floor(Date.now()/1000);}var k={generate:function(){return h([g.getID(),j(),i()].join(':'));}};e.exports=k;},null);
__d("ChatActivity",["Event","Arbiter","AvailableList","AvailableListConstants","JSLogger","MercuryConfig","PresenceState","UserActivity"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();var o=l.activity_limit||60000,p=l.idle_limit||1800000,q=l.idle_poll_interval||300000,r=k.create('chat_activity'),s=Date.now(),t=s,u=true;function v(){var z=Date.now();return !!(u&&(z-s<o));}var w=Object.assign(new h(),{isActive:v});function x(){var z=s;s=Date.now();if(s-z>p){r.debug('idle_to_active',z);m.doSync();}w.inform('activity');}i.subscribe(j.ON_AVAILABILITY_CHANGED,function(){if(!i.isUserIdle())t=Date.now();});g.listen(window,'focus',function(){u=true;x();});g.listen(window,'blur',function(){u=false;});n.subscribe(function(){x();});function y(z){var aa=z&&z.at&&m.verifyNumber(z.at);if(typeof aa!=='number')aa=null;return aa||0;}setInterval(function(){var z=Date.now(),aa=y(m.get()),ba=Math.max(s,aa,t);if(z-ba>p){r.debug('idle',{cookie:aa,local:s,presence:t});w.inform('idle',z-ba);}},q);m.registerStateStorer(function(z){var aa=y(z);if(aa<s)z.at=s;return z;});h.subscribe(k.DUMP_EVENT,function(z,aa){aa.chat_activity={activity_limit:o,idle_limit:p,idle_poll_interval:q,last_active_time:s,last_global_active_time:t};});e.exports=w;},null);
__d("FavIcon",["DOM"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h,i,j;function k(){var m=g.scry(document.head,"link");if(m)m.forEach(function(n){if(n.rel.indexOf('icon')!=-1||n.rel.indexOf('shortcut icon')!=-1)g.remove(n);});}var l={isToggledResource:function(){if(j&&h.href===j)return true;return false;},set:function(m){if(h)g.remove(h);k();h=g.create('link',{type:'image/x-icon',rel:'icon',href:m});g.appendContent(g.find(document,'head'),h);},setToggleResources:function(m,n){h=document.querySelector('link[rel*=icon][href*=".ico"]');i=n||h.href;j=m;},toggle:function(){if(!h||!j)return;if(h.href===i){this.set(j);return;}this.set(i);}};e.exports=l;},null);
__d("MercuryTimestampTracker",["MercuryActionType","MercuryPayloadSource","MercurySingletonMixin","MercuryDispatcher"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();function k(l){this._fbid=l;this._dispatcher=j.getForFBID(this._fbid);this._lastTimestamp=0;this._dispatcher.subscribe('update-messages',function(m,n){if(!n.actions||!n.actions.length)return;if(n.payload_source==h.CLIENT_SEND_MESSAGE||n.payload_source==h.UNKNOWN)return;for(var o=0;o<n.actions.length;o++){var p=n.actions[o],q=p.action_type;if(q==g.USER_GENERATED_MESSAGE&&p.thread_id&&p.timestamp>this._lastTimestamp)this._lastTimestamp=p.timestamp;}}.bind(this));}Object.assign(k.prototype,{getLastUserMessageTimestamp:function(){return this._lastTimestamp;}});Object.assign(k,i);e.exports=k;},null);
__d("ChatTitleBarBlinker",["ChatActivity","ChatConfig","DocumentTitle","FavIcon","JSLogger","MercuryNotificationRenderer","PresenceState","MercuryThreadInformer","MercuryTimestampTracker"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();var n=b('MercuryThreadInformer').get(),o=b('MercuryTimestampTracker').get(),p=k.create('chat_title'),q=null,r=0,s=false;if(h.get('unreadFavicon'))j.setToggleResources(h.get('unreadFaviconURL'));function t(){if(q){q.stop();q=null;return true;}return false;}function u(z){var aa=z||o.getLastUserMessageTimestamp();if(r<=aa){r=aa;if(t()||s)m.doSync();}if(h.get('unreadFavicon')&&j.isToggledResource())j.toggle();}var v={blink:function(z,aa){if(!q&&r<aa)l.renderDocumentTitle(z,function(ba){if(!q)q=i.blink(ba);});},stopBlinking:function(){u();},blinkingElsewhere:function(){s=true;}};function w(z){var aa=m.verifyNumber(z.sb2);if(!aa||aa<=r)return null;return aa;}function x(z){var aa=z&&w(z);if(aa){r=aa;p.debug('load',r);t();s=false;}}function y(z){var aa=w(z);if(!aa){p.debug('store',r);z.sb2=r;s=false;}return z;}m.registerStateStorer(y);m.registerStateLoader(x);n.subscribe('thread-read-changed',function(z,aa){var ba=o.getLastUserMessageTimestamp(),ca=0;for(var da in aa)if(aa[da].mark_as_read&&aa[da].timestamp>=ba&&aa[da].timestamp>ca)ca=aa[da].timestamp;ca&&u(ca);});g.subscribe('activity',function(){u();});(function(){var z=m.getInitial();if(z)r=w(z)||0;})();e.exports=v;},null);
__d("MercuryGroupThreadMentions",["CurrentUser","ShortProfiles"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i={messageMentionsViewer:function(j,k){h.get(g.getID(),function(l){k((new RegExp('@'+l.firstName,'i')).test(j.body));});}};e.exports=i;},null);
__d("MercuryBrowserAlerts",["ArbiterMixin","ChatActivity","ChatConfig","ChatOptions","ChatTitleBarBlinker","MercuryThreadInfo","MercuryGroupThreadMentions","MercuryConfig","MercuryViewer","MessagingTag","Sound","MercuryThreads"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){b.__markCompiled&&b.__markCompiled();var r=b('MercuryThreads').get();q.init(['audio/ogg','audio/mpeg']);function s(u){if(j.getSetting('sound'))q.play([i.get('sound.notif_ogg_url'),i.get('sound.notif_mp3_url')],u,false);}var t={messageReceived:function(u){if(o.isViewer(u.author)||!u.is_unread||(u.folder!=p.INBOX&&u.folder!=p.ARCHIVED))return;var v=u.thread_id,w=h.isActive();if(w){var x=false;t.inform('before-alert',{threadID:v,cancelAlert:function(){x=true;}});}r.getThreadMeta(v,function(y){var z=l.isMuted(y);m.messageMentionsViewer(u,function(aa){if(z&&(!n.GroupChatMentionsGK||!aa))return;var ba=u.timestamp;if(w){!x&&s(ba);}else{k.blink(v,ba);s(ba);}k.blinkingElsewhere();});});}};e.exports=Object.assign(t,g);},null);
__d("VideoCallCore",["Bootloader","FBRTCCallSummaryUploader","FBRTCCore","FBRTCLogger","FBRTCMessageListener","VideoCallSupport"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m=null,n={showOutgoingCallDialog:function(q,r,s){i.startOutgoingCall(q,s||j.Trigger.CHAT_TAB_ICON,r);}};function o(){if(!m)g.loadModules(["FBRTCIncomingCallController","FBRTCIncomingCallDialog","FBRTCMissedVideoCallHandler","FBRTCUnsupportedBrowserMessage"],function(q,r,s,t){m=new q(r,t,(new s(n)));k.setMessageHandler(m.onMessageReceived,m);});}function p(q){return i.isAvailableForWebrtcCalling(q);}if(l.isReceiveWebrtcSupported()){h.init();k.init();k.once('messageReceived',function(q){o();});}e.exports=n;},null);
__d("FBRTCCallabilityStore",["FBRTCDispatcher","RTCCallabilityStore"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';e.exports=new h(g);},null);
__d("ChatAnimatedGifs",["URI"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h={shouldHideBody:function(i){if(!i.has_attachment)return false;for(var j=0;j<i.attachments.length;j++){var k=i.attachments[j];if(k.preview_url){var l=h.getRawUrlFromSafeUrl(k.preview_url);if(i.body==l)return true;}}return false;},getRawUrlFromSafeUrl:function(i){return new g(i).getQueryData().url;}};e.exports=h;},null);
__d("ChatPerfInstrumentation",["BanzaiLogger","ChatPerfEvent","Promise","emptyFunction","performanceAbsoluteNow"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l={_startTime:(Number),init:function(){this._startTime=k();return new i(function(m){return m();});},_log:function(event){g.log('ChatPerfLoggerConfig',{event:event,duration:k()-this._startTime});},logTTI:function(){this.logTTI=j;this._log(h.TTI);},logCHAT_CONVERSATION_TTI:function(){this.logCHAT_CONVERSATION_TTI=j;this._log(h.CHAT_CONVERSATION_TTI);}};e.exports=l;},null);
__d("ChatBehavior",["Arbiter","AvailableList","AvailableListConstants","MercuryConstants"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=b('MercuryConstants').ChatNotificationConstants,k=false,l=h.getWebChatNotification&&h.getWebChatNotification(),m=k,n=true,o=Object.assign(new g(),{ON_CHANGED:'changed',notifiesUserMessages:function(){return l!==j.NO_USER_MESSAGE_NOTIFICATION;},ignoresRemoteTabRaise:function(){return m;},showsTabUnreadUI:function(){return n;}});function p(){o.inform(o.ON_CHANGED);}h.subscribe&&h.subscribe(i.ON_CHAT_NOTIFICATION_CHANGED,function(){var q=l,r=h.getWebChatNotification();l=r;if(q!=r)p();});g.subscribe('chat/set_does_page_occlude_tabs',function(q,r){m=!!r;p();});g.subscribe('chat/set_show_tab_unread_ui',function(q,r){n=!!r;p();});e.exports=o;},null);
__d("ChatCookieInterface",["ChatConfig","InitialServerTime","LogHistory","PresenceState","PresenceUtil","areJSONRepresentationsEqual"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';var m=i.getInstance('chat_cookie'),n=h.serverTime,o=g.get('tab_max_load_age')||3600000,p=n-o,q={store:function(u,v){if(u.uct2==v.lastChangeTime)return u;var w=t(u,v),x={};if(!w){x.old_tabs=u&&u.t2&&JSON.stringify(u.t2);x.old_promoted=u&&u.lm2;x.old_time=u&&u.uct2;x.old_reason=u&&u.tr;x.old_window=u&&u.tw;var y=[];v.tabs.forEach(function(z){if(!z.fragile){var aa={i:z.id,si:z.server_id};if(z.raised)aa.r=1;y.push(aa);}});u.t2=y;u.lm2=v.promotedID;u.uct2=v.lastChangeTime;u.tr=v.lastChangeReason;u.tw=k.getSessionID();x.new_tabs=JSON.stringify(u.t2);x.new_promoted=u.lm2;x.new_time=u.uct2;x.new_reason=u.tr;x.new_window=u.tw;m.debug('store',x);}else{x.tabs=u&&u.t2&&JSON.stringify(u.t2);x.promoted=u&&u.lm2;x.time=u&&u.uct2;x.reason=u&&u.tr;x.window=u&&u.tw;x.last_change_time=v.lastChangeTime;x.last_change_reason=v.lastChangeReason;x.min_change_time=p;m.warn('store_bad_state',x);}return u;},load:function(u,v){if(!u){m.warn('load_bad_state',u);return false;}var w=t(u,v);if(!w||w===v.lastChangeTime)return false;var x={};x.old_tabs=JSON.stringify(v.tabs);x.old_promoted=v.promotedID;x.old_time=v.lastChangeTime;x.old_reason=v.lastChangeReason;x.window_id=k.getSessionID();x.cookie_tabs=u&&u.t2&&JSON.stringify(u.t2);x.cookie_promoted=u&&u.lm2;x.cookie_time=u&&u.uct2;x.cookie_reason=u&&u.tr;x.cookie_window=u&&u.tw;v.lastChangeTime=w;v.lastChangeReason='load';var y=r(v,u.t2,u.lm2||null);x.load_result=y;x.new_tabs=JSON.stringify(v.tabs);x.new_promoted=v.promotedID;x.new_time=v.lastChangeTime;x.new_reason=v.lastChangeReason;var event='load';if(!v.isInitialized)event+='_init';m.log(event,x);return y;}};function r(u,v,w){var x;if(!s(u,v,w))return false;var y=u.tabs.filter(function(ba){return !!ba.fragile;}),z={};u.promotedID=null;u.tabs=v.map(function(ba){var ca={id:ba.i,server_id:ba.si};if(ca.id==w)u.promotedID=ca.id;if(ba.r)ca.raised=true;z[ca.id]=ca;return ca;});u.tabs=u.tabs.filter(function(ba){return !!ba;});if(u.localRaised)for(var aa in u.localRaised)if(!z[aa]||!z[aa].raised)delete u.localRaised[aa];y=y.filter(function(ba){return !z[ba.id];});(x=u.tabs).push.apply(x,y);return true;}function s(u,v,w){if(w!=u.promotedID)return true;var x=u.tabs.filter(function(aa){return !aa.fragile;});if(v.length!=x.length)return true;for(var y=0,z=v.length;y<z;y++)if(!l(v[y],x[y]))return true;return false;}function t(u,v){var w=j.verifyNumber(u.uct2);if(!w||typeof w!=='number'){m.warn('bad_cookie_version',u);return null;}if(w<v.lastChangeTime||w<p)return null;return w;}e.exports=q;},null);
__d("ChatTabModel",["Arbiter","ArbiterMixin","ChatBehavior","ChatDispatcher","ChatConfig","ChatCookieInterface","ChatTabActions","InitialServerTime","LogHistory","JSLogger","MercuryAssert","MercuryLocalIDs","PresenceState","PresenceUtil","MercuryThreadIDMap","MercuryThreads","MercuryTimestampTracker"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){b.__markCompiled&&b.__markCompiled();var u=b('MercuryThreadIDMap').get(),v=b('MercuryThreads').get(),w=b('MercuryTimestampTracker').get(),x=n.serverTime,y=k.get('tab_max_load_age')||3600000,z=20,aa=o.getInstance('chat_tab_model'),ba={tabs:[],promotedID:null,lastChangeTime:0,lastChangeReason:null,isInitialized:false,localRaised:null};function ca(xa){var ya=l.load(xa,ba);ya&&ga();return ya;}function da(xa,ya,za){var ab=ca(s.get());if(ya===(void 0)||ya>ba.lastChangeTime){if(xa()){ab=true;ba.lastChangeReason=za||null;fa(ya);}}else aa.error('rejected',{change_time:ya,state_time:ba.lastChangeTime});ab&&ea();}function ea(){if(ba.isInitialized)va.inform('change');}function fa(xa){if(xa===(void 0))xa=Math.max(w.getLastUserMessageTimestamp()||1,ba.lastChangeTime+1);ba.lastChangeTime=xa;s.doSync();}function ga(xa){var ya=ba.tabs.length-z;if(ya>0)ba.tabs=ba.tabs.filter(function(za){return za.raised||za.id==xa||ya--<=0;});if(ya>0)ba.tabs=ba.tabs.filter(function(za){return za.id==ba.promotedID||za.id==xa||ya--<=0;});}function ha(xa){for(var ya=0;ya<ba.tabs.length;ya++)if(ba.tabs[ya].id==xa)return ya;return -1;}function ia(xa,ya){var za=v.getThreadMetaNow(xa);if(!za)return false;if(za.is_canonical_user){return la(xa,ya);}else{var ab=ka(xa);if(ab)u.getFBIDFromClientID(xa,function(bb){if(oa(xa,bb)){fa();ea();}});return ab;}}function ja(xa){q.isThreadID(xa);if(ka(xa))ea();}function ka(xa){if(ha(xa)===-1){ba.tabs.push({id:xa,fragile:true});aa.log('open_fragile_tab',{tabs:JSON.stringify(ba.tabs),opened:xa,window_id:t.getSessionID()});return true;}return false;}function la(xa,ya){var za=ha(xa);if(za!=-1)if(ba.tabs[za].fragile){ba.tabs.splice(za,1);}else{ya&&(ba.tabs[za].signatureID=ya);return true;}for(var ab=0;ab<=ba.tabs.length;ab++)if(ab==ba.tabs.length||ba.tabs[ab].fragile){ba.tabs.splice(ab,0,{id:xa,signatureID:ya});ga(xa);aa.log('open_tab',{tabs:JSON.stringify(ba.tabs),opened:xa,window_id:t.getSessionID()});return true;}}function ma(xa,ya,za){q.isThreadID(xa);var ab=false;if(ba.localRaised&&ya){ba.localRaised[xa]=true;ab=true;}da(function(){if(ia(xa,za))ab=true;var bb=ha(xa);if(bb!=-1&&!ba.tabs[bb].raised){ba.tabs[bb].raised=true;ab=true;aa.log('raise_tab',{tabs:JSON.stringify(ba.tabs),raised:xa,window_id:t.getSessionID()});}return ab;});}function na(xa){if(ha(xa)!==-1&&ba.promotedID!==xa){ba.promotedID=xa;return true;}return false;}function oa(xa,ya){var za=ha(xa);if(za!=-1&&ba.tabs[za].fragile){var ab=ba.tabs[za];ab.fragile=false;ab.server_id=ya;var bb=[];ba.tabs.forEach(function(cb){if(cb.id!=xa){if(ab&&cb.fragile){bb.push(ab);ab=null;}bb.push(cb);}});if(ab)bb.push(ab);ba.tabs=bb;aa.log('make_permanent',{tabs:JSON.stringify(ba.tabs),tab_id:xa,window_id:t.getSessionID()});return true;}return false;}function pa(xa,ya){q.isThreadID(xa);var za=false;if(ba.localRaised){delete ba.localRaised[xa];za=true;}da(function(){if(qa(xa))za=true;return za;},(void 0),ya);}function qa(xa){var ya=ha(xa);if(xa==ba.promotedID)ba.promotedID=null;if(ya!=-1){ba.tabs.splice(ya,1);aa.log('close_tab',{tabs:JSON.stringify(ba.tabs),closed:xa,window_id:t.getSessionID()});return true;}return false;}function ra(){if(ba.tabs.length){aa.log('close_all_tabs',{closed_tabs:JSON.stringify(ba.tabs),window_id:t.getSessionID()});ba.tabs=[];ba.promotedID=null;if(ba.localRaised)ba.localRaised={};fa();ea();}}function sa(){var xa=[];for(var ya=0;ya<ba.tabs.length;ya++)if(ba.tabs[ya].fragile&&!v.isNewEmptyLocalThread(ba.tabs[ya].id)){xa.push(ba.tabs[ya]);ba.tabs.splice(ya);ea();break;}aa.log('close_fragile_tabs',{tabs:JSON.stringify(ba.tabs),fragile_closed:xa,window_id:t.getSessionID()});}function ta(xa){q.isThreadID(xa);var ya=false;if(ba.localRaised){delete ba.localRaised[xa];ya=true;}da(function(){var za=ha(xa);if(za!=-1&&ba.tabs[za].raised){delete ba.tabs[za].raised;aa.log('lower_tab',{tabs:JSON.stringify(ba.tabs),lowered:xa,window_id:t.getSessionID()});ya=true;}return ya;});}function ua(){if(ba.localRaised){da(function(){var xa=false;ba.tabs.forEach(function(ya){if(ya.raised!=ba.localRaised[ya.id]){xa=true;if(ba.localRaised[ya.id]){ya.raised=true;}else delete ya.raised;}});return xa;});aa.log('persist_local_raise',{tabs:JSON.stringify(ba.tabs),window_id:t.getSessionID()});}}s.registerStateStorer(function(xa){return l.store(xa,ba);});s.registerStateLoader(function(xa){if(ca(xa))ea();});function va(){}Object.assign(va,h,{isTabPromoted:function(xa){if(xa)return xa==ba.promotedID;return false;},indexOf:function(xa){return ha(xa);},getTab:function(xa){q.isThreadID(xa);var ya=this.indexOf(xa);if(ya>-1){var za=ba.tabs[ya];return Object.assign({},za);}return null;},getEmptyTab:function(){var xa;for(var ya=0;ya<ba.tabs.length;ya++){xa=ba.tabs[ya].id;if(v.isNewEmptyLocalThread(xa))return xa;}xa=r.generateThreadID();v.createNewLocalThread(xa,[]);return xa;},get:function(){var xa=ba.tabs.map(function(ya){var za=Object.assign({},ya);delete za.fragile;if(ba.localRaised)za.raised=ba.localRaised[za.id];return za;});return {tabs:xa,promoted:ba.promotedID};},promoteThreadInPlaceOfThread:function(xa,ya,za,ab){q.isThreadID(xa);q.isThreadID(ya);da(function(){var bb=ha(xa),cb=ha(ya);if(ab){ba.promotedID=xa;}else if(ba.promotedID===ya)return true;var db=ba.tabs[bb];if(za){q.isThreadID(za);var eb=ha(za),fb=ba.tabs[cb];ba.tabs[cb]=db;ba.tabs.splice(bb,1);ba.tabs.splice(eb,0,fb);}else{ba.tabs[bb]=ba.tabs[cb];ba.tabs[cb]=db;}return true;});},addListener:function(xa){return va.subscribe('change',xa);}});g.subscribe(p.DUMP_EVENT,function(xa,ya){ya.chat_tabs={promoted:ba.promotedID,tabs:ba.tabs.map(function(za){return Object.assign({},za);}),time:ba.lastChangeTime,max_load_age:y};});function wa(){var xa=i.ignoresRemoteTabRaise();if(xa&&!ba.localRaised){aa.log('start_ignore_remote_raise');ba.localRaised={};ea();}else if(!xa&&ba.localRaised){aa.log('stop_ignore_remote_raise');ba.localRaised=null;ea();}}j.register(function(xa){switch(xa.actionType){case m.Types.CLOSE_TAB:pa(xa.threadID,xa.reason);break;case m.Types.CLOSE_ALL_TABS:ra();break;case m.Types.CLOSE_FRAGILE_TABS:sa();break;case m.Types.LOWER_TAB:ta(xa.threadID);break;case m.Types.OPEN_FRAGILE_TAB:ja(xa.threadID);break;case m.Types.OPEN_TAB:q.isThreadID(xa.threadID);da(function(){return ia(xa.threadID);});break;case m.Types.PERSIST_LOCAL_STATE:ua();break;case m.Types.PROMOTE_TAB:q.isThreadID(xa.threadID);da(na.bind(null,xa.threadID));break;case m.Types.RAISE_TAB:ma(xa.threadID,xa.userAction,xa.signatureID);break;}});i.subscribe(i.ON_CHANGED,wa);wa();ca(s.getInitial(),true);if(ba.lastChangeTime===0)ba.lastChangeTime=x-600000;ba.isInitialized=true;e.exports=va;},null);
__d("ChatTabPresence",["AvailableList","ChatTabModel","MercuryIDs"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j={};function k(l){var m=i.getUserIDFromThreadID(l);if(m&&g.shouldUpdateForID(m))g.updateForID(m);}h.addListener(function(){var l=h.get();l.tabs.forEach(function(m){if(m.raised&&!j[m.id])k(m.id);});j={};l.tabs.forEach(function(m){if(m.raised)j[m.id]=true;});});e.exports={};},null);
__d("ChatMentionsNotifications",["fbt","CurrentUser","MercuryParticipants"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j={notifyIfMessageToMe:function(k){var l='fbid:'+h.getID(),m=k.body;i.get(l,function(n){var o=new RegExp(n.short_name,"i");if(o.test(m))j._notify(k);});},_notify:function(k){var l=48,m=k.body;if(m.length>l)m=m.substr(0,l-3)+"...";new Notification(g._("You were tagged in a message!"),{body:m,icon:"http://facebook.com//images/icons-large/fb-xl.png"});}};e.exports=j;},null);
__d("ChatTabViewInstances",["Map"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';e.exports=new g();},null);
__d("ChatNewMessageHandler",["ChatActivity","ChatMentionsNotifications","ChatTabModel","ChatTabViewInstances","JSLogger","MercuryAssert","MercuryBrowserAlerts","UserActivity","MercuryConfig","MercuryThreadlistConstants"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){b.__markCompiled&&b.__markCompiled();var q=k.create('chat_new_message'),r={_notify:function(s,t,u){if(o.DesktopNotificationsGK)h.notifyIfMessageToMe(t);var v=j.get(s);u.view_is_visible=v&&v.isVisible();u.view_is_focused=v&&v.isFocused();if(!u.view_is_visible)q.log('message_to_hidden');u.is_active=g.isActive();m.messageReceived(t);},newMessage:function(s,t){l.isThreadID(s);var u=i.getTab(s),v={thread_id:s,message_id:t.message_id,to_new_tab:!u,to_raised_tab:u?!!u.raised:true};this._notify(s,t,v);q.log('message',v);}};m.subscribe('before-alert',function(s,event){var t=event.threadID,u=j.get(t),v=i.getTab(t),w=p.MESSAGE_NOTICE_INACTIVITY_THRESHOLD;if(v&&v.raised&&u&&u.isVisible()&&u.isFocused()&&n.isActive(w)){u.tryMarkAsRead();event.cancelAlert();}});e.exports=r;},null);
__d("ChatTabLRUManager",["ChatTabViewInstances","ChatTabModel","InitialServerTime","MercuryThreads"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=b('MercuryThreads').get(),k={getLRUVisibleTab:function(l){if(l.hasRoomForRaisedTab())return (void 0);var m=Object.keys(l.getTabsToShow()||{}),n=1*60,o=null,p=Infinity;for(var q=0;q<m.length;q++){var r=m[q],s=j.getThreadMetaNow(r);if(h.isTabPromoted(r))continue;if(!g.get(r).hasEmptyInput()||!s)continue;var t=(i.serverTime-s.timestamp)/1000;if(!s.timestamp||(s.timestamp&&s.timestamp<p&&t>n)){o=s.thread_id;p=s.timestamp;}}return o;}};e.exports=k;},null);
__d("ChatTabPolicy",["ChatBehavior","ChatConfig","JSLogger","MercuryActionType","MercuryLogMessageType","MercuryAssert","MercuryConfig","MercuryGroupThreadMentions","MercuryIDs","MercuryParticipantTypes","MercurySourceType","MercuryThreadInfo","MercuryViewer","MessagingTag","PresencePrivacy","ShortProfiles","MercuryThreadActions"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){b.__markCompiled&&b.__markCompiled();var w=b('MercuryThreadActions').get(),x=i.create('tab_policy');e.exports={messageIsAllowed:function(y,z,aa){var ba=y.thread_id,ca=z.message_id;l.isThreadID(ba);l.isParticipantID(z.author);var da;if(r.isMuted(y)){da={thread_id:ba,message_id:ca,mute_settings:y.mute_settings};x.log('message_thread_muted',da);if(m.GroupChatMentionsGK)n.messageMentionsViewer(z,function(ga){if(ga)aa();});return;}if(y.read_only){da={thread_id:ba,message_id:ca,mode:y.mode};x.log('message_read_only',da);return;}if(z.source==q.EMAIL||z.source==q.TITAN_EMAIL_REPLY){da={thread_id:ba,message_id:ca,source:z.source};x.log('message_source_not_allowed',da);return;}var ea=o.getUserIDFromParticipantID(z.author);if(!ea){x.log('message_bad_author',{thread_id:ba,message_id:ca,user:ea});return;}if(z.action_type!=j.USER_GENERATED_MESSAGE&&!this._messageIsNewlyCreatedGroup(z,y)){da={thread_id:ba,message_id:ca,type:z.action_type};x.log('message_non_user_generated',da);return;}if(y.is_canonical_user&&!g.notifiesUserMessages()){x.log('message_jabber',{thread_id:ba,message_id:ca});w.markSeen(ba,true);return;}if(y.is_canonical&&!y.canonical_fbid){x.log('message_canonical_contact',{thread_id:ba,message_id:ca});return;}if(y.folder!=t.INBOX){x.log('message_folder',{thread_id:ba,message_id:ca,folder:y.folder});return;}var fa=o.getUserIDFromParticipantID(s.getID());v.getMulti([ea,fa],function(ga){if(!u.allows(ea)){x.log('message_privacy',{thread_id:ba,message_id:ca,user:ea});return;}var ha=ga[ea].employee&&ga[fa].employee,ia=h.get('IsWorkUser',false);if(!ha&&!ia&&!ga[ea].isCommercePage&&ga[ea].type!==p.FRIEND){x.log('message_non_friend',{thread_id:ba,message_id:ca,user:ea});return;}aa();});},_messageIsNewlyCreatedGroup:function(y,z){return y.action_type===j.LOG_MESSAGE&&y.log_message_type===k.THREAD_NAME&&z.message_count===1;}};},null);
__d("ChatTabViewEvents",["Arbiter"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';e.exports=new g();},null);
__d("MenuDeprecated",["Event","Arbiter","CSS","DataStore","DOM","HTML","Keys","Parent","Style","UserAgent_DEPRECATED","emptyFunction","Run"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){b.__markCompiled&&b.__markCompiled();var r='menu:mouseover',s=null;function t(da){if(i.hasClass(da,'uiMenuContainer'))return da;return n.byClass(da,'uiMenu');}function u(da){return n.byClass(da,'uiMenuItem');}function v(da){if(document.activeElement){var ea=u(document.activeElement);return da.indexOf(ea);}return -1;}function w(da){return k.find(da,'a.itemAnchor');}function x(da){return i.hasClass(da,'checked');}function y(da){return !i.hasClass(da,'disabled')&&o.get(da,'display')!=='none';}function z(event){var da=document.activeElement;if(!da||!n.byClass(da,'uiMenu')||!k.isInputNode(da)){var ea=u(event.getTarget());ea&&ca.focusItem(ea);}}function aa(da){p.firefox()&&w(da).blur();ca.inform('select',{menu:t(da),item:da});}var ba=function(){ba=q;var da={};da.click=function(event){var ea=u(event.getTarget());if(ea&&y(ea)){aa(ea);var fa=w(ea),ga=fa.href,ha=fa.getAttribute('rel');return (ha&&ha!=='ignore')||(ga&&ga.charAt(ga.length-1)!=='#');}};da.keydown=function(event){var ea=event.getTarget();if(event.getModifiers().any)return;if(!s||k.isInputNode(ea))return;var fa=g.getKeyCode(event),ga;switch(fa){case m.UP:case m.DOWN:var ha=ca.getEnabledItems(s);ga=v(ha);ca.focusItem(ha[ga+(fa===m.UP?-1:1)]);return false;case m.SPACE:var ia=u(ea);if(ia){aa(ia);event.prevent();}break;default:var ja=String.fromCharCode(fa).toLowerCase(),ka=ca.getEnabledItems(s);ga=v(ka);var la=ga,ma=ka.length;while((~ga&&(la=++la%ma)!==ga)||(!~ga&&++la<ma)){var na=ca.getItemLabel(ka[la]);if(na&&na.charAt(0).toLowerCase()===ja){ca.focusItem(ka[la]);return false;}}}};g.listen(document.body,da);},ca=Object.assign(new h(),{focusItem:function(da){if(da&&y(da)){this._removeSelected(t(da));i.addClass(da,'selected');w(da).focus();}},getEnabledItems:function(da){return ca.getItems(da).filter(y);},getCheckedItems:function(da){return ca.getItems(da).filter(x);},getItems:function(da){return k.scry(da,'li.uiMenuItem');},getItemLabel:function(da){return da.getAttribute('data-label',2)||'';},isItemChecked:function(da){return i.hasClass(da,'checked');},autoregister:function(da,ea,fa){da.subscribe('show',function(){ca.register(ea,fa);});da.subscribe('hide',function(){ca.unregister(ea);});},register:function(da,ea){da=t(da);ba();if(!j.get(da,r))j.set(da,r,g.listen(da,'mouseover',z));if(ea!==false)s=da;},setItemEnabled:function(da,ea){if(!ea&&!k.scry(da,'span.disabledAnchor')[0])k.appendContent(da,k.create('span',{className:k.find(da,'a').className+' disabledAnchor'},l(w(da).innerHTML)));i.conditionClass(da,'disabled',!ea);},toggleItem:function(da){var ea=!ca.isItemChecked(da);ca.setItemChecked(da,ea);},setItemChecked:function(da,ea){i.conditionClass(da,'checked',ea);w(da).setAttribute('aria-checked',ea);},unregister:function(da){da=t(da);var ea=j.remove(da,r);ea&&ea.remove();s=null;this._removeSelected(da);},_removeSelected:function(da){ca.getItems(da).filter(function(ea){return i.hasClass(ea,'selected');}).forEach(function(ea){i.removeClass(ea,'selected');});}});e.exports=ca;},null);
__d("ChatTabViewSelector",["Arbiter","ArbiterMixin","CSS","ChatTabActions","CurrentUser","DOM","DataStore","Event","MenuDeprecated","MercuryThreadTitle.react","NubController","React","ChatTabTemplates","Toggler","MercuryThreadInformer","MercuryThreads"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){b.__markCompiled&&b.__markCompiled();var u=b('MercuryThreadInformer').get(),v=b('MercuryThreads').get();function w(x){var y=s[':fb:chat:tab:selector'].build(),z=y.getRoot(),aa=y.getNode('menu'),ba=l.find(aa,'.uiMenuInner'),ca={},da=new q().init(z);i.hide(z);l.insertBefore(x,z);function ea(ha){var ia=0;for(var ja in ca){var ka=ca[ja],la=v.getThreadMetaNow(ja),ma=ka.getNode('unreadCount'),na=(la&&la.unread_count)||0;ia+=na;if(na>9)na='+';i.conditionClass(ma,'invisible_elem',!na);l.setContent(ma,na);}var oa=y.getNode('numMessages');i.conditionShow(oa,ia);l.setContent(oa,ia);}this.setTabData=function(ha){var ia=ca;ca={};if(ha.length<1){i.hide(z);return;}i.show(z);l.empty(ba);ha.forEach(function(la){var ma=s[':fb:chat:tab:selector:item'].build(),na=ma.getNode('content');ca[la.id]=ma;v.getThreadMeta(la.id,function(pa){r.render(r.createElement(p,{thread:pa,useAndSeparator:true,viewer:k.getID()}),na);});l.prependContent(ba,ma.getRoot());m.set(ma.getRoot(),'threadID',la.id);var oa=ma.getNode('closeButton');n.listen(oa,'click',function(event){j.closeTab(la.id,'selector/close-tab');event.kill();});});for(var ja in ia)if(ia.hasOwnProperty(ja)){var ka=ia[ja].getNode('content');ka&&r.unmountComponentAtNode(ka);}da.flyoutContentChanged();l.setContent(y.getNode('numTabs'),ha.length);ea();};function fa(event,ha){if(ha.menu!=aa)return;var ia=m.get(ha.item,'threadID');w.inform('selected',ia);t.hide(z);}function ga(event,ha){o.register(aa);}o.subscribe('select',fa.bind(this));t.listen('show',z,function(){g.inform('layer_shown',{type:'ChatTabSelector'});ga();});t.listen('hide',z,function(){g.inform('layer_hidden',{type:'ChatTabSelector'});});u.subscribe('threads-updated',ea);}Object.assign(w,h);e.exports=w;},null);
__d("ChatTabController",["Arbiter","BanzaiLogger","ChatActivity","ChatConfig","ChatNewMessageHandler","ChatTabActions","ChatTabLRUManager","ChatTabModel","ChatTabPolicy","ChatTabViewEvents","ChatTabViewInstances","ChatTabViewSelector","JSLogger","MercuryViewer","Style","UserAgent_DEPRECATED","VideoCallCore","ChatTabPresence","ChatTypeaheadBehavior","MercuryThreadInformer","MercuryThreadActions","MercuryThreads"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){b.__markCompiled&&b.__markCompiled();b('ChatTabPresence');b('ChatTypeaheadBehavior');var x=b('MercuryThreadInformer').get(),y=b('MercuryThreadActions').get(),z=b('MercuryThreads').get(),aa=j.get('tab_auto_close_timeout')||7200000,ba=s.create('tab_controller');function ca(na,oa,pa){var qa=n.get().tabs,ra=qa[na],sa,ta;if(qa.length===0)return false;var ua=qa.slice(na+1),va=qa.slice(0,na),wa=ua.concat(va);if(!oa)wa.reverse();if(ra)wa.push(ra);for(var xa=0;xa<wa.length;xa++){sa=wa[xa];ta=q.get(sa.id);if(ta&&ta.isVisible()&&(!pa||sa.raised)){ta.focus();return true;}}return false;}function da(na,oa){var pa=oa&&oa.getRightmostHiddenTab();if(pa===na)return null;return pa;}function ea(){return Math.floor(Math.random()*2147483648).toString(16);}function fa(na,oa,pa,qa){l.raiseTab(na,true,pa);var ra=oa&&oa.getLeftmostVisibleTab(),sa=oa&&oa.getTabsToShow();if(sa&&!sa[na]&&ra){n.promoteThreadInPlaceOfThread(na,ra,da(na,oa),true);}else l.promoteTab(na);g.inform('chat/open-tab',na);if(qa)return;var ta=q.get(na);ta&&ta.focus();}function ga(na,oa){if(!n.getTab(na))l.raiseTab(na,false);var pa=oa&&m.getLRUVisibleTab(oa),qa=oa&&oa.getTabsToShow();if(qa&&!qa[na]&&pa)n.promoteThreadInPlaceOfThread(na,pa,da(na,oa));}function ha(na){r.subscribe('selected',function(pa,qa){fa(qa,na);});g.subscribe('page_transition',function(pa,qa){l.closeFragileTabs();});g.subscribe('chat-visibility/go-offline',function(){l.closeAllTabs();});i.subscribe('idle',function(pa,qa){if(qa>aa){var ra=n.get().tabs;ra.forEach(function(sa){var ta=sa.id;z.getThreadMeta(ta,function(ua){if(!ua.unread_count){ba.log('autoclose_idle_seen',{thread_id:ta,idleness:qa});l.closeTab(ta,'autoclose_idle_seen');}});});}});p.subscribe('nub-activated',function(pa,qa){fa(qa,na);});p.subscribe('focus-tab',function(pa,qa){var ra=n.getTab(qa);if(ra&&ra.raised)fa(qa,na,ra.signatureID,false);});function oa(pa,qa){h.log('VideoCallLoggerConfig',{event:'chat_tab_call_click'});w.showOutgoingCallDialog(qa.userID,qa.audioOnly,qa.clickSource);}p.subscribe('video-call-clicked',oa);p.subscribe('interaction-with-tab',function(pa,qa){var ra=n.getTab(qa);ra&&ra.raised&&y.markSeen(qa);});p.subscribe('esc-pressed',function(pa,qa){ba.log('close_esc',{thread_id:qa});var ra=n.indexOf(qa);l.closeTab(qa,'close_esc');setTimeout(function(){ca(ra-1,true,true);},0);});x.subscribe('messages-received',function(pa,qa){for(var ra in qa){var sa=qa[ra];for(var ta=0;ta<sa.length;ta++){var ua=sa[ta];if(ua.author!=t.getID()){if(!ua.is_unread){ba.log('message_already_read',{action_id:ua.action_id,thread_id:ua.thread_id});continue;}z.getThreadMeta(ra,function(va){o.messageIsAllowed(va,ua,function(){ga(ra,na);k.newMessage(ra,ua);});});}}}});x.subscribe('thread-read-changed',function(pa,qa){for(var ra in qa)if(!qa[ra].mark_as_read){ba.log('autoclose_marked_unread',{thread_id:ra});l.closeTab(ra,'autoclose_marked_unread');}});p.subscribe('tab-pressed',function(pa,qa){return !ca(n.indexOf(qa.id),qa.shiftPressed);});g.subscribe(s.DUMP_EVENT,function(pa,qa){qa.chat_controller={auto_close_timeout:aa};});this.openTab=function(pa,qa,ra,sa){fa(pa,qa,ea(),sa);if(ra)ra(q.get(pa));};}if(v.firefox()){var ia=function(){return u.get(document.body,'overflowX')+' '+u.get(document.body,'overflowY');},ja=ia(),ka=function(){var na=ia();if(na!==ja){ja=na;g.inform('overflow-applied-to-body');}};if('MutationObserver' in window){var la=new MutationObserver(ka),ma={attributes:true,attributeFilter:['class','style']};la.observe(document.documentElement,ma);}else document.documentElement.addEventListener('DOMAttrModified',function(event){if(event.getTarget()===document.documentElement&&(event.attrName==='class'||event.attrName==='style'))ka();},false);}e.exports=ha;},null);
__d("ChatTabViewPlaceholder",["DOM","ErrorUtils","React","cx"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';function k(l,m,n,o,p,q){this.$ChatTabViewPlaceholder0={threadID:m,serverThreadID:n,signatureID:o,root:p,prevTab:q};this.$ChatTabViewPlaceholder1={visible:true,raised:true};l.then(function(r){try{var t=new r(this.$ChatTabViewPlaceholder0.threadID,this.$ChatTabViewPlaceholder0.serverThreadID,this.$ChatTabViewPlaceholder0.signatureID,this.$ChatTabViewPlaceholder0.root,this);t.setVisibleState(this.$ChatTabViewPlaceholder1.visible,this.$ChatTabViewPlaceholder1.raised);this.destroy();this.$ChatTabViewPlaceholder2=t.getTabElem();if(this.$ChatTabViewPlaceholder3)this.$ChatTabViewPlaceholder3(this.$ChatTabViewPlaceholder0.threadID,t);}catch(s){h.reportError(s,false);}}.bind(this));this.render(this.$ChatTabViewPlaceholder0.root,this.$ChatTabViewPlaceholder0.prevTab);}k.prototype.getTabElem=function(){return this.$ChatTabViewPlaceholder2;};k.prototype.onBeingReplaced=function(l){this.$ChatTabViewPlaceholder3=l;};k.prototype.updateSignatureID=function(l){this.$ChatTabViewPlaceholder0.signatureID=l;};k.prototype.getScrollTop=function(){return 0;};k.prototype.appendTo=function(l){g.appendContent(l,this.$ChatTabViewPlaceholder2);};k.prototype.insertBefore=function(l){g.insertBefore(l.getTabElem(),this.$ChatTabViewPlaceholder2);};k.prototype.isFocused=function(){return false;};k.prototype.hasEmptyInput=function(){return true;};k.prototype.destroy=function(){i.unmountComponentAtNode(this.$ChatTabViewPlaceholder2);g.remove(this.$ChatTabViewPlaceholder2);};k.prototype.nextTabIs=function(l){var m=l&&l.getTabElem();return !!(this.$ChatTabViewPlaceholder2&&this.$ChatTabViewPlaceholder2.nextSibling===m);};k.prototype.setVisibleState=function(l,m){this.$ChatTabViewPlaceholder1={visible:l,raised:!!m};this.render(this.$ChatTabViewPlaceholder0.root,this.$ChatTabViewPlaceholder0.prevTab);};k.prototype.render=function(l,m){var n=!this.$ChatTabViewPlaceholder1.visible,o=this.$ChatTabViewPlaceholder1.raised,p=(("fbNub")+(' '+"_50-v")+(n?' '+"hidden_elem":'')+(o?' '+"opened":'')+(' '+"placeholder")+(' '+"_50mz"));if(!this.$ChatTabViewPlaceholder2){var q=g.create('div',{className:p});this.$ChatTabViewPlaceholder2=q;i.render(i.createElement("div",null,i.createElement("span",{className:"fbNubButton"}),"opened"+" "+"? (",i.createElement("div",{className:"fbNubFlyout fbDockChatTabFlyout _16bz"},i.createElement("div",{className:"fbNubFlyoutTitlebar"}),i.createElement("div",{className:"fbNubFlyoutBody"})),")"),q);if(m&&m.getTabElem()){this.insertBefore(m);}else this.appendTo(l);}else this.$ChatTabViewPlaceholder2.className=p;};e.exports=k;},null);
__d("ChatTabViewLoader",["Bootloader","ChatTabViewPlaceholder","Promise","Run","requireWeak"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l,m;k('ChatTabView',function(o){return m=o;});var n={make:function(o,p,q,r,s){if(m){return new m(o,p,q,r,s);}else{if(!l)l=new i(function(t){j.onAfterLoad(function(){g.loadModules(["ChatTabView"],function(u){m=u;t(u);});});});return new h(l,o,p,q,r,s);}}};e.exports=n;},null);
__d("ChatTabViewCoordinator",["Arbiter","ChatTabModel","ChatTabViewLoader","ChatTabViewSelector","CSS","JSLogger","VideoCallSupport"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();var n=l.create('chat_tab_coordinator');function o(p,q){var r=new j(p),s={},t=false;function u(){var y=h.get(),z={};y.tabs.forEach(function(ba){z[ba.id]=1;});n.log('process_tab_changed',{model_tabs:Object.keys(z),view_tabs:Object.keys(s)});for(var aa in s)if(!z[aa]){n.log('remove_tab',{tab_id:aa});s[aa].destroy();delete(s[aa]);}v(y);w(y);if(y.tabNeedsFocus&&!y.tabNeedsFocus.isFocused())y.tabNeedsFocus.focus();}function v(y){var z=null;y.tabs.forEach(function(aa){var ba=aa.id,ca=false;if(!s[ba]){n.log('add_tab',{tab_id:ba});s[ba]=i.make(ba,aa.server_id,aa.signatureID,p,z);ca=true;if(s[ba].onBeingReplaced)s[ba].onBeingReplaced(function(ea,fa){s[ea]=fa;});}else s[ba].updateSignatureID(aa.signatureID);if(s[ba].isFocused())y.tabNeedsFocus=s[ba];if(!ca&&!s[ba].nextTabIs(z)){var da=s[ba].getScrollTop();if(z){s[ba].insertBefore(z);}else s[ba].appendTo(p);if(da)s[ba].setScrollTop(da);}z=s[ba];});}function w(y){var z=q.getTabsToShow(y),aa=[],ba=false;y.tabs.forEach(function(ca){if(!z[ca.id]){s[ca.id].setVisibleState(false,ca.raised);aa.push(ca);}});y.tabs.forEach(function(ca){if(z[ca.id]){s[ca.id].setVisibleState(true,ca.raised);ba|=ca.raised;}});r.setTabData(aa);x(ba);}function x(y){if(!y&&t){g.inform('layer_hidden',{type:'ChatTab'});t=false;}else if(y&&!t){g.inform('layer_shown',{type:'ChatTab'});t=true;}}if(m.isVideoCallSupported())k.addClass(p,'videoCallEnabled');q.subscribe('tabs-changed',u);u();}e.exports=o;},null);
__d("TabsViewport",["Arbiter","ArbiterMixin","ChatTabModel","Dock","DOM","DOMDimensions","Event","Parent","Vector","ViewportBounds","areJSONRepresentationsEqual","csx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){b.__markCompiled&&b.__markCompiled();var s=175,t=269,u=0;function v(){return s;}function w(){return t;}function x(y){this._root=y;var z=this._recalculateWidth.bind(this);m.listen(window,'resize',z);j.subscribe('resize',z);g.subscribeOnce('sidebar/initialized',z,g.SUBSCRIBE_NEW);i.subscribe('change',function(){return this._recalculateTabs(true);}.bind(this));this._recalculateWidth();this._initialized=true;}Object.assign(x.prototype,h,{_root:null,_initialized:false,_availableWidth:0,_maxShown:1,_viewState:null,_recalculateWidth:function(){var y=x._getAvailableDockWidth(this._root),z=Math.max(1,Math.floor(y/w())),aa=z!=this._maxShown;if(!this._viewState||aa||y<=this._viewState.usedWidth||y>this._viewState.widthToShowNext){this._availableWidth=y;this._maxShown=z;this._viewState=null;this._recalculateTabs(aa);}},_onTabsChanged:function(){if(this._initialized){this.inform('tabs-changed');this.inform('max-to-show-changed',this._maxShown);this.inform('max-to-show-change-completed');}},_recalculateTabs:function(y){var z=x._getTabsToShow(i.get(),this._availableWidth);if(y||!q(this._viewState,z)){this._viewState=z;this._onTabsChanged();}},getMaxTabsToShow:function(){return this._maxShown;},checkWidth:function(){this._recalculateWidth();},hasRoomForRaisedTab:function(){return this._availableWidth-this._viewState.usedWidth>w();},getTabsToShow:function(){return JSON.parse(JSON.stringify(this._viewState.tabsToShow));},getShowingTabsOrder:function(){var y=i.get(),z=this._viewState.tabsToShow;return y.tabs.filter(function(aa){return z[aa.id];});},getRightmostHiddenTab:function(){var y=i.get(),z=this._viewState.tabsToShow,aa=y.tabs.filter(function(ca){return !z[ca.id];}),ba=aa.shift();return ba?ba.id:null;},getLeftmostVisibleTab:function(){var y=this.getShowingTabsOrder(),z=y.pop();return z?z.id:null;},getRaisedVisibleTabs:function(){var y=[],z=this.getShowingTabsOrder(),aa=z.length;for(var ba=0;ba<aa;ba++)if(i.getTab(z[ba].id).raised)y.push(z[ba].id);return y;},shouldPromoteOnRaise:function(y){if(!this._viewState.tabsToShow[y])return true;if(this._viewState.nextToHide!=y)return false;var z=i.getTab(y),aa=z&&z.raised;return !aa&&(this._availableWidth-this._viewState.usedWidth<w()-v());}});Object.assign(x,{_getAvailableDockWidth:function(y){var z=l.getViewportWithoutScrollbarDimensions().width;z-=p.getLeft()+p.getRight();z-=50;var aa=n.byClass(y,'fbDock'),ba=k.find(aa,"._56ox"),ca=ba?o.getElementDimensions(ba).x:0;z-=ca;var da=k.scry(aa,"._56oy");ca+=o.getElementDimensions(da.pop()).x;var ea=o.getElementDimensions(aa),fa=ea.x-ca;if(fa>u)u=fa;z-=u;z-=15;return Math.max(z,0);},_getTabsToShow:function(y,z){z=Math.max(z,w()+1);function aa(qa,ra){return (qa.raised||!ra)?w():v();}var ba=JSON.parse(JSON.stringify(y.tabs)),ca=-1,da=null;if(y.promoted)ba.forEach(function(qa,ra){if(qa.id===y.promoted){ca=ra;da=qa;}});var ea=0,fa=false,ga=0,ha=!da;ba.forEach(function(qa,ra){var sa=aa(qa,fa);fa=fa||!qa.raised;qa.leftmostOffset=ea+sa;ea+=sa;if(qa.leftmostOffset<z)ga++;ha|=ra==ca;qa.alreadyPlacedPromoted=ha;});function ia(qa,ra,sa){var ta={};for(var ua=0;ua<ra;ua++){var va=qa[ua];if(!va.alreadyPlacedPromoted&&ua==ra-1){ta[sa]=true;}else ta[va.id]=true;}return ta;}var ja=ia(ba,ga,y.promoted),ka=ia(ba,ga-1,y.promoted),la=null;for(var ma in ja)if(!ka[ma])la=ma;var na=ba[ga-1],oa=na?na.leftmostOffset:0,pa=Infinity;if(ga<ba.length)pa=ba[ga].leftmostOffset;return {nextToHide:la,tabsToShow:ja,usedWidth:oa,widthToShowNext:pa};}});e.exports=x;},null);
__d("ChatApp",["CSS","ChatPerfInstrumentation","DOM","JSLogger","Promise","React","csx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();'use strict';var n={init:function(t,u,v){if(this._isInitialized){j.create('chat_app').error('repeated_init');return;}this._rootElem=t;k.resolve().then(function(){return h.init();}).then(function(){return o();}).then(function(){return p(v);}).then(function(){return q(u,t);}).then(function(){return r();}).then(function(){this._isInitialized=this._isLoaded=true;h.logTTI();}.bind(this)).then(function(){return s(v);});},isInitialized:function(){return !!this._isInitialized;},isHidden:function(){return !this._isInitialized||this._isHidden;},hide:function(){if(this.isHidden())return;g.hide(this._rootElem);this._isHidden=true;},unhide:function(){if(this._isInitialized){if(this._isHidden){g.show(this._rootElem);this.tabsViewport.checkWidth();d(['Dock'],function(t){t.resizeAllFlyouts();});this._isHidden=false;}}else if(!this._isLoaded){d(['UIPagelet'],function(t){t.loadFromEndpoint('ChatTabsPagelet','ChatTabsPagelet');t.loadFromEndpoint('BuddylistPagelet','BuddylistPagelet');});this._isLoaded=true;}}};function o(){return new k(function(t){d(['MercuryChannelHandler','MercuryDelayedRoger','MercuryDeliveryState','MercuryParticipants','MercuryStateCheck','MercuryThreads','MercuryUnreadState','MercuryUnseenState'],function(u,v,w,x,y,z,aa,ba){u.get().turnOn();v;w.get();x;z.get();ba.get();aa.get();y.get();t();});});}function p(t){return new k(function(u){d(['MercuryServerPayloadPreprocessor'],function(v){v.get().handleUpdate(t);u();});});}function q(t,u){return new k(function(v){d(['ChatTabController','ChatTabViewCoordinator','TabsViewport','MNCommerceDialogContainer.react','P2PDialogContainer.react'],function(w,x,y,z,aa){n.tabsViewport=new y(t);n.tabViewCoordinator=new x(t,n.tabsViewport);n.tabController=new w(n.tabsViewport);var ba=i.find(u,"._26-x");l.render(l.createElement(z,null),ba);var ca=i.find(u,"._26-y");l.render(l.createElement(aa,null),ca);v();});});}function r(){return new k(function(t){d(['HotLikeSound','ChatOptions'],function(u,v){u.setCheckSoundEnabledFunc(function(){return v.getSetting('sound');});t();});});}function s(t){return new k(function(u){if(!t.threads_to_auto_open||!n.tabsViewport.hasRoomForRaisedTab())u();d(['ChatOpenTab'],function(v){v.openThread(t.threads_to_auto_open.thread_fbid,"autoOpenTab",'',null,true);u();});});}e.exports=n;},null);
__d("ChatEmployeeAwayWarning",["MercuryIDs","MercuryParticipants","MercuryViewer"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j={updateEmployeeAwayWarning:function(k,l,m){h.get(i.getID(),function(n){var o=n.employee;if(o)h.getMulti(k.participants,function(p){var q=false,r=g.getUserIDFromThreadID(k.thread_id);if(!r)return;var s='fbid:'+r;for(var t in p)if(s==p[t].id&&p[t].is_employee_away)q=true;if(q){l();}else m();});});}};e.exports=j;},null);
__d("ChatPrivacyActionController",["ChatVisibility","JSLogger","PresencePrivacy"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=function(k,l){this._userID=k;this._logger=h.create('blackbird');this._getState=function(){if(g.isOnline())return i.allows(this._userID)?j.NORMAL:j.BLOCKED;return j.OFFLINE;};this._togglePrivacy=function(){var m=this._getState();switch(this._getState()){case j.OFFLINE:if(g.isOnline()){this._logger.error('tabs_already_online');break;}this._logger.log('tabs_go_online',{tab_id:this._userID});g.goOnline(function(){if(!i.allows(this._userID)){if(this._getState()!==j.BLOCKED)this._logger.error('privacy_action_controller_blocked_inconsistency');this._togglePrivacy();}}.bind(this));break;case j.BLOCKED:i.allow(this._userID);this._logger.log('tabs_unblock',{tab_id:this._userID});break;case j.NORMAL:i.disallow(this._userID);this._logger.log('tabs_block',{tab_id:this._userID});break;}};setTimeout(function(){var m=function(){l&&l(this._getState());}.bind(this);m();this._subscribeToken=i.subscribe('privacy-changed',m);}.bind(this),0);};j.OFFLINE='offline';j.BLOCKED='blocked';j.NORMAL='normal';Object.assign(j.prototype,{togglePrivacy:function(){this._logger.log('gear_menu_toggle_privacy',{tab_id:this._userID});this._togglePrivacy();},destroy:function(){this._subscribeToken&&i.unsubscribe(this._subscribeToken);}});e.exports=j;},null);
__d("ChatDateBreak.react",["ChatConfig","React","Timestamp.react","cx","formatDate","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m=h,n=m.PropTypes,o=h.createClass({displayName:"ChatDateBreak",propTypes:{date:n.instanceOf(Date).isRequired},shouldComponentUpdate:function(p){return this.props.date.getTime()!==p.date.getTime();},render:function(){var p=this.props.date,q;if(g.get('webmessenger_chat_tab_redesign')){q=k(this.props.date,{today:'g:ia',withinWeek:'D g:ia',thisYear:'M jS, g:ia',older:'m/d/Y g:ia'});return (h.createElement("time",{className:l(this.props.className,"_5w-5")},h.createElement("span",{className:"_5w-6"},q)));}q=k(p,{today:'g:ia',withinWeek:'l g:ia',thisYear:'F jS, g:ia',older:'F j, Y g:i a'});var r=Math.round(p.getTime()/1000);return (h.createElement("div",h.__spread({},this.props,{className:l(this.props.className,"_5w-5")}),h.createElement("div",{className:"_5w-6"},h.createElement(i,{time:r,verbose:q,text:q}))));}});e.exports=o;},null);
__d("MessageBubbleMixin",["DOMDimensions","React"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';var i=2,j={getInitialState:function(){return {bubbleWidth:null};},componentDidMount:function(){this._restyleBubble(this.props);},componentDidUpdate:function(k){if(k.maxWidth!==this.props.maxWidth||k.body!==this.props.body||(!k.attachments&&this.props.attachments))this._restyleBubble(k);},_restyleBubble:function(k){if(this.props.attachments){this.setState({bubbleWidth:null});return;}var l=h.findDOMNode(this.refs.bubble);if(k.maxWidth!==this.props.maxWidth||g.getElementDimensions(l).width>this.props.maxWidth){var m=this.props.maxWidth;this.setState({bubbleWidth:m},this._shrinkBubble);return;}this._shrinkBubble();},_shrinkBubble:function(){var k=h.findDOMNode(this.refs.bubble),l=g.getElementDimensions(k).width,m=h.findDOMNode(this.refs.content),n=(m)?(g.getElementDimensions(m).width+g.measureElementBox(h.findDOMNode(this.refs.contentWrapper),'width',true,false,false)):0,o=n+i;if(n>0&&o<this.props.maxWidth&&l-o-this.getBoxWidth()>0)this.setState({bubbleWidth:o});}};e.exports=j;},null);
__d("ChatBubble.react",["DOMDimensions","MercuryMessageBody.react","MessageBubbleMixin","React","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';var m=j,n=m.PropTypes,o=null,p=j.createClass({displayName:"ChatBubble",mixins:[i],propTypes:{attachments:n.node,body:n.string,maxWidth:n.number.isRequired,threadID:n.string},_renderContent:function(){if(!this.props.body)return null;return (j.createElement("div",{className:"_d97",ref:"contentWrapper"},j.createElement("span",{className:"_5yl5",ref:"content"},j.createElement(h,{body:this.props.body,ranges:this.props.ranges,threadID:this.props.threadID}))));},render:function(){return (j.createElement("div",j.__spread({},this.props,{className:l("_5w1r",this.props.className),ref:"bubble",style:{maxWidth:this.props.maxWidth,width:this.state.bubbleWidth}}),this._renderContent(),this.props.attachments));},contentWraps:function(){var q=j.findDOMNode(this.refs.content),r=q.getClientRects(),s=g.getElementDimensions(q).height;return (r&&r.length>1&&r[0].height<s);},getBoxWidth:function(){if(!o)o=g.measureElementBox(j.findDOMNode(this.refs.bubble),'width',true,true,false);return o;}});e.exports=p;},null);
__d("ChatMessage.react",["BootloadedComponent.react","ChatAnimatedGifs","ChatAuthorPhotoBlock.react","ChatBubble.react","ChatConfig","CSS","ImmutableObject","JSResource","MercuryAttachment","MercuryAttachmentType","MercuryErrorInfo","MercuryIDs","MercuryMessageError.react","MercuryMessageInfo","MercuryShareStyleMap","MercuryDisplayTimeFilterMessageRenderer","React","XUISpinner.react","cx","isRTL","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa){b.__markCompiled&&b.__markCompiled();'use strict';var ba=w,ca=ba.PropTypes,da=w.createClass({displayName:"ChatMessage",propTypes:{message:ca.instanceOf(m).isRequired,maxBubbleWidth:ca.number.isRequired,onAttachmentLoad:ca.func,onStickerClick:ca.func},componentDidMount:function(){l.conditionClass(w.findDOMNode(this),"_2cnu",this.isOneLine());},isOneLine:function(){var fa=this.props.message;return (t.isInbound(fa)&&!this.refs.attachmentsInside&&this.refs.bubble&&!this.refs.bubble.contentWraps());},shouldComponentUpdate:function(fa,ga){return fa.message!==this.props.message;},render:function(){var fa=this.props.message,ga=t.isInbound(fa),ha=r.isGroupChat(fa.thread_id),ia=z(fa.body),ja=q.hasErrorStatus(fa),ka=(("_5wd4")+(ga?' '+"_1nc7":'')+(!ga?' '+"_1nc6":'')+(ga&&ha?' '+"_5ysy":'')+(ja?' '+"_1zcs":'')+(ia?' '+"direction_rtl":'')+(!ia?' '+"direction_ltr":''));if(k.get('webmessenger_chat_tab_redesign'))return (w.createElement("div",{className:aa(this.props.className,ka)},this._renderInner(),this._renderUndertext()));return (w.createElement(i,w.__spread({},this.props,{authorID:fa.author,className:aa(this.props.className,ka),hideName:!ga||!ha,hidePhoto:!ga,timestamp:fa.timestamp}),this._renderInner(),this._renderUndertext()));},_renderInner:function(){var fa=this.props.message;if(fa.is_filtered_content)return (w.createElement("div",{className:"_5wd9 uiBoxYellow clearfix",ref:"inner"},v.renderFilteredContent(fa)));return (w.createElement("div",{className:"_5wd9",ref:"inner"},this._renderBubble(),this._renderAttachments('outside')));},_renderUndertext:function(){if(this.props.message.is_filtered_content)return null;return (w.createElement("div",{className:"_3ry4",ref:"undertext"},w.createElement(s,{className:"_5wda clearfix",message:this.props.message,ref:"status"}),this._renderSpoofWarning()));},_renderSpoofWarning:function(){return (this.props.message.is_spoof_warning?w.createElement(g,{bootloadPlaceholder:w.createElement("span",null),bootloadLoader:n('MercurySpoofWarning.react'),authorID:this.props.message.author,className:"_5wdb"}):null);},_getAttachmentPlaceholder:function(){return (w.createElement("div",{style:{padding:'20px',text_align:'center'}},w.createElement(x,null)));},_renderAttachments:function(fa){var ga=this.props.message,ha=fa=='inside'?'attachmentsInside':'attachmentsOutside',ia=o.get(ga).filter(function(ja){var ka=o.isBubblePreferred(ja);if(!k.get('webmessenger_chat_tab_redesign'))ka=ka||ga.body;return (ka&&fa==='inside')||(!ka&&fa==='outside');});if(ia.length>0)return (w.createElement(g,{bootloadPlaceholder:this._getAttachmentPlaceholder(),bootloadLoader:n('MercuryAttachments.react'),className:((fa==='outside'?"_3e7u":'')+(!!ga.body?' '+"_16ys":'')),isChat:true,message:ga,attachments:ia,ref:ha,onAttachmentLoad:this.props.onAttachmentLoad,onStickerClick:this.props.onStickerClick,maxWidth:this.props.maxBubbleWidth}));},_renderBubble:function(){var fa=this.props.message,ga=fa.body,ha=this._renderAttachments('inside'),ia=t.isInbound(fa);if(h.shouldHideBody(fa))ga='';if(ga||ha)return (w.createElement("div",{className:"_5wde"},w.createElement(j,{attachments:ha,body:ga,className:(("_5wdf")+(ea(fa,ia)?' '+"_3okg":'')),maxWidth:this.props.maxBubbleWidth,ranges:fa.ranges,ref:"bubble",threadID:fa.thread_id})));}});function ea(fa,ga){if(k.get('webmessenger_chat_tab_redesign'))return false;var ha=o.get(fa);if(!fa.body&&ha)return !ha.some(function(ia){if(ia.attach_type!==p.SHARE||!ia.share)return false;var ja=u.getStyleFactory(ia.share);if(ja){var ka=ja.factory;return (ka.requiresNoBubbleTail&&ka.requiresNoBubbleTail(ia,ga));}return false;});return true;}e.exports=da;},null);
__d("MercuryLogMessageRenderer",["Bootloader","CSS","HovercardLink","MercuryViewer","MessagesViewer","MercuryLogMessageType","MercuryParticipants","React","Image.react","TextWithEntities.react","TooltipLink.react","cx","fbt","ix"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){b.__markCompiled&&b.__markCompiled();var u={renderText:function(ka,la){switch(ka.log_message_type){case l.SUBSCRIBE:x(ka,la);break;case l.UNSUBSCRIBE:ca(ka,la);break;case l.THREAD_NAME:da(ka,la);break;case l.THREAD_IMAGE:ea(ka,la);break;case l.WALLPAPER:fa(ka,la);break;case l.SERVER_ERROR:ga(ka,la);break;case l.GENERIC_ADMIN_TEXT:ha(ka,la);break;default:g.loadModules(["MercurySpecialLogMessageRenderer"],function(ma){ma.renderText(ka,la);});break;}},renderIcon:function(ka){return (n.createElement(o,{className:v(ka),src:t('images/spacer.gif')}));},renderLegacy:function(ka,la,ma,na){v(na).split(' ').forEach(function(oa){return oa&&h.addClass(ka,oa);});this.renderText(na,function(oa){n.render(n.createElement("span",null,oa),la);});this.renderAttachmentLegacy(ma,na);},renderAttachmentLegacy:function(ka,la){if(la.log_message_type==l.THREAD_IMAGE){var ma=la.log_message_data.image;if(ma&&ma.preview_url){n.render(n.createElement(o,{className:"_z6a",onClick:function(){return w(ma);},src:ma.preview_url}),ka);h.show(ka);}}}};e.exports=u;function v(ka){var la=ka.log_message_type,ma=ka.log_message_data;return (("_5wzu")+(la==l.SUBSCRIBE?' '+"_5wzj":'')+(la==l.UNSUBSCRIBE?' '+"_5wzk":'')+(la==l.THREAD_NAME?' '+"_5wzl":'')+(la==l.THREAD_IMAGE?' '+"_5wzm":'')+(la==l.VIDEO_CALL&&ma.answered?' '+"_5wzn":'')+(la==l.VIDEO_CALL&&!ma.answered?' '+"_5wzo":'')+(la==l.PHONE_CALL&&ma.answered?' '+"_5wzp":'')+(la==l.PHONE_CALL&&!ma.answered?' '+"_5wzq":'')+(la==l.SERVER_ERROR?' '+"_5wzr":''));}function w(ka){k.bootstrapWithConfig({src:ka.preview_url,endpoint:ka.url,fbid:ka.metadata.fbid,dimensions:ka.metadata.dimensions,disablePaging:true},null);}function x(ka,la){var ma=ja(ka.log_message_data.added_participants);switch(ma.length){case 1:y(ka,la,ma);break;case 2:z(ka,la,ma);break;case 3:aa(ka,la,ma);break;default:ba(ka,la,ma);break;}}function y(ka,la,ma){var na=[ka.author,ma[0]];m.getMulti(na,function(oa){if(ka.author==j.getID()){la(s._("You added {subscriber1}.",[s.param("subscriber1",ia(oa[ma[0]]))]));}else if(ma[0]==j.getID()){la(s._("{actor} added you.",[s.param("actor",ia(oa[ka.author]))]));}else la(s._("{actor} added {subscriber1}.",[s.param("actor",ia(oa[ka.author])),s.param("subscriber1",ia(oa[ma[0]]))]));});}function z(ka,la,ma){var na=[ka.author].concat(ma);m.getMulti(na,function(oa){if(ka.author==j.getID()){la(s._("You added {subscriber1} and {subscriber2}.",[s.param("subscriber1",ia(oa[ma[0]])),s.param("subscriber2",ia(oa[ma[1]]))]));}else if(ma[0]==j.getID()){la(s._("{actor} added you and {subscriber2}.",[s.param("actor",ia(oa[ka.author])),s.param("subscriber2",ia(oa[ma[1]]))]));}else la(s._("{actor} added {subscriber1} and {subscriber2}.",[s.param("actor",ia(oa[ka.author])),s.param("subscriber1",ia(oa[ma[0]])),s.param("subscriber2",ia(oa[ma[1]]))]));});}function aa(ka,la,ma){var na=[ka.author].concat(ma);m.getMulti(na,function(oa){if(ka.author==j.getID()){la(s._("You added {subscriber1}, {subscriber2} and {subscriber3}.",[s.param("subscriber1",ia(oa[ma[0]])),s.param("subscriber2",ia(oa[ma[1]])),s.param("subscriber3",ia(oa[ma[2]]))]));}else if(ma[0]==j.getID()){la(s._("{actor} added you, {subscriber2} and {subscriber3}.",[s.param("actor",ia(oa[ka.author])),s.param("subscriber2",ia(oa[ma[1]])),s.param("subscriber3",ia(oa[ma[2]]))]));}else la(s._("{actor} added {subscriber1}, {subscriber2} and {subscriber3}.",[s.param("actor",ia(oa[ka.author])),s.param("subscriber1",ia(oa[ma[0]])),s.param("subscriber2",ia(oa[ma[1]])),s.param("subscriber3",ia(oa[ma[2]]))]));});}function ba(ka,la,ma){var na=[ka.author].concat(ma);m.getMulti(na,function(oa){function pa(ra){var sa=n.createElement("div",null,ra.map(function(ta){return n.createElement("div",null,ta.name);}));return (n.createElement(q,{alignH:"center",position:"above",tooltip:sa},s._({"*":"{num} more"},[s.param("num",ra.length,[0])])));}var qa=ma.map(function(ra){return oa[ra];});if(ka.author==j.getID()){la(s._("You added {subscriber1}, {subscriber2} and {more_people}.",[s.param("subscriber1",ia(qa[0])),s.param("subscriber2",ia(qa[1])),s.param("more_people",pa(qa.slice(2)))]));}else if(ma[0]==j.getID()){la(s._("{actor} added you, {subscriber2} and {more_people}.",[s.param("actor",ia(oa[ka.author])),s.param("subscriber2",ia(qa[1])),s.param("more_people",pa(qa.slice(2)))]));}else la(s._("{actor} added {subscriber1}, {subscriber2} and {more_people}.",[s.param("actor",ia(oa[ka.author])),s.param("subscriber1",ia(qa[0])),s.param("subscriber2",ia(qa[1])),s.param("more_people",pa(qa.slice(2)))]));});}function ca(ka,la){var ma=[ka.author],na=ka.log_message_data.removed_participants,oa;if(na.length===1){oa=na[0];ma.push(oa);}m.getMulti(ma,function(pa){var qa=pa[ka.author],ra=pa[oa];if(ka.author==j.getID()){if(!oa||oa==ka.author){la(s._("You left the conversation."));}else la(s._("You removed {name} from the conversation.",[s.param("name",ia(ra))]));}else if(!oa||oa==ka.author){la(s._("{actor} left the conversation.",[s.param("actor",ia(qa))]));}else if(oa==j.getID()){la(s._("{actor} removed you from the conversation.",[s.param("actor",ia(qa))]));}else la(s._("{actor} removed {name} from the conversation.",[s.param("actor",ia(qa)),s.param("name",ia(ra))]));});}function da(ka,la){var ma=ka.log_message_data.name;if(ka.author==j.getID()){if(ma){la(s._("You named the conversation: {name}.",[s.param("name",n.createElement("span",{className:"_5wzs"},n.createElement(p,{renderEmoticons:true,renderEmoji:true,text:ma})))]));}else la(s._("You removed the conversation name."));}else m.get(ka.author,function(na){var oa=ia(na);if(ma){la(s._("{actor} named the conversation: {name}.",[s.param("actor",oa),s.param("name",n.createElement("span",{className:"_5wzs"},ma))]));}else la(s._("{actor} removed the conversation name.",[s.param("actor",oa)]));});}function ea(ka,la){if(ka.author==j.getID()){if(ka.log_message_data.image){la(s._("You changed the conversation picture."));}else la(s._("You removed the conversation picture."));}else m.get(ka.author,function(ma){var na=ia(ma);if(ka.log_message_data.image){la(s._("{actor} changed the conversation picture.",[s.param("actor",na)]));}else la(s._("{actor} removed the conversation picture.",[s.param("actor",na)]));});}function fa(ka,la){if(ka.author==j.getID()){la(s._("You changed the wallpaper."));}else m.get(ka.author,function(ma){var na=ia(ma);la(s._("{actor} changed the wallpaper.",[s.param("actor",na)]));});}function ga(ka,la){la(s._("Couldn't find previous messages."));}function ha(ka,la){la(ka.log_message_body);}function ia(ka,la){var ma=ka.fbid,na=i.constructEndpoint({id:ma});if(ka.href)return (n.createElement("a",{className:"_5wzt",href:ka.href,"data-hovercard":na},la?ka.short_name:ka.name));return ka.name;}function ja(ka){var la=ka.indexOf(j.getID());if(la>0){var ma=ka.filter(function(na){return na!==j.getID();});return [j.getID()].concat(ma);}return ka;}},null);
__d("MercuryLogMessage.react",["DOM","Event","ImmutableObject","MercuryLogMessageRenderer","MercuryConfig","React","cx","emptyFunction","formatDate","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){b.__markCompiled&&b.__markCompiled();'use strict';var q=l,r=q.PropTypes,s=l.createClass({displayName:"MercuryLogMessage",propTypes:{maxWidth:r.number,message:r.instanceOf(i).isRequired,onImageLoad:r.func},getDefaultProps:function(){return {onImageLoad:n};},getInitialState:function(){return {messageText:null};},componentDidMount:function(){this.componentWillReceiveProps(this.props);},componentWillReceiveProps:function(t){j.renderText(t.message,function(u){this.setState({messageText:u});}.bind(this));},shouldComponentUpdate:function(t,u){return (this.state.messageText!=u.messageText||t.maxWidth!==this.props.maxWidth);},componentDidUpdate:function(){var t=l.findDOMNode(this.refs.attachment);j.renderAttachmentLegacy(t,this.props.message);g.scry(t,'img').forEach(function(u){var v=h.listen(u,'load',function(){this.props.onImageLoad(u);v.remove();}.bind(this));}.bind(this));},render:function(){return (l.createElement("div",l.__spread({},this.props,{className:p(this.props.className,"_5ye6"),style:Object.assign({},this.props.style,this._getStyle()),title:o(new Date(this.props.message.timestamp),'g:ia')}),k.ChatTabMessengerStyle?null:j.renderIcon(this.props.message),l.createElement("div",{className:"_5ye7"},k.ChatTabMessengerStyle?j.renderIcon(this.props.message):null,this.state.messageText),l.createElement("div",{className:"_5ye8",ref:"attachment"})));},_getStyle:function(){return this.props.maxWidth?{maxWidth:this.props.maxWidth}:null;}});e.exports=s;},null);
__d("ChatMessageGroup.react",["immutable","ImmutableObject","MercuryParticipants","ChatDateBreak.react","ChatMessage.react","cx","fbt","React","StoreAndPropBasedStateMixin"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();'use strict';var p=n,q=p.PropTypes,r=new h({name:'',href:'#',image_src:''}),s=n.createClass({displayName:"ChatMessageGroup",mixins:[o(i)],propTypes:{activeMessageID:q.string,author:q.string,hasDateBreak:q.bool,isCanonical:q.bool,isFromViewer:q.bool,isPageMessage:q.bool,maxBubbleWidth:q.number,messages:q.instanceOf(g.List).isRequired},statics:{calculateState:function(u){return {participants:t(u)};}},shouldComponentUpdate:function(u,v){return (this.props.activeMessageID!==u.activeMessageID||this.props.isFromViewer!==u.isFromViewer||!g.is(this.props.messages,u.messages)||!g.is(this.state.participants,v.participants));},render:function(){return (n.createElement("div",{className:"_4tdt"},this._renderProfileColumn(),this._renderName(),n.createElement("div",{className:"_4tdv"},this._renderMessages())));},_renderProfileColumn:function(){if(this.props.isFromViewer)return null;var u=this.state.participants.get(this.props.author)||r,v=m._("{name}",[m.param("name",u.name)]);return (n.createElement("a",{"aria-label":v,className:"_4tdw","data-hover":"tooltip","data-tooltip-position":"left",href:u.href,ref:"link"},n.createElement("img",{src:u.image_src,ref:"image"})));},_renderName:function(){if(this.props.isCanonical||this.props.isFromViewer)return null;var u=this.state.participants.get(this.props.messages.first().author);if(!u)return null;return (n.createElement("div",{className:"_4tdx"},u.short_name));},_renderMessages:function(){var u=this.props.messages.size,v=[];this.props.messages.forEach(function(w,x,y){var z=w.message_id===this.props.activeMessageID;if(z&&!(x===0&&this.props.hasDateBreak))v.push(n.createElement(j,{date:new Date(w.timestamp),key:'db:'+w.message_id}));v.push(n.createElement(k,{isFromViewer:this.props.isFromViewer,key:w.message_id,maxBubbleWidth:this.props.maxBubbleWidth,message:w,nextTimestamp:this._getNextTimestamp(y,u,x)}));}.bind(this));return v;},_getNextTimestamp:function(u,v,w){return (w<v-1)?u.get(w+1).timestamp:this.props.nextTimestamp;}});function t(u){return g.Map().withMutations(function(v){u.readReceipts.forEach(function(w,x){v.set(x,i.getOrFetch(x));});v.set(u.author,i.getOrFetch(u.author));});}e.exports=s;},null);
__d("ChatConversation.react",["ChatConfig","ChatDateBreak.react","ChatMessage.react","immutable","MercuryActionType","MercuryLogMessage.react","MercuryShareAttachmentRenderLocations","React","cx","invariant","ChatMessageGroup.react","MessageList.react"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){b.__markCompiled&&b.__markCompiled();'use strict';var q,r;if(g.get('webmessenger_chat_tab_redesign')){q=b('ChatMessageGroup.react');r=b('MessageList.react');}var s=n,t=s.PropTypes,u=1000*60*60,v=n.createClass({displayName:"ChatConversation",propTypes:{contextBanner:t.object,isCanonical:t.bool.isRequired,maxBubbleWidth:t.number.isRequired,messages:t.instanceOf(j.List).isRequired,onAttachmentLoad:t.func,onStickerClick:t.func,viewer:t.string.isRequired},componentWillReceiveProps:function(w){p(w.maxBubbleWidth===this.props.maxBubbleWidth);},render:function(){if(g.get('webmessenger_chat_tab_redesign'))return (n.createElement("div",null,this.props.contextBanner,n.createElement(r,{DateBreak:h,isCanonical:this.props.isCanonical,location:m.CHAT,LogMessage:l,maxBubbleWidth:this.props.maxBubbleWidth,MessageGroup:q,messages:this.props.messages,readReceipts:j.OrderedMap(),viewer:this.props.viewer})));var w=this.props.messages.toArray(),x=[];for(var y=0;y<w.length;y++){var z=w[y],aa=(y>0)?w[y-1]:null;if(!aa||z.timestamp-aa.timestamp>u)x.push(n.createElement(h,{date:new Date(z.timestamp),key:'db:'+z.message_id}));if(z.action_type==k.LOG_MESSAGE){x.push(n.createElement(l,{className:"_5w0o",key:z.message_id,message:z,onImageLoad:this.props.onAttachmentLoad}));}else x.push(n.createElement(i,{key:z.message_id,message:z,maxBubbleWidth:this.props.maxBubbleWidth,onAttachmentLoad:this.props.onAttachmentLoad,onStickerClick:this.props.onStickerClick}));}return (n.createElement("div",null,this.props.contextBanner,x));}});e.exports=v;},null);
__d("MercuryIndicatorController",["ArbiterMixin","DOM","MercuryActionType","MercuryDelayedRoger","MercuryIDs","MercuryMessageSourceTags","MercuryParticipants","MercuryViewer","arrayContains","formatDate","removeFromArray","fbt","MercuryRoger","MercuryThreads","MercuryTypingReceiver"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){b.__markCompiled&&b.__markCompiled();var s=b('MercuryRoger').get(),t=b('MercuryThreads').get(),u=b('MercuryTypingReceiver').get(),v=[];function w(x){this._threadID=x;this._canonicalUser=k.getUserIDFromThreadID(x);v.push(this);}Object.assign(w.prototype,g,{destroy:function(){q(v,this);},setLastMessage:function(x){this._lastMsg=x;this._handleStateChange();},_informStateChanged:function(x){if(x.activity=='none'&&this._currentActivity=='none')return;if(this._lastMsg&&n.isViewer(this._lastMsg.author))x.self_authored=true;this._currentActivity=x.activity;this.inform('state-changed',x);},_notifySentFrom:function(){var x,y,z=this._lastMsg.source_tags||[];if(o(z,l.MESSENGER)){x=h.create('a',{href:'/mobile/messenger','class':'fcg',target:'_blank'},r._("Sent from Messenger"));y='sentFromMobile';}else if(o(z,l.MOBILE)){x=h.create('a',{href:'/mobile','class':'fcg',target:'_blank'},r._("Sent from Mobile"));y='sentFromMobile';}else if(o(z,l.EMAIL)){x=r._("Sent from email");y='sentFromEmail';}else{this._informStateChanged({activity:'none'});return;}this._informStateChanged({activity:y,text:x});},_notifySeenTimestamp:function(x){var y=s.getSeenTimestamp(this._threadID,x[0])*.001,z=Date.now()*.001,aa;if(y<z-518400){aa='M j';}else if(y<z-86400){aa='D g:ia';}else aa='g:ia';this._informStateChanged({activity:'seen-timestamp',text:r._("Seen {timestamp}",[r.param("timestamp",p(y,aa))])});},_nameNormalizer:function(x){var y;m.getMulti(x,function(z){function aa(ca){if(z[ca]!==(void 0)){return z[ca].short_name.toLowerCase();}else return ca;}var ba=x.map(aa);y=function(ca){var da=aa(ca),ea=ba.indexOf(da)!==ba.lastIndexOf(da);return ea?z[ca].name:z[ca].short_name;};});return y;},_notifySeenBy:function(x){var y=this._lastMsg,z=true;m.getMulti(x,function(aa){z=false;if(this._lastMsg!=y)return;var ba=t.getThreadMetaNow(this._threadID),ca=ba?ba.participants.length:0,da=x.length+(y.author!=n.getID()),ea,fa=false,ga=ca>2&&da>=ca-1,ha;if(ba)ha=this._nameNormalizer(ba.participants);if(!ha)ha=function(la){return aa[la].short_name;};if(ga){ea=r._("Seen by everyone");}else if(x.length==1){ea=r._("Seen by {user}",[r.param("user",aa[x[0]].short_name)]);}else if(x.length==2){ea=r._("Seen by {user1}, {user2}",[r.param("user1",aa[x[0]].short_name),r.param("user2",aa[x[1]].short_name)]);}else if(x.length==3){ea=r._("Seen by {user1}, {user2}, {user3}",[r.param("user1",aa[x[0]].short_name),r.param("user2",aa[x[1]].short_name),r.param("user3",aa[x[2]].short_name)]);}else if(x.length>3){var ia=Object.keys(aa).length-2,ja=r._({"*":"{num} more"},[r.param("num",ia,[0])]),ka=h.create('span',{className:'more'},ja);ea=r._("Seen by {user1}, {user2}, {=num more link}",[r.param("user1",aa[x[0]].short_name),r.param("user2",aa[x[1]].short_name),r.param("=num more link",ka)]);fa=true;}this._informStateChanged({activity:'seen-by',text:ea,seenBy:x,tooltip:fa});}.bind(this));z&&this._informStateChanged({activity:'none'});},_notifyTyping:function(x){var y=this._lastMsg,z=true;m.getMulti(x,function(aa){z=false;if(this._lastMsg!=y)return;var ba=t.getThreadMetaNow(this._threadID),ca=ba?ba.participants.length:0,da;if(ba)da=this._nameNormalizer(ba.participants);if(!da)da=function(ja){return aa[ja].short_name;};var ea,fa=false;if(ca>2&&x.length>=ca-1){ea=r._("Everyone is typing...");}else if(x.length==1){ea=r._("{name} is typing...",[r.param("name",aa[x[0]].short_name)]);}else if(x.length==2){ea=r._("{user1} and {user2} are typing...",[r.param("user1",aa[x[0]].short_name),r.param("user2",aa[x[1]].short_name)]);}else if(x.length==3){ea=r._("{user1}, {user2}, and {user3} are typing...",[r.param("user1",aa[x[0]].short_name),r.param("user2",aa[x[1]].short_name),r.param("user3",aa[x[2]].short_name)]);}else if(x.length>3){var ga=Object.keys(aa).length-2,ha=r._({"*":"{num} more"},[r.param("num",ga,[0])]),ia=h.create('a',{href:'#'},ha);ea=r._("{user1}, {user2}, and {=num more link} are typing...",[r.param("user1",aa[x[0]].short_name),r.param("user2",aa[x[1]].short_name),r.param("=num more link",ia)]);fa=true;}this._informStateChanged({activity:'typing',text:ea,typing:x,tooltip:fa});}.bind(this));z&&this._informStateChanged({activity:'none'});},_handleStateChange:function(){var x=i.LOG_MESSAGE;if(!this._lastMsg||this._lastMsg.action_type==x){this._informStateChanged({activity:'none'});return;}if(this._typing&&this._typing.length){this._notifyTyping(this._typing);return;}if(this._canonicalUser&&this._lastMsg.author!=n.getID()){this._notifySentFrom();return;}var y=j.getSeenBy(this._threadID,true);if(y.length)if(this._canonicalUser){this._notifySeenTimestamp(y);return;}else{this._notifySeenBy(y);return;}this._informStateChanged({activity:'none'});}});u.addRetroactiveListener('state-changed',function(x){v.forEach(function(y){var z=x[y._threadID];if(z!==(void 0)){y._typing=z;y._handleStateChange();}});});j.subscribe('state-changed',function(x,y){v.forEach(function(z){y[z._threadID]&&z._handleStateChange();});});e.exports=w;},null);
__d("MercuryLastMessageIndicator.react",["DOM","MercuryIndicatorController","MercuryParticipants","React","TooltipData","cx","emptyFunction","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();var o=j,p=o.PropTypes,q=j.createClass({displayName:"MercuryLastMessageIndicator",propTypes:{hideTyping:p.bool,indicatorWillShow:p.func,indicatorDidShow:p.func,lastMessage:p.object,threadID:p.string.isRequired},getDefaultProps:function(){return {indicatorWillShow:m,indicatorDidShow:m};},getInitialState:function(){return {data:{}};},componentDidMount:function(){this._setup(this.props);},componentWillReceiveProps:function(r){if(r.threadID!=this.props.threadID){this._destroy();this._setup(r);}else if(r.lastMessage!=this.props.lastMessage)this._controller.setLastMessage(r.lastMessage);},componentWillUpdate:function(r,s){if(this.isVisible(r,s))this.props.indicatorWillShow();},componentDidUpdate:function(){if(!this.isVisible())return;this.setText();this.setTooltip();this.props.indicatorDidShow();},componentWillUnmount:function(){this._destroy();},render:function(){return (j.createElement("div",{className:this.getRootClass()},j.createElement("div",{className:"_510h"}),j.createElement("span",{className:"_510f",ref:"text"},"")));},getRootClass:function(){var r=(("_510g")+(this.state.data.self_authored?' '+"_510e":'')),s=this.state.data.activity,t=null;if(String(s).startsWith('seen')){t='seen';}else if(s=='typing'){t=this.props.hideTyping?null:s;}else t=s;return n(r,t,this.props.className);},isVisible:function(r,s){r=r||this.props;s=s||this.state;return (s.data&&s.data.activity!='none'&&!(r.hideTyping&&s.data.activity=='typing'));},setText:function(){if(this.state.data.text)g.setContent(j.findDOMNode(this.refs.text),this.state.data.text);},setTooltip:function(){if(this.state.data.activity=='seen-by'&&this.state.data.tooltip)i.getMulti(this.state.data.seenBy,function(r){var s=g.create('div',null,this.state.data.seenBy.map(function(t){return g.create('div',null,r[t].name);}));k.set(g.find(j.findDOMNode(this),'span.more'),s,'above','center');}.bind(this));},_setup:function(r){this._controller=new h(r.threadID);this._subscription=this._controller.subscribe('state-changed',function(s,t){return this.setState({data:t});}.bind(this));r.lastMessage&&this._controller.setLastMessage(r.lastMessage);},_destroy:function(){this._subscription.unsubscribe();this._controller.destroy();}});e.exports=q;},null);
__d("MessengerContextBannerBootloader",["BootloadedComponent.react","CurrentUser","DOM","immutable","JSResource","MercuryIDs","MercuryParticipants","MercuryThreads","React"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();'use strict';function p(s,t,u,v,w){var x=i.create('div');q(s,t,function(y){o.render(y,x,u(x));},v,w);}function q(s,t,u,v,w,x){x=Object.assign({left:0,position:'absolute',right:0,top:0},x);if(s){n.getForFBID(h.getID()).getThreadMeta(s,function(y){if(!y)return;m.getMulti(y.participants,function(z){var aa=j.Map();aa=aa.withMutations(function(ba){y.participants.forEach(function(ca){ba.set(ca,z[ca]);});});r({contact:aa.get(l.getParticipantIDFromFromThreadID(y.thread_id)),participants:aa,style:x,thread:y},t,u,w);});});}else if(v)r({otherUserID:v,style:x},t,u,w);}function r(s,t,u,v){u(o.createElement(g,o.__spread({bootloadPlaceholder:o.createElement("div",{style:{height:80}}),bootloadLoader:k('MessengerContextBannerContainer.react'),location:t,onResize:v,viewer:h.getID()},s)));}e.exports={bootload:p,getBootloadedComponent:q};},null);
__d("ChatTabMessagesView",["Animation","Arbiter","BanzaiLogger","CSS","ChatConversation.react","ChatPerfInstrumentation","ChatTabViewEvents","ChatTypingIndicators.react","ChatWelcomeMessage","CurrentUser","DOM","Event","immutable","MercuryLastMessageIndicator.react","LiveTimer","MercuryIDs","MercuryViewer","MercuryMessageStore","MessengerContextBannerBootloader","MessengerHotLikePreviewEvents","React","ReactComponentRenderer","MercuryShareAttachmentRenderLocations","Scroll","ServerTime","StickerActions","StickerState","StickerStoreController","Style","SubscriptionsHandler","UserAgent_DEPRECATED","arrayContains","getElementPosition","throttle"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na){b.__markCompiled&&b.__markCompiled();'use strict';var oa=70,pa=null,qa=20;function ra(ta){if(pa===null){var ua=ta.childNodes[0];ia.set(ta,'overflow','scroll');pa=ua.clientWidth-oa;ia.set(ta,'overflow','');}return pa;}function sa(ta,ua,va,wa,xa,ya,za,ab,bb){this.loadingIcon=xa;this.threadID=ta;this.sheetController=ua;this.scrollContainer=va;this.conversationElem=wa;this.contextBannerEligible=bb;this.contextBannerElem=null;this.tabView=ab;u.restart(ea.get()/1000);this._loadingMoreMessages=false;this._initialLoadFinished=false;function cb(){m.inform('interaction-with-tab',ta);}this._subscriptions=new ja();this._subscriptions.addSubscriptions(h.subscribe('overflow-applied-to-body',this.scrollToBottom.bind(this)),r.listen(this.scrollContainer,'mousedown',cb));if(ka.firefox()){var db=('WheelEvent' in window)?'wheel':'DOMMouseScroll';this.scrollContainer.addEventListener(db,cb,false);}else this._subscriptions.addSubscriptions(r.listen(this.scrollContainer,'mousewheel',cb));this._subscriptions.addSubscriptions(r.listen(this.scrollContainer,'scroll',na(this.scrolling,50,this)));var eb;aa.render(aa.createElement(n,{threadID:this.threadID,indicatorsWillShow:function(){return eb=this.isScrolledToBottom();}.bind(this),indicatorsDidShow:function(){return eb&&this.scrollToBottom(true);}.bind(this),viewer:p.getID()}),za);var fb;this.lastMessageIndicatorNode=ya;this.lastMessageIndicator=aa.render(aa.createElement(t,{threadID:this.threadID,hideTyping:true,indicatorWillShow:function(){return fb=this.isScrolledToBottom();}.bind(this),indicatorDidShow:function(){return fb&&this.scrollToBottom(true);}.bind(this)}),this.lastMessageIndicatorNode);this.initializeConversation();}Object.assign(sa.prototype,{initializeConversation:function(){this._store=new x(this.threadID);this._conversation=new ba(k,this.conversationElem);this._conversation.setProps({isCanonical:v.isCanonical(this.threadID),maxBubbleWidth:ra(this.scrollContainer),messages:s.List(),onAttachmentLoad:function(ta){var ua=this.scrollContainer,va=da.getTop(ua)+ua.clientHeight;if(va+ta>=ua.scrollHeight)this.scrollToBottom();}.bind(this),onStickerClick:this._onStickerClick.bind(this),viewer:p.getID()});this._subscriptions.addSubscriptions(this._store.subscribe(this._updateMessageFromStore.bind(this)),z.addListener(z.START,function(ta,ua){if(this.threadID!==ua)return;this._likePreview=ta;this._conversation.setProps({messages:this._getNormalizedMessages()},this.scrollToBottom.bind(this));this.scrollToBottom();clearInterval(this._scrollToBottomInterval);this._scrollToBottomInterval=setInterval(this.scrollToBottom.bind(this),50);}.bind(this)),z.addListener(z.STOP,function(ta){if(this.threadID!==ta)return;this._likePreview=null;}.bind(this)),z.addListener(z.FINISH_ANIMATION,function(ta){clearInterval(this._scrollToBottomInterval);}.bind(this)),z.addListener(z.REMOVE,function(ta){if(this.threadID!==ta)return;clearInterval(this._scrollToBottomInterval);this._likePreview=null;this._conversation.setProps({messages:this._getNormalizedMessages()});}.bind(this)));},_updateMessageFromStore:function(ta){if(ta.eventType==x.MESSAGES_RECEIVED&&ta.allFromOthers&&!this.isScrolledToBottom()){this.sheetController.openNewMessagesSheet();this._newMessagesSheetOpened=true;}if(ta.eventType==x.MESSAGES_REORDERED){this._loadingMoreMessages=false;j.hide(this.loadingIcon);}var ua=this.isScrolledToBottom(),va=this._getLoadingHeight(),wa=this.scrollContainer.scrollHeight,xa=da.getTop(this.scrollContainer);this._messages=ta.messages;var ya=o.getWelcomeMessage(this.threadID);if(ya)this._messages.push(ya);this._conversation.setProps({messages:this._getNormalizedMessages()},function(){if(ua||this._shouldScrollToBottom){this.scrollToBottom();this.setShouldScrollToBottom(false);}else if(ta.eventType==x.MESSAGES_REORDERED)this.scrollToPosition(this.scrollContainer.scrollHeight-wa-va+xa);if(!this._initialLoadFinished){this._initialLoadFinished=true;l.logCHAT_CONVERSATION_TTI();}if(this._store.hasFetchedAll()&&this.contextBannerEligible)this.renderContextBanner(this.threadID);}.bind(this));this.lastMessageIndicator.setProps({lastMessage:this._messages.length>0?this._messages[this._messages.length-1]:null});if(ta.eventType==x.MESSAGES_RECEIVED&&this._shouldShowStickerReplyNUX(this._messages)&&this.tabView&&this.tabView.isFocused())this.tabView.showStickerReplyNUX();if(ta.eventType==x.MESSAGES_CHANGED)this._checkToAnimateSticker();},setShouldScrollToBottom:function(ta){this._shouldScrollToBottom=ta;},scrolling:function(){this._checkToAnimateSticker();if(this.isScrolledNearTop()&&!this._loadingMoreMessages&&!this.isScrolledToBottom()&&!this.tabView._isDragDropActive)if(this._store.fetchMoreMessages()){j.show(this.loadingIcon);this._loadingMoreMessages=true;}if(!this._newMessagesSheetOpened)return;if(this.isScrolledToBottom()){this.sheetController.closeNewMessagesSheet();this._newMessagesSheetOpened=false;}},getScrollTop:function(){return this.scrollContainer&&da.getTop(this.scrollContainer);},destroy:function(){q.scry(this.conversationElem,'.stickerContainer').forEach(function(ta){return aa.unmountComponentAtNode(ta);});this.unmountContextBanner();aa.unmountComponentAtNode(this.conversationElem);this._subscriptions&&this._subscriptions.release();aa.unmountComponentAtNode(this.lastMessageIndicatorNode);delete this.lastMessageIndicator;this._store&&this._store.destroy();this.destroyed=true;},_getLoadingHeight:function(){return this.loadingHeight||this.loadingIcon.clientHeight;},_shouldShowStickerReplyNUX:function(ta){if(!ga.shouldShowStickerReplyNUX()||!ta.length)return false;var ua=ta[ta.length-1];if(ua.author===w.getID())return false;if(ua.has_attachment)return ua.attachments.some(function(va){return va.attach_type==='sticker';});return false;},isScrolledToBottom:function(ta){var ua=this.scrollContainer;ta=ta||qa;return da.getTop(ua)+ua.clientHeight>=ua.scrollHeight-ta;},isScrolledNearTop:function(){return da.getTop(this.scrollContainer)<this.scrollContainer.clientHeight;},scrollToBottom:function(ta){this.scrollToPosition(this.scrollContainer.scrollHeight,ta);},scrollToPosition:function(ta,ua){this._scrollTopAnimation&&this._scrollTopAnimation.stop();if(ua===true){this._scrollTopAnimation=(new g(this.scrollContainer)).to('scrollTop',ta).ease(g.ease.end).duration(400).go();}else da.setTop(this.scrollContainer,ta);},_onStickerClick:function(ta,ua){if(!ta)return;i.log('StickersLoggerConfig',{event:'click_sticker',packid:ta,stickerid:ua});var va=this.tabView;ga.onTrayDataReady(function(){if(la(ga.getPackIDsInTray(),ta)){var wa=ga.getPack(ta);if(wa&&wa.isPromoted)fa.addPack(ta);va.setStickersFlyoutPackID(ta);}else ha.showStore(ta);});},_checkToAnimateSticker:function(){var ta=ma(this.scrollContainer);h.inform('chatScrolled/'+this.threadID,{scrollTop:da.getTop(this.scrollContainer),top:ta.y,viewHeight:ta.height});},setNewThreadID:function(ta){this._store.setNewThreadID(ta);},_getNormalizedMessages:function(){if(this._likePreview){this._messages.push(this._likePreview);}else this._messages=this._messages.filter(function(ta){return !ta.is_like_preview;});return s.List(this._messages);},renderContextBanner:function(ta,ua){y.getBootloadedComponent(ta,ca.CHAT,function(va){ia.set(this.conversationElem,'padding-top','80px');this._conversation.setProps({contextBanner:va});}.bind(this),ua,function(va){ia.set(this.conversationElem,'padding-top',va+'px');}.bind(this));},unmountContextBanner:function(){if(this._conversation)this._conversation.setProps({contextBanner:null});}});e.exports=sa;},null);
__d("ChatTabOfficeStatus",["fbt","formatDate","CSS"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';var j=1,k=2,l=3,m={update:function(n,o){if(!n||!o||!o.officeStatus)return;this._updateIcon(n,o);this._updateTooltip(n,o);},_updateIcon:function(n,o){i.removeClass(n,'officeStatusNone');i.removeClass(n,'officeStatusAvailable');i.removeClass(n,'officeStatusSporadic');i.removeClass(n,'officeStatusOutOfOffice');switch(o.officeStatus){case j:i.addClass(n,'officeStatusAvailable');break;case k:i.addClass(n,'officeStatusSporadic');break;case l:i.addClass(n,'officeStatusOutOfOffice');break;default:i.addClass(n,'officeStatusNone');break;}},_updateTooltip:function(n,o){var p='';switch(o.officeStatus){case j:p+=g._("AVAILABLE");p+='\n';break;case k:p+=g._("SPORADIC");p+='\n';break;case l:p+=g._("OFF THE GRID");p+='\n';break;default:p+=g._("UNKNOWN");p+='\n';break;}if(o.officeStatusComment)p+=o.officeStatusComment;if(o.officeStatusLocation)p+=' ('+o.officeStatusLocation+')';if(o.officeStatusComment||o.officeStatusLocation)p+='\n';if(o.officeStatusEndDate){var q=h(o.officeStatusEndDate,'M d, Y');p+=g._("Until {date}",[g.param("date",q)]);}n.setAttribute('aria-label',p);n.setAttribute('data-hover','tooltip');}};e.exports=m;},null);
__d("ChatAddToThreadButton.react",["Link.react","ReactComponentWithPureRenderMixin","React","TrackingNodes","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';var m=i,n=m.PropTypes,o=i.createClass({displayName:"ChatAddToThreadButton",mixins:[h],propTypes:{isFBAtWork:n.bool,onClick:n.func,shown:n.bool},render:function(){var p=this.props.isFBAtWork?l._("Add more co-workers to chat"):l._("Add more friends to chat"),q=j.getTrackingInfo(j.types.ADD_TO_THREAD);return (i.createElement(g,{"aria-label":p,className:(("addToThread")+(' '+"button")+(!this.props.shown?' '+"hidden_elem":'')),"data-ft":q,"data-hover":"tooltip","data-tooltip-alignv":"top",onClick:this.props.onClick}));}});e.exports=o;},null);
__d("ChatArchiveWarning.react",["Image.react","ReactComponentWithPureRenderMixin","React","cx","ix"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l=i,m=l.PropTypes,n=i.createClass({displayName:"ChatArchiveWarning",mixins:[h],propTypes:{isFBAtWork:m.bool,shown:m.bool},render:function(){var o=this.props.isFBAtWork?k('images/chat/tab/archive-grey.png'):k('images/chat/tab/archive.png');return (i.createElement(g,{src:o,className:(("titanArchiveWarning")+(' '+"button")+(!this.props.shown?' '+"hidden_elem":'')),"data-hover":"tooltip","data-tooltip-alignh":"center","aria-label":"All employee-to-employee conversations will be archived"}));}});e.exports=n;},null);
__d("ChatCloseButton.react",["Link.react","ReactComponentWithPureRenderMixin","React","TrackingNodes","fbt"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l=i,m=l.PropTypes,n=i.createClass({displayName:"ChatCloseButton",mixins:[h],propTypes:{onClick:m.func,onKeyUp:m.func,onMouseDown:m.func,active:m.bool},getDefaultProps:function(){return {active:false};},render:function(){var o=j.getTrackingInfo(j.types.CLOSE_BUTTON),p=k._("Press Esc to close"),q=k._("Close tab");return (i.createElement(g,{"aria-label":this.props.active?p:q,className:"close button","data-ft":o,"data-hover":"tooltip","data-tooltip-position":"above",onClick:this.props.onClick,onKeyUp:this.props.onKeyUp,onMouseDown:this.props.onMouseDown}));}});e.exports=n;},null);
__d("ChatFileUploaderMixin",["SubscriptionsHandler","React"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i=h,j=i.PropTypes,k={propTypes:{attachmentsShelf:j.object,onFileUploaderMounted:j.func,onUploadFinished:j.func,onUpdateAttachmentsShelf:j.func,onSubmit:j.func},setUpSubscriptionsHandler:function(l){this._uploader=l;this._subscriptions=new g();this._subscriptions.addSubscriptions(this._uploader.subscribe(['all-uploads-completed','upload-canceled'],this._handleUploadFinished),this._uploader.subscribe('dom-updated',this._handleUpdateAttachmentsShelf),this._uploader.subscribe('submit',this._handleSubmit));this.props.onFileUploaderMounted(this._uploader);},componentWillUnmount:function(){this._subscriptions&&this._subscriptions.release();if(!this.props.uploaderIsFromHigherLevel)this._uploader&&this._uploader.destroy();},isUploading:function(){return this._uploader.isUploading();},getAttachments:function(){return this._uploader.getAttachments();},getImageFiles:function(){return this._uploader.getImageFiles();},getVideoFiles:function(){return this._uploader.getVideoFiles();},getAudioFiles:function(){return this._uploader.getAudioFiles();},getFiles:function(){return this._uploader.getFiles();},removeAttachments:function(){return this._uploader.removeAttachments();},_handleUploadFinished:function(){if(this.props.onUploadFinished)this.props.onUploadFinished();},_handleUpdateAttachmentsShelf:function(){if(this.props.onUpdateAttachmentsShelf)this.props.onUpdateAttachmentsShelf();},_handleSubmit:function(){if(this.props.onSubmit)this.props.onSubmit();}};e.exports=k;},null);
__d("ChatFileUploader.react",["ChatFileUploaderMixin","InlineBlock.react","MercuryConfig","React","cx","createCancelableFunction","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();'use strict';var n=j.createClass({displayName:"ChatFileUploader",mixins:[g],getDefaultProps:function(){return {uploaderIsFromHigherLevel:true};},shouldComponentUpdate:function(){return false;},componentDidMount:function(){this._uploaderCallback=l(this.setUpSubscriptionsHandler);this.props.initFileUploaderFn(j.findDOMNode(this.refs.form),j.findDOMNode(this.refs.input),j.findDOMNode(this.refs.attachID)).then(this._uploaderCallback);},componentWillUnmount:function(){if(this._uploaderCallback)this._uploaderCallback.cancel();},render:function(){return (j.createElement("form",{ref:"form",action:i.upload_url,method:"post"},j.createElement("input",{type:"hidden",ref:"attachID",name:"attach_id"}),j.createElement(h,{className:"_m _4q60 itemLabel"},j.createElement("input",{type:"file",className:"_n",name:"attachment[]",multiple:"true",ref:"input"}),j.createElement("span",{className:"_4q61 itemAnchor"},m._("Add Files...")))));}});e.exports=n;},null);
__d("Dialog",["Animation","Arbiter","AsyncRequest","Button","ContextualThing","CSS","DOM","Event","Focus","Form","HTML","Keys","Locale","Parent","Run","Style","URI","Vector","bind","createArrayFromMixed","emptyFunction","getObjectValues","getOverlayZIndex","removeFromArray","shield","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa){b.__markCompiled&&b.__markCompiled();var ga=function(){var ia=document.body,ja=document.createElement('div'),ka=document.createElement('div');ia.insertBefore(ja,ia.firstChild);ia.insertBefore(ka,ia.firstChild);ja.style.position='fixed';ja.style.top='20px';var la=ja.offsetTop!==ka.offsetTop;ia.removeChild(ja);ia.removeChild(ka);ga=aa.thatReturns(la);return la;};function ha(ia){"use strict";this._show_loading=true;this._auto_focus=true;this._submit_on_enter=false;this._fade_enabled=true;this._onload_handlers=[];this._top=125;this._uniqueID='dialog_'+ha._globalCount++;this._content=null;this._obj=null;this._popup=null;this._overlay=null;this._causal_elem=null;this._previous_focus=null;this._buttons=[];this._buildDialog();if(ia)this._setFromModel(ia);ha._init();}ha.prototype.show=function(){"use strict";this._showing=true;if(this._async_request){if(this._show_loading)this.showLoading();}else this._update();return this;};ha.prototype.showLoading=function(){"use strict";this._loading=true;l.addClass(this._frame,'dialog_loading_shown');this._renderDialog();return this;};ha.prototype.hide=function(){"use strict";if(!this._showing&&!this._loading)return this;this._showing=false;if(this._autohide_timeout){clearTimeout(this._autohide_timeout);this._autohide_timeout=null;}if(this._fade_enabled&&ha._stack.length<=1){this._fadeOut();}else this._hide();return this;};ha.prototype.cancel=function(){"use strict";if(!this._cancelHandler||this._cancelHandler()!==false)this.hide();};ha.prototype.getRoot=function(){"use strict";return this._obj;};ha.prototype.getBody=function(){"use strict";return m.scry(this._obj,'div.dialog_body')[0];};ha.prototype.getButtonElement=function(ia){"use strict";if(typeof ia=='string')ia=ha._findButton(this._buttons,ia);if(!ia||!ia.name)return null;var ja=m.scry(this._popup,'input'),ka=function(la){return la.name==ia.name;};return ja.filter(ka)[0]||null;};ha.prototype.getContentNode=function(){"use strict";return m.find(this._content,'div.dialog_content');};ha.prototype.getFormData=function(){"use strict";return p.serialize(this.getContentNode());};ha.prototype.setAllowCrossPageTransition=function(ia){"use strict";this._cross_transition=ia;return this;};ha.prototype.setAllowCrossQuicklingNavigation=function(ia){"use strict";this._cross_quickling=ia;return this;};ha.prototype.setShowing=function(){"use strict";this.show();return this;};ha.prototype.setHiding=function(){"use strict";this.hide();return this;};ha.prototype.setTitle=function(ia){"use strict";var ja=this._nodes.title,ka=this._nodes.title_inner,la=this._nodes.content;m.setContent(ka,this._format(ia||''));l.conditionShow(ja,!!ia);l.conditionClass(la,'dialog_content_titleless',!ia);return this;};ha.prototype.setBody=function(ia){"use strict";m.setContent(this._nodes.body,this._format(ia));return this;};ha.prototype.setExtraData=function(ia){"use strict";this._extra_data=ia;return this;};ha.prototype.setReturnData=function(ia){"use strict";this._return_data=ia;return this;};ha.prototype.setShowLoading=function(ia){"use strict";this._show_loading=ia;return this;};ha.prototype.setFullBleed=function(ia){"use strict";this._full_bleed=ia;this._updateWidth();l.conditionClass(this._obj,'full_bleed',ia);return this;};ha.prototype.setCausalElement=function(ia){"use strict";this._causal_elem=ia;return this;};ha.prototype.setUserData=function(ia){"use strict";this._user_data=ia;return this;};ha.prototype.getUserData=function(){"use strict";return this._user_data;};ha.prototype.setAutohide=function(ia){"use strict";if(ia){if(this._showing){this._autohide_timeout=setTimeout(ea(this.hide,this),ia);}else this._autohide=ia;}else{this._autohide=null;if(this._autohide_timeout){clearTimeout(this._autohide_timeout);this._autohide_timeout=null;}}return this;};ha.prototype.setSummary=function(ia){"use strict";var ja=this._nodes.summary;m.setContent(ja,this._format(ia||''));l.conditionShow(ja,!!ia);return this;};ha.prototype.setButtons=function(ia){"use strict";var ja,ka;if(!(ia instanceof Array)){ja=z(arguments);}else ja=ia;for(var la=0;la<ja.length;++la)if(typeof ja[la]=='string'){ka=ha._findButton(ha._STANDARD_BUTTONS,ja[la]);ja[la]=ka;}this._buttons=ja;var ma=[];if(ja&&ja.length>0)for(var na=0;na<ja.length;na++){ka=ja[na];var oa=m.create('input',{type:'button',name:ka.name||'',value:ka.label}),pa=m.create('label',{className:'uiButton uiButtonLarge uiButtonConfirm'},oa);if(ka.className){ka.className.split(/\s+/).forEach(function(ra){l.addClass(pa,ra);});if(l.hasClass(pa,'inputaux')){l.removeClass(pa,'inputaux');l.removeClass(pa,'uiButtonConfirm');}if(l.hasClass(pa,'uiButtonSpecial'))l.removeClass(pa,'uiButtonConfirm');}if(ka.icon)m.prependContent(pa,m.create('img',{src:ka.icon,className:'img mrs'}));if(ka.disabled)j.setEnabled(pa,false);n.listen(oa,'click',this._handleButton.bind(this,ka.name));for(var qa in ka)if(qa.indexOf('data-')===0&&qa.length>5)oa.setAttribute(qa,ka[qa]);ma.push(pa);}m.setContent(this._nodes.buttons,ma);this._updateButtonVisibility();return this;};ha.prototype.setButtonsMessage=function(ia){"use strict";m.setContent(this._nodes.button_message,this._format(ia||''));this._has_button_message=!!ia;this._updateButtonVisibility();return this;};ha.prototype._updateButtonVisibility=function(){"use strict";var ia=this._buttons.length>0||this._has_button_message;l.conditionShow(this._nodes.button_wrapper,ia);l.conditionClass(this._obj,'omitDialogFooter',!ia);};ha.prototype.setClickButtonOnEnter=function(ia,ja){"use strict";this._clickOnEnterTarget=ia;if(!this._clickOnEnterListener)this._clickOnEnterListener=n.listen(this._nodes.body,'keypress',function(event){var ka=event.getTarget();if(ka&&ka.id===this._clickOnEnterTarget)if(n.getKeyCode(event)==r.RETURN){this._handleButton(ja);event.kill();}return true;}.bind(this));return this;};ha.prototype.setStackable=function(ia,ja){"use strict";this._is_stackable=ia;this._shown_while_stacked=ia&&ja;return this;};ha.prototype.setHandler=function(ia){"use strict";this._handler=ia;return this;};ha.prototype.setCancelHandler=function(ia){"use strict";this._cancelHandler=ha.call_or_eval.bind(null,this,ia);return this;};ha.prototype.setCloseHandler=function(ia){"use strict";this._close_handler=ha.call_or_eval.bind(null,this,ia);return this;};ha.prototype.clearHandler=function(){"use strict";return this.setHandler(null);};ha.prototype.setPostURI=function(ia,ja){"use strict";if(ja===(void 0))ja=true;if(ja){this.setHandler(this._submitForm.bind(this,'POST',ia));}else this.setHandler(function(){p.post(ia,this.getFormData());this.hide();}.bind(this));return this;};ha.prototype.setGetURI=function(ia){"use strict";this.setHandler(this._submitForm.bind(this,'GET',ia));return this;};ha.prototype.setModal=function(ia){"use strict";this._modal=ia;l.conditionClass(this._obj,'generic_dialog_modal',ia);return this;};ha.prototype.setSemiModal=function(ia){"use strict";if(ia){this.setModal(true);this._semiModalListener=n.listen(this._obj,'click',function(ja){if(!m.contains(this._popup,ja.getTarget()))this.hide();}.bind(this));}else this._semiModalListener&&this._semiModalListener.remove();this._semi_modal=ia;return this;};ha.prototype.setWideDialog=function(ia){"use strict";this._wide_dialog=ia;this._updateWidth();return this;};ha.prototype.setContentWidth=function(ia){"use strict";this._content_width=ia;this._updateWidth();return this;};ha.prototype.setTitleLoading=function(ia){"use strict";if(ia===(void 0))ia=true;var ja=m.find(this._popup,'h2.dialog_title');if(ja)l.conditionClass(ja,'loading',ia);return this;};ha.prototype.setSecure=function(ia){"use strict";l.conditionClass(this._nodes.title,'secure',ia);return this;};ha.prototype.setClassName=function(ia){"use strict";ia.split(/\s+/).forEach(l.addClass.bind(l,this._obj));return this;};ha.prototype.setFadeEnabled=function(ia){"use strict";this._fade_enabled=ia;return this;};ha.prototype.setFooter=function(ia){"use strict";var ja=this._nodes.footer;m.setContent(ja,this._format(ia||''));l.conditionShow(ja,!!ia);return this;};ha.prototype.setAutoFocus=function(ia){"use strict";this._auto_focus=ia;return this;};ha.prototype.setTop=function(ia){"use strict";this._top=ia;this._resetDialogObj();return this;};ha.prototype.onloadRegister=function(ia){"use strict";z(ia).forEach(function(ja){if(typeof ja=='string')ja=new Function(ja);this._onload_handlers.push(ja.bind(this));}.bind(this));return this;};ha.prototype.setAsyncURL=function(ia){"use strict";return this.setAsync(new i(ia));};ha.prototype.setAsync=function(ia){"use strict";var ja=function(ra){if(this._async_request!=ia)return;this._async_request=null;var sa=ra.getPayload(),ta=sa;if(this._loading)this._showing=true;if(typeof ta=='string'){this.setBody(ta);}else this._setFromModel(ta);this._update();}.bind(this),ka=ia.getData();ka.__d=1;ia.setData(ka);var la=ia.getHandler()||aa;ia.setHandler(function(ra){la(ra);ja(ra);});var ma=ia,na=ma.getErrorHandler()||aa,oa=ma.getTransportErrorHandler()||aa,pa=function(){this._async_request=null;this._loading=false;if(this._showing&&this._shown_while_stacked){this._update();}else this._hide(this._is_stackable);}.bind(this),qa=ma.getServerDialogCancelHandler()||pa;ma.setAllowCrossPageTransition(this._cross_transition).setErrorHandler(function(ra){pa();na(ra);}).setTransportErrorHandler(function(ra){pa();oa(ra);}).setServerDialogCancelHandler(qa);ia.send();this._async_request=ia;if(this._showing)this.show();return this;};ha.prototype._format=function(ia){"use strict";if(typeof ia=='string'){ia=q(ia);}else ia=q.replaceJSONWrapper(ia);if(ia instanceof q)ia.setDeferred(true);return ia;};ha.prototype._update=function(){"use strict";if(!this._showing)return;if(this._autohide&&!this._async_request&&!this._autohide_timeout)this._autohide_timeout=setTimeout(y(this,'hide'),this._autohide);l.removeClass(this._frame,'dialog_loading_shown');this._loading=false;this._renderDialog();this._runOnloads();this._previous_focus=document.activeElement;o.set(this._frame);};ha.prototype._runOnloads=function(){"use strict";for(var ia=0;ia<this._onload_handlers.length;++ia)try{this._onload_handlers[ia]();}catch(ja){}this._onload_handlers=[];};ha.prototype._updateWidth=function(){"use strict";var ia=2*(ha._BORDER_WIDTH+ha._HALO_WIDTH);if(this._content_width){ia+=this._content_width;if(!this._full_bleed)ia+=2*ha._PADDING_WIDTH;}else if(this._wide_dialog){ia+=ha.SIZE.WIDE;}else ia+=ha.SIZE.STANDARD;this._popup.style.width=ia+'px';};ha.prototype._updateZIndex=function(){"use strict";if(!this._hasSetZIndex&&this._causal_elem){var ia=ca(this._causal_elem),ja=this._causal_elem;while(!ia&&(ja=k.getContext(ja)))ia=ca(ja);this._hasSetZIndex=ia>(this._modal?400:200);v.set(this._obj,'z-index',this._hasSetZIndex?ia:'');}};ha.prototype._renderDialog=function(){"use strict";this._updateZIndex();this._pushOntoStack();this._obj.style.height=null;if(this._obj&&this._obj.style.display){this._obj.style.visibility='hidden';this._obj.style.display='';this.resetDialogPosition();this._obj.style.visibility='';this._obj.dialog=this;}else this.resetDialogPosition();clearInterval(this.active_hiding);this.active_hiding=setInterval(this._activeResize.bind(this),500);this._submit_on_enter=false;if(this._auto_focus){var ia=p.getFirstElement(this._content,['input[type="text"]','textarea','input[type="password"]']);if(ia){setTimeout(p.focusFirst.bind(this,this._content),0);}else this._submit_on_enter=true;}var ja=x.getElementDimensions(this._content).y+x.getElementPosition(this._content).y;ha._bottoms.push(ja);this._bottom=ja;ha._updateMaxBottom();return this;};ha.prototype._buildDialog=function(){"use strict";this._obj=m.create('div',{className:'generic_dialog',id:this._uniqueID});this._obj.style.display='none';m.appendContent(document.body,this._obj);if(!this._popup)this._popup=m.create('div',{className:'generic_dialog_popup'});this._obj.appendChild(this._popup);l.addClass(this._obj,'pop_dialog');if(s.isRTL())l.addClass(this._obj,'pop_dialog_rtl');m.setContent(this._popup,m.create('div',{className:'pop_container_advanced'},m.create('div',{className:'pop_content',id:'pop_content'})));var ia=m.find(this._popup,'div.pop_content');ia.setAttribute('tabIndex','0');ia.setAttribute('role','alertdialog');this._frame=this._content=ia;var ja=m.create('div',{className:'dialog_loading'},fa._("Loading...")),ka=m.create('span'),la=m.create('h2',{className:'dialog_title hidden_elem',id:'title_'+this._uniqueID},ka),ma=m.create('div',{className:'dialog_summary hidden_elem'}),na=m.create('div',{className:'dialog_body'}),oa=m.create('div',{className:'rfloat mlm'}),pa=m.create('div',{className:'dialog_buttons_msg'}),qa=m.create('div',{className:'dialog_buttons clearfix hidden_elem'},[oa,pa]),ra=m.create('div',{className:'dialog_footer hidden_elem'}),sa=m.create('div',{className:'dialog_content'},[ma,na,qa,ra]);this._nodes={summary:ma,body:na,buttons:oa,button_message:pa,button_wrapper:qa,footer:ra,content:sa,title:la,title_inner:ka};m.setContent(this._frame,[la,sa,ja]);};ha.prototype._activeResize=function(){"use strict";if(this.last_offset_height!=this._content.offsetHeight){this.last_offset_height=this._content.offsetHeight;this.resetDialogPosition();}};ha.prototype.resetDialogPosition=function(){"use strict";if(!this._popup)return;this._resetDialogObj();};ha.prototype._resetDialogObj=function(){"use strict";var ia=2*ha._PAGE_MARGIN,ja=x.getViewportDimensions(),ka=ja.x-ia,la=ja.y-ia,ma=2*ha._HALO_WIDTH,na=x.getElementDimensions(this._content),oa=na.x+ma,pa=na.y+ma,qa=this._top,ra=ka-oa,sa=la-pa;if(sa<0){qa=ha._PAGE_MARGIN;}else if(qa>sa)qa=ha._PAGE_MARGIN+(Math.max(sa,0)/2);var ta=ga();if(!ta)qa+=x.getScrollPosition().y;v.set(this._popup,'marginTop',qa+'px');var ua=ta&&(ra<0||sa<0);l.conditionClass(this._obj,'generic_dialog_fixed_overflow',ua);l.conditionClass(document.documentElement,'generic_dialog_overflow_mode',ua);};ha.prototype._fadeOut=function(ia){"use strict";if(!this._popup)return;try{new g(this._obj).duration(0).checkpoint().to('opacity',0).hide().duration(250).ondone(this._hide.bind(this,ia)).go();}catch(ja){this._hide(ia);}};ha.prototype._hide=function(ia){"use strict";if(this._obj)this._obj.style.display='none';l.removeClass(document.documentElement,'generic_dialog_overflow_mode');clearInterval(this.active_hiding);if(this._bottom){var ja=ha._bottoms;ja.splice(ja.indexOf(this._bottom),1);ha._updateMaxBottom();}if(this._previous_focus&&document.activeElement&&m.contains(this._obj,document.activeElement))o.set(this._previous_focus);if(ia)return;this.destroy();};ha.prototype.destroy=function(){"use strict";this._popFromStack();clearInterval(this.active_hiding);if(this._obj){m.remove(this._obj);this._obj=null;}this._clickOnEnterListener&&this._clickOnEnterListener.remove();if(this._close_handler)this._close_handler({return_data:this._return_data});};ha.prototype._handleButton=function(ia){"use strict";if(typeof ia=='string')ia=ha._findButton(this._buttons,ia);var ja=ha.call_or_eval(ia,ia.handler);if(ja===false)return;if(ia.name=='cancel'){this.cancel();}else if(ha.call_or_eval(this,this._handler,{button:ia})!==false)this.hide();};ha.prototype._submitForm=function(ia,ja,ka){"use strict";var la=this.getFormData();if(ka)la[ka.name]=ka.label;if(this._extra_data)Object.assign(la,this._extra_data);var ma=new i().setURI(ja).setData(la).setMethod(ia).setNectarModuleDataSafe(this._causal_elem).setReadOnly(ia=='GET');this.setAsync(ma);return false;};ha.prototype._setFromModel=function(ia){"use strict";var ja={};Object.assign(ja,ia);for(var ka in ja){if(ka=='onloadRegister'){this.onloadRegister(ja[ka]);continue;}var la=this['set'+ka.substr(0,1).toUpperCase()+ka.substr(1)];la.apply(this,z(ja[ka]));}};ha.prototype._updateBottom=function(){"use strict";var ia=x.getElementDimensions(this._content).y+x.getElementPosition(this._content).y;ha._bottoms[ha._bottoms.length-1]=ia;ha._updateMaxBottom();};ha.prototype._pushOntoStack=function(){"use strict";var ia=ha._stack;if(!ia.length)h.inform('layer_shown',{type:'Dialog'});da(ia,this);ia.push(this);for(var ja=ia.length-2;ja>=0;ja--){var ka=ia[ja];if(!ka._is_stackable&&!ka._async_request){ka._hide();}else if(!ka._shown_while_stacked)ka._hide(true);}};ha.prototype._popFromStack=function(){"use strict";var ia=ha._stack,ja=(ia[ia.length-1]===this);da(ia,this);if(ia.length){if(ja)ia[ia.length-1].show();}else h.inform('layer_hidden',{type:'Dialog'});};ha._updateMaxBottom=function(){"use strict";ha.max_bottom=Math.max.apply(Math,ha._bottoms);};ha.newButton=function(ia,ja,ka,la){"use strict";var ma={name:ia,label:ja};if(ka)ma.className=ka;if(la)ma.handler=la;return ma;};ha.getCurrent=function(){"use strict";var ia=ha._stack;return ia.length?ia[ia.length-1]:null;};ha.hideCurrent=function(){"use strict";var ia=ha.getCurrent();ia&&ia.hide();};ha.bootstrap=function(ia,ja,ka,la,ma,na){"use strict";ja=ja||{};Object.assign(ja,new w(ia).getQueryData());la=la||(ka?'GET':'POST');var oa=t.byClass(na,'stat_elem')||na;if(oa&&l.hasClass(oa,'async_saving'))return false;var pa=new i().setReadOnly(!!ka).setMethod(la).setRelativeTo(na).setStatusElement(oa).setURI(ia).setNectarModuleDataSafe(na).setData(ja),qa=new ha(ma).setCausalElement(na).setAsync(pa);qa.show();return false;};ha.showFromModel=function(ia,ja){"use strict";var ka=new ha(ia).setCausalElement(ja).show();if(ia.hiding)ka.hide();};ha._init=function(){"use strict";this._init=aa;u.onLeave(ea(ha._tearDown,null,false));h.subscribe('page_transition',ea(ha._tearDown,null,true));n.listen(document.documentElement,'keydown',function(event){if(n.getKeyCode(event)==r.ESC&&!event.getModifiers().any){if(ha._escape())event.kill();}else if(n.getKeyCode(event)==r.RETURN&&!event.getModifiers().any)if(ha._enter())event.kill();});n.listen(window,'resize',function(event){var ia=ha.getCurrent();ia&&ia._resetDialogObj();});};ha._findButton=function(ia,ja){"use strict";if(ia)for(var ka=0;ka<ia.length;++ka)if(ia[ka].name==ja)return ia[ka];return null;};ha._tearDown=function(ia){"use strict";var ja=ha._stack.slice();for(var ka=ja.length-1;ka>=0;ka--)if((ia&&!ja[ka]._cross_transition)||(!ia&&!ja[ka]._cross_quickling))ja[ka].hide();};ha._escape=function(){"use strict";var ia=ha.getCurrent();if(!ia)return false;var ja=ia._semi_modal,ka=ia._buttons;if(!ka.length&&!ja)return false;if(ja&&!ka.length){ia.hide();return true;}var la,ma=ha._findButton(ka,'cancel');if(ia._cancelHandler){ia.cancel();return true;}else if(ma){la=ma;}else if(ka.length==1){la=ka[0];}else return false;ia._handleButton(la);return true;};ha._enter=function(){"use strict";var ia=ha.getCurrent();if(!ia||!ia._submit_on_enter)return false;if(document.activeElement!=ia._frame)return false;var ja=ia._buttons;if(!ja)return false;ia._handleButton(ja[0]);return true;};ha.call_or_eval=function(ia,ja,ka){"use strict";if(!ja)return (void 0);ka=ka||{};if(typeof ja=='string'){var la=Object.keys(ka).join(', ');ja=(eval)('({f: function('+la+') { '+ja+'}})').f;}return ja.apply(ia,ba(ka));};Object.assign(ha,{OK:{name:'ok',label:fa._("OK")},CANCEL:{name:'cancel',label:fa._("Cancel"),className:'inputaux'},CLOSE:{name:'close',label:fa._("Close")},NEXT:{name:'next',label:fa._("Next")},SAVE:{name:'save',label:fa._("Save")},SUBMIT:{name:'submit',label:fa._("Submit")},CONFIRM:{name:'confirm',label:fa._("Confirm")},DELETE:{name:'delete',label:fa._("Delete")},_globalCount:0,_bottoms:[0],max_bottom:0});Object.assign(ha,{OK_AND_CANCEL:[ha.OK,ha.CANCEL],_STANDARD_BUTTONS:[ha.OK,ha.CANCEL,ha.CLOSE,ha.SAVE,ha.SUBMIT,ha.CONFIRM,ha.DELETE],SIZE:{WIDE:555,STANDARD:445},_HALO_WIDTH:10,_BORDER_WIDTH:1,_PADDING_WIDTH:10,_PAGE_MARGIN:40,_stack:[]});Object.assign(ha.prototype,{_cross_quickling:false,_cross_transition:false,_loading:false,_showing:false});e.exports=ha;a.Dialog=ha;},null);
__d("WebMessengerDeleteThreadDialog",["Dialog","fbt","MercuryThreadActions"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i=b('MercuryThreadActions').get(),j={show:function(k){var l=[];l.push({name:'delete_conversation',label:h._("Delete Conversation"),handler:function(){return i["delete"](k);}});l.push(g.CANCEL);new g().setTitle(h._("Delete This Entire Conversation?")).setBody(h._("Once you delete your copy of this conversation, it cannot be undone.")).setButtons(l).show();}};e.exports=j;},null);
__d("WebMessengerThreadPermalinks",["MercuryIDs","MessagingTag","URI","WebMessengerPermalinkConstants","WWWBase","requireWeak"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';var m={getThreadURI:function(q,r,s){if(g.isCanonical(q)){n(q,r,s);}else o(q,r,s);}};function n(q,r,s){var t=new i(k.uri),u=g.tokenize(q).value;t.setPath(p(s)+'/'+u);r&&r(t.toString());}function o(q,r,s){l('MercuryThreadIDMap',function(t){var u=t.get();u.getFBIDFromClientID(q,function(v){var w=new i(k.uri);w.setPath(j.getURIPathForThreadID(v,p(s)));r&&r(w.toString());});});}function p(q){var r=j.BASE_PATH;if(q&&q!=h.INBOX)r+='/'+q;return r;}e.exports=m;},null);
__d("XNFXStartForMessageThreadController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/nfx\/start_message_thread\/",{thread_fbid:{type:"String",required:true},responsible_fbid:{type:"Int"},av:{type:"Int"},location:{type:"Enum",enumType:1},__asyncDialog:{type:"Int"}});},null);
__d("NotificationSettingsDialog",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={show:function(h){d(['MercuryThreadActions'],function(i){i.get().openNotificationSettings(h);});}};e.exports=g;},null);
__d("ChatTabMenu.react",["AsyncDialog","AsyncRequest","Bootloader","ChatFileUploader.react","ChatPrivacyActionController","ChatTabActions","Dialog","MercuryConfig","MercuryIDs","MercuryLogMessageType","MercuryMessengerBlockingUtils","MercuryParticipants","MercuryThreadMuter","MercuryViewer","MercurySourceType","NFXChatHeadGK","Promise","ReactComponentWithPureRenderMixin","React","PopoverMenu.react","ReactMenu","MenuSeparator.react","Run","Toggler","TrackingNodes","URI","WebMessengerDeleteThreadDialog","WebMessengerThreadPermalinks","XNFXStartForMessageThreadController","NotificationSettingsDialog","MessengerNotificationSettingsGKModule","cx","fbt","goURI","MercuryMessageObject","MercuryThreadIDMap","MercuryThreadActions","MercuryThreads","MercuryMessageActions"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na){b.__markCompiled&&b.__markCompiled();'use strict';var oa=b('MercuryMessageObject').get(),pa=b('MercuryThreadIDMap').get(),qa=b('MercuryThreadActions').get(),ra=b('MercuryThreads').get(),sa=b('MercuryMessageActions').get(),ta=aa.Item,ua=y,va=ua.PropTypes,wa=y.createClass({displayName:"ChatTabMenu",_privacyActionController:(undefined),_fileUploaderPromise:(undefined),mixins:[x],propTypes:{attachmentsShelf:va.object,nameConversationFunc:va.func,isGroupChat:va.bool,isEmptyChat:va.bool,hasMessageBlocked:va.bool,onFileUploaderMounted:va.func,onSubmit:va.func,onUpdateAttachmentsShelf:va.func,onUploadFinished:va.func,otherUserID:va.string,sheetController:va.object.isRequired,showAddFriend:va.func,threadID:va.string.isRequired},getInitialState:function(){return {url:null,privacyText:'',muted:false};},getDefaultProps:function(){return {show:true,isMuted:false,hasSwitchToWork:false};},componentDidMount:function(){ha.getThreadURI(this.props.threadID,function(xa){this.isMounted()&&this.setState({url:xa});}.bind(this));if(!this.props.isGroupChat)this._privacyActionController=new k(o.getUserIDFromThreadID(this.props.threadID),function(xa){return this._updatePrivacyLink(xa);}.bind(this));},componentDidUpdate:function(xa,ya){if(this.props.isMuted&&!xa.isMuted){this.props.sheetController.openThreadIsMutedTabSheet();}else if(!this.props.isMuted&&xa.isMuted)this.props.sheetController.closeThreadIsMutedTabSheet();if(this.props.hasMessageBlocked){this.props.sheetController.openMessageBlockedTabSheet();}else this.props.sheetController.closeMessageBlockedTabSheet();},_initFileUploader:function(xa,ya,za){if(this._fileUploaderPromise){this._fileUploaderPromise.then(function(ab){ab.updateElements(xa,ya,za);});}else this._fileUploaderPromise=new w(function(ab,bb){ca.onAfterLoad(function(){i.loadModules(["MercuryFileUploader"],function(cb){var db=new cb(this.props.attachmentsShelf,xa,ya,za);ab(db);}.bind(this));}.bind(this));}.bind(this));return this._fileUploaderPromise;},componentWillUnmount:function(){this._privacyActionController&&this._privacyActionController.destroy();this._fileUploaderPromise&&this._fileUploaderPromise.then(function(xa){xa.destroy();});},_unmuteThread:function(){qa.unmute(this.props.threadID);da.hide();},_togglePrivacyFunc:function(){this._privacyActionController&&this._privacyActionController.togglePrivacy();},_renderFileUploader:function(){return (y.createElement(ta,{className:"_37_x"},y.createElement(j,{onFileUploaderMounted:this.props.onFileUploaderMounted,attachmentsShelf:this.props.attachmentsShelf,initFileUploaderFn:this._initFileUploader,onUploadFinished:this.props.onUploadFinished,onUpdateAttachmentsShelf:this.props.onUpdateAttachmentsShelf,onSubmit:this.props.onSubmit})));},_renderOpenFullConversation:function(){if(this.state.url)return (y.createElement(ta,{onclick:function(){return na(this.state.url);}.bind(this)},ma._("See Full Conversation")));return null;},_renderAddFriend:function(){if(!this.props.showAddFriend)return null;return (y.createElement(ta,{onclick:this.props.showAddFriend},ma._("Add Friends to Chat...")));},_renderTogglePrivacy:function(){if(!this.props.isGroupChat&&this.state.privacyText)return (y.createElement(ta,{onclick:this._togglePrivacyFunc},this.state.privacyText));return null;},_renderNotificationSettings:function(){if(ka.inGK){var xa=ja.show.bind(null,this.props.threadID);return (y.createElement(ta,{onclick:xa},ma._("Notification Settings...")));}return null;},_renderMuteConversation:function(){if(!this.props.isMuted){var xa=s.showMuteChangeDialog.bind(null,this.props.threadID,null);return (y.createElement(ta,{onclick:xa},ma._("Mute Conversation...")));}else return (y.createElement(ta,{onclick:this._unmuteThread},ma._("Unmute Conversation")));},_renderDeleteConversation:function(){return (y.createElement(ta,{onclick:this._deleteConversation},ma._("Delete Conversation...")));},_renderReportSpam:function(){if(!this.props.isGroupChat)return (y.createElement(ta,{onclick:this._reportSpamClicked},ma._("Report as Spam or Abuse...")));return null;},_blockMessagesItem:function(){if(!this.props.isGroupChat&&q.gk_result&&!this.props.hasMessageBlocked)return (y.createElement(ta,{onclick:this._messageBlockedClicked},ma._("Block Messages...")));if(!this.props.isMultichat&&q.gk_result&&this.props.hasMessageBlocked)return (y.createElement(ta,{onclick:this._messageUnblockedClicked},ma._("Unblock Messages...")));return null;},_renderCreateGroup:function(){if(this.props.isGroupChat)return (y.createElement(ta,{onclick:this._createGroupClicked},ma._("Create Group")));return null;},_renderSwitchToWork:function(){if(this.props.hasSwitchToWork)return (y.createElement(ta,{onclick:this._switchToWorkUserClicked},ma._("Move to Work Account")));return null;},_renderConversationName:function(){if(this.props.isGroupChat&&this.state.url)return (y.createElement(ta,{onclick:this.props.nameConversationFunc},ma._("Edit Conversation Name")));return null;},_renderLeaveConversation:function(){if(this.props.isGroupChat)return (y.createElement(ta,{onclick:this._unsubscribeLinkClicked},ma._("Leave Conversation...")));return null;},_renderEnableDesktopNotifications:function(){if(n.DesktopNotificationsGK&&"Notification" in window&&window.Notification.permission!=="granted")return (y.createElement(ta,{onclick:this._enableDesktopNotif},ma._("Enable Desktop Notifications")));return null;},_renderPeopleList:function(){if(this.props.isGroupChat&&this.state.url)return (y.createElement(ta,{onclick:this._showParticipants},ma._("Edit Participants...")));return null;},render:function(){var xa=this._renderReportSpam(),ya=this._blockMessagesItem(),za=this._renderCreateGroup(),ab=y.createElement(aa,{className:(("chatReact")+(!this.props.show?' '+"hidden_elem":''))},this._renderOpenFullConversation(),this._renderFileUploader(),this._renderAddFriend(),this._renderTogglePrivacy(),this._renderConversationName(),this._renderPeopleList(),y.createElement(ba,null),this._renderNotificationSettings(),this._renderSwitchToWork(),this._renderMuteConversation(),this._renderDeleteConversation(),this._renderLeaveConversation(),(xa||ya)?(y.createElement(ba,null)):null,ya,xa,za?(y.createElement(ba,null)):null,za,this._renderEnableDesktopNotifications()),bb=ma._("Options"),cb=ea.getTrackingInfo(ea.types.DROPDOWN_BUTTON);return (y.createElement(z,{menu:ab},y.createElement("a",{"data-ft":cb,"data-hover":"tooltip","aria-label":bb,"data-tooltip-alignh":"center",className:(("button")+(this.props.isEmptyChat?' '+"hidden_elem":''))})));},getFileUploaderPromise:function(){return this._fileUploaderPromise;},_updatePrivacyLink:function(xa){var ya;if(xa==k.OFFLINE){ya=ma._("Go online");this.setState({privacyText:ya});return;}if(this.props.isGroupChat||this.props.otherUserID===undefined)return;var za='fbid:'.concat(this.props.otherUserID);r.get(za,function(ab){if(!ab.is_friend){ya=null;}else if(xa==k.BLOCKED){ya=ma._("Turn On Chat for {name}",[ma.param("name",ab.short_name)]);}else ya=ma._("Turn Off Chat for {name}",[ma.param("name",ab.short_name)]);this.setState({privacyText:ya});}.bind(this));},_showParticipants:function(){pa.getFBIDFromClientID(this.props.threadID,function(xa){g.send(new h(new fa('/ajax/browser/dialog/multichat_members/').addQueryData({id:xa})));});},_unsubscribeLinkClicked:function(){var xa=[];xa.push({name:'unsubscribe',label:ma._("Leave Conversation"),handler:function(){return this._unsubscribeToThread();}.bind(this)});xa.push(m.CANCEL);new m().setTitle(ma._("Leave Conversation?")).setBody(ma._("You will stop receiving messages from this conversation and people will see that you left.")).setButtons(xa).show();},_unsubscribeToThread:function(){if(!ra.isEmptyLocalThread(this.props.threadID)){var xa=oa.constructLogMessageObject(u.CHAT_WEB,this.props.threadID,p.UNSUBSCRIBE,{removed_participants:[t.getID()]});sa.send(xa);}l.closeTab(this.props.threadID,'unsubscribed');return true;},_deleteConversation:function(){ga.show(this.props.threadID);},_reportSpamClicked:function(){var xa=new fa('/ajax/chat/report.php').addQueryData({id:this.props.otherUserID}).addQueryData({src:'top_report_link'});if(v.result)xa=ia.getURIBuilder().setString('thread_fbid',this.props.otherUserID).setEnum('location','www_chat_head').getURI();g.send(new h(xa));},_messageBlockedClicked:function(){qa.blockMessages(this.props.threadID);},_messageUnblockedClicked:function(){qa.unblockMessages(this.props.threadID);},_createGroupClicked:function(){ra.getThreadMeta(this.props.threadID,function(xa){if(!xa.is_canonical){var ya=new fa('/ajax/groups/create_get.php').addQueryData({ref:'web_messenger_dock',parent_id:'0'}),za=xa.participants.map(function(ab){return o.getUserIDFromParticipantID(ab);}).filter(function(ab){return ab;});ya.addQueryData({members:za});if(xa.name)ya.addQueryData({name:xa.name});g.send(new h(ya));}});},_switchToWorkUserClicked:function(){var xa=[];xa.push({name:'move',label:ma._("Move Conversation"),handler:function(){return this._switchToWork();}.bind(this)});xa.push(m.CANCEL);new m().setTitle(ma._("Move Conversation to Work Account?")).setBody(ma._("Do you want to move this conversation so that it shows in your work account instead?")).setButtons(xa).show();},_switchToWork:function(){if(!ra.isEmptyLocalThread(this.props.threadID)){var xa=oa.constructLogMessageObject(u.CHAT_WEB,this.props.threadID,p.SWITCH_TO_WORK,{removed_participants:[t.getID()]});sa.send(xa);}l.closeTab(this.props.threadID,'unsubscribed');return true;},_enableDesktopNotif:function(){a.Notification.requestPermission();}});e.exports=wa;},null);
__d("ChatTabSheetListener",["ChatPrivacyActionController","MercuryIDs","MercuryParticipants","MercuryThreadInformer","MercuryThreads","MercuryViewer"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';function m(n,o){this.$ChatTabSheetListener0=o;this.$ChatTabSheetListener1=n;this.$ChatTabSheetListener2=h.getUserIDFromThreadID(this.$ChatTabSheetListener1);j.get().subscribe('threads-updated',function(){return this.$ChatTabSheetListener3();}.bind(this));if(this.$ChatTabSheetListener2)this.$ChatTabSheetListener4=new g(this.$ChatTabSheetListener2,function(p){return this.$ChatTabSheetListener5(p);}.bind(this));}m.prototype.destroy=function(){this.$ChatTabSheetListener4&&this.$ChatTabSheetListener4.destroy();};m.prototype.$ChatTabSheetListener3=function(){var n=k.get();n.getThreadMeta(this.$ChatTabSheetListener1,function(o){var p=l.getID(),q=o.participants.filter(function(r){return r!==p;});(q.length<1&&!n.isNewEmptyLocalThread(this.$ChatTabSheetListener1))?this.$ChatTabSheetListener0.openNoRecipientsSheet():this.$ChatTabSheetListener0.closeNoRecipientsSheet();}.bind(this));};m.prototype.$ChatTabSheetListener5=function(n){switch(n){case g.OFFLINE:this.$ChatTabSheetListener0.closeUserBlockedSheet();this.$ChatTabSheetListener0.openOfflineSheet();break;case g.NORMAL:this.$ChatTabSheetListener0.closeUserBlockedSheet();this.$ChatTabSheetListener0.closeOfflineSheet();break;case g.BLOCKED:this.$ChatTabSheetListener0.closeOfflineSheet();i.get(h.getParticipantIDFromUserID(this.$ChatTabSheetListener2),function(o){o.is_friend?this.$ChatTabSheetListener0.openUserBlockedSheet():this.$ChatTabSheetListener0.closeUserBlockedSheet();}.bind(this));break;}};e.exports=m;},null);
__d("ChatTabSheetController",["Bootloader","ChatTabSheetListener","Deferred","MercuryIDs"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=function(l,m,n,o){this._threadID=l;this._rootElement=m;this._tabElement=n;this._view=o;this._deferred=new i();this._isLoading=false;this._listener=new h(this._threadID,this);};Object.assign(k.prototype,{openAddFriendsSheet:function(){this._load(function(){this._addFriendsTabSheet.open();}.bind(this));},openMessageBlockedTabSheet:function(){this._load(function(){this._threadIsMessageBlockedSheet.open();}.bind(this));},getAddFriendsParticipants:function(){return this._addFriendsTabSheet?this._addFriendsTabSheet.getParticipants():[];},openNameConversationSheet:function(l){this._load(function(){this._nameConversationTabSheet.open(l);}.bind(this));},openReadOnlySheet:function(){this._load(function(){this._readOnlyTabSheet.open();}.bind(this));},openNewMessagesSheet:function(){this._load(function(){this._newMessagesTabSheet.open();}.bind(this));},openUploadWarningTabSheet:function(){this._load(function(){this._uploadWarningTabSheet.open();}.bind(this));},openThreadIsMutedTabSheet:function(){this._load(function(){this._threadIsMutedTabSheet.open();}.bind(this));},openEmployeeAwaySheet:function(){this._load(function(){this._employeeAwaySheet.open();}.bind(this));},openOfflineSheet:function(){this._load(function(){this._offlineTabSheet.open();}.bind(this));},openUserBlockedSheet:function(){this._load(function(){this._userBlockedTabSheet.open();}.bind(this));},openNoRecipientsSheet:function(){this._load(function(){this._noRecipientsTabSheet.open();}.bind(this));},closeAddFriendsSheet:function(){this._lazy(function(){this._addFriendsTabSheet.close();}.bind(this));},closeAutomaticNameConversationSheet:function(){this._lazy(function(){if(this._nameConversationTabSheet&&this._nameConversationTabSheet.isAutomatic())this._nameConversationTabSheet.close();}.bind(this));},closeMessageBlockedTabSheet:function(){this._lazy(function(){this._threadIsMessageBlockedSheet.close();}.bind(this));},closeThreadIsMutedTabSheet:function(){this._lazy(function(){this._threadIsMutedTabSheet.close();}.bind(this));},closeNewMessagesSheet:function(){this._lazy(function(){this._newMessagesTabSheet.close();}.bind(this));},closeUploadWarningTabSheet:function(){this._lazy(function(){this._uploadWarningTabSheet.close();}.bind(this));},closeOfflineSheet:function(){this._lazy(function(){this._offlineTabSheet.close();}.bind(this));},closeUserBlockedSheet:function(){this._lazy(function(){this._userBlockedTabSheet.close();}.bind(this));},onClickMessagesBlockedSheet:function(l){this._lazy(function(){this._unblockMessagesSub=this._threadIsMessageBlockedSheet.subscribe('clicked',l);}.bind(this));},closeNoRecipientsSheet:function(){this._lazy(function(){this._noRecipientsTabSheet.close();}.bind(this));},onClickNewMessagesSheet:function(l){this._lazy(function(){this._newMessageClickSub=this._newMessagesTabSheet.subscribe('clicked',l);}.bind(this));},onClickThreadIsMutedSheet:function(l){this._lazy(function(){this._threadIsMutedClickSub=this._threadIsMutedTabSheet.subscribe('clicked',l);}.bind(this));},onResize:function(l){this._lazy(function(){this._sheetView.subscribe('resize',l);}.bind(this));},onTokensChanged:function(l){this._lazy(function(){this._addFriendsTabSheet.subscribe('chat/tokens-changed',l);}.bind(this));},onEscape:function(l){this._lazy(function(){this._addFriendsTabSheet.subscribe('esc-pressed',l);}.bind(this));},destroy:function(){this._listener&&this._listener.destroy();this._sheetView&&this._sheetView.destroy();this._offlineTabSheet&&this._offlineTabSheet.destroy();this._userBlockedTabSheet&&this._userBlockedTabSheet.destroy();this._newMessageClickSub&&this._newMessageClickSub.unsubscribe();this._threadIsMutedClickSub&&this._threadIsMutedClickSub.unsubscribe();},_load:function(l){this._bootload();this._deferred.then(l);},_lazy:function(l){this._deferred.then(l);},_bootload:function(){if(this._isLoading)return;this._isLoading=true;g.loadModules(["ChatAddFriendsTabSheet","ChatEmployeeAwaySheet","ChatNameConversationTabSheet","ChatNewMessagesTabSheet","ChatNoRecipientsTabSheet","ChatOfflineTabSheet","ChatReadOnlyTabSheet","ChatThreadIsMessageBlockedSheet","ChatThreadIsMutedTabSheet","ChatUploadWarningTabSheet","ChatUserBlockedTabSheet","MercurySheetView"],function(l,m,n,o,p,q,r,s,t,u,v,w){this._sheetView=new w(this._threadID,this._rootElement,this._tabElement);var x=this._threadID,y=this._rootElement,z=this._sheetView,aa=this._view;this._addFriendsTabSheet=new l(x,y,z,aa);this._employeeAwaySheet=new m(x,y,z);this._nameConversationTabSheet=new n(x,y,z);this._newMessagesTabSheet=new o(x,y,z);this._offlineTabSheet=new q(x,y,z);this._readOnlyTabSheet=new r(x,y,z);this._threadIsMessageBlockedSheet=new s(x,y,z);this._threadIsMutedTabSheet=new t(x,y,z);this._uploadWarningTabSheet=new u(x,y,z);this._userBlockedTabSheet=new v(x,y,z);if(!j.getUserIDFromThreadID(this._threadID))this._noRecipientsTabSheet=new p(x,y,z);this._deferred.resolve();}.bind(this));}});e.exports=k;},null);
__d("ChatTitleLink.react",["Link.react","MercuryThreadTitle.react","React","TrackingNodes","cx"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l=i,m=l.PropTypes,n=i.createClass({displayName:"ChatTitleLink",propTypes:{href:m.string,isNewThread:m.bool,thread:m.object,viewer:m.string},getDefaultProps:function(){return {href:null};},getTitle:function(){return this.refs.threadTitle.getTitle();},render:function(){if(!this.props.thread)return null;return (i.createElement(g,{"aria-level":"3",className:(("titlebarText")+(this.props.href===null?' '+"noLink":'')),"data-ft":j.getTrackingInfo(j.types.TITLE),"data-hover":"tooltip",href:this.props.href},i.createElement(h,{ref:"threadTitle",isNewThread:this.props.isNewThread,thread:this.props.thread,useAndSeparator:true,useShortName:!this.props.thread.is_canonical,viewer:this.props.viewer})));}});e.exports=n;},null);
__d("ChatVideoCallButton.react",["Link.react","React","TrackingNodes","FBRTCCallabilityStore","StoreAndPropBasedStateMixin","MercuryIDs","MercuryParticipants","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();'use strict';var o=h,p=o.PropTypes,q=h.createClass({displayName:"ChatVideoCallButton",mixins:[k(j,m)],statics:{calculateState:function(r){var s=l.getParticipantIDFromUserID(r.userID),t=m.getOrFetch(s);return {user:t,isCallable:j.isCallable(r.userID)};}},propTypes:{onClick:p.func,onKeyUp:p.func,shown:p.bool,isAudio:p.bool},getClassName:function(){return ((!this.props.isAudio?"_1fu3":'')+(this.props.isAudio?' '+"_1fu4":'')+(this.state.isCallable?' '+"_1kza":'')+(' '+"button")+(!this.props.shown?' '+"hidden_elem":''));},getTooltipLabel:function(){var r=this.state.user;if(!r)return undefined;if(this.props.isAudio){return j.voiceCallButtonTooltip(this.props.userID,r.short_name);}else return j.callButtonTooltip(this.props.userID,r.short_name);},render:function(){var r=i.getTrackingInfo((this.props.isAudio)?i.types.VIDEOCHAT:i.types.VOICECHAT),s=JSON.stringify({videochat:'call_clicked_bhat_tab'});return (h.createElement(g,{"aria-label":this.getTooltipLabel(),className:this.getClassName(),"data-ft":r,"data-gt":s,"data-hover":"tooltip","data-tooltip-position":"above",onClick:this.props.onClick,onKeyUp:this.props.onKeyUp}));}});e.exports=q;},null);
__d("EmoticonUtils",["EmoticonsList","Parent"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i='emoticon_',j=g.symbols,k={getEmoteFromTarget:function(l){var m=h.byClass(l,'emoticon');if(!m)return null;var n=null;m.className.split(' ').forEach(function(o){if(o.startsWith(i))n=o.substring(i.length);});return j[n]||null;},insertEmoticon:function(l,m,n){var o=m.substring(0,n.start),p=m.substring(n.end);if(n.start>0&&!o.endsWith(' '))l=' '+l;if(!p.startsWith(' '))l+=' ';var q=o+l+p;n.start+=l.length;n.end=n.start;return {result:q,start:n.start,end:n.end};}};e.exports=k;},null);
__d("P2PBannerStore",["EventEmitter","P2PActionConstants","P2PAPI","P2PDispatcher","invariant"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l,m={},n=false,o=false;for(var p in g)if(g.hasOwnProperty(p))r[p]=g[p];var q=g===null?null:g.prototype;r.prototype=Object.create(q);r.prototype.constructor=r;r.__superConstructor__=g;function r(){g.call(this);l=j.register(this.onEventDispatched.bind(this));}r.prototype.onEventDispatched=function(s){var t=s.type,u=s.data;switch(t){case h.BANNER_STATES_UPDATED:this.handleBannerStatesUpdated(u);this.emit('change');break;case h.BANNER_DISMISSED:this.handleBannerDismissed(u);this.emit('change');break;case h.BANNER_COMPLETED:this.handleBannerCompleted(u);this.emit('change');break;}};r.prototype.handleBannerStatesUpdated=function(s){n=true;m=s;};r.prototype.handleBannerDismissed=function(s){var t=this.getBannerState(s);t.hasBeenDismissed=true;};r.prototype.shouldShowBanner=function(s){var t;if(!o){i.getBannerStates();o=true;return false;}if(!n)return false;t=this.getBannerState(s);return (t.eligible&&!t.hasBeenDismissed);};r.prototype.handleBannerCompleted=function(s){var t=this.getBannerState(s);t.eligible=false;};r.prototype.getBannerState=function(s){var t=m[s];k(t);return t;};e.exports=new r();},null);
__d("P2PProductItemBannerStore",["CurrentUser","EventEmitter","ImmutableObject","Map","MercuryIDs","P2PActionConstants","P2PAPI","P2PDispatcher","P2PGKValues"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();'use strict';var p,q=new j();for(var r in h)if(h.hasOwnProperty(r))t[r]=h[r];var s=h===null?null:h.prototype;t.prototype=Object.create(s);t.prototype.constructor=t;t.__superConstructor__=h;function t(){h.call(this);p=n.register(this.onEventDispatched.bind(this));}t.prototype.onEventDispatched=function(u){var v=u.type,w=u.data;switch(v){case l.PRODUCT_ITEM_BANNER_UPDATED:this.handleProductItemBannerUpdated(w);this.emit('change');break;case l.PRODUCT_ITEM_BANNER_DISMISSED:this.handleBannerDismissed(w);this.emit('change');break;}};t.prototype.handleProductItemBannerUpdated=function(u){q.set(this.getOtherUserIDForProduct(u),new i(u));};t.prototype.handleBannerDismissed=function(u){var v,w;q.forEach(function(x,y){if(x.p2pPlatformItemId===u){v=x;w=y;}});if(v){if(this.isViewerSellerForProduct(v)){v=i.set(v,{shouldShowToSeller:false});}else if(this.isViewerBuyerForProduct(v))v=i.set(v,{shouldShowToBuyer:false});q.set(w,v);}};t.prototype.shouldShowBanner=function(u){var v;if(!o.P2PPlatformProductItemBanner||!u)return false;v=this.getProductItemByOtherUserID(u);if(!v){q.set(u,new i({}));m.getProductItemBannerData({otherUserID:u});return false;}return !!((this.isViewerSellerForProduct(v)&&v.shouldShowToSeller)||(this.isViewerBuyerForProduct(v)&&v.shouldShowToBuyer));};t.prototype.isViewerSellerForProduct=function(u){return u.sellerID===g.getID();};t.prototype.isViewerBuyerForProduct=function(u){return u.buyerID===g.getID();};t.prototype.getOtherUserIDForProduct=function(u){return (this.isViewerSellerForProduct(u)?u.buyerID:u.sellerID);};t.prototype.getProductItemByOtherUserID=function(u){return q.get(u);};t.prototype.getThreadIDFromProductItem=function(u){var v=this.getOtherUserIDForProduct(u);return k.getThreadIDFromUserID(v);};e.exports=new t();},null);
__d("P2PProductItemChatThreadBanner.react",["BackgroundImage.react","Image.react","Layout.react","LineClamp.react","Link.react","P2PActions","P2PButton.react","P2PProductItemBannerStore","P2PText.react","ReactComponentWithPureRenderMixin","React","cx","fbt","xuiglyph"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){b.__markCompiled&&b.__markCompiled();'use strict';var u=i.Column,v=i.FillColumn,w=q,x=w.PropTypes,y=q.createClass({displayName:"P2PProductItemChatThreadBanner",mixins:[p],propTypes:{item:x.object.isRequired},handleDismissClick:function(z){z.preventDefault();l.productItemBannerDismissed(this.props.item.p2pPlatformItemId);},handleSoldClick:function(z){z.preventDefault();},handlePayClick:function(z){z.preventDefault();var aa=this.props.item,ba=n.getThreadIDFromProductItem(aa);l.chatSendViewOpened({threadID:ba,amount:aa.price,platformItemID:aa.p2pPlatformItemId});},renderActionColumn:function(){var z=this.props.item,aa,ba="_4xl6";if(z.isAvailable)if(n.isViewerSellerForProduct(z)){aa=q.createElement(u,{className:ba},q.createElement(m,{label:s._("Sold"),onClick:this.handleSoldClick,use:"confirm"}));}else aa=q.createElement(u,{className:ba},q.createElement(m,{label:s._("Pay"),onClick:this.handlePayClick,use:"confirm"}));return aa;},renderItemSoldText:function(){if(!this.props.item.isAvailable)return (s._("(SOLD)"));},render:function(){var z=this.props.item,aa=this.renderItemSoldText();return (q.createElement("div",{className:"_319c"},q.createElement(i,null,q.createElement(u,null,q.createElement(k,{href:z.refURL||'#'},q.createElement(g,{backgroundPosition:"50% 50%",backgroundSize:"cover",height:45,src:z.image,width:45}))),q.createElement(v,null,q.createElement(j,{lines:1,lineHeight:45},q.createElement(o,{className:"_2pis",display:"inline",type:aa?'secondary':'primary'},aa,aa?' ':null,z.name))),this.renderActionColumn(),q.createElement(u,{className:"_4xl7"},q.createElement(h,{className:"_4xl8",onClick:this.handleDismissClick,src:t({name:'cross',shade:'light',size:'small'})})))));}});e.exports=y;},null);
__d("P2PChatThreadBanner.react",["Image.react","Layout.react","P2PAPI","P2PLogger","P2PPaymentLoggerEvent","React","Set","cx","ix"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();'use strict';var p=h.FillColumn,q=h.Column,r=new m(),s=l,t=s.PropTypes,u=l.createClass({displayName:"P2PChatThreadBanner",propTypes:{bannerType:t.string.isRequired,bodyText:t.string,loggerEventFlow:t.string.isRequired,onClick:t.func,titleText:t.string.isRequired},componentDidMount:function(){var v=this.props.bannerType;if(!r.has(v)){r.add(v);this.log(k.UI_ACTN_CHAT_THREAD_BANNER_VIEWED,{});i.incrementBannerViews(this.props.bannerType);}},log:function(v,w){j.log(v,Object.assign({www_event_flow:this.props.loggerEventFlow},w));},handleClick:function(v){v.stopPropagation();if(this.props.onClick)this.props.onClick();this.log(k.UI_ACTN_CHAT_THREAD_BANNER_CLICKED,{});i.incrementBannerDismissals(this.props.bannerType);},handleClose:function(v){v.stopPropagation();this.log(k.UI_ACTN_CHAT_THREAD_BANNER_DISMISSED,{});i.incrementBannerDismissals(this.props.bannerType);},render:function(){var v;if(this.props.bodyText)v=l.createElement("div",{className:"_1w2e"},this.props.bodyText);return (l.createElement("div",{className:"_1w2f",onClick:this.handleClick},l.createElement("div",{className:"_3jht",onClick:this.handleClose},l.createElement(g,{className:"_47dg",height:9,src:o('/images/p2p/chat-thread-banner-close.png'),width:9})),l.createElement(h,null,l.createElement(q,{className:"_1w2g"},l.createElement(g,{className:"_1w2h",height:15,src:o('/images/p2p/thread-banner-dollar.png'),width:15})),l.createElement(p,{className:"_1w2i"},l.createElement("div",{className:(("_1w2j")+(!!v?' '+"_1w2k":''))},this.props.titleText),v))));}});e.exports=u;},null);
__d("P2PSendMoneyNUXChatThreadBanner.react",["P2PActions","P2PChatThreadBanner.react","React"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';var j=i,k=j.PropTypes,l=i.createClass({displayName:"P2PSendMoneyNUXChatThreadBanner",propTypes:{bannerType:k.string.isRequired,bodyText:k.string,loggerEventFlow:k.string.isRequired,threadID:k.string.isRequired,titleText:k.string.isRequired},handleClick:function(){g.chatSendViewOpened({threadID:this.props.threadID});},render:function(){return (i.createElement(h,i.__spread({},this.props,{onClick:this.handleClick})));}});e.exports=l;},null);
__d("P2PReceiverNUXChatThreadBanner.react",["P2PBannerType","P2PPaymentLoggerEventFlow","P2PSendMoneyNUXChatThreadBanner.react","React","fbt"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l=j,m=l.PropTypes,n=j.createClass({displayName:"P2PReceiverNUXChatThreadBanner",propTypes:{threadID:m.string.isRequired},render:function(){return (j.createElement(i,{bannerType:g.RECEIVER_NUX,bodyText:k._("It's free and secure."),loggerEventFlow:h.UI_FLOW_RECEIVER_NUX_CHAT_THREAD_BANNER,threadID:this.props.threadID,titleText:k._("You Can Send Money to Friends!")}));}});e.exports=n;},null);
__d("P2PSenderNUXChatThreadBanner.react",["P2PBannerType","P2PPaymentLoggerEventFlow","P2PSendMoneyNUXChatThreadBanner.react","React","fbt"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l=j,m=l.PropTypes,n=j.createClass({displayName:"P2PSenderNUXChatThreadBanner",propTypes:{threadID:m.string.isRequired},render:function(){return (j.createElement(i,{bannerType:g.SENDER_NUX,bodyText:k._("It's free and secure."),loggerEventFlow:h.UI_FLOW_SENDER_NUX_CHAT_THREAD_BANNER,threadID:this.props.threadID,titleText:k._("Now You Can Send Money!")}));}});e.exports=n;},null);
__d("P2PChatThreadBannerContainer.react",["P2PBannerStore","P2PBannerType","P2PProductItemBannerStore","P2PProductItemChatThreadBanner.react","P2PReceiverNUXChatThreadBanner.react","P2PSenderNUXChatThreadBanner.react","StoreAndPropBasedStateMixin","React"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();'use strict';var o=n,p=o.PropTypes,q=n.createClass({displayName:"P2PChatThreadBannerContainer",mixins:[m(g,i)],propTypes:{otherUserID:p.string,threadID:p.string},statics:{calculateState:function(r){return {productItemBannerShown:i.shouldShowBanner(r.otherUserID),receiverNUXBannerShown:g.shouldShowBanner(h.RECEIVER_NUX),senderNUXBannerShown:g.shouldShowBanner(h.SENDER_NUX)};}},renderReceiverNUXBanner:function(){if(!this.props.threadID)return null;return (n.createElement(k,{threadID:this.props.threadID}));},renderSenderNUXBanner:function(){if(!this.props.threadID)return null;return (n.createElement(l,{threadID:this.props.threadID}));},renderProductItemBanner:function(){var r=this.props.otherUserID,s;if(r)s=i.getProductItemByOtherUserID(r);if(!s)return null;return (n.createElement(j,{item:s}));},render:function(){var r;if(this.state.productItemBannerShown){r=this.renderProductItemBanner();}else if(this.state.senderNUXBannerShown){r=this.renderSenderNUXBanner();}else if(this.state.receiverNUXBannerShown)r=this.renderReceiverNUXBanner();return (n.createElement("div",null,r));}});e.exports=q;},null);
__d("XPagesMercuryIndicatorController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/pages\/messaging\/mercury\/indicator\/",{});},null);
__d("PagesMercuryChatTabIndicatorHandler",["Animation","AsyncRequest","AvailableListConstants","DOM","FBID","MercuryIDs","XPagesMercuryIndicatorController"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();n.tryCreateHandler=function(o,p,q){"use strict";if(!p)return null;var r=l.getUserIDFromThreadID(o);if(!r||k.isUser(r))return null;return new n(r,p,q);};function n(o,p,q){"use strict";this.$PagesMercuryChatTabIndicatorHandler0=false;this.$PagesMercuryChatTabIndicatorHandler1=p;this.$PagesMercuryChatTabIndicatorHandler2=false;this.$PagesMercuryChatTabIndicatorHandler3=false;this.$PagesMercuryChatTabIndicatorHandler4=q;this.$PagesMercuryChatTabIndicatorHandler5=false;this.$PagesMercuryChatTabIndicatorHandler6=o;}n.prototype.checkResponsiveness=function(){"use strict";if(this.$PagesMercuryChatTabIndicatorHandler2)return;var o=m.getURIBuilder().getURI();this.$PagesMercuryChatTabIndicatorHandler2=true;new h().setURI(o).setMethod('POST').setData({page_id:this.$PagesMercuryChatTabIndicatorHandler6}).setHandler(function(p){this.$PagesMercuryChatTabIndicatorHandler2=false;var q=p.payload;if(q.responsiveness)this.$PagesMercuryChatTabIndicatorHandler7(q.responsiveness,q.enableTimeSwitch);}.bind(this)).send();};n.prototype.hideIndicator=function(){"use strict";this.$PagesMercuryChatTabIndicatorHandler8(false);};n.prototype.hideIndicatorAndPreventFutureShow=function(){"use strict";this.$PagesMercuryChatTabIndicatorHandler8(true);};n.prototype.$PagesMercuryChatTabIndicatorHandler8=function(o){"use strict";if(this.$PagesMercuryChatTabIndicatorHandler1&&this.$PagesMercuryChatTabIndicatorHandler3)new g(this.$PagesMercuryChatTabIndicatorHandler1).to('height',0).duration(100).hide().checkpoint(1,function(){this.$PagesMercuryChatTabIndicatorHandler3=false;if(o)this.$PagesMercuryChatTabIndicatorHandler5=true;}.bind(this)).go();};n.prototype.showIndicator=function(){"use strict";if(this.$PagesMercuryChatTabIndicatorHandler1&&!this.$PagesMercuryChatTabIndicatorHandler3&&this.$PagesMercuryChatTabIndicatorHandler4===i.OFFLINE&&this.$PagesMercuryChatTabIndicatorHandler9){j.setContent(this.$PagesMercuryChatTabIndicatorHandler1,this.$PagesMercuryChatTabIndicatorHandler9);new g(this.$PagesMercuryChatTabIndicatorHandler1).show().to('height',20).duration(100).checkpoint(1,function(){this.$PagesMercuryChatTabIndicatorHandler3=true;}.bind(this)).go();}};n.prototype.getEnableTimeSwitch=function(){"use strict";return this.$PagesMercuryChatTabIndicatorHandler0;};n.prototype.notifyPageOnlineStatusChanged=function(o){"use strict";this.$PagesMercuryChatTabIndicatorHandler4=o;if(!this.$PagesMercuryChatTabIndicatorHandler0)return;switch(o){case i.ACTIVE:this.hideIndicator();break;default:this.showIndicator();break;}};n.prototype.$PagesMercuryChatTabIndicatorHandler7=function(o,p){"use strict";this.$PagesMercuryChatTabIndicatorHandler9=o;this.$PagesMercuryChatTabIndicatorHandler0=p;this.showIndicator();};e.exports=n;},null);
__d("XPhotosWaterfallBatchLoggingController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/photos\/logging\/waterfall\/batch\/",{});},null);
__d("PhotosUploadWaterfall",["AsyncRequest","AsyncSignal","Banzai","PhotosUploadWaterfallXConfig","XPhotosWaterfallBatchLoggingController","emptyFunction","randomInt","throttle"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();var o=[],p={APP_FLASH:'flash_pro',APP_SIMPLE:'simple',APP_ARCHIVE:'archive',APP_COMPOSER:'composer',APP_MESSENGER:'messenger',APP_HTML5:'html5',APP_CHAT:'chat',INSTALL_CANCEL:1,INSTALL_INSTALL:2,INSTALL_UPDATE:3,INSTALL_REINSTALL:4,INSTALL_PERMA_CANCEL:5,INSTALL_SILENT_SKIP:6,INSTALL_DOWNLOAD:7,CERROR_RESIZING_FAILED:6,CERROR_MARKER_EXTRACTION_FAILED:9,BEGIN:1,UPLOAD_START:4,ALL_UPLOADS_DONE:6,CLIENT_ERROR:7,RECOVERABLE_CLIENT_ERROR:12,IMAGES_SELECTED:9,UPGRADE_REQUIRED:11,VERSION:15,SELECT_START:18,SELECT_CANCELED:19,CANCEL:22,CANCEL_DURING_UPLOAD:83,ONE_RESIZING_START:2,ONE_UPLOAD_START:10,ONE_UPLOAD_DONE:29,ONE_RESIZING_DONE:34,PROGRESS_BAR_STOPPED:44,MISSED_BEAT:45,HEART_ATTACK:46,PUBLISH_SENT:99,PUBLISH_START:100,PUBLISH_SUCCESS:101,PUBLISH_FAILURE:102,CLUSTERING_START:103,CLUSTERING_SUCCESS:104,CLUSTERING_FAILURE:105,POST_BUTTON_CLICKED:110,POST_BUTTON_ERROR:111,PHOTO_DELETED:114,PUBLISH_CLIENT_SUCCESS:115,PHOTO_ROTATED:117,SAVE_DRAFT_BUTTON_CLICKED:123,RECOVERY_START_ON_CLIENT:124,CHANGE_PHOTO_QUALITY_SETTING:126,TAG_ADDED:127,TAG_REMOVED:128,TAB_BUTTON_CLICKED:129,EDITABLE_PHOTO_FETCH_START:106,EDITABLE_PHOTO_FETCH_SUCCESS:107,EDITABLE_PHOTO_FETCH_FAILURE:108,EDITABLE_PHOTO_FETCH_DELAY:116,CANCEL_INDIVIDUAL_UPLOAD:109,MISSING_OVERLAY_NODE:118,PUBLISH_RETRY_FAILURE:119,MISSING_UPLOAD_STATE:120,SESSION_POSTED:72,POST_PUBLISHED:80,ONE_UPLOAD_CANCELED:81,ONE_UPLOAD_CANCELED_DURING_UPLOAD:82,RESIZER_AVAILABLE:20,OVERLAY_FIRST:61,ASYNC_AVAILABLE:63,FALLBACK_TO_FLASH:13,RETRY_UPLOAD:17,TAGGED_ALL_FACES:14,VAULT_IMAGES_SELECTED:62,VAULT_CREATE_POST_CANCEL:65,VAULT_SEND_IN_MESSAGE_CLICKED:66,VAULT_DELETE_CANCEL:68,VAULT_ADD_TO_ALBUM_CANCEL:74,VAULT_SHARE_IN_AN_ALBUM_CLICKED:76,VAULT_SHARE_OWN_TIMELINE_CLICKED:77,VAULT_SHARE_FRIENDS_TIMELINE_CLICKED:78,VAULT_SHARE_IN_A_GROUP_CLICKED:79,VAULT_SYNCED_PAGED_LINK_CLICKED:84,VAULTBOX:'vaultbox',GRID:'grid',SPOTLIGHT_VAULT_VIEWER:'spotlight_vault_viewer',REF_VAULT_NOTIFICATION:'vault_notification',_checkRequiredFields:function(r){},sendBanzai:function(r,s){this._checkRequiredFields(r);var t={};r.scuba_ints=r.scuba_ints||{};r.scuba_ints.client_time=Math.round(Date.now()/1000);if(j.retryBanzai){t.retry=true;r.scuba_ints.nonce=m(4294967296);}i.post(j.deprecatedBanzaiRoute,r,t);if(s)setTimeout(s,0);},sendSignal:function(r,s){this._checkRequiredFields(r);if(j.useBanzai){this.sendBanzai(r,s);}else if(j.reduceLoggingRequests){this.queueLog(r,s);}else{var t=new h('/ajax/photos/waterfall.php',{data:JSON.stringify(r)}).setHandler(s);if(j.timeout)t.setTimeout(10*1000);t.send();}},queueLog:function(r,s){o.push(r);if(!!s){this.flushQueue(s);}else q();},flushQueue:function(r){var s=JSON.stringify(o);o=[];var t=k.getURIBuilder().getURI();new g().setURI(t).setData({logs:s}).setFinallyHandler(r||l).setTimeoutHandler(10*1000,r||l).send();}},q=n(p.flushQueue,j.batchInterval*1000);e.exports=p;},null);
__d("SelectionPosition",["Event","InputSelection","SubscriptionsHandler"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();function j(k){"use strict";this.$SelectionPosition0=k;this.$SelectionPosition1={start:0,end:0};this.$SelectionPosition2=new i();this.$SelectionPosition3=false;this.updatePos();this.enable();}j.prototype.getPos=function(){"use strict";return Object.assign({},this.$SelectionPosition1);};j.prototype.setPos=function(k,l){"use strict";this.$SelectionPosition1={start:k,end:l};this.restore();};j.prototype.updatePos=function(){"use strict";this.$SelectionPosition1=h.get(this.$SelectionPosition0);};j.prototype.restore=function(){"use strict";h.set(this.$SelectionPosition0,this.$SelectionPosition1.start,this.$SelectionPosition1.end);};j.prototype.enable=function(){"use strict";if(!this.$SelectionPosition3){this.$SelectionPosition2.addSubscriptions(g.listen(this.$SelectionPosition0,'keyup',this.updatePos.bind(this)),g.listen(this.$SelectionPosition0,'click',this.updatePos.bind(this)));this.$SelectionPosition3=true;}};j.prototype.disable=function(){"use strict";if(this.$SelectionPosition3){this.$SelectionPosition2.release();this.$SelectionPosition3=false;}};e.exports=j;},null);
__d("TextInputControl",["DOMControl","Event","Input","debounce"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();for(var k in g)if(g.hasOwnProperty(k))m[k]=g[k];var l=g===null?null:g.prototype;m.prototype=Object.create(l);m.prototype.constructor=m;m.__superConstructor__=g;function m(n){"use strict";g.call(this,n);var o=this.getRoot(),p=j(this.update.bind(this),0);h.listen(o,{input:p,keydown:p,paste:p});}m.prototype.setMaxLength=function(n){"use strict";i.setMaxLength(this.getRoot(),n);return this;};m.prototype.getValue=function(){"use strict";return i.getValue(this.getRoot());};m.prototype.isEmpty=function(){"use strict";return i.isEmpty(this.getRoot());};m.prototype.setValue=function(n){"use strict";i.setValue(this.getRoot(),n);this.update();return this;};m.prototype.clear=function(){"use strict";return this.setValue('');};m.prototype.setPlaceholderText=function(n){"use strict";i.setPlaceholder(this.getRoot(),n);return this;};e.exports=m;},null);
__d("TextAreaControl",["Arbiter","ArbiterMixin","CSS","DOMControl","Event","Style","TextInputControl","TextMetrics","classWithMixins","mixin"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){b.__markCompiled&&b.__markCompiled();function q(v,w){return l.getFloat(v,w)||0;}var r=o(m,p(h));for(var s in r)if(r.hasOwnProperty(s))u[s]=r[s];var t=r===null?null:r.prototype;u.prototype=Object.create(t);u.prototype.constructor=u;u.__superConstructor__=r;function u(v){"use strict";r.call(this,v);this.autogrow=i.hasClass(v,'uiTextareaAutogrow');this.autogrowWithPlaceholder=i.hasClass(v,'uiTextareaAutogrowWithPlaceholder');this.width=null;k.listen(v,'focus',this._handleFocus.bind(this));}u.prototype.setAutogrow=function(v){"use strict";this.autogrow=v;return this;};u.prototype.onupdate=function(){"use strict";t.onupdate.call(this);this.updateHeight();};u.prototype.updateHeight=function(){"use strict";if(this.autogrow){var v=this.getRoot();if(!this.metrics)this.metrics=new n(v);if(typeof this.initialHeight==='undefined'){this.isBorderBox=l.get(v,'box-sizing')==='border-box'||l.get(v,'-moz-box-sizing')==='border-box'||l.get(v,'-webkit-box-sizing')==='border-box';this.borderBoxOffset=q(v,'padding-top')+q(v,'padding-bottom')+q(v,'border-top-width')+q(v,'border-bottom-width');this.initialHeight=v.offsetHeight-this.borderBoxOffset;}var w=null;if((!v.value||v.value.length===0)&&this.autogrowWithPlaceholder){w=this.metrics.measure(v.placeholder);}else w=this.metrics.measure();var x=Math.max(this.initialHeight,w.height);if(this.isBorderBox)x+=this.borderBoxOffset;if(this.maxHeight&&x>this.maxHeight){x=this.maxHeight;g.inform('maxHeightExceeded',{textArea:v});}if(x!==this.height){this.height=x;l.set(v,'height',x+'px');g.inform('reflow');this.inform('resize');}}else if(this.metrics){this.metrics.destroy();this.metrics=null;}};u.prototype.resetHeight=function(){"use strict";this.height=-1;this.update();};u.prototype.setMaxHeight=function(v){"use strict";this.maxHeight=v;};u.prototype.setAutogrowWithPlaceholder=function(v){"use strict";this.autogrowWithPlacedholder=v;};u.prototype._handleFocus=function(){"use strict";this.width=null;};u.getInstance=function(v){"use strict";return j.getInstance(v)||new u(v);};e.exports=u;},null);
__d("XStickerReplyNUXController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/stickers\/tooltip\/",{});},null);
__d("ChatTabView",["AsyncRequest","AsyncSignal","AvailableList","AvailableListConstants","BanzaiODS","BootloadedComponent.react","Bootloader","CSS","ChatAddToThreadButton.react","ChatArchiveWarning.react","ChatBehavior","ChatCloseButton.react","ChatConfig","ChatEmployeeAwayWarning","ChatOpenTab","ChatPhotoUploader.react","ChatQuietLinks","ChatStickerButton.react","ChatTabActions","ChatTabMenu.react","ChatTabMessagesView","ChatTabOfficeStatus","ChatTabSheetController","ChatTabViewEvents","ChatTabViewInstances","ChatTitleLink.react","ChatVideoCallButton.react","ChatVisibility","MercuryConstants","CurrentLocale","CurrentUser","DOM","DOMEvent","DOMQuery","DeferredComponent.react","Dialog","Dock","DragDropTarget","EmoticonUtils","EmoticonsList","Event","FBID","FBRTCCallabilityStore","Focus","ImmutableObject","Input","JSResource","Keys","Locale","LogHistory","MercuryConfig","MercuryIDs","MercuryMessengerBlockingUtils","MercuryParticipants","MercuryShareAttachmentRenderLocations","MercurySourceType","MercuryThreadInfo","MercuryTypingAnimation.react","MercuryThreadTitle.react","MercuryViewer","MessengerHotLikeButton.react","MessagingTag","NubController","P2PChatThreadBannerContainer.react","P2PGKValues","P2PSendMoneyButton.react","P2PSendMoneyDialogStore","PagesMercuryChatTabIndicatorHandler","Parent","PhotosUploadWaterfall","PresenceStatus","Promise","React","ReactComponentRenderer","Run","Scroll","SelectionPosition","StickerActions","StickerConstants","StickerState","Style","SubscriptionsHandler","SyntheticMouseEvent","ChatTabTemplates","TextAreaControl","Toggler","TooltipData","TypingDetectorController","URLScraper","URI","UserAgent_DEPRECATED","WaterfallIDGenerator","WebMessengerDeleteThreadDialog","WebMessengerThreadPermalinks","XStickerReplyNUXController","XUISpinner.react","cancelAnimationFrame","createCancelableFunction","csx","cx","emptyFunction","fbt","getActiveElement","isEmpty","requestAnimationFrame","requireWeak","setIntervalAcrossTransitions","ChatReactInput","MercuryTypingReceiver","MercuryMessageActions","MercuryMessages","MercuryMessageObject","MercuryThreadIDMap","MercuryServerRequests","MercuryThreadInformer","MercuryThreadActions","MercuryThreads"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa,ra,sa,ta,ua,va,wa,xa,ya,za,ab,bb,cb,db,eb,fb,gb,hb,ib,jb,kb,lb,mb,nb,ob,pb,qb,rb,sb,tb,ub,vb,wb,xb,yb,zb,ac,bc,cc,dc,ec,fc,gc,hc,ic,jc,kc,lc,mc,nc,oc,pc,qc,rc,sc,tc,uc,vc,wc,xc,yc,zc,ad,bd,cd,dd,ed,fd,gd,hd,id){b.__markCompiled&&b.__markCompiled();'use strict';var jd=b('ChatReactInput').module,kd=b('MercuryTypingReceiver').get(),ld=b('MercuryMessageActions').get(),md=b('MercuryMessages').get(),nd=b('MercuryMessageObject').get(),od=b('MercuryThreadIDMap').get(),pd=b('MercuryServerRequests').get(),qd=b('MercuryThreadInformer').get(),rd=b('MercuryThreadActions').get(),sd=b('MercuryThreads').get(),td,ud=new zb(function(xe){hd('P2PTransferStore',function(ye){td=ye;xe(ye);});}),vd=/^\s*$/,wd=ea,xd,yd=10,zd=960,ae=db.getInstance('chat_tab_view');function be(xe,ye){var ze=la.create('div');ye=ye&&ye.filter(function(cf){return cf!=nb.getID();});if(fd(ye))return oc.remove(xe);var af=ye.length,bf=af-yd;if(bf>1)ye=ye.slice(0,yd);hb.getMulti(ye,function(cf){for(var df in cf){var ef=cf[df],ff=lc[':fb:mercury:chat:multichat-tooltip-item'].build();la.setContent(ff.getNode('name'),ef.name);var gf=fb.getUserIDFromParticipantID(df),hf=gf&&yb.get(gf)==j.ACTIVE;n.conditionShow(ff.getNode('icon'),hf);n.conditionClass(ff.getNode('name'),'tooltipItemWithIcon',hf);la.appendContent(ze,ff.getRoot());}if(bf>1){var jf=dd._("and {number of hidden chat participants} more.",[dd.param("number of hidden chat participants",bf)]);la.appendContent(ze,la.create('div',{},jf));}oc.set(xe,ze,'above');});}var ce={},de=null,ee=false;function fe(xe,ye,ze){if(ze){ce[xe]=ye;if(!de)de=id(ge,600);}else{n.removeClass(ye,'highlightTitle');delete ce[xe];}}function ge(){for(var xe in ce){var ye=ce[xe];if(ye.parentNode){n.conditionClass(ye,'highlightTitle',ee);}else delete ce[xe];}ee=!ee;if(!Object.keys(ce).length){clearInterval(de);de=null;}}function he(xe){var ye=fb.tokenize(xe);switch(ye.type){case 'user':return lc[':fb:mercury:chat:user-tab'].build();}return lc[':fb:mercury:chat:multichat-tab'].build();}function ie(xe){var ye=xe._getInputValue(),ze=xe._fileUploader,af=ze?ze.getAttachments():[];if(oe(xe))ke(xe,ye,af,function(bf){bf=we(bf,ze);ld.send(bf,function(cf){var df=sd.getThreadMetaNow(cf);if(eb.CoreGraphEnabled&&df&&df.folder===pb.PENDING)rd.movePendingToInbox(cf);});ze&&ze.removeAttachments();if(xe._sharePreview)xe._sharePreview.setProps({share:null,uri:null});if(!s.get('chat_react_input'))xe._getNode('input').value='';xe._typingDetector&&xe._typingDetector.resetState();xe._messagesView&&xe._messagesView.setShouldScrollToBottom(true);});}function je(xe,ye){if(ye===0)return;qe(xe,xb.POST_PUBLISHED,{count:ye});xe._waterfallID=tc.generate();}function ke(xe,ye,ze,af){sd.getThreadMeta(xe._threadID,function(bf){if(bf&&bf.is_canonical&&!kb.canReply(bf)&&gb.gk_result){xe._showMessageBlockedDialog(bf);return;}var cf=jb.CHAT_WEB,df=nd.constructUserGeneratedMessageObject(ye,cf,xe._threadID);if(ze.length>0){df.has_attachment=true;df.raw_attachments=ze;}if(xe._sharePreview){var ef=xe._sharePreview.component.getShareData();if(ef){df.has_attachment=true;df.shareable_attachment=ef;}}if(sd.isNewEmptyLocalThread(xe._threadID)){var ff=xe._sheetController.getAddFriendsParticipants();xe._sheetController.closeAddFriendsSheet();if(ff===null||ff.length===0)return;ff=ff.filter(function(jf){return jf!=nb.getID();});if(ff.length===0){df.thread_id=fb.getThreadIDFromUserID(ka.getID());}else if(ff.length===1){df.thread_id=fb.getThreadIDFromParticipantID(ff[0]);}else rd.addParticipants(xe._threadID,ff);}if(sd.isEmptyLocalThread(xe._threadID)){df.threading_id=fb.tokenize(xe._threadID).value;var gf=sd.getThreadMetaNow(bf.thread_id);df.specific_to_list=Array.from(gf.participants);}if(typeof df!='undefined')df.signatureID=xe._signatureID;df.ui_push_phase=ia.UIPushPhase;af(df);if(xe._threadID!==df.thread_id&&!xe._photoUploader.isUploading()){var hf=xe._getInputValue();y.closeTab(xe._threadID);u.openThread(df.thread_id,'ChatTabView',null,ye?cd:function(jf){return jf.appendTextToInput(hf);});}});}function le(xe){xe._blocked=true;xe._sheetController.openUploadWarningTabSheet();}function me(xe){return !!(xe._fileUploader&&(xe._fileUploader.isUploading()||xe._photoUploader.isUploading()||(xe._sharePreview&&xe._sharePreview.component.isLoading())));}function ne(xe){return ((xe._fileUploader&&xe._fileUploader.isUploading())||xe._sharePreviewLoading);}function oe(xe){var ye=xe._getInputValue();if(!vd.test(ye))return true;if(xe._fileUploader&&(xe._fileUploader.getAttachments().length>0||xe._fileUploader.getImageFiles().length>0||xe._fileUploader.getAnimatedImageFiles().length>0||xe._fileUploader.getVideoFiles().length>0||xe._fileUploader.getAudioFiles().length>0||xe._fileUploader.getFiles().length>0))return true;if(xe._sharePreview&&xe._sharePreview.component.getShareData())return true;return false;}function pe(xe){xe._nubController.flyoutContentChanged();var ye=xe._getNode('attachmentShelf');dc.setTop(ye,ye.scrollHeight);}function qe(xe,ye,ze){xb.sendSignal(Object.assign({qn:xe._waterfallID,step:ye,uploader:xb.APP_CHAT},(ze||{})));}function re(xe,ye,ze,af,bf){var cf,df,ef;if(ye)pd.ensureThreadIsFetched(ye);this._threadID=xe;this._signatureID=ze;this._eventListeners=[];this._onlineStatus=j.OFFLINE;this._tabTemplate=he(xe);this._tabElem=this._tabTemplate.getRoot();if(bf&&bf.getTabElem()){this.insertBefore(bf);}else this.appendTo(af);this._stickersFlyoutShown=false;this._messagesView=null;this._titlebar=this._getNode('nubFlyoutTitlebar');this._iconsContainerNode=this._getNode('iconsContainer');this._inputContainerNode=this._getNode('inputContainer');this._pagesMessageIndicator=this._getNode('pagesMessageIndicator');this._waterfallID=tc.generate();this._subscriptionsHandler=new jc();this._initializeSheetController();var ff=[cd,this._initializeHotLike.bind(this),this._initializeHeader.bind(this),this._initializeUIListeners.bind(this),this._initializeAutoSendPhotoUploader.bind(this),this._initializeTitleHREF.bind(this),this._initializeP2P.bind(this),this._initializeInput.bind(this),this._initializeStickers.bind(this),this._initializeContentSearch.bind(this),function(){sd.getThreadMeta(this._threadID,function(jf){this._updateMutingSettings(jf);this._updateMessageBlockSettings(jf);}.bind(this));w.removeEmptyHrefs(this._tabElem);}.bind(this),function(){this.updateAvailableStatus();this.updateTab();this._setCloseTooltip(false);}.bind(this),this._initializeUnloadListeners.bind(this),this._initializeDragDropTarget.bind(this),this._initializePageMessagingIndicator.bind(this),this._initializeP2PChatThreadBannerContainer.bind(this)];ud.then(this._onP2PTransferStoreLoaded.bind(this));if(s.get('chat_defer_initialization',false)){var gf=function(jf){if(!jf.length){delete this._initFrame;return;}var kf=jf.shift();this._initFrame=gd(function(){gf(jf);});kf();}.bind(this);gf(ff);}else{var hf;for(cf=ff,df=Array.isArray(cf),ef=0,cf=df?cf:cf[typeof Symbol=="function"?Symbol.iterator:"@@iterator"]();;){if(df){if(ef>=cf.length)break;hf=cf[ef++];}else{ef=cf.next();if(ef.done)break;hf=ef.value;}hf();}}wd.set(xe,this);this._logOpenTab();}function se(xe){if(xe._photoUploader.isUploading())qe(xe,xb.CANCEL_DURING_UPLOAD);}function te(){var xe,ye,ze,af;for(xe=wd.values(),ye=Array.isArray(xe),ze=0,xe=ye?xe:xe[typeof Symbol=="function"?Symbol.iterator:"@@iterator"]();;){if(ye){if(ze>=xe.length)break;af=xe[ze++];}else{ze=xe.next();if(ze.done)break;af=ze.value;}af.updateAvailableStatus();af.updateMultichatTooltip();}}function ue(){var xe,ye,ze,af;for(xe=wd.values(),ye=Array.isArray(xe),ze=0,xe=ye?xe:xe[typeof Symbol=="function"?Symbol.iterator:"@@iterator"]();;){if(ye){if(ze>=xe.length)break;af=xe[ze++];}else{ze=xe.next();if(ze.done)break;af=ze.value;}af.updateCallLink();}}i.subscribe(j.ON_AVAILABILITY_CHANGED,te);wa.addListener(ue);q.subscribe(q.ON_CHANGED,function(){var xe,ye,ze,af;for(xe=wd.keys(),ye=Array.isArray(xe),ze=0,xe=ye?xe:xe[typeof Symbol=="function"?Symbol.iterator:"@@iterator"]();;){if(ye){if(ze>=xe.length)break;af=xe[ze++];}else{ze=xe.next();if(ze.done)break;af=ze.value;}sd.getThreadMeta(af,function(bf){wd.get(af)._updateUnreadCount(bf);});}});kd.addRetroactiveListener('state-changed',function(xe){for(var ye in xe){var ze=xe[ye]&&xe[ye].length,af=wd.get(ye);af&&af.showTypingIndicator(ze);}});qd.subscribe('threads-updated',function(xe,ye){var ze,af,bf,cf;for(ze=wd.keys(),af=Array.isArray(ze),bf=0,ze=af?ze:ze[typeof Symbol=="function"?Symbol.iterator:"@@iterator"]();;){if(af){if(bf>=ze.length)break;cf=ze[bf++];}else{bf=ze.next();if(bf.done)break;cf=bf.value;}var df=wd.get(cf);ye[cf]&&df.updateTab();if(df._newThreadIDFromPhotoUpload&&!df._photoUploader.isUploading()&&ye[df._newThreadIDFromPhotoUpload]){y.closeTab(df._threadID);u.openThread(df._newThreadIDFromPhotoUpload,'ChatTabView');df._newThreadIDFromPhotoUpload=null;}}});qd.subscribe('threads-deleted',function(xe,ye){var ze,af,bf,cf;for(ze=wd.keys(),af=Array.isArray(ze),bf=0,ze=af?ze:ze[typeof Symbol=="function"?Symbol.iterator:"@@iterator"]();;){if(af){if(bf>=ze.length)break;cf=ze[bf++];}else{bf=ze.next();if(bf.done)break;cf=bf.value;}ye[cf]&&y.closeTab(cf,'thread_deleted');}});Object.assign(re.prototype,{getThreadID:function(){return this._threadID;},getTabElem:function(){return this._tabElem;},showAddFriend:function(){setTimeout((function(){this._sheetController.openAddFriendsSheet();}).bind(this),0);},showNameConversation:function(xe){setTimeout((function(){this._sheetController.openNameConversationSheet(xe);}).bind(this),0);},hideAutomaticNameConversation:function(){setTimeout((function(){this._sheetController.closeAutomaticNameConversationSheet();}).bind(this),0);},isVisible:function(){return n.shown(this._tabElem);},setVisibleState:function(xe,ye){var ze=n.shown(this._tabElem),af=n.hasClass(this._tabElem,'opened');n.conditionShow(this._tabElem,xe);n.conditionClass(this._tabElem,'opened',ye);if(!(ze&&af)&&xe&&ye){if(!this._messagesView){var bf=fb.tokenize(this._threadID);this._messagesView=new aa(this._threadID,this._sheetController,this._getNode('scrollingArea'),this._getNode('conversation'),this._getNode('loadingIndicator'),this._getNode('lastMessageIndicator'),this._getNode('typingIndicator'),this,eb.ShowContextBanner&&bf.type==='user');}this._nubController.flyoutContentChanged();this._messagesView.scrollToBottom();}},focus:function(){if(n.hasClass(this._tabElem,'opened')){this._focusInput();}else this._getNode('dockButton').focus();},isFocused:function(){var xe=ed();return wb.byClass(xe,"_50mz")===this._tabElem;},hasEmptyInput:function(){return vd.test(this._getInputValue());},getInputElem:function(){if(s.get('chat_react_input')){if(!this._chatInput||!this._chatInput.isMounted())return null;return ac.findDOMNode(this._chatInput);}else return this._getNode('input');},setStickersFlyoutPackID:function(xe){if(this._stickerButton){this._setPackIDReact(xe);}else this._setPackIDLegacy(xe);},loadShareFromParams:function(xe,ye){this._getSharePreview().then(function(ze){ze.setProps({share:{params:ye,type:xe},uri:null});});},_linkDropped:function(xe){this._getSharePreview().then(function(ye){ye.setProps({share:null,uri:xe});});},_filesDropped:function(xe){if(this._fileUploader){this._fileUploader.addDroppedFiles(xe);}else{var ye=this._reactChatTabMenu.component.getFileUploaderPromise();if(ye)ye.then(function(ze){ze.addDroppedFiles(xe);});}},_setPackIDLegacy:function(xe){var ye=this._stickersFlyout;if(!this._stickersFlyoutToggler||!ye||!ye.component.isMounted())return;fc.selectPack(xe);this._toggleStickersFlyoutShownLegacy(true);},_setPackIDReact:function(xe){if(!this._stickerButton.isMounted())return;fc.selectPack(xe);this._toggleStickersFlyoutShownReact(true);},_toggleStickersFlyoutShownReact:function(xe){this._stickerButton.showFlyout();this._stickersFlyoutShown=xe;},_toggleStickersFlyoutShownLegacy:function(xe){if(xe){nc.show(this._stickersFlyoutToggler);}else nc.hide(this._stickersFlyoutToggler);this._stickersFlyoutShown=xe;},_hideStickersFlyoutIfShown:function(){if(this._stickersFlyoutToggler&&this._stickersFlyout&&this._stickersFlyoutShown)this._toggleStickersFlyoutShownLegacy(false);},showStickerReplyNUX:function(){if(xd)return;var xe=this._getNode('stickerButtonContainer')||this._getNode('emoticons');new g(wc.getURIBuilder().getURI()).setRelativeTo(xe).setData({thread_id:this._threadID}).setHandler(function(ye){hc.clearShowStickerReplyNUX();}).send();},insertBefore:function(xe){la.insertBefore(xe.getTabElem(),this._tabElem);},appendTo:function(xe){la.appendContent(xe,this._tabElem);},nextTabIs:function(xe){var ye=xe&&xe.getTabElem();return this._tabElem.nextSibling==ye;},getScrollTop:function(){return dc.getTop(la.find(this._tabElem,'.fbNubFlyoutBody.scrollable'));},setScrollTop:function(xe){dc.setTop(la.find(this._tabElem,'.fbNubFlyoutBody.scrollable'),xe);},destroy:function(){this._initFrame&&yc(this._initFrame);this._selectionPosition&&this._selectionPosition.disable();while(this._eventListeners.length)this._eventListeners.pop().remove();if(this._dropTarget)this._dropTarget.disable();this._checkUnsentMessages&&this._checkUnsentMessages.cancel();this._logUnsentPhotos&&this._logUnsentPhotos.cancel();this._messagesView&&this._messagesView.destroy();this._sheetController&&this._sheetController.destroy();ac.unmountComponentAtNode(this._getNode('animationContainer'));ac.unmountComponentAtNode(this._getNode('menuContainer'));if(s.get('chat_react_header')){if(this._addToThreadButton){this._addToThreadButton.unmount();this._addToThreadButton=null;}if(this._archiveWarning){this._archiveWarning.unmmount();this._archiveWarning=null;}if(this._videoCallButton){this._videoCallButton.unmmount();this._videoCallButton=null;}if(this._closeButton){this._closeButton.unmount();this._closeButton=null;}if(this._title){this._title.unmount();this._title=null;}}if(this._sharePreview){this._sharePreview.unmount();this._sharePreview=null;}try{ac.unmountComponentAtNode(this._getNode('photoUploaderContainer'));}catch(xe){k.bumpEntityKey('chat.web','chattab.unmount_failed');}if(s.get('chat_react_sticker_button')){ac.unmountComponentAtNode(this._getNode('stickerButtonContainer'));}else{this._stickersFlyout.unmount();this._stickersFlyout=null;}this._subscriptionsHandler&&this._subscriptionsHandler.release();if(s.get('chat_react_input')){ac.unmountComponentAtNode(this._getNode('inputContainer'));}else za.reset(this._getNode('input'));if(this._getNode('hotLikeContainer'))ac.unmountComponentAtNode(this._getNode('hotLikeContainer'));ac.unmountComponentAtNode(this._getNode('name'));if(!s.get('chat_react_header'))ac.unmountComponentAtNode(this._getNode('titlebarText'));if(this._orionTriggerContainer){if(this._orionTrigger)this._orionTrigger.unmount();this._orionTriggerContainer=null;this._orionTrigger=null;}if(this._p2pChatThreadBannerContainer){ac.unmountComponentAtNode(this._p2pChatThreadBannerContainer);this._p2pChatThreadBannerContainer=null;}this._unsubscribeP2PSendMoneyDialogStore();this._unsubscribeP2PTransferStore();la.remove(this._tabElem);wd["delete"](this._threadID);qa.unregisterNubController(this._nubController);},updateAvailableStatus:function(){sd.getThreadMeta(this._threadID,function(xe){var ye=j.OFFLINE,ze=this._getCanonicalUserID();if(ze){ye=yb.get(ze);}else{var af=xe.participants.map(function(cf){return fb.getUserIDFromParticipantID(cf);});ye=yb.getGroup(af);}if(!ha.isOnline())ye=j.OFFLINE;this.updateCallLink();n.conditionClass(this._tabElem,"_5238",ye===j.ACTIVE);n.conditionClass(this._tabElem,"_5239",ye===j.MOBILE);var bf=this._getNode('presenceIndicator');this._onlineStatus=ye;this._pagesMessageIndicatorHandler&&this._pagesMessageIndicatorHandler.notifyPageOnlineStatusChanged(ye);switch(ye){case j.ACTIVE:bf.setAttribute('alt',dd._("Online"));break;case j.MOBILE:bf.setAttribute('alt',dd._("Mobile"));break;default:bf.removeAttribute('alt');break;}}.bind(this));},updateTab:function(){sd.getThreadMeta(this._threadID,function(xe){var ye,ze,af,bf=[this._getNode('name')];if(!s.get('chat_react_header')){bf.push(this._getNode('titlebarText'));}else if(this._title)this._title.setProps({thread:xe},function(){this._getNode('chatWrapper').setAttribute('aria-label',this._title.component.getTitle());}.bind(this));var cf;for(ye=bf,ze=Array.isArray(ye),af=0,ye=ze?ye:ye[typeof Symbol=="function"?Symbol.iterator:"@@iterator"]();;){if(ze){if(af>=ye.length)break;cf=ye[af++];}else{af=ye.next();if(af.done)break;cf=af.value;}ac.render(ac.createElement(mb,{isNewThread:sd.isNewEmptyLocalThread(this._threadID),thread:xe,useAndSeparator:true,useShortName:!xe.is_canonical,viewer:ka.getID()}),cf);}this._updateControls(xe);this._updateMessageBlockSettings(xe);this._updateMutingSettings(xe);this._updateUnreadCount(xe);this.updateMultichatTooltip();this._updateArchiveWarning(xe);this._updateEmployeeAwayWarning(xe);this._updateOfficeStatus(xe);this._updateNewThread(xe);this._updateNameConversationSheet(xe);this._updateReadOnlySheet(xe);this._updateSwitchToWork(xe);}.bind(this));},_updateNameConversationSheet:function(xe){if(kb.canReply(xe)&&!xe.name&&!xe.is_canonical&&!xe.name_conversation_sheet_dismissed&&!xe.has_email_participant&&!xe.read_only&&!sd.isEmptyLocalThread(xe.thread_id)){this.showNameConversation(true);}else this.hideAutomaticNameConversation();},_updateReadOnlySheet:function(xe){var ye=kb.showComposer(xe),ze=kb.canReply(xe),af=sd.isEmptyLocalThread(xe.thread_id);if(!ze&&!ye&&!af)this._sheetController.openReadOnlySheet();},updateSignatureID:function(xe){this._signatureID=xe;},_updateMessageBlockSettings:function(xe){this._updateMenuPropsSafe({hasMessageBlocked:kb.isMessageBlocked(xe)});},_updateMutingSettings:function(xe){var ye=kb.isMuted(xe);this._updateMenuPropsSafe({isMuted:ye});},_updateMenuPropsSafe:function(xe){if(this._reactChatTabMenu&&this._reactChatTabMenu.component&&this._reactChatTabMenu.component.isMounted())this._reactChatTabMenu.setProps(xe);},_updateArchiveWarning:function(xe){if(ka.isEmployee())hb.getMulti(xe.participants,this._showArchiveWarningIfAllParticipantsAreEmployees.bind(this));},_updateEmployeeAwayWarning:function(xe){t.updateEmployeeAwayWarning(xe,function(){this._sheetController.openEmployeeAwaySheet();}.bind(this),function(){});},_updateOfficeStatus:function(xe){var ye=this._getNode('officeStatus');if(!ye||fb.isGroupChat(xe.thread_id))return;var ze=fb.getParticipantIDFromUserID(xe.canonical_fbid);hb.get(ze,function(af){ba.update(ye,af);});},_updateSwitchToWork:function(xe){if(ka.isEmployee()&&ka.hasWorkUser()&&fb.isGroupChat(xe.thread_id)){hb.getMulti(xe.participants,function(ye){var ze=this._isEmployeesOnly(ye);this._updateMenuPropsSafe({hasSwitchToWork:ze});}.bind(this));}else this._updateMenuPropsSafe({hasSwitchToWork:false});},_updateControls:function(xe,ye,ze){var af=false;if(xe&&xe.thread_id){var bf=fb.tokenize(xe.thread_id);if(bf.type==='user'){var cf=bf.value;af=!va.isUser(cf);}}var df=kb.showComposer(xe)&&(!fd(xe.participants)||!!ye);n.conditionShow(this._inputContainerNode,df);n.conditionShow(this._iconsContainerNode,df);this._updateMenuPropsSafe({isEmptyChat:sd.isNewEmptyLocalThread(xe.thread_id),show:df});if(af)this._updateMenuPropsSafe({showAddFriend:null});var ef=df&&!af;if(s.get('chat_react_header')){this._addToThreadButton&&this._addToThreadButton.setProps({shown:ef});}else n.conditionShow(this._getNode('addToThreadLink'),ef);if(ze&&ze.length===1&&eb.ShowContextBanner&&eb.ShowContextBannerNullState){this._messagesView&&this._messagesView.renderContextBanner(null,ze[0].info&&ze[0].info.uid);}else this._messagesView&&this._messagesView.unmountContextBanner();this._resizeInputContainer();this._updateOrionTrigger();},_updateOrionTrigger:function(){if(this._orionTrigger){this._setOrionTriggerProps();}else this._renderOrionTrigger();},_setOrionTriggerProps:function(){this.getParticipantIDsForOrionNUX(function(xe,ye){hb.getMulti(xe,function(ze){var af=[],bf,cf=sd.isNewEmptyLocalThread(this._threadID);for(var df in ze){bf=this._getUserIdFromParticipantID(df);if(bf!==ka.getID())af.push(ya.set(ze[df],{userID:bf}));}this._orionTrigger.setProps(Object.assign({participants:af,isNewEmptyLocalThread:cf,isGroupChat:fb.isGroupChat(this._threadID)&&!cf,threadID:this._threadID,threadFBID:ye},ub.getStateByThreadID(this._threadID)));}.bind(this));}.bind(this));},_getUserIdFromParticipantID:function(xe){return fb.getUserIDFromParticipantID(xe);},_onP2PSendMoneyDialogStoreChange:function(){this._updateOrionTrigger();},_unsubscribeP2PSendMoneyDialogStore:function(){if(this._sendMoneyDialogStoreSub){this._sendMoneyDialogStoreSub.remove();this._sendMoneyDialogStoreSub=null;}},_onP2PTransferStoreChange:function(){this._renderOrionTrigger();if(this._canP2PSend())this._unsubscribeP2PTransferStore();},_unsubscribeP2PTransferStore:function(){if(this._transferStoreSub){this._transferStoreSub.remove();this._transferStoreSub=null;}},_isP2PEnabled:function(){return sb.P2PEnabled;},_canP2PSend:function(){return (this._isP2PEnabled()||(td&&td.hasTransfers())||(td&&td.hasAccepted()));},_renderOrionTrigger:function(){if(fb.isGroupChat(this._threadID)&&!sb.P2PGroupSendWWW)return false;var xe=this._getCanonicalUserID();if(this._canP2PSend()&&xe!==ka.getID()){this._orionTriggerContainer=this._getNode('orionTriggerContainer');this._orionTrigger=new bc(tb,this._orionTriggerContainer);this._orionTrigger.setProps({onTrigger:this._orionTriggered.bind(this)});n.addClass(this._inputContainerNode,"_11d6");this._setOrionTriggerProps();}},getParticipantIDsForOrionNUX:function(xe){var ye=this._sheetController.getAddFriendsParticipants(),ze=this._getCanonicalUserID();if(ze){xe([fb.getParticipantIDFromUserID(ze)]);}else if(sd.isNewEmptyLocalThread(this._threadID)&&ye){xe(ye);}else sd.getThreadMeta(this._threadID,function(af){xe(af.participants,af.thread_fbid);}.bind(this));},_resizeInputContainer:function(){var xe=this._tabElem.clientWidth,ye=2,ze=xe-(this._inputContainerNode.clientWidth+ye),af=cb.isRTL()?'left':'right';ic.set(this._iconsContainerNode,af,ze+'px');if(!s.get('chat_react_input'))mc.getInstance(this._getNode('input')).update();},_updateNewThread:function(xe){if(sd.isNewEmptyLocalThread(xe.thread_id))this.showAddFriend();},_isEmployeesOnly:function(xe){for(var ye in xe)if(!xe[ye].employee)return false;return true;},_showArchiveWarningIfAllParticipantsAreEmployees:function(xe){var ye=this._isEmployeesOnly(xe),ze=s.get('chat_react_header'),af=ze?this._getNode('archiveContainer'):this._getNode('titanArchiveWarning');if(af){if(this._titlebarTooltipAnchor)n.conditionClass(this._titlebarTooltipAnchor,'narrowTitleBar',ye);if(ze){this._archiveWarning&&this._archiveWarning.setProps({shown:ye});}else n.conditionShow(af,ye);}},updateMultichatTooltip:function(){sd.getThreadMeta(this._threadID,function(xe){if(!xe.is_canonical){var ye;if(s.get('chat_react_header')){ye=ac.findDOMNode(this._title.component);}else ye=this._titlebarTooltipAnchor;be(ye,xe.participants);}}.bind(this));},_getNode:function(xe){return this._tabTemplate.getNode(xe);},_getCanonicalUserID:function(){return fb.getUserIDFromThreadID(this._threadID);},_listen:function(xe,event,ye,ze){var af=this._getNode(xe);if(af){this._eventListeners.push(ua.listen(af,event,ye.bind(this)));}else if(!ze)throw new Error('Could not find node "'+xe+'"');},_closePreClicked:function(xe){this._closeMouseDown=true;},_closeClicked:function(xe){se(this);y.closeTab(this._threadID);if(xe instanceof kc){xe.stopPropagation();return;}xe.kill();},_closeEnter:function(xe){if(xe.keyCode===bb.RETURN)this._closeClicked(xe);},_nubClicked:function(xe){xe.kill();return da.inform('nub-activated',this._threadID);},_dockKeyDown:function(event){if(event.keyCode===bb.RETURN||event.keyCode===bb.SPACE){da.inform('nub-activated',this._threadID);event.kill();}else this._handleHotkeyPressed(event);},_handleHotkeyPressed:function(event){if(event.keyCode===bb.ESC){this._handleEscape();if(s.get('chat_react_input'))event=new ma(event);event.kill();}else if(event.keyCode===bb.TAB)this._handleTabPressed(event);},_handleTabPressed:function(event){if(!event.ctrlKey){var xe=da.inform('tab-pressed',{id:this._threadID,shiftPressed:event.shiftKey});if(s.get('chat_react_input'))event=new ma(event);!xe&&event.kill();return true;}},_handleEscape:function(){if(this._stickersFlyoutShown){this._stickerButton?this._toggleStickersFlyoutShownReact(false):this._toggleStickersFlyoutShownLegacy(false);return;}se(this);if(this.hasEmptyInput()){da.inform('esc-pressed',this._threadID);}else{var xe=dd._("Are you sure you want to close this chat window?"),ye=dd._("You haven't sent your message."),ze=new pa().setTitle(xe).setBody(ye).setButtons([pa.CLOSE,pa.CANCEL]).setHandler(da.inform.bind(da,'esc-pressed',this._threadID,null)).setModal(true).show(),af=ze.getButtonElement('yes');af&&xa.set(af);}},_titleClicked:function(event){var xe=event.getTarget();if(!wb.byClass(xe,'titlebarText')&&!wb.byClass(xe,'uiSelector')&&!wb.byClass(xe,'addToThread')&&!wb.byClass(xe,'optionMenu')&&!wb.byClass(xe,'videoicon')&&!wb.byClass(xe,'phoneicon')&&!wb.byClass(xe,"_1fu3")&&!wb.byClass(xe,"_1fu4")&&!wb.byClass(xe,'close')){event.kill();y.lowerTab(this._threadID);this.focus();}},_callEnter:function(xe){if(xe.keyCode===bb.RETURN)this._callClicked(xe);},_callClicked:function(xe){if(xe.target)xe.target.blur();var ye=this._getCanonicalUserID();if(this._videoCallLinkEnabled){var ze;if(xe.target&&(n.hasClass(xe.target,'phoneicon')||n.hasClass(xe.target,"_1fu4"))){ze='chat_tab_voice_icon';}else ze='chat_tab_icon';da.inform('video-call-clicked',{threadID:this._threadID,userID:ye,clickSource:ze,audioOnly:ze==='chat_tab_voice_icon'});}if(s.get('chat_react_header')){xe.stopPropagation();}else return false;},_addFriendLinkClicked:function(){this.showAddFriend();},_getUserParticipants:function(xe){var ye=[];xe.forEach(function(ze){var af=fb.getUserIDFromParticipantID(ze);af&&ye.push(af);});return ye;},_enableDesktopNotif:function(){Notification.requestPermission();},_inputPasted:function(event){if(sc.chrome()){var xe=event.clipboardData||event.originalEvent.clipboardData;if(!xe||!xe.items||xe.items.length<1)return;var ye=xe.items[0].type;if(ye!=='image/png')return;if(xe.items[0].getAsFile){var ze=xe.items[0].getAsFile();this._photoUploader.uploadFile(ze);}}},_focusInput:function(){if(s.get('chat_react_input')){this._chatInput&&this._chatInput.isMounted()&&this._chatInput.focus();}else this._getNode('input').focus();},_focusTab:function(){n.addClass(this._tabElem,'focusedTab');this.tryMarkAsRead();this._closeMouseDown=false;this._setCloseTooltip(true);da.inform('focus-tab',this._threadID);},_blurTab:function(){n.removeClass(this._tabElem,'focusedTab');!this._closeMouseDown&&this._setCloseTooltip(false);},_setCloseTooltip:function(xe){if(s.get('chat_react_header')){this._closeButton&&this._closeButton.setProps({active:xe});return;}var ye=this._getNode('titlebarCloseButton'),ze=xe?dd._("Press Esc to close"):dd._("Close tab");oc.set(ye,ze,'above');},_inputKeyDown:function(event){this.tryMarkAsRead();if(event.keyCode===bb.RETURN&&!event.shiftKey){if(ne(this)){le(this);event.kill&&event.kill();return;}ie(this);event.kill&&event.kill();return;}if(event.keyCode===bb.DOWN&&event.shiftKey&&this.hasEmptyInput()){event.kill&&event.kill();y.lowerTab(this._threadID);this.focus();return;}this._handleHotkeyPressed(event);},_showMessageBlockedDialog:function(xe){var ye=this._getCanonicalUserID();if(!ye)return;var ze='fbid:'+ye;hb.get(ze,function(af){m.loadModules(["MessageBlockedDialog"],function(bf){bf.show(xe.thread_fbid,xe.can_reply,kb.isMessageBlocked(xe),af.short_name);});});},_initializeInput:function(){if(!s.get('chat_react_input')){var xe=this._inputContainerNode.clientHeight;mc.getInstance(this._getNode('input')).subscribe('resize',function(){var ye=this._inputContainerNode.clientHeight;if(ye!=xe)this._nubController.flyoutContentChanged();xe=ye;}.bind(this));this._listen('input','focus',this._focusTab);this._listen('input','blur',this._blurTab);this._listen('input','paste',this._inputPasted);if(sc.firefox()&&ja.get()=='ko_KR'){this._listen('input','keyup',this._inputKeyDown);}else this._listen('input','keydown',this._inputKeyDown);this._initializeThingsWithInputFn(this._tabTemplate.getNode('input'));}else this._chatInput=ac.render(ac.createElement(jd,{initializeThingsWithInputFn:this._initializeThingsWithInputFn.bind(this),inputKeyDown:this._inputKeyDown.bind(this),onAddMention:this._onAddMention.bind(this),onBlur:this._blurTab.bind(this),onEscape:this._handleEscape.bind(this),onFocus:this._focusTab.bind(this),onTab:this._handleTabPressed.bind(this),openFlyoutFn:this._toggleStickersFlyoutShownLegacy.bind(this,true),resizeFn:function(ye){ic.set(this._getNode('inputContainer'),'height',ye+'px');this._nubController.flyoutContentChanged();}.bind(this),uploadPhotoFn:function(ye){this._photoUploader&&this._photoUploader.uploadFile(ye);}.bind(this)}),this._getNode('chatInputContainer'));},_initializeSharePreview:function(xe,ye){ua.listen(xe,'keyup',function(){var ze=ye?ye():xe.value;if(!ze.length){this._urlScraper.reset();delete this._urlScraperData;}}.bind(this));this._urlScraper=new qc(xe,ye);this._urlScraper.subscribe('match',function(ze,af){this._urlScraperData=af;this._getSharePreview().then(function(bf){var cf=this._urlScraperData;bf.setProps({share:null,uri:(cf&&cf.url)});}.bind(this));}.bind(this));},_getSharePreview:function(){if(!this._sharePreview&&!this._sharePreviewPromise){this._sharePreviewLoading=true;this._sharePreviewPromise=new zb(function(xe){m.loadModules(["MercurySharePreview.react"],function(ye){this._sharePreview=new bc(ye,this._getNode('shareAttachmentShelf'));this._sharePreview.setProps({imageSize:{width:zd,height:zd},location:ib.CHAT_PREVIEW,onClose:this._focusInput.bind(this),onUpdate:function(){pe(this);this._unblockSend();}.bind(this)});this._sharePreviewLoading=false;xe(this._sharePreview);}.bind(this));}.bind(this));}return this._sharePreviewPromise;},_initializeThingsWithInputFn:function(xe,ye){this._initializeSharePreview(xe,ye);sd.getThreadMeta(this._threadID,function(ze){if(eb.CoreGraphEnabled&&ze&&ze.folder===pb.PENDING){n.hide(this._getNode('footer'));var af=la.create('div');la.appendContent(this._getNode('chatConv'),af);ac.render(ac.createElement(l,{bootloadPlaceholder:ac.createElement("div",{style:{height:27}}),bootloadLoader:ab('ChatPendingActions.react'),onDeleteClick:function(bf){uc.show(this._threadID);}.bind(this),onReplyClick:function(bf){la.remove(af);n.show(this._getNode('footer'));this._updateControls(ze);}.bind(this)}),af);}od.getFBIDFromClientID(this._threadID,function(bf){this._typingDetector=new pc(this._getCanonicalUserID(),xe,'mercury-chat',null,bf,ye);}.bind(this));}.bind(this));},_getInputValue:function(){if(s.get('chat_react_input')){if(!this._chatInput||!this._chatInput.isMounted())return '';return this._chatInput.getValue()||'';}else return this._tabTemplate.getNode('input').value||'';},appendTextToInput:function(xe){if(s.get('chat_react_input')){if(this._chatInput&&this._chatInput.isMounted())this._chatInput.appendText(xe);}else this._getNode('input').value+=xe;},_hasUnfinishedPost:function(){return oe(this)||me(this);},tryMarkAsRead:function(){if(!this._messagesView||this._messagesView.isScrolledToBottom()){rd.markRead(this._threadID);rd.markSeen(this._threadID);return true;}return false;},_chatConvClicked:function(xe){this.tryMarkAsRead();if(wb.byTag(xe.getTarget(),'a')||la.getSelection())return;this.focus();},_inputContainerClicked:function(xe){this.tryMarkAsRead();this.focus();},_initializePageMessagingIndicator:function(){if(!this._pagesMessageIndicator)return;n.hide(this._pagesMessageIndicator);this._pagesMessageIndicatorHandler=vb.tryCreateHandler(this._threadID,this._pagesMessageIndicator,this._onlineStatus);this._pagesMessageIndicatorHandler&&this._pagesMessageIndicatorHandler.checkResponsiveness();},showTypingIndicator:function(xe){this._renderTypingIndicator();n.conditionClass(this._tabElem,"_54m8",xe);},_renderTypingIndicator:function(){var xe=n.hasClass(this._tabElem,'highlightTab')?'light':'dark';ac.render(ac.createElement(lb,{color:xe}),this._getNode('animationContainer'));},_updateUnreadCount:function(xe){var ye=xe.unread_count;if(typeof ye!='undefined'){var ze=!!ye&&(!q.showsTabUnreadUI||q.showsTabUnreadUI()),af=this._getNode('numMessages');n.conditionShow(af,ze);n.conditionClass(this._tabElem,'highlightTab',ze);this._renderTypingIndicator();fe(this._threadID,this._tabElem,ze);la.setContent(af,ye);}},updateCallLink:function(){var xe=this._getCanonicalUserID();if(!xe||xe===ka.getID()||!va.isUser(xe)){if(s.get('chat_react_header')){if(this._videoCallButton)this._videoCallButton&&this._videoCallButton.setProps({shown:false});if(this._voiceCallButton)this._voiceCallButton.isMounted()&&this._voiceCallButton.setProps({shown:false});}else{var ye=this._getNode('videoCallLink');if(ye)n.hide(ye);var ze=this._getNode('voiceCallLink');if(ze)n.hide(ze);}this._videoCallLinkEnabled=false;return;}this._videoCallLinkEnabled=wa.isCallable(xe);if(!s.get('chat_react_header')){n.conditionClass(this._tabElem,"_4hwz",this._videoCallLinkEnabled);hb.get(fb.getParticipantIDFromUserID(xe),function(af){wa.callButtonTooltip(xe,af.short_name);this._setCallButtonTooltips(xe,af.short_name);}.bind(this));}},_setCallButtonTooltips:function(xe,ye){var ze=wa.callButtonTooltip(xe,ye),af=wa.voiceCallButtonTooltip(xe,ye);oc.set(this._getNode('videoCallLink'),ze);var bf=this._getNode('voiceCallLink');if(bf)oc.set(bf,af);},_initializeSheetController:function(){this._sheetController=new ca(this._threadID,this._getNode('sheet'),this._tabElem,this);this._sheetController.onClickMessagesBlockedSheet(function(){rd.unblockMessages(this._threadID);this.focus();}.bind(this));this._sheetController.onClickNewMessagesSheet(function(){this._messagesView&&this._messagesView.scrollToBottom();this.focus();this.tryMarkAsRead();}.bind(this));this._sheetController.onClickThreadIsMutedSheet(function(){rd.unmute(this._threadID);this.focus();}.bind(this));this._sheetController.onTokensChanged(function(xe,ye){sd.getThreadMeta(this._threadID,function(ze){this._updateControls(ze,ye.token_count,ye.tokens);}.bind(this));}.bind(this));this._nubController=new qb().init(this._tabElem);this._sheetController.onResize(function(){this._nubController.flyoutContentChanged();}.bind(this));this._nubController.subscribe('resize',function(){this._resizeInputContainer();}.bind(this));},_initializeHeader:function(){this._initializeReactMenu(this._getNode('fileAttachmentShelf'));this._initializeArchiveWarning();this._initializeAddToThreadButton();this._initializeVideoCallButton();this._initializeCloseButton();this._initializeTitle();},_initializeReactMenu:function(xe){var ye=fb.isGroupChat(this._threadID),ze=sd.isNewEmptyLocalThread(this._threadID),af=this._sheetController.openAddFriendsSheet.bind(this._sheetController);this._reactChatTabMenu=new bc(z,this._getNode('menuContainer'));this._reactChatTabMenu.setProps({sheetController:this._sheetController,onFileUploaderMounted:this.setFileUploader.bind(this),nameConversationFunc:function(){return this.showNameConversation();}.bind(this),isGroupChat:ye,isEmptyChat:ze,showAddFriend:af,threadID:this._threadID,otherUserID:this._getCanonicalUserID(),attachmentsShelf:xe,onUploadFinished:this._unblockSend.bind(this),onUpdateAttachmentsShelf:pe.bind(this,this),onSubmit:this._focusInput.bind(this)});},_initializeArchiveWarning:function(){if(s.get('chat_react_header')){this._archiveWarning=new bc(p,this._getNode('archiveContainer'));this._archiveWarning.setProps({isFBAtWork:s.IsWorkUser,shown:true});}},_initializeAddToThreadButton:function(){if(s.get('chat_react_header')){this._addToThreadButton=new bc(o,this._getNode('addToThreadContainer'));this._addToThreadButton.setProps({isFBAtWork:s.get('IsWorkUser',false),onClick:this._addFriendLinkClicked.bind(this),shown:true});}else this._listen('addToThreadLink','click',this._addFriendLinkClicked,true);},_initializeVideoCallButton:function(){if(!fb.getUserIDFromThreadID(this._threadID))return;if(s.get('chat_react_header')){var xe=this._getCanonicalUserID();this._videoCallButton=new bc(ga,this._getNode('videoCallButtonContainer'));this._videoCallButton.setProps({shown:true,isAudio:false,userID:xe,onClick:this._callClicked.bind(this),onKeyUp:this._callEnter.bind(this)});this._voiceCallButton=new bc(ga,this._getNode('voiceCallButtonContainer'));this._voiceCallButton.setProps({shown:true,isAudio:true,userID:xe,onClick:this._callClicked.bind(this),onKeyUp:this._callEnter.bind(this)});}else{this._listen('videoCallLink','click',this._callClicked,true);this._listen('videoCallLink','keyup',this._callEnter,true);if(this._getNode('voiceCallLink')){this._listen('voiceCallLink','click',this._callClicked,true);this._listen('voiceCallLink','keyup',this._callEnter,true);}}},_initializeCloseButton:function(){if(s.get('chat_react_header')){this._closeButton=new bc(r,this._getNode('closeButtonContainer'));this._closeButton.setProps({onClick:this._closeClicked.bind(this),onKeyUp:this._closeEnter.bind(this),onMouseDown:this._closePreClicked.bind(this)});}else{this._listen('titlebarCloseButton','click',this._closeClicked);this._listen('titlebarCloseButton','keyup',this._closeEnter);this._listen('titlebarCloseButton','mousedown',this._closePreClicked);}},_initializeTitle:function(){if(s.get('chat_react_header')){var xe=sd.getThreadMetaNow(this._threadID);this._title=new bc(fa,this._getNode('titleContainer'));this._title.setProps({isNewThread:sd.isNewEmptyLocalThread(this._threadID),thread:xe,viewer:ka.getID()});}},_initializeTitleHREF:function(){vc.getThreadURI(this._threadID,function(ye){return this._setTitleHref(ye);}.bind(this));if(!fb.getUserIDFromThreadID(this._threadID))this._titlebarTooltipAnchor=this._getNode('titlebarText');var xe=this._getCanonicalUserID();if(this._getCanonicalUserID())hb.get(fb.getParticipantIDFromUserID(xe),function(ye){if(ye.href)this._setTitleHref(ye.href);}.bind(this));},_initializeUIListeners:function(){if(this._pagesMessageIndicator)this._listen('scrollingArea','scroll',function(event){var xe=event.target;if(xe.scrollHeight-xe.offsetHeight!==xe.scrollTop)this._pagesMessageIndicatorHandler&&this._pagesMessageIndicatorHandler.hideIndicatorAndPreventFutureShow();}.bind(this));this._listen('closeButton','click',this._closeClicked);this._listen('dockButton','click',this._nubClicked);this._listen('dockButton','keydown',this._dockKeyDown);this._listen('nubFlyoutTitlebar','click',this._titleClicked);this._listen('chatConv','click',this._chatConvClicked);this._listen('inputContainer','click',this._inputContainerClicked);this._listen('sheet','keydown',function(event){if(!event.getModifiers().any&&event.keyCode===bb.TAB){this._focusInput();event.kill();}}.bind(this));if(this._getNode('officeStatus'))this._listen('officeStatus','click',function(){return false;},true);},setFileUploader:function(xe){this._fileUploader=xe;},_initializeAutoSendPhotoUploader:function(){this._photoUploader=ac.render(ac.createElement(v,{onSubmit:this._handlePUSubmit.bind(this),onAllUploadsComplete:this._handlePUAllUploadsCompleted.bind(this),onLastUploadFail:this._handlePULastUploadFailed.bind(this),onLastUploadCancel:this._handlePULastUploadCanceled.bind(this)}),this._getNode('photoUploaderContainer'));},_initializeStickers:function(){this._stickersFlyoutToggler=this._getNode('emoticons');if(hc.shouldShowStickerSearchNUX())this._listen('emoticons','click',function(){if(hc.shouldShowStickerSearchNUX()){fc.selectPack(gc.SEARCH_PACK_ID);hc.clearShowStickerSearchNUX();}},true);if(s.get('chat_react_sticker_button')){this._stickerButton=ac.render(ac.createElement(x,{className:"_4vui",flyoutAlignment:"left",onFlyoutShown:this._onFlyoutShown.bind(this),onFlyoutHidden:this._onFlyoutHidden.bind(this),onStickerSelect:this._stickerSelected.bind(this),onEmoticonSelect:this._emoticonSelected.bind(this),threadID:this._threadID}),this._getNode('stickerButtonContainer'));k.bumpEntityKey('chat.web','sticker_button.mounting_attempted');}else{var xe=this._getNode('stickers');if(xe)var ye=new zb(function(af){this._stickersFlyout=new bc(oa,xe);this._stickersFlyout.setProps({deferredPlaceholder:ac.createElement("div",{style:{padding:'30px',textAlign:'center'}},ac.createElement(xc,{size:"large"})),deferredComponent:function(bf){af(bf);},onStickerSelect:function(bf){this._stickerSelected(bf);}.bind(this),onShown:this._onFlyoutShown.bind(this),onHidden:this._onFlyoutHidden.bind(this),onEmoticonSelect:this._emoticonSelected.bind(this),onEscKeyDown:this._hideStickersFlyoutIfShown.bind(this)});}.bind(this)),ze=nc.listen('show',this._stickersFlyoutToggler,function(){nc.unsubscribe(ze);ye.then(function(af){m.loadModules(["StickersFlyout.react"],af);});});}},_initializeContentSearch:function(){var xe=this._getNode('contentSearchContainer');if(xe){this._contentSearchButton=ac.render(ac.createElement(l,{bootloadPlaceholder:ac.createElement("div",{style:{height:27}}),bootloadLoader:ab('ChatContentSearchButton.react'),className:"_4vui",getInput:function(){return this.getInputElem();}.bind(this),getQuery:function(){return this._getInputValue();}.bind(this),onSelect:function(ye,ze){var af=this.getInputElem();af&&af.select&&af.select();if(ye.platformFBID.toString()===eb.MessengerAppID){this._stickerSelected(ye.resultID.toString());}else{this._photoUploader&&this._photoUploader.uploadURL({attribution_app_id:ye.platformFBID,external_image_url:ye.source.url,preview_url:ye.media.preview?ye.media.preview.url:ye.media.thumbnail.url,source:ye.source});this._messagesView&&this._messagesView.scrollToBottom();}}.bind(this)}),xe);n.addClass(this._inputContainerNode,"_35li");k.bumpEntityKey('chat.web','content_search_button.mounting_attempted');}},_initializeDragDropTarget:function(){var xe=na.scry(this._tabElem,"._1ia");if(xe&&xe.length>0){this._dropTarget=new ra(xe[0]);this._dropTarget.setOnFilesDropCallback(this._filesDropped.bind(this));this._dropTarget.setOnURLDropCallback(this._linkDropped.bind(this));this._dropTarget.enable();}},_initializeP2PChatThreadBannerContainer:function(){var xe=na.scry(this._tabElem,"._2hc2");if(xe&&xe.length>0){this._p2pChatThreadBannerContainer=xe[0];ac.render(ac.createElement(rb,{otherUserID:fb.getUserIDFromThreadID(this._threadID),threadID:this._threadID}),this._p2pChatThreadBannerContainer);}},_initializeP2P:function(){this._sendMoneyDialogStoreSub=ub.addListener('change',this._onP2PSendMoneyDialogStoreChange.bind(this));if(this._isP2PEnabled())this._renderOrionTrigger();},_onP2PTransferStoreLoaded:function(){if(!this._isP2PEnabled()){this._transferStoreSub=td.addListener('change',this._onP2PTransferStoreChange.bind(this));}else this._renderOrionTrigger();},_initializeHotLike:function(){if(this._getNode('hotLikeContainer')){ac.render(ac.createElement(ob,{className:"_3s0d",closeStickerTrayLegacy:function(){return nc.hide(this._stickersFlyoutToggler);}.bind(this),sendSticker:this._stickerSelected.bind(this),threadID:this._threadID}),this._getNode('hotLikeContainer'));n.addClass(this._inputContainerNode,"_n4k");}},_initializeUnloadListeners:function(){this._checkUnsentMessages=zc(function(){if(this._hasUnfinishedPost())return dd._("You haven't sent your message yet. Do you want to leave without sending?");if(md.getNumberLocalMessages(this._threadID))return dd._("Your message is still being sent. Are you sure you want to leave?");return null;}.bind(this));cc.onBeforeUnload(this._checkUnsentMessages,false);this._logUnsentPhotos=zc(se.bind(null,this));cc.onUnload(this._logUnsentPhotos);},_handlePUSubmit:function(xe,ye){qe(this,xb.UPLOAD_START,ye);ke(this,'',[],function(ze){if(this._threadID!==ze.thread_id){this._newThreadIDFromPhotoUpload=ze.thread_id;if(this._messagesView)this._messagesView.setNewThreadID(ze.thread_id);}ze.content_attachment=null;ld.addAttachmentPlaceholder(ze,ye.upload_id,ye);}.bind(this));ve('submit',ye);this._focusInput();},_handlePULastUploadFailed:function(xe,ye){qe(this,xb.CLIENT_ERROR,ye);ve('failed',ye);ld.cancelAttachmentPlaceholder(ye.upload_id,ye);var ze=dd._("Photo Upload Failed"),af=dd._("Please try again. Make sure you are uploading a valid photo.");new pa().setTitle(ze).setBody(af).setButtons(pa.OK).show();},_handlePULastUploadCanceled:function(xe,ye){qe(this,xb.CANCEL_DURING_UPLOAD,ye);ve('canceled',ye);ld.cancelAttachmentPlaceholder(ye.upload_id,ye);},_handlePUAllUploadsCompleted:function(xe,ye){qe(this,xb.ALL_UPLOADS_DONE,ye);ve('completed',ye);ld.confirmAttachmentPlaceholder(ye.upload_id,ye);var ze=ye.image_ids.length||ye.attachments.length;je(this,ze);},_stickerSelected:function(xe){ke(this,'',[],function(ye){ye.has_attachment=true;ye.sticker_id=xe;ld.send(ye);this.focus();}.bind(this));this._messagesView&&this._messagesView.scrollToBottom();},_emoticonSelected:function(xe){var ye=ta.symbols[xe];if(!ye)return;if(s.get('chat_react_input')){this._chatInput.insertEmoticon(ye);return;}this._selectionPosition=this._selectionPosition||new ec(this._getNode('input'));var ze=mc.getInstance(this._getNode('input')),af=ze.getValue(),bf=sa.insertEmoticon(ye,af,this._selectionPosition.getPos());ze.setValue(bf.result);this._selectionPosition.setPos(bf.start,bf.end);},_orionTriggered:function(){ke(this,'',[],function(xe){this.focus();}.bind(this));this._messagesView&&this._messagesView.scrollToBottom();},_addStickerSearchNUXIndicator:function(){n.addClass(this._getNode('emoticonIndicator'),'nux');xd=false;},_onFlyoutShown:function(xe){if(s.get('chat_react_sticker_button')){var ye=this._stickersFlyout.props.packID;if(ye!==gc.SEARCH_PACK_ID)this.focus();}xe();this._stickersFlyoutShown=true;},_searchStickers:function(xe,ye){this._stickersFlyout&&this._stickersFlyout.setProps({packID:gc.SEARCH_PACK_ID,trigger:xe},ye);},_onFlyoutHidden:function(){this._stickersFlyoutShown=false;this.focus();},_setTitleHref:function(xe){if(s.get('chat_react_header')){this._title&&this._title.setProps({href:xe});}else{var ye=this._getNode('titlebarText');ye.setAttribute('href',xe);ye.removeAttribute('rel');n.removeClass(ye,'noLink');}},_onAddMention:function(xe){this._linkDropped((new rc(xe.getURI())).getQualifiedURI().toString());},_unblockSend:function(){if(!this._blocked||ne(this))return;this._blocked=false;ie(this);this._sheetController.closeUploadWarningTabSheet();},_logOpenTab:function(){new h('/ajax/chat/opentab_tracking.php',{threadID:this._threadID,userID:this._getCanonicalUserID(),signatureID:this._signatureID}).send();}});function ve(xe,ye){ae.debug('photo_uploader:'+xe,Object.assign({},ye));}function we(xe,ye){if(!ye)return xe;var ze=ye.getImageFiles();if(ze.length>0){xe.image_ids=ze;xe.has_attachment=true;}var af=ye.getAnimatedImageFiles();if(af.length>0){xe.gif_ids=af;xe.has_attachment=true;}var bf=ye.getVideoFiles();if(bf.length>0){xe.video_ids=bf;xe.has_attachment=true;}var cf=ye.getAudioFiles();if(cf.length>0){xe.audio_ids=cf;xe.has_attachment=true;}var df=ye.getFiles();if(df.length>0){xe.file_ids=df;xe.has_attachment=true;}return xe;}e.exports=re;},null);
__d("ChatTabTypeaheadDataSource",["MercuryTypeaheadConstants","MercuryTypeaheadDataSource"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();for(var i in h)if(h.hasOwnProperty(i))k[i]=h[i];var j=h===null?null:h.prototype;k.prototype=Object.create(j);k.prototype.constructor=k;k.__superConstructor__=h;function k(l){"use strict";l=l||{};l.maxResults=g.COMPOSER_CHATTAB_MAX;h.call(this,l);this.$ChatTabTypeaheadDataSource0=true;}k.prototype.buildData=function(l){"use strict";var m=[],n=[],o=[],p=[],q=[];l.forEach(function(r){var s=j.getEntry.call(this,r);switch(s.render_type){case g.FRIEND_TYPE:m.push(r);break;case g.THREAD_TYPE:if(this.$ChatTabTypeaheadDataSource0)n.push(r);break;case g.NON_FRIEND_TYPE:o.push(r);break;case g.FB4C_TYPE:p.push(r);break;case g.PAGE_TYPE:if(this.$ChatTabTypeaheadDataSource0)q.push(r);break;default:this.logQuery({event:'chat_tab_render_type_error'});break;}},this);return j.buildData.call(this,m.concat(p,n,q,o));};k.prototype.query=function(l,m,n,o){"use strict";this.logQuery({event:'query_chat_tab',query:l});return j.query.call(this,l,m,n,o);};k.prototype.respond=function(l,m,n){"use strict";var o=j.respond.call(this,l,m,n);this.logResponse({event:'query_response_chat_tab',response_query:l,response_uids:m});return o;};k.prototype.setShowThreads=function(l){"use strict";this.$ChatTabTypeaheadDataSource0=l;};e.exports=k;},null);
__d("SyncRequestNotificationBeeperItemContents.react",["Animation","CloseButton.react","ImageBlock.react","NotificationUserActions","React","SyncRequest.react","SyncRequestStatusEnum","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();var o=k.createClass({displayName:"SyncRequestNotificationBeeperItemContents",_markAsRead:function(){j.markNotificationsAsRead([this.props.beep.notificationID]);this.props.onHide();},_onClose:function(){this._markAsRead();this.props.onHide();},_doFlash:function(){new g(k.findDOMNode(this.refs.inner)).from('opacity','0').to('opacity','1').duration(200).go();},componentDidMount:function(){if(this.props.beep.rendererData.status!=m.PENDING)this.props.onReadyToHide(this.props.beep.notificationID);},componentDidUpdate:function(p){if(this.props.beep.rendererData.status!=m.PENDING&&p.beep.rendererData.status==m.PENDING)this.props.onReadyToHide(this.props.beep.notificationID);},onRequestStatusUpdate:function(p,q){if(p!=m.PENDING&&q==m.PENDING)this.props.onReadyToHide(this.props.beep.notificationID);},render:function(){var p=this.props.beep,q=p.rendererData;return (k.createElement("div",{ref:"inner"},k.createElement(h,{className:"_3soc",onClick:this._onClose,size:"medium"}),k.createElement(i,{className:"_3soj"},k.createElement("img",{src:p.actors[0].profile_picture.uri,className:"_3sok"}),k.createElement("div",{className:"_3sol"},k.createElement(l,{app:q.app,creationTime:q.creation_time,requestId:q.id.toString(),receiver:q.receiver,sender:q.sender,status:q.status,timeout:q.timeout,timeRemaining:q.time_remaining,viewerId:q.receiver.id,onStatusUpdate:this.onRequestStatusUpdate})))));}});e.exports=o;},null);
__d("LiveMessageReceiver",["Arbiter","ChannelConstants","emptyFunction","shield"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();function k(l){this.eventName=l;this.subs=null;this.handler=i;this.shutdownHandler=null;this.registered=false;this.appId=1;}Object.assign(k,{getAppMessageType:function(l,m){return 'live_message/'+l+':'+m;},route:function(l){var m=function(n){var o=k.getAppMessageType(l.app_id,l.event_name);g.inform(o,n,g.BEHAVIOR_PERSISTENT);};m(l.response);}});Object.assign(k.prototype,{setAppId:function(l){this.appId=l;return this;},setHandler:function(l){this.handler=l;this._dirty();return this;},setRestartHandler:i,setShutdownHandler:function(l){this.shutdownHandler=j(l);this._dirty();return this;},_dirty:function(){if(this.registered){this.unregister();this.register();}},register:function(){var l=function(n,o){return this.handler(o);}.bind(this),m=k.getAppMessageType(this.appId,this.eventName);this.subs={};this.subs.main=g.subscribe(m,l);if(this.shutdownHandler)this.subs.shut=g.subscribe(h.ON_SHUTDOWN,this.shutdownHandler);this.registered=true;return this;},unregister:function(){if(!this.subs)return this;for(var l in this.subs)if(this.subs[l])this.subs[l].unsubscribe();this.subs=null;this.registered=false;return this;}});e.exports=k;},null);
__d("initLiveMessageReceiver",["Arbiter","ChannelConstants","LiveMessageReceiver"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();g.subscribe(h.getArbiterType('app_msg'),function(j,k){i.route(k.obj);});},null);
__d("TypeaheadBestName",["FamilyMentionsData","TokenizeUtil"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();function i(j){"use strict";this._typeahead=j;}i.prototype.enable=function(){"use strict";var j=this._typeahead.getView(),k=this._getAvailableAlternateNameFields();this._subscription=j.subscribe('beforeRender',function(l,m){var n=m.value;for(var o=0;o<m.results.length;++o){var p=m.results[o],q=this._getNameToDisplay(p,n,k);if(q!==null){p.text=q;if(p.hasOwnProperty('default_name')&&p.text!==p.default_name){p.subtext=p.default_name;}else p.subtext=null;}}}.bind(this));};i.prototype.disable=function(){"use strict";this._typeahead.getView().unsubscribe(this._subscription);this._subscription=null;};i.prototype._getNameToDisplay=function(j,k,l){"use strict";if(j.hasOwnProperty('default_name')&&h.isQueryMatch(k,j.default_name))return j.default_name;for(var m=0;m<l.length;m++){var n=j[l[m]];if(n==(void 0))continue;for(var o=0;o<n.length;o++){var p=n[o];if(h.isQueryMatch(k,p))return p;}}if(j.hasOwnProperty('default_name'))return j.default_name;return null;};i.prototype._getAvailableAlternateNameFields=function(){"use strict";var j=['alternate_names'];if(g.allowFamilyNames)j.push('family_names');return j;};Object.assign(i.prototype,{_subscription:null});e.exports=i;},null);
__d("legacy:BestNameTypeaheadBehavior",["TypeaheadBestName"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();if(!a.TypeaheadBehaviors)a.TypeaheadBehaviors={};a.TypeaheadBehaviors.buildBestAvailableNames=function(h){h.enableBehavior(g);};},3);
__d("ClearableTypeahead",["Event"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h={resetOnCloseButtonClick:function(i,j){g.listen(j,'click',function(){var k=i.getCore();k.getElement().focus();k.reset();});}};e.exports=h;},null);
__d("CompactTypeaheadRenderer",["BadgeHelper","DOM","TypeaheadFacepile","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();function l(m,n){var o=[];if(m.xhp)return h.create('li',{className:'raw'},m.xhp);var p=m.photos||m.photo;if(p){if(p instanceof Array){p=i.render(p);}else p=h.create('img',{alt:'',src:p});o.push(p);}var q=m.debug_info;if(q)o.push(h.create('span',{className:'debugInfo'},q));if(m.text){var r=[m.text];if(m.is_verified){r.push(g.renderBadge('xsmall','verified'));}else if(m.is_work_user)r.push(g.renderBadge('xsmall','work'));o.push(h.create('span',{className:'text'},r));}var s=m.subtext,t=m.category,u=m.non_employee;if(s||t||u){var v=[];u&&v.push(h.create('span',{className:"_52l8 highlight"},k._("(Non-Employee)")));u&&(s||t)&&v.push(" \u00b7 ");s&&v.push(s);s&&t&&v.push(" \u00b7 ");t&&v.push(t);o.push(h.create('span',{className:'subtext'},v));}var w=h.create('li',{className:m.type||''},o);if(m.text){w.setAttribute('title',m.text);w.setAttribute('aria-label',m.text);}return w;}l.className='compact';e.exports=l;},null);
__d("legacy:CompactTypeaheadRenderer",["CompactTypeaheadRenderer"],function(a,b,c,d){b.__markCompiled&&b.__markCompiled();if(!a.TypeaheadRenderers)a.TypeaheadRenderers={};a.TypeaheadRenderers.compact=b('CompactTypeaheadRenderer');},3);
__d("XUIBadge",["CSS","DOM","cx","invariant"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();function k(m){return parseInt(m,10)===m;}function l(m){"use strict";this.target=m.target;this.count=m.count;this.maxcount=m.maxcount;}l.prototype.getCount=function(){"use strict";return this.count;};l.prototype.setCount=function(m){"use strict";j(k(m));j(m>=0);this.count=m;g.conditionClass(this.target,'hidden_elem',this.count===0);if(m>this.maxcount){h.setContent(this.target,this.maxcount+'+');g.addClass(this.target,"_5ugi");}else{h.setContent(this.target,m);g.removeClass(this.target,"_5ugi");}};l.prototype.setLegacyContent=function(m){"use strict";if(typeof m==='string'){g.conditionClass(this.target,'hidden_elem',m==0);h.setContent(this.target,m);g.removeClass(this.target,"_5ugi");}else this.setCount(m);};l.prototype.increment=function(){"use strict";this.setCount(this.getCount()+1);};e.exports=l;},null);