/*!CK:3388578253!*//*1438357743,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["uSIzM"]); }

__d("BusinessConf",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={DOMAIN:"business",HOSTNAME:"business.facebook.com",BIZ_ID_PARAM_NAME:"business_id",LABEL_ID_PARAM_NAME:"project_id",ACCOUNT_ID_PARAM_NAME:"act",ACCOUNT_ID_PARAM_NAME_LONG:"account_id",ACCOUNT_IDS_PARAM_NAME_LONG:"account_ids",PAGE_ID_PARAM_NAME:"id",PAGE_ADMIN_SELECTED_KEY:"sk",PRODUCT_CATALOG_ID_PARAM_NAME:"catalog_id",PRODUCT_FEED_ID_PARAM_NAME:"feed_id",LEGACY_ADS_MANAGER_PREFIX:"\/ads\/manage\/",CAMPAIGN_MANAGER_PREFIX:"\/ads\/manager\/",SAM_PREFIX:"\/ads\/management\/",SHOW_ADD_PRODUCT_FEED_DIALOG:"add_feed",SHOW_SPLASH_PARAM_NAME:"splash",SHOW_GRAY_MIGRATE_COMPLETE_SPLASH_PARAM_NAME:"migrate",WHITELISTED_URI_CLASS:"bizOK",OPT_OUT_KEY:"do_not_redirect_to_biz_site",CHROME_V2_OPT_OUT_KEY:"opt_out_of_business_chrome_v2",GRAY_MIGRATE_KEY:"tried_to_migrate_from_gray_account",OPT_OUT_EXPIRE:259200,HIGHLANDER_OPT_OUT_KEY:"use_biz_page_in_highlander"};},null);
__d("ChatPerfEvent",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={ASYNC_REQUEST:"async_request",SIDEBAR_FROM_CLIENT_TTI:"sidebar_from_client_tti",SIDEBAR_FROM_SERVER_TTI:"sidebar_from_server_tti",TTI:"tti",CHAT_CONVERSATION_TTI:"chat_conversation_tti"};},null);
__d("ComposedBlockType",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={UNSTYLED:0,PARAGRAPH:1,UNORDERED_LIST_ITEM:2,ORDERED_LIST_ITEM:3,BLOCKQUOTE:4,HEADER_ONE:5,HEADER_TWO:6,CODE:7,MEDIA:8,PULLQUOTE:9};},null);
__d("ComposedEntityMutability",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={MUTABLE:0,IMMUTABLE:1,SEGMENTED:2};},null);
__d("ComposedEntityType",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={MENTION:0,LINK:1,IMAGE:2,VIDEO:3,EMOTICON:4,TOKEN:5,HASHTAG:6,IMPLICIT_LINK:7};},null);
__d("ComposedInlineStyle",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={NONE:0,BOLD:1,ITALIC:2,UNDERLINE:4,CODE:8,STRIKETHROUGH:16,SUBSCRIPT:32,SUPERSCRIPT:64};},null);
__d("ComposedLinkEntityProperties",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={URL:"url",SHIMMED_URL:"shimmedURL"};},null);
__d("CreditCardFormParam",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={ACCOUNT_ID:"account_id",ACCOUNT_COUNTRY_CODE:"account_country_code",APP_ID:"app_id",CARD_EXPIRATION:"exp",CARD_FBID:"cc_fbid",CARD_ID:"cc_id",CARD_TYPE:"cardType",CITY:"city",CONTEXT_ID:"context_id",COUNTRY:"country",CSC_LENGTH:"csc_length",EMAIL:"email",FIRST_NAME:"firstName",TRACKING_ID:"tracking_id",JSFAIL_SOURCE:"jsfail_source",KEYPRESS_TIMES:"kpts",LAST_NAME:"lastName",MONTH:"month",STATE:"state",STREET:"street",STREET_2:"street2",VALIDATE_ADDRESS:"validate_address",VALIDATE_NAME:"validate_name",VALIDATE_ZIP:"validate_zip",YEAR:"year",ZIP:"zip",VALIDATOR_CHECKS:"checks",CARD_NUMBER:"creditCardNumber",CSC:"csc",CARD_NUMBER_FIRST_6:"creditCardNumber_first6",CARD_NUMBER_LAST_4:"creditCardNumber_last4",CARD_NUMBER_TOKEN:"creditCardNumber_token",CSC_TOKEN:"csc_token",AUTH_LEVEL_FLAG:"auth_level",AUTH_AMOUNT:"auth_amount",AUTH_CURRENCY:"auth_currency",AUTO_EXPAND_AUTH_LEVEL_FLAG:"auto_expand_auth_level",PAYMENT_ITEM_TYPE:"payment_item_type",CREDENTIAL_ID:"credential_id",IS_STORED_BALANCE:"is_stored_balance"};},null);
__d("CreditCardTypeEnum",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={VISA:86,MASTERCARD:77,DISCOVER:68,AMERICANEXPRESS:65,DINERSCLUB:64,JCB:74};},null);
__d("MercuryActionStatus",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={UNSENT:0,SUCCESS:1,UNCONFIRMED:3,FAILED_UNKNOWN_REASON:4,UNABLE_TO_CONFIRM:5,RESENT:6,RESENDING:7,ERROR:10};},null);
__d("MercuryActionType",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={LOG_MESSAGE:"ma-type:log-message",USER_GENERATED_MESSAGE:"ma-type:user-generated-message",CHANGE_READ_STATUS:"ma-type:change_read_status",MARK_THREAD_SEEN:"ma-type:mark_thread_seen",CHANGE_MUTE_SETTINGS:"ma-type:change-mute-settings",SEND_MESSAGE:"ma-type:send-message",UPDATE_ACTION_ID:"ma-type:update-action-id",DELETE_MESSAGES:"ma-type:delete-messages",DELETE_THREAD:"ma-type:delete-thread",CHANGE_ARCHIVED_STATUS:"ma-type:change-archived-status",CHANGE_FOLDER:"ma-type:change-folder",ADD_PARTICIPANTS:"ma-type:add-participants",CANCEL_ATTACHMENT_PLACEHOLDER:"ma-type:cancel-attachment-placeholder",CONFIRM_ATTACHMENT_PLACEHOLDER:"ma-type:confirm-attachment-placeholder",UNPIN_THREAD:"ma-type:unpin-thread",CHANGE_FLAG:"ma-type:change_flag",MOVE_PENDING_TO_INBOX:"ma-type:move_pending_to_inbox",UPDATE_BLOCKER_STATUS:"ma-type:update-blocker-status",UPDATE_BLOCKEE_STATUS:"ma-type:update-blockee-status"};},null);
__d("MercuryAPIArgsSource",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={CHAT:"chat",JEWEL:"jewel",MERCURY:"mercury",MERCURYSYNC:"mercury_sync",WEBMESSENGER:"web_messenger",MESSENGER:"messenger"};},null);
__d("MercuryAttachmentContentType",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={PHOTO:"attach:image",VIDEO:"attach:video",MUSIC:"attach:music",VOICE:"attach:voice",TEXT:"attach:text",MSWORD:"attach:ms:word",MSXLS:"attach:ms:xls",MSPPT:"attach:ms:ppt",ORION:"attach:orion",SHOERACK_INVITATION:"attach:shoerackinvite",UNKNOWN:"attach:unknown"};},null);
__d("MercuryAttachmentType",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={ERROR:"error",FILE:"file",PHOTO:"photo",STICKER:"sticker",SHARE:"share",UNKNOWN:"unknown",VIDEO:"video",ANIMATED_IMAGE:"animated_image"};},null);
__d("MercuryAudioType",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={AudioClip:"fb_voice_message",VoiceMessageWithTranscript:"fb_voice_message_with_transcript"};},null);
__d("MercuryErrorType",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={SERVER:1,TRANSPORT:2,TIMEOUT:3};},null);
__d("MercuryGenericConstants",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={MAX_THREAD_NAME_LENGTH:250};},null);
__d("MercuryGlobalActionType",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={MARK_ALL_READ:"mga-type:mark-all-read"};},null);
__d("MercuryLogMessageType",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={SUBSCRIBE:"log:subscribe",UNSUBSCRIBE:"log:unsubscribe",VIDEO_CALL:"log:video-call",PHONE_CALL:"log:phone-call",THREAD_NAME:"log:thread-name",THREAD_IMAGE:"log:thread-image",SERVER_ERROR:"log:error-msg",LIVE_LISTEN:"log:live-listen",WALLPAPER:"log:wallpaper",ORION:"log:orion",SWITCH_TO_WORK:"log:switch",PAGE_REPLY:"log:page-reply",GENERIC_ADMIN_TEXT:"log:generic-admin-text"};},null);
__d("MercuryMessageSourceTags",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={CHAT:"source:chat",EMAIL:"source:email",MESSENGER:"source:messenger",MOBILE:"source:mobile"};},null);
__d("MercuryParticipantTypes",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={USER:"user",THREAD:"thread",EVENT:"event",PAGE:"page",FRIEND:"friend",FB4C:"fb4c",NON_FRIEND:"non_friend"};},null);
__d("MercuryPayloadSource",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={UNKNOWN:"unknown",CLIENT_CHANNEL_MESSAGE:"client_channel_message",CLIENT_SEND_MESSAGE:"client_send_message",CLIENT_CHANGE_ARCHIVED_STATUS:"client_change-archived_status",CLIENT_CHANGE_FOLDER:"client_change_folder",CLIENT_CHANGE_MUTE_SETTINGS:"client_change_mute_settings",CLIENT_CHANGE_READ_STATUS:"client_change_read_status",CLIENT_MARK_THREAD_SEEN:"client_mark_thread_seen",CLIENT_ADD_PARTICIPANTS:"client_add_participants",CLIENT_FETCH_PARTICIPANTS:"client_fetch_participants",CLIENT_DELETE_MESSAGES:"client_delete_messages",CLIENT_DELETE_THREAD:"client_delete_thread",CLIENT_HANDLE_ERROR:"client_handle_error",CLIENT_UNPIN_THREAD:"client_unpin_thread",CLIENT_CHANGE_FLAG:"client_change_flag",CLIENT_MOVE_PENDING_TO_INBOX:"client_move_pending_to_inbox",SERVER_INITIAL_DATA:"server_initial_data",SERVER_SEND_MESSAGE:"server_send_message",SERVER_CHANGE_ARCHIVED_STATUS:"server_change_archived_status",SERVER_CHANGE_READ_STATUS:"server_change_read_status",SERVER_MARK_FOLDER_READ:"server_mark_folder_read",SERVER_MARK_SEEN:"server_mark_seen",SERVER_FETCH_PARTICIPANTS:"server_fetch_participants",SERVER_FETCH_THREAD_INFO:"server_fetch_thread_info",SERVER_FETCH_THREADLIST_INFO:"server_fetch_threadlist_info",SERVER_STANDALONE_NOTIFICATIONS:"server_standalone_notifications",SERVER_THREAD_SYNC:"server_thread_sync",SERVER_TAB_PRESENCE:"server_tab_presence",SERVER_UNREAD_THREADS:"server_unread_threads",SERVER_SEARCH:"server_search",SERVER_CHANGE_FLAG:"server_change_flag"};},null);
__d("MercurySendMessageFields",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={AUTO_RETRY_CNT:"auto_retry_cnt",MANUAL_RETRY_CNT:"manual_retry_cnt"};},null);
__d("MercurySourceType",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={CHAT_ORCA:"source:chat:orca",CHAT_IPHONE:"source:chat:iphone",CHAT_JABBER:"source:chat:jabber",CHAT_MEEBO:"source:chat:meebo",CHAT_WEB:"source:chat:web",CHAT_TEST:"source:chat:test",CHAT_FORWARD_DIALOG:"source:chat:forward",CHAT:"source:chat",EMAIL:"source:email",EVENT_MESSAGE_BLAST:"source:event_message_blast",GIGABOXX_API:"source:gigaboxx:api",GIGABOXX_BLAST:"source:gigaboxx:blast",GIGABOXX_EMAIL_REPLY:"source:gigaboxx:emailreply",GIGABOXX_MOBILE:"source:gigaboxx:mobile",GIGABOXX_WAP:"source:gigaboxx:wap",GIGABOXX_WEB:"source:gigaboxx:web",LEIA:"source:leia",MESSENGER_WEB:"source:messenger:web",SAM_UFI:"source:sam:ufi",SHARE_DIALOG:"source:share:dialog",SEND_PLUGIN:"source:sendplugin",SMS:"source:sms",TEST:"source:test",TITAN_WAP:"source:titan:wap",TITAN_M_BASIC:"source:titan:m_basic",TITAN_M_FREE:"source:titan:m_free_basic",TITAN_M_JAPAN:"source:titan:m_japan",TITAN_M_MINI:"source:titan:m_mini",TITAN_M_TOUCH:"source:titan:m_touch",TITAN_M_APP:"source:titan:m_app",TITAN_M_TABLET:"source:titan:m_tablet",TITAN_M_ZERO:"source:titan:m_zero",TITAN_M_TALK:"source:titan:m_talk",TITAN_WEB:"source:titan:web",TITAN_FACEWEB_ANDROID:"source:titan:faceweb_android",TITAN_FACEWEB_BUFFY:"source:titan:faceweb_buffy",TITAN_FACEWEB_IPAD:"source:titan:faceweb_ipad",TITAN_FACEWEB_IPHONE:"source:titan:faceweb_iphone",TITAN_FACEWEB_UNKNOWN:"source:titan:faceweb_unknown",TITAN_API:"source:titan:api",TITAN_API_MOBILE:"source:titan:api_mobile",TITAN_ORCA:"source:titan:orca",TITAN_EMAIL_REPLY:"source:titan:emailreply",MOBILE:"source:mobile",PAGE_PLATFORM_API:"source:page_platform_api",UNKNOWN:"source:unknown",WEB:"source:web",HELPCENTER:"source:helpcenter",NEW_SHARE_DIALOG:"source:share:dialog:new",PAID_PROMOTION:"source:paid_promotion",BUFFY_SMS:"source:buffy:sms",WEBRTC_MOBILE:"source:webrtc:mobile",MESSENGER_COMMERCE:"source:messenger:commerce",MESSENGER_BOT:"source:bot"};},null);
__d("MercuryThreadMode",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={EMAIL_ORIGINATED:1,TITAN_ORIGINATED:2,OBJECT_ORIGINATED:3};},null);
__d("MercuryTimePassed",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={TODAY:0,WEEK_AGO:1,MONTH_AGO:2,CURRENT_YEAR:3,OTHER_YEAR:4};},null);
__d("MessagesViewerSetID",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={MESSAGES:"messages",MESSAGES_VIEW_ALL_IN_THREAD:"messages:view_all_in_thread"};},null);
__d("MessagingEvent",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={DELETE:"delete",DELETE_MESSAGES:"delete_messages",DELIVER:"deliver",ERROR:"error",READ:"read",REPORT_SPAM:"report_spam",REPORT_SPAM_MESSAGES:"report_spam_messages",UNMARK_SPAM:"unmark_spam",SUBSCRIBE:"subscribe",CHANGE_MUTE_SETTINGS:"change_mute_settings",TAG:"tag",UNREAD:"unread",UNSUBSCRIBE:"unsubscribe",DELIVER_LOG:"deliver_log",MORE_THREADS:"more_threads",READ_ALL:"read_all",READ_RECEIPT:"read_receipt",DELIVERY_RECEIPT:"delivery_receipt",SENT_PUSH:"sent_push",DELIVER_FAST_PAST:"deliver_fast_path",MESSENGER_STATUS:"messenger_status",UPDATE_PINNED_THREADS:"update_pinned_threads",CHANGE_PAGE_THREAD_FLAG:"change_page_thread_flag",UPDATE_BLOCKER_STATUS:"update_blocker_status",UPDATE_BLOCKEE_STATUS:"update_blockee_status"};},null);
__d("MessagingTag",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={GROUPS:"groups",UNREAD:"unread",FLAGGED:"flagged",ACTION_ARCHIVED:"action:archived",INBOX:"inbox",OTHER:"other",PENDING:"pending",MONTAGE:"montage",EVENT:"event",SENT:"sent",SMS_MUTE:"sms_mute",SPAM:"spam",UPDATES:"broadcasts_inbox",BCC:"header:bcc",FILTERED_CONTENT:"filtered_content",FILTERED_CONTENT_BH:"filtered_content_bh",FILTERED_CONTENT_ACCOUNT:"filtered_content_account",UNAVAILABLE_ATTACHMENT:"unavailable_attachment",ARCHIVED:"archived",EMAIL:"email",VOICEMAIL:"voicemail",SPAM_SPOOFING:"spam:spoofing",SPOOF_WARNING:"MTA:spoof_warning",SMS_TAG_ROOT:"SMSShortcode:",APP_ID_ROOT:"app_id:",DOMAIN_AUTH_PASS:"MTA:dmarc:pass",DOMAIN_AUTH_FAIL:"MTA:dmarc:fail",MTA_SYSTEM_MESSAGE:"MTA:system_message",EMAIL_MESSAGE:"source:email"};},null);
__d("MessengerDotComDesktopNotifsEvent",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={PERMISSION_CANCELED:"permission_canceled",PERMISSION_DENIED:"permission_denied",PERMISSION_GRANTED:"permission_granted",PERMISSION_REQUESTED:"permission_requested",TURNED_OFF_NOTIFS:"turned_off_notifs",TURNED_ON_NOTIFS:"turned_on_notifs"};},null);
__d("MessengerDotComPromotionActionURL",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={turn_on_notification:"TurnOnNotification"};},null);
__d("MessengerView",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={DETAIL:{COMPOSE:"detail\/compose",THREAD:"detail\/thread"},MASTER:{GROUPS:"master\/groups",PEOPLE:"master\/people",RECENT:"master\/recent"}};},null);
__d("MNCommerceErrors",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={ALREADY_UNLINKED:1893001};},null);
__d("MNCommerceLoggerEvents",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={GEN_CALL:"gen_call",DUPLICATE_CALL:"duplicate_call",ERROR:"error",GEN_SHIPMENT_ENT:"gen_shipment_ent",GEN_SHIPMENT_TRACKING_ENT:"gen_shipment_tracking_ent",SHIPMENT_NOTIFICATION_READY:"shipment_notification_ready",SHIPMENT_NOTIFICATION_SENT:"shipment_notification_sent",SHIPMENT_NOTIF_READY:"shipment_notif_ready",SHIPMENT_NOTIF_SENT:"shipment_notif_sent",ETA_NOTIF_READY:"eta_notif_ready",ETA_NOTIF_SENT:"eta_notif_sent",DELIVERED_NOTIF_READY:"delivered_notif_ready",DELIVERED_NOTIF_SENT:"delivered_notif_sent",OUT_FOR_DELIVERY_NOTIF_READY:"out_for_delivery_notif_ready",OUT_FOR_DELIVERY_NOTIF_SENT:"out_for_delivery_notif_sent",DELAYED_NOTIF_READY:"delayed_notif_ready",DELAYED_NOTIF_SENT:"delayed_notif_sent",IN_TRANSIT_NOTIF_READY:"in_transit_notif_ready",IN_TRANSIT_NOTIF_SENT:"in_transit_notif_sent",ASYNC_EXECUTION:"async_execution",ASYNC_SCHEDULE:"async_schedule",ASYNC_THROTTLE:"async_throttle",ASYNC_USER_ACCOUNT_DISABLED:"async_user_account_disabled",ASYNC_GEN_DATA_ERROR:"async_gen_data_error",TRACKING_SHUTDOWN_WITH_EXCEPTION_ERROR:"tracking_shutdown_with_exception",TRACKING_SHUTDOWN_WITH_RETRY_ERROR:"tracking_shutdown_with_retry",DELIVERED_STATS:"delivered_stats",USER_LINKED:"user_linked",USER_LINK_FAILED:"user_link_failed",USER_TOKEN_DECRYPTION_FAILED:"user_token_decryption_failed",USER_TOKEN_DELIVERY_ATTEMPT:"user_token_delivery_attempt",USER_TOKEN_DELIVERED:"user_token_delivered",USER_TOKEN_DELIVERY_FAILED:"user_token_delivery_failed",USER_TOKEN_CRITICAL_LOOKUP:"user_token_critical_lookup",USER_TOKEN_LOOKUP_FAILED:"user_token_lookup_failed",USER_UNLINKED:"user_unlinked",USER_UNLINK_FAILED:"user_unlink_failed",USER_UNLINK_BUSINESS_NOTIFIED:"user_unlink_business_notified",USER_UNLINK_BUSINESS_NOTIFICATION_FAILED:"user_unlink_business_notification_failed",PLUGIN_CLIENT_RENDERED:"plugin_client_rendered",PLUGIN_RENDERED:"plugin_rendered",PLUGIN_HIDDEN_ALREADY_LINKED:"plugin_hidden_already_linked",PLUGIN_BLOCKED:"plugin_blocked",PLUGIN_UPDATES_DISALLOWED:"plugin_updates_disallowed",PLUGIN_UPDATES_REALLOWED:"plugin_updates_reallowed",PLUGIN_ASSOC_MUTATE_FAILED:"plugin_assoc_mutate_failed",PLUGIN_ASSOC_READ_FAILED:"plugin_assoc_read_failed",ORDER_CANCELLED:"order_cancelled",ORDER_CANCELLATION_FAILED:"order_cancellation_failed",SEND_MESSAGE_WITH_ROBOTEXT:"send_message_with_robotext",SEND_MESSAGE_WITH_ATTACHMENT:"send_message_with_attachment",SEND_MESSAGE_WITH_LOG_MESSAGE:"send_message_with_log_message",SEND_MESSAGE_FAILURE:"send_message_failure",DIALOG_OPENED:"dialog_opened",DIALOG_CLOSED:"dialog_closed",DIALOG_LOAD_ERROR:"dialog_load_error",DIALOG_LOAD_SUCCESS:"dialog_load_success",NOT_YOU_CLICKED:"not_you_clicked",PRODUCT_SUBSCRIPTION_CLICKED:"product_subscription_clicked",RECEIPTS:"receipts",CANCELLATIONS:"cancellations",SHIPMENTS:"shipments",NOW_IN_STOCK:"nowinstock",NOTIFY_ME:"notifyme",RETAIL_CANCELLATIONS:"retailcancellations",RETAIL_RECEIPTS:"retailreceipts",UPDATE_RECEIPTS:"updatereceipts",RETAIL_SHIPMENTS:"retailshipments",RETAIL_UPDATE_RECEIPTS:"retailupdatereceipts",AIRLINE_ITINERARY:"airlineitinerary",AIRLINE_REMINDER:"airlinereminder",AIRLINE_CHECKIN:"airlinecheckin",AIRLINE_UPDATE:"airlineupdate"};},null);
__d("MNCommerceReplyTypes",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={COMMERCE_LINK:2};},null);
__d("P2PChannelType",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={CREDIT_CARD_CHANGED:"P2P\/CreditCardChanged",CREDIT_CARD_DELETED:"P2P\/CreditCardDeleted",TRANSFER_STATUS_CHANGED:"P2P\/TransferStatusChanged"};},null);
__d("P2PPasswordProtectionParam",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={STATUS:"status"};},null);
__d("P2PPaymentCampaignNames",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={ZANGOOSE:"zangoose",SEVIPER:"seviper"};},null);
__d("P2PPaymentCreditCardsTypes",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={SENDING:1,RECEIVING:2};},null);
__d("P2PPaymentLoggerEvent",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={ACTN_ADD_CREDIT_CARD:"Actn_AddCreditCard",ACTN_UPDATE_CREDIT_CARD:"Actn_UpdateCreditCard",ACTN_REMOVE_CREDIT_CARD:"Actn_RemoveCreditCard",ACTN_UNLOCK_CREDIT_CARD:"Actn_UnlockCreditCard",ACTN_VALIDATE_CARD:"Actn_ValidateCard",ACTN_TRANSFER_MONEY:"Actn_TransferMoney",ACTN_TRANSFER_MONEY_WITH_CAMPAIGN:"Actn_TransferMoneyWithCampaign",ACTN_TRANSFER_MONEY_WITH_CAMPAIGN_PARENT_CALL:"Actn_TransferMoneyWithCampaignParentCall",ACTN_TRANSFER_MONEY_CHECK_NEEDS_REVERT:"Actn_TransferMoneyCheckNeedsRevert",ACTN_TRANSFER_MONEY_REVERT:"Actn_TransferMoneyRevert",ACTN_TRANSFER_MONEY_CREATE_CONTEXT:"Actn_TransferMoneyCreateContext",ACTN_ACCEPT_MONEY:"Actn_AcceptMoney",ACTN_DECLINE_MONEY:"Actn_DeclineMoney",ACTN_SET_PRIMARY:"Actn_SetPrimary",ACTN_WITHDRAW_MONEY:"Actn_WithdrawMoney",ACTN_GRAPH_API_GENERIC_WRITE:"Actn_GraphApiGenericWrite",ACTN_SEND_TRANSFER_MESSAGE:"Actn_SendTransferMessage",ACTN_SEND_TRANSFER_EMAIL:"Actn_SendTransferEmail",ACTN_SEND_EXPIRE_NOTIFICATIONS:"Actn_SendExpireNotifications",ACTN_SEND_TRANSFER_MESSAGE_QUEUED:"Actn_SendTransferMessageQueued",ACTN_CREATE_PAYMENT_REQUEST:"Actn_CreatePaymentRequest",ACTN_ACCEPT_PAYMENT_REQUEST:"Actn_AcceptPaymentRequest",ACTN_DECLINE_PAYMENT_REQUEST:"Actn_DeclinePaymentRequest",ACTN_AUTH_FOR_SENDER_REVIEW:"Actn_AuthForSenderReview",ACTN_COMPLETE_SENDER_REVIEW:"Actn_CompleteSenderReview",ACTN_COMPLETE_RECEIVER_REVIEW:"Actn_CompleteReceiverReview",ACTN_SUBMIT_VERIFICATION_STEP:"Actn_SubmitVerificationStep",ACTN_COMPLETE_SENDER_VERIFICATION:"Actn_CompleteSenderVerification",ACTN_COMPLETE_RECEIVER_VERIFICATION:"Actn_CancelReceiverVerification",ACTN_CANCEL_SENDER_VERIFICATION:"Actn_CancelSenderVerification",ACTN_CANCEL_RECEIVER_VERIFICATION:"Actn_CancelReceiverVerification",ACTN_CANCEL_SENDER_RISK:"Actn_CancelSenderRisk",ACTN_CANCEL_EXPIRE:"Actn_CancelExpire",ACTN_CANCEL_FOR_SAME_CARD:"Actn_CancelForSameCard",ACTN_CANCEL_BY_CUSTOMER_SERVICE:"Actn_CancelByCustomerService",ACTN_CANCEL_RECEIVER_REVIEW:"Actn_CancelReceiverReview",ACTN_CANCEL_SENDER_REVIEW:"Actn_CancelSenderReview",ACTN_CANCEL_ALL_PENDING_TRANSFERS:"Actn_CancelAllPendingTransfers",ACTN_ADD_PIN:"Actn_AddPIN",ACTN_UPDATE_PIN:"Actn_UpdatePIN",ACTN_REMOVE_PIN:"Actn_RemovePIN",ACTN_RESET_PIN:"Actn_ResetPIN",ACTN_ENABLE_TOUCH_ID:"Actn_EnableTouchID",ACTN_VERIFY_TOUCH_ID:"Actn_VerifyTouchID",ACTN_DISABLE_TOUCH_ID:"Actn_DisableTouchID",ACTN_CHANNEL_NOTIF_CARD_EVENT:"Actn_ChannelNotifCardEvent",ACTN_CHANNEL_NOTIF_TRANSFER_STATUS_EVENT:"Actn_ChannelNotifTransferStatusEvent",UI_ACTN_INITIATE_SEND:"UI_Actn_Initiate_Send",UI_ACTN_CANCEL_SEND:"UI_Actn_Send_Money_Cancelled",UI_ACTN_INITIATE_ADD_CARD:"UI_Actn_Initiate_Add_Card",UI_ACTN_INITIATE_CHOOSE_CARD:"UI_Actn_Initiate_Choose_Card",UI_ACTN_CANCEL_ADD_CARD:"UI_Actn_Cancel_Add_Card",UI_ACTN_CONFIRM_CARD_DETAILS:"UI_Actn_Confirm_Card_Details",UI_ACTN_ACCEPT_MONEY_CANCEL:"UI_Actn_Accept_Money_Cancel",UI_ACTN_ACCEPT_WITH_CARD:"UI_Actn_Accept_With_Card",UI_ACTN_ADD_CARD_SUCCESS:"UI_Actn_Add_Card_Success",UI_ACTN_ADD_CARD_FAIL:"UI_Actn_Add_Card_Fail",UI_ACTN_CONFIRM_SEND:"UI_Actn_Confirm_Send",UI_ACTN_SEND_SUCCESS:"UI_Actn_Send_Success",UI_ACTN_SEND_MONEY_CANCELLED:"UI_Actn_Send_Money_Cancelled",UI_ACTN_SEND_FAIL:"UI_Actn_Send_Fail",UI_ACTN_INITIATE_EDIT_CARD:"UI_Actn_Initiate_Edit_Card",UI_ACTN_CANCEL_EDIT_CARD:"UI_Actn_Cancel_Edit_Card",UI_ACTN_CONFIRM_EDIT_CARD_DETAILS:"UI_Actn_Confirm_Edit_Card_Details",UI_ACTN_EDIT_CARD_SUCCESS:"UI_Actn_Edit_Card_Success",UI_ACTN_EDIT_CARD_FAIL:"UI_Actn_Edit_Card_Fail",UI_ACTN_INITIATE_REMOVE_CARD:"UI_Actn_Initiate_Remove_Card",UI_ACTN_CONFIRM_REMOVE_CARD:"UI_Actn_Confirm_Remove_Card",UI_ACTN_REMOVE_CARD_SUCCESS:"UI_Actn_Remove_Card_Success",UI_ACTN_REMOVE_CARD_FAIL:"UI_Actn_Remove_Card_Fail",UI_ACTN_INITIATE_PASSWORD_PROTECTION_NUX:"UI_Actn_Initiate_Password_Protection_NUX",UI_ACTN_OPT_IN_PASSWORD_PROTECTION_NUX:"UI_Actn_Opt_In_Password_Protection_NUX",UI_ACTN_OPT_OUT_PASSWORD_PROTECTION_NUX:"UI_Actn_Opt_Out_Password_Protection_NUX",UI_ACTN_ENABLED_PASSWORD_PROTECTION_SETTING:"UI_Actn_Enabled_Password_Protection_Setting",UI_ACTN_DISABLED_PASSWORD_PROTECTION_SETTING:"UI_Actn_Disabled_Password_Protection_Setting",UI_ACTN_SEND_CLICKED:"UI_Actn_Send_Clicked",UI_ACTN_VERIFY_CSC:"UI_Actn_Verify_CSC",UI_ACTN_CONFIRM_AMOUNT:"UI_Actn_Confirm_Amount",UI_ACTN_EDIT_CARD:"UI_Actn_Edit_Card",UI_ACTN_CHANGE_CARD:"UI_Actn_Change_Card",UI_ACTN_INITIATE_SEND_TRIGGER:"UI_Actn_Initiate_Send_Trigger",UI_ACTN_INITIATE_GROUP_SEND:"UI_Actn_Initiate_Group_Send",UI_ACTN_GROUP_SEND_CANCELLED:"UI_Actn_Group_Send_Cancelled",UI_ACTN_INITIATE_GROUP_SEND_TRIGGER:"UI_Actn_Initiate_Group_Send_Trigger",UI_ACTN_GROUP_SEND_RECIPIENT_PICKED:"UI_Actn_Group_Send_Recipient_Picked",UI_ACTN_3RD_PARTY_LOG_MESSAGE_CLICKED:"UI_Actn_3rd_Party_Log_Message__Clicked",UI_ACTN_3RD_PARTY_LOG_MESSAGE_TRY_CLICKED:"UI_Actn_3rd_Party_Log_Message_Try_Clicked",UI_ACTN_3RD_PARTY_LOG_MESSAGE_CANCELLED:"UI_Actn_3rd_Party_Log_Message_Cancelled",UI_ACTN_3RD_PARTY_NON_ENABLED_LOG_MESSAGE_CLICKED:"UI_Actn_3rd_Party_Non_Enabled_Log_Message_Clicked",UI_ACTN_3RD_PARTY_NON_ENABLED_LOG_MESSAGE_CANCELLED:"UI_Actn_3rd_Party_Non_Enabled_Log_Message_Cancelled",UI_ACTN_CHAT_THREAD_BANNER_CLICKED:"UI_Actn_Chat_Thread_Banner_Clicked",UI_ACTN_CHAT_THREAD_BANNER_VIEWED:"UI_Actn_Chat_Thread_Banner_Viewed",UI_ACTN_CHAT_THREAD_BANNER_DISMISSED:"UI_Actn_Chat_Thread_Banner_Dismissed",UI_ACTN_INITIATE_MONEYPENNY_ORDER:"UI_Actn_Initiate_Moneypenny_Order",UI_ACTN_CONFIRM_MONEYPENNY_ORDER:"UI_Actn_Confirm_Moneypenny_Order",UI_ACTN_MONEYPENNY_ORDER_FAIL:"UI_Actn_Moneypenny_Order_Fail",UI_ACTN_MONEYPENNY_ORDER_SUCCESS:"UI_Actn_Moneypenny_Order_Success",UI_ACTN_MONEYPENNY_ORDER_CANCEL:"UI_Actn_Moneypenny_Order_Cancel",UI_ACTN_FRIEND_PICKER_SEARCH:"UI_Actn_Friend_Picker_Search",UI_ACTN_FRIEND_PICKER_SELECT:"UI_Actn_Friend_Picker_Select",UI_ACTN_FI_CANCEL:"UI_Actn_FI_Cancel",UI_ACTN_FI_SUCCESS_DIALOG_NEXT:"UI_Action_Success_Dialog_Next",UI_ACTN_FI_BANNER_DISMISSED:"UI_Actn_FI_Banner_Dismissed",UI_ACTN_FI_BANNER_IMPRESSION:"UI_Actn_FI_Banner_Impression",UI_ACTN_INCENTIVE_TRANSFER_SUCCESS:"UI_Actn_Incentive_Transfer_Success",UI_ACTN_INCENTIVE_TRANSFER_FAILURE:"UI_Actn_Incentive_Transfer_Failure"};},null);
__d("P2PPaymentLoggerEventFlow",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={UI_FLOW_P2P_SEND:"UI_Flow_P2P_Send",UI_FLOW_P2P_RECEIVE:"UI_Flow_P2P_Receive",UI_FLOW_P2P_SETTINGS:"UI_Flow_P2P_Settings",UI_FLOW_P2P_GROUP_SEND:"UI_Flow_P2P_Group_Send",UI_FLOW_RECEIVER_NUX_CHAT_THREAD_BANNER:"UI_Flow_Receiver_NUX_Chat_Thread_Banner",UI_FLOW_SENDER_NUX_CHAT_THREAD_BANNER:"UI_Flow_Sender_NUX_Chat_Thread_Banner",UI_FLOW_MONEYPENNY_CHECKOUT:"UI_Flow_Moneypenny_Checkout",UI_FLOW_FINANCIAL_INCENTIVES:"UI_Flow_Financial_Incentives"};},null);
__d("P2PPaymentLogMessageSubtype",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={SENT_IN_GROUP:"sent_in_group",CANCELED_SENDER_RISK:"canceled_sender_risk",CANCELED_DECLINED:"canceled_declined",CANCELED_RECIPIENT_RISK:"canceled_recipient_risk",CANCELED_EXPIRED:"canceled_expired",CANCELED_SAME_CARD:"canceled_same_card",CANCELED_CUSTOMER_SERVICE:"canceled_customer_service",CANCELED_CHARGEBACK:"canceled_chargeback",CANCELED_SYSTEM_FAIL:"canceled_system_fail"};},null);
__d("P2PTransferParam",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={TRANSFER_ID:"transfer_id",STATUS:"status",SENDER_STATUS:"sender_status",RECEIVER_STATUS:"receiver_status",RISK_RESULT:"risk_result"};},null);
__d("P2PTransferStatus",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={PENDING_SENDER_MANUAL_REVIEW:1,PENDING_SENDER_VERIFICATION:2,CANCELED_SENDER_RISK:3,PENDING_RECIPIENT_NUX:4,CANCELED_DECLINED:5,PENDING_RECIPIENT_VERIFICATION:6,PENDING_RECIPIENT_MANUAL_REVIEW:7,PENDING_RECIPIENT_PROCESSING:8,PENDING_PUSH_FAIL:9,CANCELED_RECIPIENT_RISK:10,CANCELED_SYSTEM_FAIL:11,CANCELED_EXPIRED:12,COMPLETED:13,INTERMEDIATE_PROCESSING:14,PENDING_SENDER_INITED:15,CANCELED_SAME_CARD:16,PENDING_SENDER_VERIFICATION_PROCESSING:17,PENDING_RECIPIENT_VERIFICATION_PROCESSING:18};},null);
__d("PageMessageEnumTag",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={FLAG:"flag",LOW_VALUE:"low_value"};},null);
__d("PhotoResizeModeConst",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={CONTAIN:"s",COVER:"p"};},null);
__d("StickerAssetType",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={IMAGE:"BestEffortImage",SPRITE:"SpriteImage",PADDED_SPRITE:"PaddedSpriteImage"};},null);
__d("StickerConstants",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={MOBILE_LIKE_STICKER_PACK_ID:"227877430692340",GRAVEYARD_PACK_ID:"604597256247273",LIKE_STICKER_ID:"227878347358915",HOT_LIKE_SMALL_STICKER_ID:"369239263222822",HOT_LIKE_MEDIUM_STICKER_ID:"369239343222814",HOT_LIKE_LARGE_STICKER_ID:"369239383222810",MRU_STICKER_PACK:"599061016853145",SEARCH_PACK_ID:"680229632032514",SPRITE_PADDING:"24",PayloadSource:{VIEW_ACTION:"view-action"},EMOTICON_PACK_ID:"1471127876485636",DEFAULT_FRAME_RATE:83,TRAY_SIZE:64,THREAD_SIZE:120};},null);
__d("StickerInterfaces",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={MESSAGES:"messages",COMMENTS:"comments",STICKERED:"stickered",COMPOSER:"composer",POSTS:"posts"};},null);
__d("StoryAttachmentStyle",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={FALLBACK:"fallback",SHARE:"share",OG_COMPOSER_SIMPLE:"og_composer_simple",SPORTS_MATCHUP:"sports_matchup",SHARE_LARGE_IMAGE:"share_large_image",PHOTO:"photo",COVER_PHOTO:"cover_photo",ALBUM:"album",NEW_ALBUM:"new_album",COUPON:"coupon",QUESTION:"question",ANSWER:"answer",OPTION:"option",GALLERY:"gallery",STREAM_PUBLISH:"stream_publish",MUSIC_AGGREGATION:"music_aggregation",ITEM_LIST:"list",HIGH_SCORE:"high_score",SCORE_LEADERBOARD:"score_leaderboard",FRIEND_LIST:"friend_list",CHECKIN:"checkin",POPULAR_OBJECTS:"popular_objects",AVATAR_LIST:"avatar_list",AVATAR:"avatar",AVATAR_WITH_VIDEO:"avatar_with_video",EVENT:"event",MINUTIAE_EVENT:"minutiae_event",EXPERIENCE:"experience",LIFE_EVENT:"life_event",TRAVEL_SLIDESHOW_LIFE_EVENT:"travel_slideshow_life_event",GIFT:"gift",IMAGE_SHARE:"image_share",ANIMATED_IMAGE_SHARE:"animated_image_share",ANIMATED_IMAGE_AUTOPLAY:"animated_image_autoplay",ANIMATED_IMAGE_VIDEO:"animated_image_video",ANIMATED_IMAGE_VIDEO_AUTOPLAY:"animated_image_video_autoplay",NOTE:"note",TOPIC:"topic",FILE_UPLOAD:"file_upload",NOTIFICATION_TARGET:"notification_target",UNAVAILABLE:"unavailable",PAGE_RECOMMENDATION:"page_recommendation",PAGE_VIDEO_PLAYLIST:"page_video_playlist",VIDEO:"video",VIDEO_INLINE:"video_inline",VIDEO_AUTOPLAY:"video_autoplay",VIDEO_SHARE:"video_share",VIDEO_SHARE_HIGHLIGHTED:"video_share_highlighted",VIDEO_SHARE_YOUTUBE:"video_share_youtube",MAP:"map",OG_MAP:"og_map",PRODUCT:"product",EXTERNAL_PRODUCT:"external_product",FITNESS_COURSE:"fitness_course",APPLICATION:"application",STICKER:"sticker",EXTERNAL_OG_PRODUCT:"external_og_product",TRAVEL_LOG:"travel_log",MULTI_SHARE:"multi_share",MULTI_SHARE_NO_END_CARD:"multi_share_no_end_card",MULTI_SHARE_SEARCH_END_CARD:"multi_share_search_end_card",YEAR_IN_REVIEW:"year_in_review",AVATAR_LARGE_COVER:"avatar_large_cover",BROADCAST_REQUEST:"broadcast_request",COMMERCE_PRODUCT_ITEM:"commerce_product_item",COMMERCE_STORE:"commerce_store",THIRD_PARTY_PHOTO:"third_party_photo",PROMPT:"prompt",BIRTHDAY:"birthday",DONATIONS_CAMPAIGN:"donations_campaign",DONATE_PROMPT:"donate_prompt",DISCUSSION_CONVERSATION:"discussion_conversation",DISCUSSION_COMMENT:"discussion_comment",GROUP_SELL_PRODUCT_ITEM:"group_sell_product_item",GROUP_SELL_PRODUCT_ITEM_MARK_AS_SOLD:"group_sell_mark_as_sold",GAMETIME:"gametime",GROUP_REPORTED_POST_QUEUE:"group_reported_post_queue",GROUP_PENDING_POST_QUEUE:"group_pending_post_queue",GROUP_JOIN_REQUEST_QUEUE:"group_join_request_queue",GREETING_CARD:"greeting_card",LEAD_GEN:"lead_gen",ATTACHED_STORY:"attached_story",SOUVENIR:"souvenir",SLIDESHOW:"slideshow",ORION:"orion",ORION_REQUEST:"orion_request",INSTANT_ARTICLE:"instant_article",JOIN_TOPIC_CONVERSATION:"join_topic_conversation",MOMENTS_APP_INVITATION:"moments_app_invitation",RETAIL_CANCELLATION:"retail_cancellation",RETAIL_ITEM:"retail_item",RETAIL_NOW_IN_STOCK:"retail_now_in_stock",RETAIL_RECEIPT:"retail_receipt",RETAIL_SHIPMENT:"retail_shipment",RETAIL_SHIPMENT_FOR_SUPPORTED_CARRIER:"retail_shipment_for_supported_carrier",RETAIL_SHIPMENT_FOR_UNSUPPORTED_CARRIER:"retail_shipment_for_unsupported_carrier",RETAIL_SHIPMENT_TRACKING_EVENT:"retail_shipment_tracking_event",RETAIL_SHIPMENT_TRACKING_EVENT_ETA:"retail_shipment_tracking_event_eta",RETAIL_SHIPMENT_TRACKING_EVENT_IN_TRANSIT:"retail_shipment_tracking_event_in_transit",RETAIL_SHIPMENT_TRACKING_EVENT_OUT_FOR_DELIVERY:"retail_shipment_tracking_event_out_for_delivery",RETAIL_SHIPMENT_TRACKING_EVENT_DELAYED:"retail_shipment_tracking_event_delayed",RETAIL_SHIPMENT_TRACKING_EVENT_DELIVERED:"retail_shipment_tracking_event_delivered",SURVEY:"survey",MESSAGE_LOCATION:"message_location",JOB_OFFER:"job_offer",GROUP_ADD_MEMBERS:"group_add_memebers",RTC_CALL_LOG:"rtc_call_log",EVENT_CALENDAR:"event_calendar",FACEPILE:"facepile",ATTRIBUTED_SHARE:"attributed_share",VIDEO_CINEMAGRAPH:"video_cinemagraph",LOCAL_CONTEXT_SHARE:"local_context_share",H_SCROLL:"h_scroll",MEDIA_QUESTION:"media_question",RICH_MEDIA:"rich_media",SQUARE_IMAGE_SHARE:"square_image_share",RETAIL_AGENT_ITEM_SUGGESTION:"retail_agent_item_suggestion",RETAIL_AGENT_ITEM_RECEIPT:"retail_agent_item_receipt",NOTE_COMPOSED:"note_composed",AVATAR_WITH_BIRTHDAY:"avatar_with_birthday",AIRLINE_FLIGHT_RESCHEDULE_UPDATE_BUBBLE:"airline_flight_reschedule_update_bubble",LIGHTBOX_VIDEO:"lightbox_video",GLOBALLY_DELETED_MESSAGE_PLACEHOLDER:"globally_deleted_message_placeholder",AVATAR_WITH_EGO_ACTION:"avatar_with_ego_action",EVENT_TICKET:"event_ticket",VERTICAL_ATTACHMENT_LIST:"vertical_attachment_list",INSTANT_ARTICLE_LEGACY:"instant_article_legacy"};},null);
__d("URLMatcherConfig",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={tlds:"(?:\\.(com|\ud55c\uad6d|\uc0bc\uc131|\ub2f7\ucef4|\ub2f7\ub137|\u9999\u6e2f|\u9910\u5385|\u98de\u5229\u6d66|\u96c6\u56e2|\u8c37\u6b4c|\u7f51\u7edc|\u7f51\u5e97|\u7f51\u5740|\u7ec4\u7ec7\u673a\u6784|\u79fb\u52a8|\u70b9\u770b|\u6e38\u620f|\u6de1\u9a6c\u9521|\u673a\u6784|\u65f6\u5c1a|\u65b0\u52a0\u5761|\u653f\u5e9c|\u653f\u52a1|\u624b\u673a|\u6211\u7231\u4f60|\u6148\u5584|\u5e7f\u4e1c|\u5de5\u884c|\u5a31\u4e50|\u5927\u62ff|\u5728\u7ebf|\u5546\u6807|\u5546\u5e97|\u5546\u57ce|\u53f0\u7063|\u53f0\u6e7e|\u516c\u76ca|\u516c\u53f8|\u516b\u5366|\u5065\u5eb7|\u4fe1\u606f|\u4f5b\u5c71|\u4f01\u4e1a|\u4e2d\u6587\u7f51|\u4e2d\u570b|\u4e2d\u56fd|\u4e2d\u4fe1|\u4e16\u754c|\u30b3\u30e0|\u30b0\u30fc\u30b0\u30eb|\u307f\u3093\u306a|\u10d2\u10d4|\u0e44\u0e17\u0e22|\u0e04\u0e2d\u0e21|\u0dbd\u0d82\u0d9a\u0dcf|\u0c2d\u0c3e\u0c30\u0c24\u0c4d|\u0b9a\u0bbf\u0b99\u0bcd\u0b95\u0baa\u0bcd\u0baa\u0bc2\u0bb0\u0bcd|\u0b87\u0bb2\u0b99\u0bcd\u0b95\u0bc8|\u0b87\u0ba8\u0bcd\u0ba4\u0bbf\u0baf\u0bbe|\u0aad\u0abe\u0ab0\u0aa4|\u0a2d\u0a3e\u0a30\u0a24|\u09ad\u09be\u09b0\u09a4|\u0938\u0902\u0917\u0920\u0928|\u092d\u093e\u0930\u0924|\u0928\u0947\u091f|\u0915\u0949\u092e|\u0645\u0648\u0642\u0639|\u0645\u0644\u064a\u0633\u064a\u0627|\u0645\u0635\u0631|\u0643\u0648\u0645|\u0642\u0637\u0631|\u0641\u0644\u0633\u0637\u064a\u0646|\u0639\u0645\u0627\u0646|\u0634\u0628\u0643\u0629|\u0633\u0648\u0631\u064a\u0629|\u0633\u0648\u062f\u0627\u0646|\u062a\u0648\u0646\u0633|\u0628\u06be\u0627\u0631\u062a|\u0628\u0627\u0632\u0627\u0631|\u0627\u06cc\u0631\u0627\u0646|\u0627\u0645\u0627\u0631\u0627\u062a|\u0627\u0644\u0645\u063a\u0631\u0628|\u0627\u0644\u0633\u0639\u0648\u062f\u064a\u0629|\u0627\u0644\u062c\u0632\u0627\u0626\u0631|\u0627\u0644\u0627\u0631\u062f\u0646|\u05e7\u05d5\u05dd|\u0570\u0561\u0575|\u049b\u0430\u0437|\u0443\u043a\u0440|\u0441\u0440\u0431|\u0441\u0430\u0439\u0442|\u0440\u0444|\u0440\u0443\u0441|\u043e\u0440\u0433|\u043e\u043d\u043b\u0430\u0439\u043d|\u043c\u043e\u0441\u043a\u0432\u0430|\u043c\u043e\u043d|\u043c\u043a\u0434|\u043a\u043e\u043c|\u0434\u0435\u0442\u0438|\u0431\u0435\u043b|zw|zuerich|zone|zm|zip|za|yt|youtube|yokohama|yoga|yodobashi|ye|yandex|yachts|xyz|xxx|xn--zfr164b|xn--ygbi2ammx|xn--yfro4i67o|xn--y9a3aq|xn--xkc2dl3a5ee0h|xn--xkc2al3hye2a|xn--xhq521b|xn--wgbl6a|xn--wgbh1c|xn--vuq861b|xn--vhquv|xn--vermgensberatung-pwb|xn--vermgensberater-ctb|xn--unup4y|xn--tckwe|xn--t60b56a|xn--ses554g|xn--s9brj9c|xn--rhqv96g|xn--qcka1pmc|xn--q9jyb4c|xn--pssy2u|xn--pgbs0dh|xn--p1ai|xn--p1acf|xn--ogbpf8fl|xn--o3cw4h|xn--nyqy26a|xn--nqv7fs00ema|xn--nqv7f|xn--node|xn--ngbc5azd|xn--mxtq1m|xn--mk1bu44c|xn--mgbx4cd0ab|xn--mgbpl2fh|xn--mgberp4a5d4ar|xn--mgbc0a9azcg|xn--mgbbh1a71e|xn--mgbayh7gpa|xn--mgbab2bd|xn--mgbaam7a8h|xn--mgba3a4f16a|xn--mgb9awbf|xn--lgbbat1ad8j|xn--l1acc|xn--kput3i|xn--kpry57d|xn--kprw13d|xn--kcrx77d1x4a|xn--j6w193g|xn--j1amh|xn--j1aef|xn--io0a7i|xn--imr513n|xn--i1b6b1a6a2e|xn--hxt814e|xn--h2brj9c|xn--gecrj9c|xn--fzc2c9e2c|xn--fpcrj9c3d|xn--flw351e|xn--fjq720a|xn--fiqz9s|xn--fiqs8s|xn--fiq64b|xn--fiq228c5hs|xn--fhbei|xn--estv75g|xn--d1alf|xn--d1acj3b|xn--czru2d|xn--czrs0t|xn--czr694b|xn--clchc0ea0b2g2a9gcd|xn--cg4bki|xn--c2br7g|xn--c1avg|xn--b4w605ferd|xn--9et52u|xn--9dbq2a|xn--90ais|xn--90a3ac|xn--80aswg|xn--80asehdb|xn--80ao21a|xn--80adxhks|xn--6qq986b3xl|xn--6frz82g|xn--55qx5d|xn--55qw42g|xn--4gbrim|xn--45q11c|xn--45brj9c|xn--42c2d9a|xn--3pxu8k|xn--3e0b707e|xn--3ds443g|xn--3bst00m|xn--30rr7y|xn--1qqw23a|xn--11b4c3d|xin|xerox|xbox|wtf|wtc|ws|world|works|work|wme|windows|win|williamhill|wiki|wien|whoswho|wf|weir|wedding|wed|website|webcam|watch|wang|walter|wales|vu|voyage|voto|voting|vote|vodka|vn|vlaanderen|vistaprint|vista|vision|villas|video|viajes|vi|vg|vet|versicherung|verm\u00f6gensberatung|verm\u00f6gensberater|ventures|vegas|ve|vc|vacations|va|uz|uy|us|uol|uno|university|uk|ug|ubs|ua|tz|tw|tv|tui|tt|trust|travel|training|trading|trade|tr|toys|toyota|town|tours|toshiba|toray|top|tools|tokyo|today|to|tn|tm|tl|tk|tj|tirol|tires|tips|tienda|tickets|theater|thd|th|tg|tf|tennis|temasek|telefonica|tel|technology|tech|team|td|tc|taxi|tax|tattoo|tatar|tatamotors|taipei|sz|systems|sydney|sy|sx|swiss|swatch|sv|suzuki|surgery|surf|support|supply|supplies|sucks|su|style|study|studio|statoil|starhub|st|srl|sr|spreadbetting|spiegel|space|soy|sony|solutions|solar|sohu|software|social|soccer|so|sncf|sn|sm|sl|skype|sky|ski|sk|sj|site|singles|si|shriram|show|shoes|shiksha|sh|sg|sexy|sex|sew|services|sener|seat|se|sd|scot|scor|science|schwarz|schule|school|scholarships|schmidt|scb|sca|sc|sb|saxo|sarl|sap|sanofi|sandvikcoromant|sandvik|samsung|sale|sakura|saarland|sa|ryukyu|rw|run|ruhr|ru|rsvp|rs|rodeo|rocks|ro|rip|rio|ricoh|rich|reviews|review|restaurant|rest|republican|report|repair|rentals|rent|ren|reit|reisen|reise|rehab|redstone|red|recipes|realty|realtor|re|racing|quebec|qpon|qa|py|pw|pub|pt|ps|property|properties|prof|productions|prod|pro|press|praxi|pr|post|porn|poker|pohl|pn|pm|plus|plumbing|play|place|pl|pk|pizza|pink|pictures|pictet|pics|piaget|physio|photos|photography|photo|philips|pharmacy|ph|pg|pf|pet|pe|party|parts|partners|paris|panerai|page|pa|ovh|otsuka|osaka|organic|org|orange|oracle|ooo|online|onl|ong|one|omega|om|okinawa|office|nz|nyc|nu|ntt|nrw|nra|nr|np|nokia|no|nl|nissan|ninja|nico|ni|nhk|ngo|ng|nf|nexus|news|new|neustar|network|netbank|net|nec|ne|nc|navy|name|nagoya|nadex|na|mz|my|mx|mw|mv|museum|mu|mtpc|mtn|mt|ms|mr|mq|mp|movistar|movie|mov|motorcycles|moscow|mortgage|mormon|montblanc|money|monash|moe|moda|mobi|mo|mn|mma|mm|ml|mk|mini|mil|microsoft|miami|mh|mg|menu|men|memorial|meme|melbourne|meet|media|me|md|mc|mba|marriott|markets|marketing|market|mango|management|man|maison|maif|madrid|ma|ly|lv|luxury|luxe|lupin|lu|ltda|lt|ls|lr|love|lotto|lotte|london|lol|loans|loan|lk|lixil|live|link|limo|limited|lighting|life|lidl|liaison|li|lgbt|lexus|legal|leclerc|lease|lds|lc|lb|lawyer|law|latrobe|lat|lasalle|land|lancaster|lacaixa|la|kz|kyoto|ky|kw|kred|krd|kr|kp|komatsu|koeln|kn|km|kiwi|kitchen|kim|ki|kh|kg|ke|kddi|kaufen|juegos|jprs|jp|joburg|jobs|jo|jm|jll|jlc|jewelry|jetzt|je|jcb|java|iwc|itau|it|istanbul|ist|is|irish|ir|iq|ipiranga|io|investments|international|int|insure|institute|ink|ing|info|infiniti|industries|in|immobilien|immo|im|il|iinet|ifm|ie|id|icu|ice|icbc|ibm|hu|ht|hsbc|hr|how|house|hotmail|hoteles|hosting|host|horse|honda|homes|homedepot|holiday|holdings|hockey|hn|hm|hk|hiv|hitachi|hiphop|hermes|here|help|healthcare|haus|hangout|hamburg|gy|gw|guru|guitars|guide|guge|gu|gt|gs|gripe|green|gratis|graphics|gr|gq|gp|gov|gop|google|goog|goo|golf|goldpoint|gold|gn|gmx|gmo|gmail|gm|globo|global|gle|glass|gl|gives|gifts|gift|gi|gh|ggee|gg|gf|genting|gent|ge|gdn|gd|gbiz|gb|garden|game|gallery|gal|ga|fyi|futbol|furniture|fund|frogans|frl|fr|foundation|forum|forsale|forex|football|foo|fo|fm|fly|flsmidth|flowers|florist|flights|fk|fj|fitness|fit|fishing|fish|firmdale|financial|finance|film|fi|feedback|fashion|farm|fans|fan|faith|fail|express|exposed|expert|exchange|everbank|events|eus|eurovision|eu|et|estate|esq|es|erni|er|equipment|epson|enterprises|engineering|engineer|energy|emerck|email|eg|ee|education|edu|ec|eat|earth|dz|dvag|durban|drive|download|doosan|domains|doha|dog|docs|do|dnp|dm|dk|dj|discount|directory|direct|digital|diet|diamonds|dev|design|desi|dentist|dental|democrat|delta|delivery|degree|deals|de|dclk|day|datsun|dating|date|dance|dad|dabur|cz|cyou|cymru|cy|cx|cw|cv|cuisinella|cu|cruises|crs|crown|cricket|creditcard|credit|cr|courses|coupons|country|corsica|coop|cool|cooking|contractors|consulting|construction|condos|computer|company|community|commbank|com|cologne|college|coffee|codes|coach|co|cn|cm|club|cloud|clothing|clinic|click|cleaning|claims|cl|ck|city|citic|cisco|ci|church|chrome|christmas|chloe|cheap|chat|channel|ch|cg|cfd|cfa|cf|cern|ceo|center|cd|cc|cbn|cba|catering|cat|casino|cash|casa|cartier|cars|careers|career|care|cards|caravan|capital|capetown|canon|cancerresearch|camp|camera|cal|cafe|cab|ca|bzh|bz|by|bw|bv|buzz|business|builders|build|budapest|bt|bs|brussels|brother|broker|bridgestone|bradesco|br|boutique|boo|bond|boats|bo|bnpparibas|bnl|bn|bmw|bm|blue|bloomberg|blackfriday|black|bj|biz|bio|bingo|bing|bike|bid|bible|bi|bharti|bh|bg|bf|bet|best|berlin|bentley|beer|be|bd|bcn|bbva|bbc|bb|bayern|bauhaus|bargains|barclays|barclaycard|barcelona|bar|bank|band|ba|azure|az|axa|ax|aw|autos|auto|audio|auction|au|attorney|at|associates|asia|as|arpa|army|archi|ar|aquarelle|aq|app|apartments|ao|android|an|amsterdam|am|alsace|allfinanz|al|airtel|airforce|aig|ai|agency|ag|afl|af|aero|aeg|ae|adult|ads|ad|actor|active|accountants|accountant|accenture|academy|ac|abogado|abbott|abb))"};},null);
__d("BusinessAssetGrouping.brands",["emptyFunction","fbt","getObjectValues"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';var j=(h._("Personal")),k="personal-business",l={NULL_BIZ_ID:k,DEFAULT_NON_BIZ_NAME:j,groupAssets:function(t,u,v,w,x,y,z,aa){x=x||q;y=y||g.thatReturnsTrue;var ba=m(t,v),ca=ba.businessesByID;ca[k]={id:k,name:z||j};var da=n(ba.assetsByBizID,ca,w),ea=r(i(da),p);if(aa&&ea[0].bizID===k)ea.shift();var fa=[];for(var ga=0;ga<ea.length;ga++){var ha=ea[ga],ia=false;ha.assets=r(ha.assets,x);ha.assets=s(ha.assets,y,ha.bizID);if(ha.assets.length!==0){fa=fa.concat(ha.assets);ia=true;}ha.projects=r(i(ha.projectsByID),o);delete ha.projectsByID;for(var ja=0;ja<ha.projects.length;ja++){ha.projects[ja].assets=r(ha.projects[ja].assets,x);ha.projects[ja].assets=s(ha.projects[ja].assets,y,ha.bizID);if(ha.projects[ja].assets.length!==0){fa=fa.concat(ha.projects[ja].assets);ia=true;}}if(!ia)ea[ga]=null;}ea=ea.filter(function(ka){return ka;});return {businessesByID:ca,groupedAssets:ea,assets:fa};}};function m(t,u){var v={},w={};for(var x=0;x<t.length;x++){var y=t[x],z=u(y);if(!z||z.length===0){v[k]?v[k].push(y):v[k]=[y];continue;}for(var aa=0;aa<z.length;aa++){var ba=z[aa],ca;if(ba.business){ca=ba.business.id;w[ca]=ba.business;}else ca=k;if(v[ca]){v[ca].push(y);}else v[ca]=[y];}}return {assetsByBizID:v,businessesByID:w};}function n(t,u,v){var w={},x;for(var y in t){x=t[y];w[y]=w[y]||{bizID:y,name:u[y].name,projectsByID:{},assets:[]};for(var z=0;z<x.length;z++){var aa=x[z],ba=v(aa),ca=false;if(y!==k&&ba&&ba.length>0)for(var da=0;da<ba.length;da++){var ea=ba[da];if(ea.business&&ea.business.id!==y)continue;var fa=w[y].projectsByID;fa[ea.id]=fa[ea.id]||{projectID:ea.id,name:u[y].name+" - "+ea.name,assets:[]};fa[ea.id].assets.push(aa);ca=true;}if(!ca)w[y].assets.push(aa);}}return w;}function o(t){return (t.name||"").toUpperCase();}function p(t){if(t.bizID===k)return String.fromCharCode(0);return t.name;}function q(t){return t.name?t.name:t.id;}function r(t,u){return t.sort(function(v,w){var x=u(v),y=u(w);if(x>y){return 1;}else if(x<y){return -1;}else return 0;});}function s(t,u,v){return t.filter(function(w){return u(w,v);});}e.exports=l;},null);
__d("BizSiteIdentifier.brands",["BusinessConf","BusinessAssetGrouping.brands","URI"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=h.NULL_BIZ_ID,k={isBizSite:function(){return i.getRequestURI(false).getSubdomain()===g.DOMAIN;},getBusinessID:function(){return i.getRequestURI(false).getQueryData()[g.BIZ_ID_PARAM_NAME];},createBusinessURL:function(l,m){if(m===j)return new i(l).setSubdomain('www');var n=new i(l).setSubdomain(g.DOMAIN);if(k.isBizSite())n.setDomain(i.getRequestURI().getDomain());var o=m||k.getBusinessID();n.addQueryData(g.BIZ_ID_PARAM_NAME,o);return n;}};e.exports=k;},null);
__d("BusinessURI.brands",["BizSiteIdentifier.brands","BusinessConf","URI"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();for(var j in i)if(i.hasOwnProperty(j))l[j]=i[j];var k=i===null?null:i.prototype;l.prototype=Object.create(k);l.prototype.constructor=l;l.__superConstructor__=i;function l(n,o){"use strict";i.call(this,n);if(g.isBizSite()){var p=o||g.getBusinessID();if(p)this.addQueryData(h.BIZ_ID_PARAM_NAME,p);if(!this.$BusinessURI0(this.getSubdomain()))this.setSubdomain(h.DOMAIN);}return this;}l.prototype.$BusinessURI0=function(n){"use strict";return n==='developers';};var m=function(n,o){return new l(n,o);};e.exports=m;},null);
__d("requireWeak",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(h,i){if(Object.prototype.toString.call(h)==='[object Array]'){if(h.length!==1)throw new Error('requireWeak only supports a one-arg array for push safety');h=h[0];}d.call(null,[h],i);}e.exports=g;},null);
__d("ChatImpressionLogger",["AsyncSignal","requireWeak","ChatConfig","ChatVisibility","Poller","PresencePrivacy","PresenceStatus","debounceAcrossTransitions"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();var o=null;h('AvailableList',function(u){return o=u;});var p=null;function q(){if(!p)return '';return p.getCachedSortedList().toString();}function r(){if(!p||!o)return '';var u=[],v=p.getCachedSortedList();for(var w=0;w<v.length;w++)u[w]=o.get(v[w]);return u.toString();}function s(u){u.setURI('/ajax/chat/imps_logging.php').setData({list_availability:r(),sorted_list:q(),source:'periodical_imps'});}var t={init:function(u){p=u;var v=i.get('chat_impression_logging_periodical',0);if(v){var w=i.get('periodical_impression_logging_config.interval'),x=new k({interval:w,setupRequest:s,clearOnQuicklingEvents:false,dontStart:true});l.subscribe('privacy-user-presence-changed',n(function(){if(j.isOnline()){x.start();}else x.stop();}));}this.init=function(){};},logImpression:function(u,v,w){var x=i.get('chat_impression_logging_with_click'),y={list_availability:x?r():'',sorted_list:x?q():'',source:u,target:v,target_presence:m.get(v),viewport_width:document.body.clientWidth};new g('/ajax/chat/ct.php',Object.assign(y,w)).send();}};e.exports=t;},null);
__d("ChatWelcomeMessage",["ImmutableObject"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';function h(){this.$ChatWelcomeMessage0={};}h.prototype.setWelcomeMessage=function(j,k,l){this.$ChatWelcomeMessage0[j]=new g({timestamp:Date.now(),thread_id:j,author:k,body:l});};h.prototype.getWelcomeMessage=function(j){return this.$ChatWelcomeMessage0[j];};var i=new h();e.exports=i;},null);
__d("MercuryIDs",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={isValid:function(h){if(!h||typeof h!=='string')return false;return (/^\w{3,12}:/.test(h));},isValidThreadID:function(h){if(!g.isValid(h))return false;var i=g.tokenize(h);switch(i.type){case 'user':case 'group':case 'thread':case 'root':case 'pending':return true;default:return false;}},tokenize:function(h){if(!this.isValid(h))throw ("bad_id_format "+h);var i=h.indexOf(':');return {type:h.substr(0,i),value:h.substr(i+1)};},getUserIDFromParticipantID:function(h){if(!this.isValid(h))throw ("bad_id_format "+h);var i=g.tokenize(h),j=i.type,k=i.value;if(j!='fbid')return null;return k;},getParticipantIDFromUserID:function(h){if(isNaN(h))throw ("Not a user ID: "+h);return 'fbid:'+h;},getUserIDFromThreadID:function(h){if(!this.isCanonical(h))return null;return this.tokenize(h).value;},getThreadIDFromUserID:function(h){return 'user:'+h;},getThreadIDFromParticipantID:function(h){var i=this.getUserIDFromParticipantID(h);return i?this.getThreadIDFromUserID(i):null;},getParticipantIDFromFromThreadID:function(h){return this.getParticipantIDFromUserID(this.getUserIDFromThreadID(h)||'');},isCanonical:function(h){return this.isValid(h)&&this.tokenize(h).type==='user';},isGroupChat:function(h){return this.isValid(h)&&this.tokenize(h).type!=='user';}};e.exports=g;},null);
__d("MercuryAssert",["MercuryIDs"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();e.exports={isParticipantID:function(h){if(!g.isValid(h))throw ("bad_participant_id "+h);},allParticipantIDs:function(h){h.forEach(this.isParticipantID);},isUserParticipantID:function(h){var i=g.tokenize(h);if(i.type!='fbid')throw ("bad_user_id "+h);},isEmailParticipantID:function(h){var i=g.tokenize(h);if(i.type!='email')throw ("bad_email_id "+h);},allThreadID:function(h){h.forEach(this.isThreadID);},isThreadID:function(h){if(!g.isValid(h))throw ("bad_thread_id "+h);}};},null);
__d("MercuryAttachment",["MercuryAttachmentContentType","MercuryAttachmentType","MercuryAudioType"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';var j={getAttachIconClass:function(k){switch(k){case g.PHOTO:return 'MercuryPhotoIcon';case g.VIDEO:return 'MercuryVideoIcon';case g.MUSIC:return 'MercuryMusicIcon';case g.VOICE:return 'MercuryVoiceIcon';case g.TEXT:return 'MercuryTextIcon';case g.MSWORD:return 'MercuryMSWordIcon';case g.MSXLS:return 'MercuryMSXLSIcon';case g.MSPPT:return 'MercuryMSPPTIcon';}return 'MercuryDefaultIcon';},getAttachIconClassByMime:function(k){if(k.startsWith('image')){return 'MercuryPhotoIcon';}else if(k.startsWith('video')){return 'MercuryVideoIcon';}else if(k.startsWith('audio')){return 'MercuryMusicIcon';}else if(k.startsWith('text/plain')){return 'MercuryTextIcon';}else return 'MercuryDefaultIcon';},getAttachTypeByMime:function(k){if(k.startsWith('image')){return g.PHOTO;}else if(k.startsWith('video')){return g.VIDEO;}else if(k.startsWith('audio')){return g.MUSIC;}else if(k.startsWith('text/plain')){return g.TEXT;}else return g.UNKNOWN;},convertRaw:function(k){var l=[];for(var m=0;m<k.length;m++){var n=k[m];if(n.attach_type===h.PHOTO){l.push(n);}else if(n.filename){var o=j.getAttachTypeByMime(n.filetype),p={};p.attach_type=h.FILE;p.name=n.filename;p.icon_type=o;p.url='';l.push(p);}}return l;},get:function(k){var l=[];if(k.attachments){l=k.attachments;}else if(k.raw_attachments)l=this.convertRaw(k.raw_attachments);if(!(k.attachments&&k.attachments.length>0)){if(k.sticker_id)return l.concat([{attach_type:h.STICKER}]);if(k.preview_attachments&&k.preview_attachments.length>0)return l.concat(k.preview_attachments);}return l;},resizeContain:function(k,l){var m=k.width/k.height,n=l.width/l.height;if(n<m){return {width:Math.ceil(Math.min(k.height*n,l.width)),height:Math.ceil(Math.min(k.height,l.height))};}else return {width:Math.ceil(Math.min(k.width,l.width)),height:Math.ceil(Math.min(k.width/n,l.height))};},isBubblePreferred:function(k){return !(this.isPhotoAttachment(k)||this.isStickerAttachment(k)||this.isVideoAttachment(k)||this.isVoiceAttachment(k));},isPhotoAttachment:function(k){return !!(k.attach_type==h.PHOTO||k.attach_type==h.ANIMATED_IMAGE||(k.attach_type==h.FILE&&k.preview_url));},isVideoAttachment:function(k){return k.attach_type==h.VIDEO;},isShareAttachment:function(k){return k.attach_type==h.SHARE;},isFileAttachment:function(k){return k.attach_type==h.FILE;},isErrorAttachment:function(k){return k.attach_type==h.ERROR;},isStickerAttachment:function(k){return k.attach_type==h.STICKER;},isVoiceAttachment:function(k){if(!k.metadata)return false;return (k.metadata.type===i.AudioClip||k.metadata.type===i.VoiceMessageWithTranscript);},hasAttribution:function(k){return !!k.app_attribution;}};e.exports=j;},null);
__d("MercuryLoggingHelper",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={obfuscateThread:function(h){var i=Object.assign({},h);if(h&&h.snippet&&h.snippet.length>5)i.snippet=h.snippet.substr(0,5)+'...';return i;},obfuscateMessage:function(h){var i=Object.assign({},h);if(h&&h.body&&h.body.length>5)i.body=h.body.substr(0,5)+'...';return i;}};e.exports=g;},null);
__d("MercurySingletonMixin",["CurrentUser"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h={_getInstances:function(){if(!this._instances)this._instances={};return this._instances;},get:function(){return this.getForFBID(g.getID());},getForFBID:function(i){var j=this._getInstances();if(!j[i])j[i]=new this(i);return j[i];}};e.exports=h;},null);
__d("MercuryMessageClientState",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={DO_NOT_SEND_TO_SERVER:'do_not_send_to_server',SEND_TO_SERVER:'send_to_server'};e.exports=g;},null);
__d("MercurySendErrorLogger",["Banzai","BanzaiLogger"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i=h.create({retry:true}),j=g.isEnabled('mercury_send_error_logging'),k={log:function(l){if(!j)return;var m={message_id:l.message_id,timestamp_client:Date.now(),error_type:l.error_data.type,error_code:l.error_data.code,error_description:l.error_data.description,is_transient:l.error_data.is_transient};i.log('MercurySendErrorLoggerConfig',m);}};e.exports=k;},null);
__d("MercuryServerPayloadPreprocessor",["CurrentEnvironment","MercuryIDs","MercuryActionStatus","MercuryActionType","MercuryAttachment","MercuryDispatcher","MercurySendErrorLogger","MercurySingletonMixin","MercuryThreadIDMap","invariant","URI"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){b.__markCompiled&&b.__markCompiled();'use strict';function r(s){this.$MercuryServerPayloadPreprocessor0=s;this.$MercuryServerPayloadPreprocessor1=o.getForFBID(this.$MercuryServerPayloadPreprocessor0);this.$MercuryServerPayloadPreprocessor2=l.getForFBID(this.$MercuryServerPayloadPreprocessor0);}r.prototype.handleUpdate=function(s){var t,u,v,w={};p(!s.from_client);(s.threads||[]).forEach(function(ka){this.$MercuryServerPayloadPreprocessor3(ka,w);var la=this.$MercuryServerPayloadPreprocessor1.getFBIDFromClientIDNow(ka.thread_id);d(['MercuryServerRequests'],function(ma){var na=ma.getForFBID(this.$MercuryServerPayloadPreprocessor0);na.markThreadFetched(ka.thread_id);na.markThreadFetched(la);na.updateLastActionTimestamp(ka.timestamp);}.bind(this));}.bind(this));(s.ordered_threadlists||[]).forEach(function(ka){var la=ka.thread_fbids||[];la=la.concat(ka.other_user_fbids||[]);ka.thread_ids=la.map(function(ma){return this.$MercuryServerPayloadPreprocessor1.getClientIDFromFBIDNow(ma);}.bind(this));}.bind(this));if(s.pinned_threads&&s.pinned_threads.thread_fbids)s.pinned_threads.thread_fbids=s.pinned_threads.thread_fbids.map(function(ka){return this.$MercuryServerPayloadPreprocessor1.getClientIDFromFBIDNow(ka);}.bind(this));if(s.delivery_receipts){var x={},y;for(t=s.delivery_receipts,u=Array.isArray(t),v=0,t=u?t:t[typeof Symbol=="function"?Symbol.iterator:"@@iterator"]();;){if(u){if(v>=t.length)break;y=t[v++];}else{v=t.next();if(v.done)break;y=v.value;}var z=y.other_user_fbid?h.getThreadIDFromUserID(y.other_user_fbid):this.$MercuryServerPayloadPreprocessor1.getClientIDFromFBIDNow(y.thread_fbid);x[z]=y.time;}s.delivery_receipts=x;}s.actions=s.actions||[];s.actions.forEach(function(ka){if(ka.action_type===j.SEND_MESSAGE&&ka.status===i.ERROR)m.log(ka);var la=ka.thread_fbid;if(ka.other_user_fbid)la=ka.other_user_fbid;if(ka.status&&ka.status!=i.SUCCESS&&!la){ka.thread_id=ka.client_thread_id;return;}if(ka.action_type==j.SEND_MESSAGE&&ka.client_thread_id&&la){var ma=la.toString(),na=ka.client_thread_id;this.$MercuryServerPayloadPreprocessor1.setClientIDToFBID(na,ma);w[ma]=na;}var oa=ka.thread_id;if(la){ka.thread_id=this.$MercuryServerPayloadPreprocessor1.hasClientIDForFBID(la)?this.$MercuryServerPayloadPreprocessor1.getClientIDFromFBIDNow(la):null;}else if(ka.client_thread_id)ka.thread_id=ka.client_thread_id;if(!ka.thread_id)ka.server_thread_id=oa;if(!s.payload_source||!s.payload_source.startsWith('server'))d(['MercuryServerRequests'],function(pa){pa.getForFBID(this.$MercuryServerPayloadPreprocessor0).updateLastActionTimestamp(ka.timestamp);}.bind(this));}.bind(this));this.$MercuryServerPayloadPreprocessor4(s);if(s.end_of_history){var aa=[];for(var ba=0;ba<s.end_of_history.length;ba++){var ca=s.end_of_history[ba];if(ca.type=='user'){aa.push('user:'+ca.fbid);}else if(ca.type=='thread'&&this.$MercuryServerPayloadPreprocessor1.hasClientIDForFBID(ca.fbid))aa.push(this.$MercuryServerPayloadPreprocessor1.getClientIDFromFBIDNow(ca.fbid));}s.end_of_history=aa;}if(s.roger){var da={};for(var ea in s.roger){var fa=Object.keys(s.roger[ea]),ga;if(ea){ga=this.$MercuryServerPayloadPreprocessor1.getClientIDFromFBIDNow(ea);}else if(fa.length===1)ga=h.getThreadIDFromUserID(fa[0]);if(ga){var ha=s.roger[ea];da[ga]={};for(var ia in ha)if(ha.hasOwnProperty(ia)){var ja=h.getParticipantIDFromUserID(ia);da[ga][ja]=ha[ia];}}}s.roger=da;}s.newlyAddedClientIDs=w;s.preprocessed=true;this.$MercuryServerPayloadPreprocessor2.handleUpdate(s);};r.prototype.$MercuryServerPayloadPreprocessor3=function(s,t){var u=s.thread_fbid;if(s.canonical_fbid)u=s.canonical_fbid;var v=this.$MercuryServerPayloadPreprocessor1.getClientIDFromFBIDNow(u);if(!v){if(s.canonical_fbid){v='user:'+s.canonical_fbid;}else if(s.root_message_threading_id)v='root:'+s.root_message_threading_id;v=v||'thread:'+u;if(u)u=u.toString();this.$MercuryServerPayloadPreprocessor1.setClientIDToFBID(v,u);t[u]=v;if(s.thread_id){this.$MercuryServerPayloadPreprocessor1.setServerToClientID(s.thread_id,v);t[s.thread_id]=v;}}s.thread_id=v;};r.prototype.$MercuryServerPayloadPreprocessor4=function(s){s.actions.forEach(function(t){if(t.action_type===j.USER_GENERATED_MESSAGE){t.attachments=t.attachments||[];t.attachments.forEach(function(u){if(k.isShareAttachment(u)&&g.messengerdotcom){var v=new q(u.share.uri);if(!v.getDomain())u.share.uri=v.setDomain('facebook.com').setSubdomain(q.getRequestURI().getSubdomain()).setProtocol('https').toString();}});}});};Object.assign(r,n);e.exports=r;},null);
__d("MercuryServerDispatcher",["AsyncRequest","BanzaiLogger","ChatPerfEvent","CurrentUser","LogHistory","MercuryLoggingHelper","areJSONRepresentationsEqual","debounceAcrossTransitions","performanceAbsoluteNow"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();'use strict';var p={},q=k.getInstance('mercury_server_dispatcher'),r=false,s={IMMEDIATE:'immediate',IDEMPOTENT:'idempotent',BATCH_SUCCESSIVE:'batch-successive',BATCH_SUCCESSIVE_UNIQUE:'batch-successive-unique',BATCH_SUCCESSIVE_PIGGYBACK_ON_ERROR:'batch-successive-piggyback-retry',BATCH_DEFERRED_MULTI:'batch-deferred-multi',BATCH_CONDITIONAL:'batch-conditional',DEFAULT_ENDPOINT_ID:'mercuryServerDispatcherDefaultEndpointID',registerEndpoints:function(v){for(var w in v){var x=v[w],y=x.request_user_id||j.getID(),z=x.endpoint_id||s.DEFAULT_ENDPOINT_ID;if(!p[w])p[w]={};if(!p[w][y])p[w][y]={};p[w][y][z]=new t(w,x);}},trySend:function(v,w,x,y,z){y=y||j.getID();z=z||s.DEFAULT_ENDPOINT_ID;p[v][y][z].trySend(w,x);}};function t(v,w){var x=w.mode||s.IMMEDIATE;switch(x){case s.IMMEDIATE:case s.IDEMPOTENT:case s.BATCH_SUCCESSIVE:case s.BATCH_SUCCESSIVE_UNIQUE:case s.BATCH_SUCCESSIVE_PIGGYBACK_ON_ERROR:case s.BATCH_DEFERRED_MULTI:case s.BATCH_CONDITIONAL:break;default:throw new Error('Invalid MercuryServerDispatcher mode '+x);}this._endpoint=v;this._mode=x;this._customHeader=w.customHeader;this._requestUserID=w.request_user_id;this._combineData=w.batch_function;this._combineDataIf=w.batch_if;this._batchSizeLimit=w.batch_size_limit;this._batches=[];this._handler=w.handler;this._errorHandler=w.error_handler;this._transportErrorHandler=w.transport_error_handler||w.error_handler;this._connectionRetries=w.connection_retries||0;this._timeoutHandler=w.timeout_handler;this._timeout=w.timeout;this._serverDialogCancelHandler=w.server_dialog_cancel_handler||w.error_handler;this._deferredSend=n(this._batchSend,0,this);}Object.assign(t.prototype,{_inFlight:0,_handler:null,_errorHandler:null,_transportErrorHandler:null,_timeoutHandler:null,_timeout:null,_serverDialogCancelHandler:null,_combineData:null,trySend:function(v,w){if(r)return;if(v===(void 0))v=null;var x=w||this._mode;if(x==s.IMMEDIATE){this._send(v);}else if(x==s.IDEMPOTENT){if(!this._inFlight)this._send(v);}else if(x==s.BATCH_SUCCESSIVE||x==s.BATCH_SUCCESSIVE_UNIQUE){if(!this._inFlight){this._send(v);}else this._batchData(v);}else if(x==s.BATCH_CONDITIONAL){var y=this._batches[0]&&this._batches[0].getData();if(this._inFlight&&(this._combineDataIf(this._pendingRequestData,v)||this._combineDataIf(y,v))){this._batchData(v);}else this._send(v);}else if(x==s.BATCH_DEFERRED_MULTI){this._batchData(v);this._deferredSend();}else if(x==s.BATCH_SUCCESSIVE_PIGGYBACK_ON_ERROR){this._batchData(v);if(!this._inFlight)this._batchSend();}},_send:function(v){this._inFlight++;this._pendingRequestData=Object.assign({},v);if(this._requestUserID!=j.getID())v.request_user_id=this._requestUserID;var w=[];if(v&&v.message_batch)for(var x=0;x<v.message_batch.length;x++){var y=l.obfuscateMessage(v.message_batch[x]);w.push(y);}var z=w.length?Object.assign({},v,{message_batch:w}):v;q.log('send',{endpoint:this._endpoint,data:z,inflight_count:this._inFlight});var aa=o(),ba=new g(this._endpoint).setData(v).setOption('retries',this._connectionRetries).setHandler(function(ca){h.log('ChatPerfLoggerConfig',{event:i.ASYNC_REQUEST,duration:o()-aa,endpoint:this._endpoint});this._handleResponse(ca);}.bind(this)).setErrorHandler(this._handleError.bind(this)).setTransportErrorHandler(this._handleTransportError.bind(this)).setServerDialogCancelHandler(this._handleServerDialogCancel.bind(this)).setAllowCrossPageTransition(true);if(this._customHeader)ba.setRequestHeader(this._customHeader.name,this._customHeader.value);if(this._timeout&&this._timeoutHandler)ba.setTimeoutHandler(this._timeout,this._handleTimeout.bind(this));ba.send();},_batchData:function(v,w){if(this._mode==s.BATCH_SUCCESSIVE_UNIQUE&&this._pendingRequestData!==(void 0)&&m(v,this._pendingRequestData)){return;}else{var x=this._batches.length-1;if(x>=0&&!this._hasReachedBatchLimit(this._batches[x])){w?this._batches[x].combineWithOlder(v,this._combineData):this._batches[x].combineWith(v,this._combineData);}else this._batches.push(new u(v));q.debug('batch',{endpoint:this._endpoint,batches:this._batches,batch_limit:this._batchSizeLimit});}},_hasReachedBatchLimit:function(v){return this._batchSizeLimit&&v.getSize()>=this._batchSizeLimit;},_batchSend:function(){if(this._batches[0]){this._send(this._batches[0].getData());this._batches.shift();}},_handleResponse:function(v){this._inFlight--;q.log('response',{endpoint:this._endpoint,inflight_count:this._inFlight});var w=v.getPayload();r=w&&w.kill_chat;if(r)q.log('killswitch_enabled',{endpoint:this._endpoint,inflight_count:this._inFlight});if(w&&w.error_payload){if(this._errorHandler)this._errorHandler(v);}else this._handler&&this._handler(w,v.getRequest());if(this._mode==s.BATCH_SUCCESSIVE||this._mode==s.BATCH_SUCCESSIVE_UNIQUE||this._mode==s.BATCH_SUCCESSIVE_PIGGYBACK_ON_ERROR||this._mode==s.BATCH_CONDITIONAL)this._batchSend();delete this._pendingRequestData;},_postErrorHandler:function(){q.error('error',{endpoint:this._endpoint,inflight_count:this._inFlight-1});this._inFlight--;var v=this._mode;if(v==s.BATCH_SUCCESSIVE||v==s.BATCH_SUCCESSIVE_UNIQUE||v==s.BATCH_CONDITIONAL){this._batchSend();}else if(v==s.BATCH_SUCCESSIVE_PIGGYBACK_ON_ERROR)if(this._batches[0]){this._batchData(this._pendingRequestData,true);this._batchSend();}else this._batchData(this._pendingRequestData,true);delete this._pendingRequestData;},_handleError:function(v){this._errorHandler&&this._errorHandler(v);this._postErrorHandler();},_handleTransportError:function(v){this._transportErrorHandler&&this._transportErrorHandler(v);this._postErrorHandler();},_handleTimeout:function(v){this._timeoutHandler&&this._timeoutHandler(v);this._postErrorHandler();},_handleServerDialogCancel:function(v){this._serverDialogCancelHandler&&this._serverDialogCancelHandler(v);this._postErrorHandler();}});function u(v){this._data=v;this._size=1;}Object.assign(u.prototype,{getData:function(){return this._data;},getSize:function(){return this._size;},combineWith:function(v,w){this._data=w(this._data,v);this._size++;},combineWithOlder:function(v,w){this._data=w(v,this._data);this._size++;}});e.exports=s;},null);
__d("MercuryServerSendMessageQueueSimulatedError",["AsyncRequest","AsyncResponse"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i=9999,j={create:function(k){var l=new g(this.endpoint_uri).setData({message_batch:[k],client:this.client}),m=new h(l,{});Object.assign(m,{error:i,silentError:false,transientError:true,request:l});return m;}};e.exports=j;},null);
__d("MercuryServerSendMessageQueue",["BanzaiODS","LogHistory","MercuryLoggingHelper","MercuryServerRequestsConfig","MercuryServerDispatcher","MercuryServerSendMessageQueueSimulatedError"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m='/ajax/mercury/send_messages.php',n=h.getInstance('mercury_server_send_message_queue');function o(p,q,r,s){"use strict";this.sender_id=p;this.queue_id=q;this.$MercuryServerSendMessageQueue0=r.success_handler;this.$MercuryServerSendMessageQueue1=r.error_handler;this.$MercuryServerSendMessageQueue2=r.transport_error_handler;this.$MercuryServerSendMessageQueue3=r.timeout_handler;this.client=s;var t=null;if(j.msgrRegion)t={name:'X-MSGR-Region',value:j.msgrRegion};var u={};u[m]={request_user_id:this.sender_id,endpoint_id:this.queue_id,mode:k.IMMEDIATE,customHeader:t,handler:this.handleSuccess.bind(this),error_handler:this.handleError.bind(this),transport_error_handler:this.handleTransportError.bind(this),timeout:r.timeout,timeout_handler:this.handleTimeout.bind(this),connection_retries:r.connection_retries};k.registerEndpoints(u);this.pending_message=null;this.queue=[];}o.prototype.enqueue=function(p){"use strict";this.queue.push(p);this.$MercuryServerSendMessageQueue5();};o.prototype.$MercuryServerSendMessageQueue5=function(){"use strict";if(this.pending_message||!this.queue.length){if(this.pending_message)this.$MercuryServerSendMessageQueue6();return;}this.pending_message=this.queue.shift();k.trySend(m,{message_batch:[this.pending_message],client:this.client},null,this.sender_id,this.queue_id);};o.prototype.$MercuryServerSendMessageQueue7=function(){"use strict";while(this.queue.length)this.$MercuryServerSendMessageQueue8(this.queue.shift());};o.prototype.$MercuryServerSendMessageQueue8=function(p){"use strict";this.$MercuryServerSendMessageQueue1(l.create(p));n.error('mark_as_failed',{fbid:this.sender_id,queue_id:this.queue_id,message:i.obfuscateMessage(p)});};o.prototype.handleSuccess=function(p,q){"use strict";this.$MercuryServerSendMessageQueue0(p,q);this.pending_message=null;this.$MercuryServerSendMessageQueue5();};o.prototype.handleError=function(p){"use strict";this.$MercuryServerSendMessageQueue1(p);this.$MercuryServerSendMessageQueue7();this.pending_message=null;};o.prototype.handleTransportError=function(p){"use strict";this.$MercuryServerSendMessageQueue2(p);this.$MercuryServerSendMessageQueue7();this.pending_message=null;};o.prototype.handleTimeout=function(p){"use strict";this.$MercuryServerSendMessageQueue3(p);this.$MercuryServerSendMessageQueue7();this.pending_message=null;};o.prototype.$MercuryServerSendMessageQueue6=function(){"use strict";n.debug('maybe_send_next_pending_message',{fbid:this.sender_id,queue_id:this.queue_id,pending_message:i.obfuscateMessage(this.pending_message),queue:this.queue.map(function(q){return i.obfuscateMessage(q);})});var p='send_queue.delayed.queue_length.'+this.queue.length.toString();g.bumpEntityKey('chat.web',p);};e.exports=o;},null);
__d("MercuryServerSendMessageQueueRouter",["BanzaiODS","LogHistory","Map","MercuryServerSendMessageQueue","MercurySingletonMixin"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=h.getInstance('mercury_server_send_message_queue_router'),m='chat.web.send_queue_router';g.setEntitySample(m,.1);function n(o){"use strict";this.fbid=o;this.queues=new i();}n.prototype.enqueue=function(o,p,q,r){"use strict";if(!this.queues.has(o)){this.queues.set(o,new j(this.fbid,o,p,q));l.debug('added queue',{fbid:this.fbid,queue_id:o});g.bumpEntityKey(m,'new_queue');}this.queues.get(o).enqueue(r);};Object.assign(n,k);e.exports=n;},null);
__d("PagesMessengerThreadUtils",["PageMessageEnumTag"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h={isFlagThread:function(i){if(!i)return false;return i.page_thread_info?i.page_thread_info.flagged:false;},isPageSpecficFilter:function(i){if(i===g.FLAG)return true;return false;}};e.exports=h;},null);
__d("MercuryPageServerRequests",["MercuryAPIArgsSource","MercuryAssert","MercuryServerRequests","PageMessageEnumTag","PagesMessengerThreadUtils","MercuryServerDispatcher"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m=g.MERCURY;for(var n in i)if(i.hasOwnProperty(n))p[n]=i[n];var o=i===null?null:i.prototype;p.prototype=Object.create(o);p.prototype.constructor=p;p.__superConstructor__=i;function p(q){"use strict";i.call(this,q);var r={'/pages/messaging/thread_tag/add/':{request_user_id:q,mode:l.BATCH_SUCCESSIVE,batch_function:this.$MercuryPageServerRequests0,handler:function(s,t){return this.__handleUpdate(s,t);}.bind(this)},'/pages/messaging/thread_tag/remove/':{request_user_id:q,mode:l.BATCH_SUCCESSIVE,batch_function:this.$MercuryPageServerRequests0,handler:function(s,t){return this.__handleUpdate(s,t);}.bind(this)},'/pages/messaging/thread_tag/list/':{request_user_id:q,mode:l.IMMEDIATE,handler:function(s,t){return this.__handleUpdate(s,t);}.bind(this)}};l.registerEndpoints(r);}p.prototype.$MercuryPageServerRequests0=function(q,r){"use strict";var s=q?q.tag_name:r.tag_name,t=q?q.thread_ids:[],u=r?r.thread_ids:[],v=t.concat(u),w={tag_name:s,thread_ids:v};return w;};p.prototype.addThreadFlag=function(q,r){"use strict";h.isThreadID(q);this.__threadIDMap.getFBIDFromClientID(q,function(s){var t={thread_ids:[s],tag_name:j.FLAG};this.__sendRequest('/pages/messaging/thread_tag/add/',t);}.bind(this));};p.prototype.fetchThreadlistInfo=function(q,r,s,t,u){"use strict";if(k.isPageSpecficFilter(t)){u=u||m;var v={folder:s,tag_name:t,offset:q,limit:r};this.__sendRequest('/pages/messaging/thread_tag/list/',v);return;}o.fetchThreadlistInfo.call(this,q,r,s,t,u);};p.prototype.removeThreadFlag=function(q,r){"use strict";h.isThreadID(q);this.__threadIDMap.getFBIDFromClientID(q,function(s){var t={thread_ids:[s],tag_name:j.FLAG};this.__sendRequest('/pages/messaging/thread_tag/remove/',t);}.bind(this));};p.prototype.toString=function(){"use strict";return 'MercuryPageServerRequests';};e.exports=p;},null);
__d("MercuryServerRequestSingletonMixin",["CurrentUser","FBID"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i={_getInstances:function(){if(!this._instances)this._instances={};return this._instances;},get:function(){return this.getForFBID(g.getID());},getForFBID:function(j){var k=this._getInstances();if(!k[j])if(h.isUser(j)){k[j]=new this(j);}else{var l;d(['MercuryPageServerRequests'],function(m){l=new m(j);});k[j]=l;}return k[j];}};e.exports=i;},null);
__d("MercuryMessageIDs",["KeyedCallbackManager"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h=new g(),i={getServerIDs:function(j,k){var l=j.filter(function(n){return n.indexOf('id')===-1;}),m=function(n){var o=j.map(function(p){return n[p]?n[p]:p;});k(o);};return h.executeOrEnqueue(l,m);},addServerID:function(j,k){h.setResource(j,k);}};e.exports=i;},null);
__d("MercuryServerSendMessageQueueOptions",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(h,i,j,k,l,m){"use strict";this.success_handler=h;this.error_handler=i;this.transport_error_handler=j;this.timeout_handler=k;this.timeout=l;this.connection_retries=m;}e.exports=g;},null);
__d("LoadingDialogDimensions",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={HEIGHT:96,WIDTH:300};e.exports=g;},null);
__d("AsyncDialog",["AsyncRequest","CSS","DialogX","DOM","Keys","LayerFadeOnShow","LoadingDialogDimensions","Parent","React","URI","XUISpinner.react","XUIDialogTitle.react","cx","emptyFunction","forEachObject"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){b.__markCompiled&&b.__markCompiled();var v,w;function x(fa){var ga=m.WIDTH,ha;if(fa){ga=parseInt(fa.getAttribute('data-dialog-width'),10)||ga;ha=fa.getAttribute('data-dialog-title')||ha;}if(!v){var ia=j.create('div',{className:"_57-x"});v=new i({width:ga,addedBehaviors:[l],xui:true},j.create('div',null,ia));w=j.create('div');j.insertBefore(ia,w);o.render(o.createElement(q,{size:"large"}),ia);v.subscribe(['key','blur'],function(ja,ka){if(ja=='blur'||(ja=='key'&&ka.keyCode==k.ESC)){ba();return false;}});}if(ha){o.render(o.createElement(r,{showCloseButton:false},ha),w);}else j.empty(w);v.setWidth(ga);return v;}var y={},z=1,aa=[];function ba(){u(y,function(fa,ga){fa.abandon();ca(ga);});}function ca(fa){delete y[fa];if(!Object.keys(y).length)x().hide();}function da(fa,ga){var ha=z++;aa[ha]=ga;y[ha]=fa;var ia=ca.bind(null,''+ha);Object.assign(fa.getData(),{__asyncDialog:ha});var ja=fa.getRelativeTo();x(ja).setCausalElement(ja).show();var ka=fa.finallyHandler;fa.setFinallyHandler(function(na){var oa=na.getPayload();if(oa&&oa.asyncURL)ea.send(new g(oa.asyncURL));ia();ka&&ka(na);});var la=fa.abortHandler||t,ma=fa.interceptHandler||t;fa.setInterceptHandler(function(){try{ma();}finally{ia();}}).setAbortHandler(function(){try{la();}finally{ia();}});fa.send();}var ea={send:function(fa,ga){da(fa,ga||t);},bootstrap:function(fa,ga,ha){if(!fa)return;var ia=n.byClass(ga,'stat_elem')||ga;if(ia&&h.hasClass(ia,'async_saving'))return false;var ja=new p(fa).getQueryData(),ka=ha==='dialog',la=new g().setURI(fa).setData(ja).setMethod(ka?'GET':'POST').setReadOnly(ka).setRelativeTo(ga).setStatusElement(ia).setNectarModuleDataSafe(ga);ea.send(la);},respond:function(fa,ga){var ha=aa[fa];if(ha){ha(ga);delete aa[fa];}},getLoadingDialog:function(){return x();}};e.exports=ea;},null);
__d("XNotificationsSettingsDialogController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/notifications\/settings\/dialog\/",{thread_key_id:{type:"String",required:true},__asyncDialog:{type:"Int"}});},null);
__d("XModifyNotificationSettingsController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/notifications\/settings\/modify\/",{thread_key_id:{type:"String",required:true},quiet_hours_start:{type:"Int",required:true},quiet_hours_end:{type:"Int",required:true}});},null);
__d("MercuryServerRequests",["Arbiter","AsyncResponse","ChannelConstants","CurrentUser","LogHistory","MercuryActionStatus","MercuryActionType","MercuryAPIArgsSource","MercuryAssert","MercuryDispatcher","MercuryThreadIDMap","MercuryErrorType","MercuryGlobalActionType","MercuryIDs","MercuryLogMessageType","MercuryMessageClientState","MercuryPayloadSource","MercurySendErrorLogger","MercuryServerPayloadPreprocessor","MercuryServerRequestsConfig","MercuryServerSendMessageQueueRouter","MercuryServerRequestSingletonMixin","MercurySourceType","MercuryThreadlistConstants","MercuryMessageIDs","MessagingConfig","MessagingTag","MercuryServerDispatcher","MercuryServerSendMessageQueueOptions","AsyncDialog","AsyncRequest","DOM","XNotificationsSettingsDialogController","XModifyNotificationSettingsController","createObjectFrom","errorCode","setTimeoutAcrossTransitions"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa){b.__markCompiled&&b.__markCompiled();'use strict';var ra=k.getInstance('mercury_server'),sa=n.MERCURY;function ta(fb){return fb.thread_fbid||fb.thread_id||fb.client_thread_id;}function ua(fb){return fb.getError()?'_'+fb.getError():'';}function va(fb,gb){var hb=Object.assign({},fb),ib;if(gb.threads){if(!hb.threads)hb.threads={};for(ib in gb.threads)hb.threads[ib]=Object.keys(oa((hb.threads[ib]||[]).concat(gb.threads[ib])));}if(gb.messages){if(!hb.messages)hb.messages={};for(ib in gb.messages){if(!hb.messages[ib])hb.messages[ib]={};for(var jb in gb.messages[ib])if(hb.messages[ib][jb]){hb.messages[ib][jb]=ab(hb.messages[ib][jb],gb.messages[ib][jb]);}else hb.messages[ib][jb]=gb.messages[ib][jb];}}hb.client=fb.client||gb.client;return hb;}function wa(fb,gb){var hb=Object.assign(oa(fb.folders,true),oa(gb.folders,true)),ib=fb.client||gb.client;return {folders:Object.keys(hb),client:ib};}function xa(fb,gb){for(var hb in gb)if(fb[hb]&&typeof fb[hb]==='object'){fb[hb]=ab(fb[hb],gb[hb]);}else if(gb[hb]&&typeof gb[hb]==='object'){var ib={};Object.assign(ib,gb[hb]);fb[hb]=ib;}return fb;}function ya(fb,gb){var hb=Object.assign({},fb.ids,gb.ids),ib=fb.client||gb.client;return {ids:hb,client:ib};}function za(fb,gb){return gb;}function ab(fb,gb){var hb=fb.offset<gb.offset?fb.offset:gb.offset,ib=fb.offset+fb.limit,jb=gb.offset+gb.limit,kb=(ib>jb)?ib:jb,lb=kb-hb,mb=fb.timestamp>gb.timestamp?fb.timestamp:gb.timestamp;return {offset:hb,limit:lb,timestamp:mb};}function bb(fb,gb){var hb=fb.client||gb.client,ib={ids:{},client:hb};Object.assign(ib.ids,fb.ids,gb.ids);return ib;}function cb(fb,gb){var hb={},ib,jb=fb.client||gb.client;delete fb.client;delete gb.client;for(ib in fb)Object.assign(hb,oa(fb[ib],ib));for(ib in gb)Object.assign(hb,oa(gb[ib],ib));var kb={client:jb};for(var lb in hb){ib=hb[lb];if(!kb[ib])kb[ib]=[];kb[ib].push(lb);}return kb;}function db(fb,gb){var hb=fb.client||gb.client,ib=oa(fb.ids,true),jb=oa(gb.ids,true),kb=Object.assign(ib,jb);return {ids:Object.keys(kb),client:hb};}function eb(fb){this._fbid=fb;this._lastActionTimestamp=0;this._fetchingThreads={};this._sentMessagesTimestamp={};this.__threadIDMap=q.getForFBID(this._fbid);this._dispatcher=p.getForFBID(this._fbid);this._payloadPreprocessor=y.getForFBID(this._fbid);this._sendMessageQueueOptions=new ia(function(gb,hb){return this.__handleUpdate(gb,hb);}.bind(this),function(gb){return this._handleSendMessageError(gb);}.bind(this),function(gb){return this._handleSendMessageTransportError(gb);}.bind(this),function(gb){return this._handleSendMessageTimeout(gb);}.bind(this),z.sendMessageTimeout,fa.SEND_CONNECTION_RETRIES);this._registerEndpoints();}Object.assign(eb.prototype,{fetchThreadlistInfo:function(fb,gb,hb,ib,jb){hb=hb||ga.INBOX;jb=jb||sa;var kb=ib?ha.IMMEDIATE:null,lb={client:jb};lb[hb]={offset:fb,limit:gb,filter:ib};this.__sendRequest('/ajax/mercury/threadlist_info.php',lb,kb);},fetchPinnedThreads:function(){this.__sendRequest('/mercury/pinned_threads/',{});},fetchUnseenThreadIDs:function(fb,gb){gb=gb||sa;this.fetchThreadlistInfo(da.RECENT_THREAD_OFFSET,da.JEWEL_THREAD_COUNT,fb,null,gb);},fetchUnreadThreadIDs:function(fb,gb){gb=gb||sa;this.__sendRequest('/ajax/mercury/unread_threads.php',{folders:[fb],client:gb});},fetchMissedMessages:function(fb,gb){gb=gb||sa;var hb={last_action_timestamp:this._lastActionTimestamp,folders:fb,client:gb};hb.last_action_timestamp=this._lastActionTimestamp;this.__sendRequest('/ajax/mercury/thread_sync.php',hb);},fetchThreadData:function(fb,gb){gb=gb||sa;o.allThreadID(fb);var hb={threads:{},client:gb},ib=[],jb=[];fb.forEach(function(lb){if(this._fetchingThreads[lb])return;this._fetchingThreads[lb]=true;var mb=this.__threadIDMap.getFBIDFromClientIDNow(lb),nb=t.tokenize(lb);if(nb.type=='user'){ib.push(nb.value);hb.threads.user_ids=ib;}else if(nb.type=='thread'){if(mb){jb.push(mb);}else jb.push(nb.value);hb.threads.thread_fbids=jb;}else if(nb.type=='root'){if(mb){jb.push(mb);hb.threads.thread_fbids=jb;}}else if(nb.type!='pending')throw new Error('Unknown thread type',nb);}.bind(this));this._dispatcher.inform("fetch-thread-data",hb);for(var kb in hb.threads){this.__sendRequest('/ajax/mercury/thread_info.php',hb);break;}},ensureThreadIsFetched:function(fb,gb){gb=gb||sa;if(!this.__threadIDMap.getClientIDFromFBIDNow(fb)&&!this._fetchingThreads[fb]){this._fetchingThreads[fb]=true;this.__sendRequest('/ajax/mercury/thread_info.php',{threads:{thread_fbids:[fb]},client:gb});}},fetchThreadMessages:function(fb,gb,hb,ib,jb,kb){o.isThreadID(fb);kb=kb||sa;var lb,mb,nb=t.tokenize(fb),ob=this.__threadIDMap.getFBIDFromClientIDNow(fb),pb=false;if(ob){lb=ob;mb=(nb.type=='user')?'user_ids':'thread_fbids';}else{lb=nb.value;switch(nb.type){case 'user':mb='user_ids';pb=true;break;case 'thread':mb='thread_fbids';break;}}var qb={messages:{},threads:{},client:kb};if(mb){qb.messages[mb]={};qb.messages[mb][lb]={offset:gb,timestamp:ib,limit:hb};if(pb)qb.threads[mb]=[lb];this.__sendRequest('/ajax/mercury/thread_info.php',qb,jb);}else this.__threadIDMap.getFBIDFromClientID(fb,function(rb){qb.messages.thread_fbids={};qb.messages.thread_fbids[rb]={offset:gb,timestamp:ib,limit:hb};this.__sendRequest('/ajax/mercury/thread_info.php',qb,jb);}.bind(this));},handleThreadInfoError:function(fb){var gb=fb.getRequest().getData(),hb=[];if(gb.messages){for(var ib in gb.messages.thread_fbids)hb.push(this._createServerErrorLogMessage(this.__threadIDMap.getClientIDFromFBIDNow(ib)));for(var jb in gb.messages.user_ids)hb.push(this._createServerErrorLogMessage('user:'+jb));for(var kb in gb.messages.group_ids)hb.push(this._createServerErrorLogMessage('group:'+kb));}if(hb.length)this._dispatcher.handleUpdate({actions:hb,from_client:true,payload_source:w.CLIENT_CHANNEL_MESSAGE});if(gb.threads&&(gb.threads.user_ids||gb.threads.group_ids||gb.threads.thread_ids)){var lb=5,mb=true;if(!gb.retry_count){gb.retry_count=0;if(gb.messages)delete gb.messages;}else if(gb.retry_count>=lb){mb=false;(gb.threads.thread_ids||[]).forEach(function(ob){if(ob in this._fetchingThreads)delete this._fetchingThreads[ob];}.bind(this));}if(mb){var nb=Math.pow(2,gb.retry_count)*1000;qa(function(){ra.log('retry_thread',gb);this.__sendRequest('/ajax/mercury/thread_info.php',gb);}.bind(this),nb);gb.retry_count++;}}},markFolderAsRead:function(fb){this.__sendRequest('/ajax/mercury/mark_folder_as_read.php',{folder:fb});var gb=[{action_type:s.MARK_ALL_READ,action_id:null,folder:fb}];this._dispatcher.handleUpdate({global_actions:gb,from_client:true,payload_source:w.CLIENT_CHANGE_READ_STATUS});},changeThreadReadStatus:function(fb,gb,hb,ib){o.isThreadID(fb);this.__threadIDMap.getFBIDFromClientID(fb,function(jb){var kb,lb={ids:(kb={},kb[jb]=gb,kb),source:hb,watermarkTimestamp:ib};this.__sendRequest('/ajax/mercury/change_read_status.php',lb);}.bind(this));},changeThreadArchivedStatus:function(fb,gb,hb){o.isThreadID(fb);this.__threadIDMap.getFBIDFromClientID(fb,function(ib){var jb={ids:{},source:hb};jb.ids[ib]=gb;this.__sendRequest('/ajax/mercury/change_archived_status.php',jb);}.bind(this));},changeThreadFolder:function(fb,gb){o.isThreadID(fb);this.__threadIDMap.getFBIDFromClientID(fb,function(hb){var ib={};ib[gb]=[hb];this.__sendRequest('/ajax/mercury/move_thread.php',ib);}.bind(this));},openNotificationSettings:function(fb){o.isThreadID(fb);this.__threadIDMap.getFBIDFromClientID(fb,function(gb){var hb=ma.getURIBuilder().setString('thread_key_id',gb).getURI();ja.send(new ka(hb),function(ib){ib.subscribe('confirm',function(){this.hide();var jb=la.find(this.getRoot(),'input[name="quiet_start"]').value,kb=la.find(this.getRoot(),'input[name="quiet_end"]').value,lb=na.getURIBuilder().setString('thread_key_id',gb).setInt('quiet_hours_start',jb).setInt('quiet_hours_end',kb).getURI();(new ka()).setURI(lb).setMethod('POST').send();}.bind(ib));});});},changeMutingOnThread:function(fb,gb){o.isThreadID(fb);this.__threadIDMap.getFBIDFromClientID(fb,function(hb){this.__sendRequest('/ajax/mercury/change_mute_thread.php',{thread_fbid:hb,mute_settings:gb,payload_source:sa});}.bind(this));},markThreadSpam:function(fb,gb){o.isThreadID(fb);this.__threadIDMap.getFBIDFromClientID(fb,function(hb){this.__sendRequest('/ajax/mercury/mark_spam.php',{id:hb,source:gb});}.bind(this));},unmarkThreadSpam:function(fb,gb){o.isThreadID(fb);this.__threadIDMap.getFBIDFromClientID(fb,function(hb){this.__sendRequest('/ajax/mercury/unmark_spam.php',{id:hb,source:gb});}.bind(this));},deleteThread:function(fb,gb){o.isThreadID(fb);this.__threadIDMap.getFBIDFromClientID(fb,function(hb){var ib={ids:[hb],source:gb};this.__sendRequest('/ajax/mercury/delete_thread.php',ib);}.bind(this));},unpinThread:function(fb){o.isThreadID(fb);this.__threadIDMap.getFBIDFromClientID(fb,function(gb){this.__sendRequest('/mercury/unpin_thread/',{id:gb});}.bind(this));},deleteMessages:function(fb,gb){ea.getServerIDs(gb||[],function(hb){this.__sendRequest('/ajax/mercury/delete_messages.php',{message_ids:hb});}.bind(this));},sendDeliveryReceipts:function(fb){ea.getServerIDs(fb||[],function(gb){this.__sendRequest('/ajax/mercury/delivery_receipts.php',{message_ids:gb});}.bind(this));},sendNewMessage:function(fb,gb){gb=gb||sa;if(!fb.client_state||fb.client_state==v.SEND_TO_SERVER){var hb=t.tokenize(fb.thread_id),ib=hb.type,jb=Object.assign({},fb);if((ib=='root'&&hb.value==jb.threading_id)||(ib=='user')){jb.client_thread_id=jb.thread_id;jb.thread_id=null;this._sendNewMessageToServer(jb,gb);}else this.__threadIDMap.getFBIDFromClientID(jb.thread_id,function(kb){hb=t.tokenize(jb.thread_id);if(hb.type=='user'){jb.other_user_fbid=hb.values;}else jb.thread_fbid=kb;jb.thread_id=null;this._sendNewMessageToServer(jb);}.bind(this));}},_sendNewMessageToServer:function(fb,gb){g.inform(i.ATTEMPT_RECONNECT);gb=gb||sa;this._sentMessagesTimestamp[fb.message_id]=Date.now();aa.getForFBID(this._fbid).enqueue(ta(fb),this._sendMessageQueueOptions,gb,fb);},markSeen:function(){var fb=this._lastActionTimestamp;this.__sendRequest('/ajax/mercury/mark_seen.php',{seen_timestamp:fb});},_handleSendMessageErrorCommon:function(fb,gb,hb,ib){ra.debug('handle_send_message_error_common',{reliability_error_status:hb,request_error_status:gb});var jb=fb.getData(),kb=jb.message_batch,lb=kb.map(function(nb){var ob={action_type:m.SEND_MESSAGE,thread_fbid:nb.thread_fbid,client_message_id:nb.message_id,message_id:nb.message_id,client_thread_id:nb.client_thread_id,status:gb,error_data:ib};return ob;});lb.forEach(function(nb){if(nb.action_type===m.SEND_MESSAGE&&nb.status===l.ERROR)x.log(nb);},this);var mb={actions:lb,payload_source:w.CLIENT_HANDLE_ERROR};this._payloadPreprocessor.handleUpdate(mb);},handleSendMessageError:function(fb){var gb=fb.getPayload(),hb=null,ib=null;if(gb&&gb.error_payload){hb=l.UNCONFIRMED;ib='send_error';}else{hb=l.ERROR;ib='request_error'+ua(fb);}var jb=fb.error;if(jb===1404102)h.verboseErrorHandler(fb);var kb=/<.*>/.test(fb.getErrorDescription())?fb.getErrorSummary():fb.getErrorDescription();this._handleSendMessageErrorCommon(fb.getRequest(),hb,ib,{type:r.SERVER,code:fb.getError(),description:kb,is_transient:fb.isTransient()});},handleSendMessageTransportError:function(fb){this._handleSendMessageErrorCommon(fb.getRequest(),l.ERROR,'transport_error'+ua(fb),{type:r.TRANSPORT,code:fb.getError(),is_transient:true});},handleSendMessageTimeout:function(fb){this._handleSendMessageErrorCommon(fb,l.ERROR,'transport_timeout',{type:r.TIMEOUT,is_transient:true});},getLastActionTimestamp:function(){return this._lastActionTimestamp;},updateLastActionTimestamp:function(fb){if(fb)this._lastActionTimestamp=Math.max(this._lastActionTimestamp,fb);},markThreadFetched:function(fb){delete this._fetchingThreads[fb];},_createServerErrorLogMessage:function(fb){return {action_type:m.LOG_MESSAGE,thread_id:fb,message_id:fb,timestamp:Date.now(),timestamp_absolute:'',timestamp_relative:'',is_unread:false,source:ca.UNKNOWN,log_message_type:u.SERVER_ERROR,log_message_data:{}};},_getForAsyncRequest:function(fb){var gb=fb.getData(),hb=gb.request_user_id?gb.request_user_id:j.getID();return eb.getForFBID(hb);},__handleUpdate:function(fb,gb){this._getForAsyncRequest(gb)._payloadPreprocessor.handleUpdate(fb);},_handleThreadInfoError:function(fb){var gb=this._getForAsyncRequest(fb.getRequest());gb.handleThreadInfoError(fb);},_handleSendMessageError:function(fb){var gb=this._getForAsyncRequest(fb.getRequest());gb.handleSendMessageError(fb);},_handleSendMessageTransportError:function(fb){var gb=this._getForAsyncRequest(fb.getRequest());gb.handleSendMessageTransportError(fb);},_handleSendMessageTimeout:function(fb){var gb=this._getForAsyncRequest(fb);gb.handleSendMessageTimeout(fb);},_registerEndpoints:function(){var fb=null;if(z.msgrRegion)fb={name:'X-MSGR-Region',value:z.msgrRegion};var gb={'/ajax/mercury/thread_sync.php':{request_user_id:this._fbid,mode:ha.IDEMPOTENT,customHeader:fb,handler:function(hb,ib){return this.__handleUpdate(hb,ib);}.bind(this)},'/ajax/mercury/thread_info.php':{request_user_id:this._fbid,mode:ha.BATCH_DEFERRED_MULTI,customHeader:fb,batch_function:va,handler:function(hb,ib){return this.__handleUpdate(hb,ib);}.bind(this),error_handler:function(hb){return this._handleThreadInfoError(hb);}.bind(this)},'/ajax/mercury/mark_folder_as_read.php':{request_user_id:this._fbid,mode:ha.IMMEDIATE,customHeader:fb,handler:function(hb,ib){return this.__handleUpdate(hb,ib);}.bind(this)},'/ajax/mercury/change_read_status.php':{request_user_id:this._fbid,mode:ha.BATCH_SUCCESSIVE,customHeader:fb,batch_function:ya,handler:function(hb,ib){return this.__handleUpdate(hb,ib);}.bind(this)},'/ajax/mercury/mark_seen.php':{request_user_id:this._fbid,mode:ha.BATCH_SUCCESSIVE,customHeader:fb,batch_function:za,handler:function(hb,ib){return this.__handleUpdate(hb,ib);}.bind(this)},'/ajax/mercury/threadlist_info.php':{request_user_id:this._fbid,mode:ha.BATCH_SUCCESSIVE_UNIQUE,customHeader:fb,batch_function:xa,handler:function(hb,ib){return this.__handleUpdate(hb,ib);}.bind(this)},'/ajax/mercury/mark_spam.php':{request_user_id:this._fbid,mode:ha.IMMEDIATE,customHeader:fb,handler:function(hb,ib){return this.__handleUpdate(hb,ib);}.bind(this)},'/ajax/mercury/unmark_spam.php':{request_user_id:this._fbid,mode:ha.IMMEDIATE,customHeader:fb,handler:function(hb,ib){return this.__handleUpdate(hb,ib);}.bind(this)},'/ajax/mercury/unread_threads.php':{request_user_id:this._fbid,mode:ha.BATCH_SUCCESSIVE_UNIQUE,customHeader:fb,batch_function:wa,handler:function(hb,ib){return this.__handleUpdate(hb,ib);}.bind(this)},'/ajax/chat/settings.php':{request_user_id:this._fbid,mode:ha.IMMEDIATE,customHeader:fb},'/ajax/mercury/change_archived_status.php':{request_user_id:this._fbid,mode:ha.BATCH_SUCCESSIVE,customHeader:fb,batch_function:bb,handler:function(hb,ib){return this.__handleUpdate(hb,ib);}.bind(this)},'/ajax/mercury/delete_thread.php':{request_user_id:this._fbid,mode:ha.BATCH_SUCCESSIVE,customHeader:fb,batch_function:db,handler:function(hb,ib){return this.__handleUpdate(hb,ib);}.bind(this)},'/ajax/mercury/delete_messages.php':{request_user_id:this._fbid,mode:ha.IMMEDIATE,customHeader:fb,handler:function(hb,ib){return this.__handleUpdate(hb,ib);}.bind(this)},'/ajax/mercury/delivery_receipts.php':{request_user_id:this._fbid,mode:ha.IMMEDIATE,customHeader:fb,handler:function(hb,ib){return this.__handleUpdate(hb,ib);}.bind(this)},'/ajax/mercury/move_thread.php':{request_user_id:this._fbid,mode:ha.BATCH_SUCCESSIVE,customHeader:fb,batch_function:cb,handler:function(hb,ib){return this.__handleUpdate(hb,ib);}.bind(this)},'/ajax/mercury/change_mute_thread.php':{request_user_id:this._fbid,mode:ha.IMMEDIATE,customHeader:fb,handler:function(hb,ib){return this.__handleUpdate(hb,ib);}.bind(this)},'/mercury/pinned_threads/':{request_user_id:this._fbid,mode:ha.BATCH_SUCCESSIVE_UNIQUE,customHeader:fb,handler:function(hb,ib){return this.__handleUpdate(hb,ib);}.bind(this)},'/mercury/unpin_thread/':{request_user_id:this._fbid,mode:ha.IMMEDIATE,customHeader:fb,handler:function(hb,ib){return this.__handleUpdate(hb,ib);}.bind(this)}};ha.registerEndpoints(gb);},__sendRequest:function(fb,gb,hb){ha.trySend(fb,gb,hb,this._fbid);}});Object.assign(eb,ba);e.exports=eb;},null);
__d("MercuryThreadIDMap",["KeyedCallbackManager","MercuryAssert","MercuryIDs","MercurySingletonMixin"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';function k(l){this.$MercuryThreadIDMap0=l;this.$MercuryThreadIDMap1=new g();this.$MercuryThreadIDMap2=new g();this.$MercuryThreadIDMap3=new g();}k.prototype.setServerToClientID=function(l,m){this.$MercuryThreadIDMap1.setResource(l,m);};k.prototype.getClientIDFromServerIDNow=function(l){return this.$MercuryThreadIDMap1.getResource(l);};k.prototype.setFBIDToClientID=function(l,m){this.$MercuryThreadIDMap2.setResource(l,m);this.$MercuryThreadIDMap3.setResource(m,l);};k.prototype.getClientIDFromFBIDNow=function(l){return this.$MercuryThreadIDMap2.getResource(l);};k.prototype.getClientIDFromFBID=function(l,m){this.$MercuryThreadIDMap2.executeOrEnqueue(l,m);d(['MercuryServerRequests'],function(n){n.getForFBID(this.$MercuryThreadIDMap0).ensureThreadIsFetched(l);}.bind(this));};k.prototype.setClientIDToFBID=function(l,m){this.$MercuryThreadIDMap3.setResource(l,m);this.$MercuryThreadIDMap2.setResource(m,l);};k.prototype.getFBIDFromClientIDNow=function(l){return this.$MercuryThreadIDMap3.getResource(l);};k.prototype.getFBIDFromClientID=function(l,m){h.isThreadID(l);var n=this.$MercuryThreadIDMap3.executeOrEnqueue(l,m);d(['MercuryServerRequests'],function(o){var p=this.$MercuryThreadIDMap3.getUnavailableResources(n),q=i.tokenize(l);if(p.length&&q.type!='root')o.getForFBID(this.$MercuryThreadIDMap0).fetchThreadData(p);}.bind(this));};k.prototype.hasClientIDForFBID=function(l){return !!this.getClientIDFromFBIDNow(l);};k.prototype.convertThreadIDIfAvailable=function(l){var m=this.getClientIDFromFBIDNow(l);if(m===(void 0)){return l;}else return m;};k.prototype.canLinkExternally=function(l){h.isThreadID(l);var m=i.tokenize(l);return (m.type=='user')||!!this.getFBIDFromClientIDNow(l);};Object.assign(k,j);e.exports=k;},null);
__d("MercuryThreadInformer",["ArbiterMixin","LogHistory","MercuryAssert","MercuryLoggingHelper","MercurySingletonMixin","mapObject","mixin"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();'use strict';var n=h.getInstance('mercury_informer'),o=m(g);for(var p in o)if(o.hasOwnProperty(p))r[p]=o[p];var q=o===null?null:o.prototype;r.prototype=Object.create(q);r.prototype.constructor=r;r.__superConstructor__=o;function r(t){o.call(this);this.$MercuryThreadInformer0=t;this.$MercuryThreadInformer1={};this.$MercuryThreadInformer2={};this.$MercuryThreadInformer3={};this.$MercuryThreadInformer4=false;this.$MercuryThreadInformer5=false;this.$MercuryThreadInformer6=false;this.$MercuryThreadInformer7={};this.$MercuryThreadInformer8={};this.$MercuryThreadInformer9={};this.$MercuryThreadInformera=0;}r.prototype.updatedThread=function(t){this.$MercuryThreadInformer2[t]=true;this.$MercuryThreadInformerb();};r.prototype.deletedThread=function(t){this.$MercuryThreadInformer1[t]=true;this.$MercuryThreadInformerb();};r.prototype.updatedThreadlist=function(){this.$MercuryThreadInformer4=true;this.$MercuryThreadInformerb();};r.prototype.updatedUnseenState=function(){this.$MercuryThreadInformer5=true;this.$MercuryThreadInformerb();};r.prototype.updatedUnreadState=function(){this.$MercuryThreadInformer6=true;this.$MercuryThreadInformerb();};r.prototype.changedThreadReadState=function(t,u,v){if(!this.$MercuryThreadInformer3[t]||this.$MercuryThreadInformer3[t].timestamp<v)this.$MercuryThreadInformer3[t]={mark_as_read:u,timestamp:v};this.$MercuryThreadInformerb();};r.prototype.receivedMessage=function(t){i.isThreadID(t.thread_id);var u=t.thread_id;if(!this.$MercuryThreadInformer7[u])this.$MercuryThreadInformer7[u]=[];this.$MercuryThreadInformer7[u].push(t);this.updatedThread(u);};r.prototype.reorderedMessages=function(t,u){this.$MercuryThreadInformer8[t]={source:u};this.$MercuryThreadInformerb();};r.prototype.updatedMessage=function(t,u,v){if(!this.$MercuryThreadInformer9[t])this.$MercuryThreadInformer9[t]={};this.$MercuryThreadInformer9[t][u]={source:v};this.updatedThread(t);};r.prototype.synchronizeInforms=function(t){this.$MercuryThreadInformera++;try{t();}catch(u){throw u;}finally{this.$MercuryThreadInformera--;this.$MercuryThreadInformerb();}};r.prototype.listen=function(t,u){return this.subscribe('threads-updated',function(v,w){if(w[t])u(t);});};r.prototype.$MercuryThreadInformerb=function(){if(!this.$MercuryThreadInformera){var t=this.$MercuryThreadInformer1,u=this.$MercuryThreadInformer2,v=this.$MercuryThreadInformer3,w=this.$MercuryThreadInformer4,x=this.$MercuryThreadInformer5,y=this.$MercuryThreadInformer6,z=this.$MercuryThreadInformer7,aa=this.$MercuryThreadInformer8,ba=this.$MercuryThreadInformer9;this.$MercuryThreadInformer1={};this.$MercuryThreadInformer2={};this.$MercuryThreadInformer3={};this.$MercuryThreadInformer4=false;this.$MercuryThreadInformer5=false;this.$MercuryThreadInformer6=false;this.$MercuryThreadInformer7={};this.$MercuryThreadInformer8={};this.$MercuryThreadInformer9={};var ca=Object.keys(u);if(ca.length||w)this.inform('threadlist-updated',ca);if(ca.length)this.$MercuryThreadInformerc('threads-updated',u);for(var da in v){this.$MercuryThreadInformerc('thread-read-changed',v);break;}for(da in t){this.$MercuryThreadInformerc('threads-deleted',t);break;}if(x)this.$MercuryThreadInformerc('unseen-updated',null);if(y)this.$MercuryThreadInformerc('unread-updated',null);for(da in z){this.$MercuryThreadInformerc('messages-received',z);break;}for(da in aa){this.$MercuryThreadInformerc('messages-reordered',aa);break;}for(da in ba){this.$MercuryThreadInformerc('messages-updated',ba);break;}}};r.prototype.$MercuryThreadInformerc=function(t,u){s(t,u);this.inform(t,u);};function s(t,u){var v=u;if(t=='messages-received')v=l(v,function(w){return w.map(function(x){return j.obfuscateMessage(x);});});n.debug(t,v);}Object.assign(r,k);e.exports=r;},null);
__d("MercuryDispatcher",["ArbiterMixin","LogHistory","MercuryLoggingHelper","MercuryPayloadSource","MercurySingletonMixin","MercuryThreadIDMap","MercuryThreadInformer","invariant","isEmpty","mixin"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){b.__markCompiled&&b.__markCompiled();'use strict';var q=h.getInstance('mercury_dispatcher'),r=p(g);for(var s in r)if(r.hasOwnProperty(s))u[s]=r[s];var t=r===null?null:r.prototype;u.prototype=Object.create(t);u.prototype.constructor=u;u.__superConstructor__=r;function u(v){r.call(this);this.$MercuryDispatcher0=v;this.$MercuryDispatcher1=l.getForFBID(this.$MercuryDispatcher0);}u.prototype.handleUpdate=function(v){this.$MercuryDispatcher2(v);n((!!v.from_client)!==(!!v.preprocessed));delete v.preprocessed;if(!o(v))m.getForFBID(this.$MercuryDispatcher0).synchronizeInforms(function(){if(!v.from_client)this.inform('payload-preprocessed',v);this.inform('update-thread-ids',v.newlyAddedClientIDs||{});this.inform('update-participants',v);this.inform('update-threads',v);this.inform('update-unread',v);this.inform('update-threadlist',v);this.inform('update-pinned-threads',v);this.inform('update-messages',v);this.inform('update-unseen',v);this.inform('update-typing-state',v);this.inform('update-delivery',v);this.inform('update-roger',v.roger);this.inform('model-update-completed',null);}.bind(this));};u.prototype.$MercuryDispatcher2=function(v){var w={actions:[],threads:[]};if(v){if(v.actions)w.actions=v.actions.map(function(z){return i.obfuscateMessage(z);});if(v.threads)w.threads=v.threads.map(function(z){return i.obfuscateThread(z);});}var x=Object.assign({},v,w),y=v.payload_source;if(y!==j.CLIENT_CHANGE_READ_STATUS&&y!==j.CLIENT_MARK_THREAD_SEEN)q.debug('update:'+y,{payload:x,from_client:v.from_client});};Object.assign(u,k);e.exports=u;},null);
__d("MercuryThreadInfo",["CurrentUser","MercuryIDs"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';var i={canReply:function(k){return !!(k.is_subscribed&&(k.can_reply===(void 0)||k.can_reply)&&!k.has_email_participant&&!k.read_only&&(k.recipients_loadable||k.recipients_loadable===(void 0)));},getMuteSetting:function(k){return (k.mute_settings&&k.mute_settings[j(g.getID())]);},isEmptyLocalThread:function(k){return (h.tokenize(k.thread_id).type==='root'&&!k.timestamp);},isMuted:function(k){return i.getMuteSetting(k)!==(void 0);},isMessageBlocked:function(k){if(!k.is_canonical||k.blocked_participants===(void 0))return false;if(k.blocked_participants.indexOf(k.canonical_fbid)===-1)return false;return true;},isNewEmptyLocalThread:function(k){return !!(i.isEmptyLocalThread(k)&&k.participants&&k.participants.length===0);},showComposer:function(k){return !!(k.is_subscribed&&(k.composer_enabled===(void 0)||k.composer_enabled)&&!k.has_email_participant&&!k.read_only&&(k.recipients_loadable||k.recipients_loadable===(void 0)));}};function j(k){return k+'@facebook.com';}e.exports=i;},null);
__d("MercuryDisplayTimeFilterMessageRenderer",["fbt"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';var h={renderFilteredContent:function(i){if(i.is_filtered_content_bh)return (g._("This message was removed because it contains blocked or harmful links."));if(i.is_filtered_content_account)return (g._("This message has been temporarily removed because the sender's account requires verification."));return (g._("This message has been temporarily removed because the sender's account requires verification, or it was identified as abusive."));}};e.exports=h;},null);
__d("Set",["Map","toIterator","_shouldPolyfillES6Collection"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();e.exports=(function(j,k){if(!i('Set'))return j.Set;function l(n){"use strict";if(this==null||(typeof this!=='object'&&typeof this!=='function'))throw new TypeError('Wrong set object type.');m(this);if(n!=null){var o=h(n),p;while(!(p=o.next()).done)this.add(p.value);}}l.prototype.add=function(n){"use strict";this._map.set(n,n);this.size=this._map.size;return this;};l.prototype.clear=function(){"use strict";m(this);};l.prototype["delete"]=function(n){"use strict";var o=this._map["delete"](n);this.size=this._map.size;return o;};l.prototype.entries=function(){"use strict";return this._map.entries();};l.prototype.forEach=function(n){"use strict";var o=arguments[1],p=this._map.keys(),q;while(!(q=p.next()).done)n.call(o,q.value,q.value,this);};l.prototype.has=function(n){"use strict";return this._map.has(n);};l.prototype.values=function(){"use strict";return this._map.values();};l.prototype[h.ITERATOR_SYMBOL]=l.prototype.values;l.prototype.keys=l.prototype.values;function m(n){n._map=new g();n.size=n._map.size;}return l;})(Function('return this')());},null);
__d("MercuryThreads",["EventEmitter","ImmutableObject","KeyedCallbackManager","LogHistory","Map","MercuryActionType","MercuryAssert","MercuryAttachment","MercuryDispatcher","MercuryGlobalActionType","MercuryIDs","MercuryLogMessageType","MercuryLoggingHelper","MercuryPayloadSource","MercurySingletonMixin","MercuryThreadInfo","MessagingTag","MercuryDisplayTimeFilterMessageRenderer","MercuryServerRequests","Set","MercuryThreadInformer","setImmediate"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba){b.__markCompiled&&b.__markCompiled();'use strict';var ca=new g(),da=j.getInstance('mercury_threads');function ea(fa){this.$MercuryThreads0=fa;this.$MercuryThreads1=y.getForFBID(this.$MercuryThreads0);this.$MercuryThreads2=aa.getForFBID(this.$MercuryThreads0);this.$MercuryThreads3=q.getParticipantIDFromUserID(this.$MercuryThreads0);this.$MercuryThreads4=o.getForFBID(this.$MercuryThreads0);this.$MercuryThreads5=false;this.$MercuryThreads6=new i();this.$MercuryThreads7=new z();this.$MercuryThreads8=false;this.$MercuryThreads9=new z();this.$MercuryThreadsa=new z();this.$MercuryThreadsb();}ea.prototype.getThreadMetaNow=function(fa){m.isThreadID(fa);return this.$MercuryThreads6.getResource(fa);};ea.prototype.getOrFetch=function(fa){var ga=this.getThreadMetaNow(fa);if(!ga&&!this.$MercuryThreadsa.has(fa))this.$MercuryThreads9.add(fa);if(this.$MercuryThreads9.size>0&&!this.$MercuryThreads8)this.$MercuryThreadsc();return ga;};ea.prototype.$MercuryThreadsc=function(){if(this.$MercuryThreads8)return;this.$MercuryThreads8=true;ba(function(){this.$MercuryThreads8=false;this.$MercuryThreads9.forEach(function(fa){return this.$MercuryThreadsa.add(fa);}.bind(this));this.getMultiThreadMeta(Array.from(this.$MercuryThreads9),function(fa){for(var ga in fa)fa.hasOwnProperty(ga)&&this.$MercuryThreadsa["delete"](ga);}.bind(this));this.$MercuryThreads9.clear();}.bind(this));};ea.prototype.getThreadMeta=function(fa,ga,ha){return this.getMultiThreadMeta([fa],function(ia){return ga(ia[fa]);},ha);};ea.prototype.getMultiThreadMeta=function(fa,ga,ha){m.allThreadID(fa);var ia=this.$MercuryThreads6.executeOrEnqueue(fa,ga),ja=this.$MercuryThreads6.getUnavailableResources(ia);if(ja.length){var ka=[];for(var la=0;la<ja.length;la++){var ma=ja[la],na=q.tokenize(ma),oa=na.type,pa=na.value;if(oa=='user'){var qa=q.getParticipantIDFromUserID(pa);this.createNewLocalThread(ma,qa===this.$MercuryThreads3?[this.$MercuryThreads3]:[this.$MercuryThreads3,qa]);}else ka.push(ma);}if(ka.length)this.$MercuryThreads1.fetchThreadData(ka,ha);}return ia;};ea.addListener=function(fa,ga){return ca.addListener(fa,ga);};ea.prototype.unsubscribe=function(fa){this.$MercuryThreads6.unsubscribe(fa);};ea.prototype.getCanonicalThreadToParticipant=function(fa,ga,ha,ia){var ja=q.getThreadIDFromParticipantID(fa),ka=this.$MercuryThreads6.getResource(ja);if(typeof ka=='undefined'){ka=this.createNewLocalThread(ja,this.$MercuryThreads3===fa?[this.$MercuryThreads3]:[this.$MercuryThreads3,fa],ga);!ia&&this.$MercuryThreads1.fetchThreadData([ja],ha);}return ka;};ea.prototype.createNewLocalThread=function(fa,ga,ha){var ia=this.$MercuryThreads6.getResource(fa);if(!ia){var ja=q.tokenize(fa),ka=ja.type,la=ja.value;ia=new h({thread_id:fa,last_action_id:null,participants:Array.from(ga),name:null,snippet:'',snippet_has_attachment:false,snippet_sender:null,unread_count:ha?ha:0,message_count:0,image_src:null,timestamp_absolute:null,timestamp_relative:null,timestamp:null,canonical_fbid:ka==='user'?la:null,is_canonical_user:ka=='user',is_canonical:this.$MercuryThreadsd(ga),is_subscribed:true,root_message_threading_id:null,folder:w.INBOX,is_archived:false});this.$MercuryThreads6.setResource(fa,ia);}return ia;};ea.prototype.isEmptyLocalThread=function(fa){var ga=this.$MercuryThreads6.getResource(fa);if(!ga)return false;return v.isEmptyLocalThread(ga);};ea.prototype.isNewEmptyLocalThread=function(fa){var ga=this.$MercuryThreads6.getResource(fa);if(!ga)return false;return v.isNewEmptyLocalThread(ga);};ea.prototype.$MercuryThreadse=function(fa,ga){if(!fa||!fa.length)return;var ha=new k(),ia=new k(),ja=new k(),ka=[];for(var la=0;la<fa.length;la++){var ma=fa[la];if(ma.is_forward)continue;var na=ma.action_type;if(na==l.LOG_MESSAGE&&ma.log_message_type==r.SERVER_ERROR)continue;var oa=!!(ma.sync_id||ma.action_id),pa=ma.thread_id;m.isThreadID(pa);var qa=this.$MercuryThreads6.getResource(pa);if(!qa&&!oa&&na==l.USER_GENERATED_MESSAGE){qa=this.$MercuryThreadsf(ma);this.$MercuryThreads6.setResource(pa,qa);}if(!qa)continue;if(na==l.LOG_MESSAGE||na==l.USER_GENERATED_MESSAGE)oa=!ga;if(qa.server_timestamp&&ma.timestamp<=qa.server_timestamp&&oa)continue;if(!ja.has(pa))ja.set(pa,Object.assign({},qa));this.$MercuryThreadsg(ja.get(pa),ma,ga);if(na==l.USER_GENERATED_MESSAGE)ha.set(pa,ma);if(na==l.USER_GENERATED_MESSAGE||na==l.LOG_MESSAGE||na==l.SEND_MESSAGE)if(ma&&ma.timestamp&&(!ia.has(pa)||ma.timestamp>ia.get(pa).timestamp))ia.set(pa,ma);}ja.forEach(function(ra,sa){var ta=ia.get(sa),ua=ha.get(sa);if(ua){this.$MercuryThreadsh(ra,ua);}else if(ta&&(ta.log_message_type==r.PHONE_CALL||ta.log_message_type==r.VIDEO_CALL)){var va=Object.assign({},ta,{body:ta.log_message_body});this.$MercuryThreadsh(ra,va);}var wa=ra.timestamp;if(ta){if(ta.timestamp>wa)Object.assign(ra,{timestamp_absolute:ta.timestamp_absolute,timestamp_relative:ta.timestamp_relative,timestamp:ta.timestamp});var xa=ra.server_timestamp;if(!ga&&ta.timestamp>xa)ra.server_timestamp=ta.timestamp;}var ya=new h(ra);this.$MercuryThreads6.setResource(sa,ya);ka.push(s.obfuscateThread(ya));}.bind(this),this);ka.length&&this.$MercuryThreads5&&da.debug('threads_updated',{threads:ka});};ea.prototype.$MercuryThreadsg=function(fa,ga,ha){var ia=ga.action_type;if(ia==l.USER_GENERATED_MESSAGE||ia==l.LOG_MESSAGE){ga.is_unread&&fa.unread_count++;fa.message_count++;fa.is_archived=false;}switch(ia){case l.DELETE_THREAD:fa.message_count=0;this.$MercuryThreadsi(ga.thread_id);break;case l.USER_GENERATED_MESSAGE:if(fa.last_read_timestamp>=ga.timestamp)this.$MercuryThreadsj(fa,ga,true);this.$MercuryThreadsk(fa,ga.author);break;case l.SEND_MESSAGE:var ja=ga.log_message_type;if(ja==r.THREAD_IMAGE){fa.image_src=ga.log_message_data.image?ga.log_message_data.image.preview_url:null;this.$MercuryThreadsl(ga.thread_id);}if(ja!==r.SUBSCRIBE&&ja!==r.UNSUBSCRIBE)fa.snippet_attachments=ga.attachments;break;case l.LOG_MESSAGE:var ja=ga.log_message_type;if(ja==r.SUBSCRIBE){this.$MercuryThreadsm(fa,ga.log_message_data.added_participants);this.$MercuryThreadsl(ga.thread_id);}else if(ja==r.UNSUBSCRIBE){this.$MercuryThreadsn(fa,ga.log_message_data.removed_participants);this.$MercuryThreadsl(ga.thread_id);}else if(ja==r.THREAD_IMAGE){if(!ha)fa.image_src=ga.log_message_data.image?ga.log_message_data.image.preview_url:null;}else if(ja==r.THREAD_NAME){if(fa.name!==ga.log_message_data.name)this.$MercuryThreadsl(ga.thread_id);fa.name=ga.log_message_data.name;}break;case l.CHANGE_READ_STATUS:var ka=this.$MercuryThreadsj(fa,ga,ga.mark_as_read);if(ka&&ga.timestamp)fa.last_read_timestamp=ga.timestamp;if(ka&&ha)this.$MercuryThreads1.changeThreadReadStatus(fa.thread_id,ga.mark_as_read,ga.source,fa.last_read_timestamp);break;case l.CHANGE_ARCHIVED_STATUS:if(fa.is_archived!=ga.archived){fa.is_archived=ga.archived;this.$MercuryThreadsl(ga.thread_id);}break;case l.CHANGE_FOLDER:if(fa.folder!=ga.new_folder){fa.folder=ga.new_folder;this.$MercuryThreadsl(ga.thread_id);}break;case l.DELETE_MESSAGES:if(ha){fa.snippet='...';fa.snippet_has_attachment=false;fa.snippet_attachments=null;fa.snippet_sender=null;this.$MercuryThreadsl(ga.thread_id);}else if(ga.message_ids)fa.message_count=fa.message_count-ga.message_ids.length;break;case l.UPDATE_BLOCKER_STATUS:if(ga.is_message_blocked){var la=Array.from(fa.blocked_participants);la.push(ga.thread_fbid);fa.blocked_participants=la;}else fa.blocked_participants=fa.blocked_participants.filter(function(oa){return (oa!=ga.thread_fbid);});fa.can_reply=!!(!ga.is_message_blocked&&fa.is_subscribed&&!fa.has_email_participant&&!fa.read_only&&(fa.recipients_loadable||fa.recipients_loadable===(void 0)));this.$MercuryThreadsl(ga.thread_id);break;case l.UPDATE_BLOCKEE_STATUS:fa.can_reply=!!(!ga.got_blocked&&fa.is_subscribed&&!fa.has_email_participant&&!fa.read_only&&(fa.recipients_loadable||fa.recipients_loadable===(void 0)));this.$MercuryThreadsl(ga.thread_id);break;case l.CHANGE_MUTE_SETTINGS:if(ga.mute_settings!==(void 0)){var ma=this.$MercuryThreads0+'@facebook.com';if(fa.mute_settings){if(ga.mute_settings){var na={};na[ma]=ga.mute_settings;fa.mute_settings=Object.assign({},fa.mute_settings,na);}else{fa.mute_settings=Object.assign({},fa.mute_settings);delete fa.mute_settings[ma];}this.$MercuryThreadsl(fa.thread_id);}}break;case l.ADD_PARTICIPANTS:this.$MercuryThreadsm(fa,ga.participants);this.$MercuryThreadsl(fa.thread_id);break;case l.CHANGE_FLAG:this.$MercuryThreadso(fa,ga.mark_as_flag);this.$MercuryThreadsl(fa.thread_id);break;case l.MOVE_PENDING_TO_INBOX:this.$MercuryThreadsp(fa);this.$MercuryThreadsl(fa.thread_id);break;}};ea.prototype.$MercuryThreadsf=function(fa){var ga=q.tokenize(fa.thread_id),ha=ga.type,ia=ga.value,ja=this.$MercuryThreadsd(fa.specific_to_list);return new h({thread_id:fa.thread_id,last_action_id:null,participants:fa.specific_to_list,name:null,snippet:fa.body,snippet_has_attachment:false,snippet_attachments:[],snippet_sender:fa.author,unread_count:0,message_count:0,image_src:null,timestamp_absolute:fa.timestamp_absolute,timestamp_relative:fa.timestamp_relative,timestamp:fa.timestamp,canonical_fbid:ha==='user'?ia:null,is_canonical_user:ha==='user',is_canonical:ja,is_subscribed:true,root_message_threading_id:fa.message_id,folder:w.INBOX,is_archived:false});};ea.prototype.$MercuryThreadsj=function(fa,ga,ha){if(ga.timestamp)this.$MercuryThreadsq(fa.thread_id,ha,ga.timestamp);if(!fa||!fa.thread_id)return false;if(!fa.timestamp){this.$MercuryThreads7.add(fa.thread_id);return false;}var ia=!fa.unread_count;if(ha==ia)return false;fa.unread_count=ha?0:1;this.$MercuryThreadsl(fa.thread_id);return true;};ea.prototype.$MercuryThreadsr=function(fa){var ga=this.$MercuryThreads6.getAllResources();for(var ha in ga)if(ga.hasOwnProperty(ha)){var ia=ga[ha];if(ia.folder==fa){this.$MercuryThreads6.setResource(ha,h.setProperty(ia,'unread_count',0));this.$MercuryThreadsl(ha);}}};ea.prototype.$MercuryThreadsm=function(fa,ga){var ha=new z(fa.participants);fa.participants=Array.from(fa.participants);ga.forEach(function(ia){if(!ha.has(ia)){fa.participants.push(ia);if(ia===this.$MercuryThreads3)fa.is_subscribed=true;}}.bind(this));};ea.prototype.$MercuryThreadsn=function(fa,ga){var ha=new z(ga);fa.participants=fa.participants.filter(function(ia){return !ha.has(ia);});if(ha.has(this.$MercuryThreads3))fa.is_subscribed=false;this.$MercuryThreads1.fetchThreadData([fa.thread_id]);};ea.prototype.$MercuryThreadsk=function(fa,ga){if(fa.participants[0]!=ga){fa.participants=fa.participants.filter(function(ha){return ha!=ga;});fa.participants.unshift(ga);}};ea.prototype.$MercuryThreadsh=function(fa,ga){var ha=ga.body,ia=ga.subject,ja='';if(ia){ia=ia.toLowerCase();if(ha.slice(0,ia.length).toLowerCase()==ia){ja=ha;}else if(ha){ja=ia+' \u00B7 '+ha;}else ja=ia;}else ja=ha;if(ga.is_filtered_content)ja=x.renderFilteredContent(ga);fa.snippet=ja;fa.snippet_has_attachment=ga.has_attachment;if(ga.raw_attachments&&ga.raw_attachments.length>0){var ka=n.convertRaw(ga.raw_attachments);fa.snippet_attachments=ka;}else fa.snippet_attachments=ga.attachments;fa.snippet_sender=ga.author;};ea.prototype.$MercuryThreadso=function(fa,ga){fa.page_thread_info=Object.assign({},fa.page_thread_info,{flagged:ga});};ea.prototype.$MercuryThreadsp=function(fa){if(fa.folder!==w.PENDING)return;fa.folder=w.INBOX;};ea.prototype.$MercuryThreadsd=function(fa){return fa.filter(function(ga){return ga!=this.$MercuryThreads3;}.bind(this)).length<=1;};ea.prototype.$MercuryThreadsb=function(){this.$MercuryThreads4.subscribe('update-threads',function(fa,ga){var ha=(ga.actions||[]).filter(function(ia){return ia.thread_id;});if(ga.threads&&ga.payload_source==t.SERVER_FETCH_THREAD_INFO)ga.threads.forEach(function(ia){var ja=ia.thread_id;if(this.$MercuryThreads7.has(ja)){this.$MercuryThreads7["delete"](ja);if(ia.unread_count)this.$MercuryThreads1.changeThreadReadStatus(ia.thread_id,true);}}.bind(this));this.$MercuryThreadss(ga.threads);this.$MercuryThreadse(ha,ga.from_client);ga.threads&&ga.threads.forEach(function(ia){this.$MercuryThreadsl(ia.thread_id);}.bind(this));if(ga.global_actions)ga.global_actions.forEach(function(ia){if(ia.action_type==p.MARK_ALL_READ)this.$MercuryThreadsr(ia.folder);}.bind(this));if(this.$MercuryThreads5){this.$MercuryThreads5=false;ca.emit('change');}}.bind(this));};ea.prototype.$MercuryThreadss=function(fa){if(!fa||!fa.length)return;var ga={},ha=[];fa.forEach(function(ia){var ja=new h(ia);ga[ia.thread_id]=ja;ha.push(s.obfuscateThread(ja));});ha.length&&da.debug('threads_added',{threads:ha});this.$MercuryThreads6.addResourcesAndExecute(ga);};ea.prototype.$MercuryThreadsl=function(fa){this.$MercuryThreads5=true;this.$MercuryThreads2.updatedThread(fa);};ea.prototype.$MercuryThreadsi=function(fa){this.$MercuryThreads5=true;this.$MercuryThreads2.deletedThread(fa);};ea.prototype.$MercuryThreadsq=function(fa,ga,ha){this.$MercuryThreads5=true;this.$MercuryThreads2.changedThreadReadState(fa,ga,ha);};Object.assign(ea,u);e.exports=ea;},null);
__d("WebMessengerPermalinkConstants",["MercuryConfig","URI"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i={ARCHIVED_PATH:'/messages/archived',BASE_PATH:'/messages',PENDING_PATH:'/messages/pending',OTHER_PATH:'/messages/other',SPAM_PATH:'/messages/spam',COMPOSE_POSTFIX_PATH:'/new',SEARCH_POSTFIX_PATH:'/search',TID_POSTFIX_PARTIAL_PATH:'/conversation-',overriddenVanities:g.CoreGraphEnabled?'(archived|other|pending|spam|new|search|conversation-.*)':'(archived|other|spam|new|search|conversation-.*)',getURIPathForThreadID:function(j,k){return (k||i.BASE_PATH)+i.TID_POSTFIX_PARTIAL_PATH+h.encodeComponent(h.encodeComponent(j));},getThreadIDFromURI:function(j){var k=j.getPath().match(i.BASE_PATH+'(/[^/]*)*'+i.TID_POSTFIX_PARTIAL_PATH+'([^/]+)');if(k){var l=h.decodeComponent(h.decodeComponent(k[2]));return l;}},getURIPathForIDOrVanity:function(j,k){if(j.match('^'+i.overriddenVanities+'$'))j='.'+j;return (k||i.BASE_PATH)+'/'+j;},getUserIDOrVanity:function(j){var k=j.match(i.BASE_PATH+'.*/([^/]+)/?$'),l=k&&k[1],m=i.overriddenVanities;if(!l||l.match('^'+m+'$')){return false;}else if(l.match('^\\.'+m+'$')){return l.substr(1);}else return l;}};e.exports=i;},null);
__d("ChatTypeaheadConstants",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={USER_TYPE:'user',THREAD_TYPE:'thread',FRIEND_TYPE:'friend',NON_FRIEND_TYPE:'non_friend',FB4C_TYPE:'fb4c',PAGE_TYPE:'page',HEADER_TYPE:'header'};e.exports=g;},null);
__d("ChatOpenTab",["BusinessURI.brands","Event","requireWeak","ChatWelcomeMessage","ContextualThing","DOM","csx","cx","MercuryIDs","Parent","curry"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){b.__markCompiled&&b.__markCompiled();var r=null;i('ChatApp',function(ba){return r=ba;});var s=null;i('ChatTabModel',function(ba){return s=ba;});var t=716,u='messaging_tracking';function v(){d(['Toggler'],function(ba){var ca=ba.getInstance(l.scry(document,"div._1z4y")[0]);if(ca&&ca.getActive())ca.hide();});}function w(ba,ca,da){d(['LogHistory','MercuryThreads','WebMessengerPermalinkConstants','goURI'],function(ea,fa,ga,ha){fa.get().getThreadMeta(ba,function(ia){if(r&&r.isInitialized()){r.tabController.openTab(ba,r.tabsViewport,ca,da);}else ha(g(ga.getURIPathForThreadID(ba)));if(!aa.canOpenTab())ea.getInstance('mercury').error('Unable to open chat tab',ia);});});if(document.documentElement.clientHeight<=t)v();}function x(ba,ca,da,ea){h.listen(ba,'click',function(fa){if(aa.canOpenTab()){ea(ca,da);return fa.kill();}});}function y(ba,ca,da,ea){var fa={referrer:ba||'',message_thread_id:ca,message_view:'chat',timestamp_send:Date.now()};if(da!==(void 0))fa.message_target_ids=[da];d(['ChatImpressionLogger'],function(ha){ha.logImpression(ba,da,ea);});d(['Banzai'],function(ha){ha.post(u,fa,{delay:0,retry:true});});var ga=o.getUserIDFromThreadID(String(ca));d(['Banzai'],function(ha){ha.post('page_message_button_click',{page_id:ga,ref:ba});});}function z(ba){var ca=k.getContext(ba);return (ca&&p.byClass(ca,"_3qw")!==null);}var aa={canOpenTab:function(){return r&&!r.isHidden();},openEmptyTab:function(ba,ca,da){if(aa.canOpenTab()&&s){var ea=s.getEmptyTab();w(ea);y(ca,ea,null,da);v();return ea;}return null;},listenOpenEmptyTab:function(ba,ca){x(ba,null,ca,aa.openEmptyTab);},openThread:function(ba,ca,da,ea,fa){d(['MercuryThreadIDMap'],function(ga){if(o.isValid(ba)){w(ba,ea,fa);}else ga.get().getClientIDFromFBID(ba,function(ha){return w(ha,ea,fa);});y(ca,ba,null,da);v();});},listenOpenThread:function(ba,ca,da){x(ba,ca,da,aa.openThread);},openUserTab:function(ba,ca,da){var ea=o.getThreadIDFromUserID(ba);w(ea);y(ca,ea,ba,da);return true;},openPageTab:function(ba,ca,da){d(['MercuryThreads'],function(ea){var fa=o.getThreadIDFromUserID(ca);ea.get().getThreadMeta(fa,function(ga){if(ba&&ba.length>0){var ha=(Date.now()-ga.timestamp)/1000,ia=ha/3600;if(ga.message_count===0||ia>24)j.setWelcomeMessage(fa,o.getParticipantIDFromUserID(ca),ba);}});w(fa);y(da,fa,ca);});return true;},listenOpenUserTab:function(ba,ca,da){if(!z(ba))x(ba,ca,da,aa.openUserTab);},listenOpenPageTab:function(ba,ca,da,ea){if(!z(ba))x(ba,ca,ea,q(aa.openPageTab,da));},openTabByType:function(ba,ca,da){d(['ChatTypeaheadConstants','MercuryParticipantTypes'],function(ea,fa){if(ca===ea.THREAD_TYPE){if(ba){aa.openThread(ba,da);}else aa.openEmptyTab(null,da);}else if(!ca||ca===fa.FRIEND||ca===ea.FRIEND_TYPE||ca===ea.PAGE_TYPE||ca===ea.USER_TYPE)aa.openUserTab(ba,da);});}};e.exports=aa;},null);
__d("AbstractSearchSource",["Promise"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();function h(){}var i={bootstrap:function(j){if(!this._bootstrapPromise)this._bootstrapPromise=new g(function(k){this.bootstrapImpl(k);}.bind(this));return this._bootstrapPromise.then(j);},search:function(j,k,l){this.searchImpl(j,k,l);},bootstrapImpl:function(j){j();},searchImpl:function(j,k,l){throw new Error('Abstract method #searchImpl is not implemented.');}};Object.assign(h.prototype,i);h.Mixin=i;e.exports=h;},null);
__d("isValidUniqueID",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(h){return (h!==null&&h!==(void 0)&&h!==''&&(typeof h==='string'||typeof h==='number'));}e.exports=g;},null);
__d("SearchableEntry",["HTML","isValidUniqueID","invariant"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();function j(l){if(!l){return '';}else if(typeof l==='string'){return l;}else if(typeof l==='object'){var m=g.replaceJSONWrapper(l);if(g.isHTML(m)){var n=m.getRootNode();return n.textContent||n.innerText||'';}else return '';}else return '';}function k(l){"use strict";i(h(l.uniqueID));this.$SearchableEntry0=l.uniqueID+'';i(!!l.title&&typeof l.title==='string');this.$SearchableEntry1=l.title;this.$SearchableEntry2=l.order||0;this.$SearchableEntry3=j(l.subtitle);this.$SearchableEntry4=l.keywordString||'';this.$SearchableEntry5=l.photo||'';this.$SearchableEntry6=l.uri||'';this.$SearchableEntry7=l.type||'';var m=l.auxiliaryData||{};this.$SearchableEntry8=m;}k.prototype.getUniqueID=function(){"use strict";return this.$SearchableEntry0;};k.prototype.getOrder=function(){"use strict";return this.$SearchableEntry2;};k.prototype.getTitle=function(){"use strict";return this.$SearchableEntry1;};k.prototype.getSubtitle=function(){"use strict";return this.$SearchableEntry3;};k.prototype.getKeywordString=function(){"use strict";return this.$SearchableEntry4;};k.prototype.getPhoto=function(){"use strict";return this.$SearchableEntry5;};k.prototype.getURI=function(){"use strict";return this.$SearchableEntry6;};k.prototype.getType=function(){"use strict";return this.$SearchableEntry7;};k.prototype.getAuxiliaryData=function(){"use strict";return this.$SearchableEntry8;};e.exports=k;},null);
__d("SearchSourceQueryStatus",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={ACTIVE:'ACTIVE',COMPLETE:'COMPLETE'};e.exports=g;},null);
__d("SearchSourceCallbackManager",["SearchSourceQueryStatus","createObjectFrom","invariant"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=g,k=j.ACTIVE,l=j.COMPLETE;function m(o){"use strict";this.$SearchSourceCallbackManager0=o.parseFn;i(typeof this.$SearchSourceCallbackManager0==='function');this.$SearchSourceCallbackManager1=o.matchFn;i(typeof this.$SearchSourceCallbackManager1==='function');this.$SearchSourceCallbackManager2=o.alwaysPrefixMatch||false;this.$SearchSourceCallbackManager3=o.indexFn||n;this.reset();}m.prototype.search=function(o,p,q){"use strict";var r=this.$SearchSourceCallbackManager4(o,p,q);if(r)return 0;this.$SearchSourceCallbackManager5.push({queryString:o,callback:p,options:q});var s=this.$SearchSourceCallbackManager5.length-1;this.$SearchSourceCallbackManager6.push(s);return s;};m.prototype.$SearchSourceCallbackManager4=function(o,p,q){"use strict";var r=this.$SearchSourceCallbackManager7(o),s=!!this.$SearchSourceCallbackManager8[o];if(!r.length){p([],o,s?l:k);return s;}var t=r.map(function(u){return this.$SearchSourceCallbackManager9[u];},this);p(t,o,s?l:k);return s;};m.prototype.$SearchSourceCallbackManagera=function(){"use strict";var o=this.$SearchSourceCallbackManager6;this.$SearchSourceCallbackManager6=[];o.forEach(this.$SearchSourceCallbackManagerb,this);};m.prototype.$SearchSourceCallbackManagerb=function(o){"use strict";var p=this.$SearchSourceCallbackManager5[o];if(!p)return;var q=this.$SearchSourceCallbackManager4(p.queryString,p.callback,p.options);if(q){delete this.$SearchSourceCallbackManager5[o];return;}this.$SearchSourceCallbackManager6.push(o);};m.prototype.reset=function(){"use strict";this.$SearchSourceCallbackManager9={};this.$SearchSourceCallbackManagerc={};this.$SearchSourceCallbackManagerd={};this.$SearchSourceCallbackManagere={};this.$SearchSourceCallbackManager8={};this.$SearchSourceCallbackManager6=[];this.$SearchSourceCallbackManager5=[undefined];};m.prototype.addLocalEntries=function(o){"use strict";o.forEach(function(p){var q=p.getUniqueID(),r=this.$SearchSourceCallbackManager3(p);this.$SearchSourceCallbackManager9[q]=p;this.$SearchSourceCallbackManagerc[q]=r;var s=this.$SearchSourceCallbackManager0(r);s.tokens.forEach(function(t){if(!this.$SearchSourceCallbackManagerd.hasOwnProperty(t))this.$SearchSourceCallbackManagerd[t]={};this.$SearchSourceCallbackManagerd[t][q]=true;},this);},this);this.$SearchSourceCallbackManagera();};m.prototype.addQueryEntries=function(o,p,q){"use strict";if(q===l)this.setQueryStringAsExhausted(p);var r=this.$SearchSourceCallbackManager7(p),s=this.$SearchSourceCallbackManager0(p).flatValue;this.$SearchSourceCallbackManagere[s]=h(r,true);o.forEach(function(t){var u=t.getUniqueID();this.$SearchSourceCallbackManager9[u]=t;this.$SearchSourceCallbackManagerc[u]=this.$SearchSourceCallbackManager3(t);this.$SearchSourceCallbackManagere[s][u]=true;},this);this.$SearchSourceCallbackManagera();};m.prototype.unsubscribe=function(o){"use strict";delete this.$SearchSourceCallbackManager5[o];};m.prototype.removeEntry=function(o){"use strict";delete this.$SearchSourceCallbackManager9[o];};m.prototype.getAllEntriesMap=function(){"use strict";return this.$SearchSourceCallbackManager9;};m.prototype.setQueryStringAsExhausted=function(o){"use strict";this.$SearchSourceCallbackManager8[o]=true;};m.prototype.unsetQueryStringAsExhausted=function(o){"use strict";delete this.$SearchSourceCallbackManager8[o];};m.prototype.$SearchSourceCallbackManager7=function(o){"use strict";var p=this.$SearchSourceCallbackManagerf(o,this.$SearchSourceCallbackManagerg(o)),q=this.$SearchSourceCallbackManagerf(o,this.$SearchSourceCallbackManagerh(o)),r=p.concat(q),s={},t=[];r.forEach(function(u){if(!s[u]&&this.$SearchSourceCallbackManager9[u]!==undefined){t.push(u);s[u]=true;}},this);return t;};m.prototype.$SearchSourceCallbackManagerf=function(o,p){"use strict";var q=this.$SearchSourceCallbackManageri(o,p),r=this.$SearchSourceCallbackManager9;function s(t,u){if(q[t]!==q[u])return q[t]?-1:1;var v=r[t],w=r[u];if(v.getOrder()!==w.getOrder())return v.getOrder()-w.getOrder();var x=v.getTitle().length,y=w.getTitle().length;if(x!==y)return x-y;return v.getUniqueID()-w.getUniqueID();}return p.sort(s).slice();};m.prototype.$SearchSourceCallbackManageri=function(o,p){"use strict";var q={};p.forEach(function(r){q[r]=this.$SearchSourceCallbackManager1(o,this.$SearchSourceCallbackManagerc[r]);},this);return q;};m.prototype.$SearchSourceCallbackManagerg=function(o){"use strict";var p=this.$SearchSourceCallbackManager0(o,this.$SearchSourceCallbackManager2),q=this.$SearchSourceCallbackManager2?p.sortedTokens:p.tokens,r=q.length,s=p.isPrefixQuery?r-1:null,t={},u={},v={},w=false,x={},y=0;q.forEach(function(aa,ba){if(x.hasOwnProperty(aa))return;y++;x[aa]=true;for(var ca in this.$SearchSourceCallbackManagerd){var da=(ca===aa&&!t.hasOwnProperty(ca)),ea=false;if(!da)ea=((this.$SearchSourceCallbackManager2||s===ba)&&ca.indexOf(aa)===0);if(!da&&!ea)continue;if(ca===aa){if(u.hasOwnProperty(ca))w=true;t[ca]=true;}else{if(t.hasOwnProperty(ca)||u.hasOwnProperty(ca))w=true;u[ca]=true;}for(var fa in this.$SearchSourceCallbackManagerd[ca])if(ba===0||(v.hasOwnProperty(fa)&&v[fa]==y-1))v[fa]=y;}},this);var z=Object.keys(v).filter(function(aa){return v[aa]==y;});if(w||y<r)z=this.$SearchSourceCallbackManagerj(o,z);return z;};m.prototype.$SearchSourceCallbackManagerh=function(o){"use strict";var p=this.$SearchSourceCallbackManager0(o).flatValue,q=this.$SearchSourceCallbackManagerk(p);if(this.$SearchSourceCallbackManagere.hasOwnProperty(p))return q;return this.$SearchSourceCallbackManagerj(o,q);};m.prototype.$SearchSourceCallbackManagerk=function(o){"use strict";var p=0,q=null,r=this.$SearchSourceCallbackManagere;Object.keys(r).forEach(function(s){if(o.indexOf(s)===0&&s.length>p){p=s.length;q=s;}});return (r.hasOwnProperty(q)?Object.keys(r[q]):[]);};m.prototype.$SearchSourceCallbackManagerj=function(o,p){"use strict";return p.filter(function(q){return this.$SearchSourceCallbackManager1(o,this.$SearchSourceCallbackManagerc[q]);},this);};function n(o){return [o.getTitle(),o.getKeywordString()].join(' ');}e.exports=m;},null);
__d("TokenizeUtil",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g=/[ ]+/g,h=/[^ ]+/g,i=new RegExp(j(),'g');function j(){return '[.,+*?$|#{}()\'\\^\\-\\[\\]\\\\\\/!@%"~=<>_:;'+'\u30fb\u3001\u3002\u3008-\u3011\u3014-\u301f\uff1a-\uff1f\uff01-\uff0f'+'\uff3b-\uff40\uff5b-\uff65\u2E2E\u061f\u066a-\u066c\u061b\u060c\u060d'+'\uFD3e\uFD3F\u1801\u0964\u104a\u104b\u2010-\u2027\u2030-\u205e'+'\u00a1-\u00b1\u00b4-\u00b8\u00ba\u00bb\u00bf]';}var k={},l={a:"\u0430 \u00e0 \u00e1 \u00e2 \u00e3 \u00e4 \u00e5 \u0101",b:"\u0431",c:"\u0446 \u00e7 \u010d",d:"\u0434 \u00f0 \u010f \u0111",e:"\u044d \u0435 \u00e8 \u00e9 \u00ea \u00eb \u011b \u0113",f:"\u0444",g:"\u0433 \u011f \u0123",h:"\u0445 \u0127",i:"\u0438 \u00ec \u00ed \u00ee \u00ef \u0131 \u012b",j:"\u0439",k:"\u043a \u0138 \u0137",l:"\u043b \u013e \u013a \u0140 \u0142 \u013c",m:"\u043c",n:"\u043d \u00f1 \u0148 \u0149 \u014b \u0146",o:"\u043e \u00f8 \u00f6 \u00f5 \u00f4 \u00f3 \u00f2",p:"\u043f",r:"\u0440 \u0159 \u0155",s:"\u0441 \u015f \u0161 \u017f",t:"\u0442 \u0165 \u0167 \u00fe",u:"\u0443 \u044e \u00fc \u00fb \u00fa \u00f9 \u016f \u016b",v:"\u0432",y:"\u044b \u00ff \u00fd",z:"\u0437 \u017e",ae:"\u00e6",oe:"\u0153",ts:"\u0446",ch:"\u0447",ij:"\u0133",sh:"\u0448",ss:"\u00df",ya:"\u044f"};for(var m in l){var n=l[m].split(' ');for(var o=0;o<n.length;o++)k[n[o]]=m;}var p={};function q(w){return w?w.replace(i,' '):'';}function r(w){w=w.toLowerCase();var x='',y='';for(var z=w.length;z--;){y=w.charAt(z);x=(k[y]||y)+x;}return x.replace(g,' ');}function s(w){var x=[],y=h.exec(w);while(y){y=y[0];x.push(y);y=h.exec(w);}return x;}function t(w,x){if(!p.hasOwnProperty(w)){var y=r(w),z=q(y);p[w]={value:w,flatValue:y,tokens:s(z),isPrefixQuery:z&&z[z.length-1]!=' '};}if(x&&typeof p[w].sortedTokens=='undefined'){p[w].sortedTokens=p[w].tokens.slice();p[w].sortedTokens.sort(function(aa,ba){return ba.length-aa.length;});}return p[w];}function u(w,x,y){var z=t(x,w=='prefix'),aa=w=='prefix'?z.sortedTokens:z.tokens,ba=t(y).tokens,ca={},da=z.isPrefixQuery&&w=='query'?aa.length-1:null,ea=function(fa,ga){for(var ha=0;ha<ba.length;++ha){var ia=ba[ha];if(!ca[ha]&&(ia==fa||((w=='query'&&ga===da||w=='prefix')&&ia.indexOf(fa)===0)))return (ca[ha]=true);}return false;};return Boolean(aa.length&&aa.every(ea));}var v={flatten:r,parse:t,getPunctuation:j,isExactMatch:u.bind(null,'exact'),isQueryMatch:u.bind(null,'query'),isPrefixMatch:u.bind(null,'prefix'),tokenize:s};e.exports=v;},null);
__d("ChatSearchSource",["requireWeak","AbstractSearchSource","AsyncRequest","CurrentUser","MercuryParticipantTypes","SearchableEntry","SearchSourceCallbackManager","ShortProfiles","TokenizeUtil","emptyFunction","isValidUniqueID"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){b.__markCompiled&&b.__markCompiled();'use strict';var r=null;g('OrderedFriendsList',function(v){r=v;});for(var s in h)if(h.hasOwnProperty(s))u[s]=h[s];var t=h===null?null:h.prototype;u.prototype=Object.create(t);u.prototype.constructor=u;u.__superConstructor__=h;function u(v){h.call(this);this.$ChatSearchSource0=new m({parseFn:o.parse,matchFn:o.isQueryMatch,indexFn:v.indexFn});this.$ChatSearchSource1=v.queryRequests||[];this.$ChatSearchSource2=false;}u.prototype.bootstrapImpl=function(v){n.fetchAll().then(function(){this.$ChatSearchSource2=true;this.$ChatSearchSource3();v();}.bind(this));};u.prototype.searchImpl=function(v,w,x){var y=null,z={},aa=x&&x.onQueryFinished,ba=x&&x.onQueryStarted;ba&&ba(v);var ca=this.$ChatSearchSource0.search(v,function(fa){if(!y){y=fa;y.forEach(function(ga){return z[ga.getUniqueID()]=true;});}else fa.forEach(function(ga){var ha=ga.getUniqueID();if(!z[ha]){y.push(ga);z[ha]=true;}});w(y,v);if(v.length===1&&this.$ChatSearchSource2)aa&&aa(v);}.bind(this),x);if(!ca||!this.$ChatSearchSource1||!this.$ChatSearchSource1.length||v.length===0){aa&&aa(v);return;}if(v.length===1){if(this.$ChatSearchSource2)aa&&aa(v);return;}var da={value:v,existing_ids:y&&y.map(function(fa){return fa.getUniqueID();}).join(','),needs_friends:!this.$ChatSearchSource2,limit:x&&x.threadLimit},ea=this.$ChatSearchSource1.length;this.$ChatSearchSource1.forEach(function(fa){this.$ChatSearchSource4(da,fa,function(ga){this.$ChatSearchSource5(this.$ChatSearchSource6(this.$ChatSearchSource7(ga)).filter(function(ha){return !!ha;}),v);ea--;if(ea===0){this.$ChatSearchSource0.setQueryStringAsExhausted(v);aa&&aa(v);}}.bind(this));}.bind(this),this);};u.prototype.getAllEntriesMap=function(){return this.$ChatSearchSource0.getAllEntries();};u.prototype.$ChatSearchSource3=function(){var v=n.getCachedProfileIDs(),w=v.filter(function(y){var z=n.getNow(y);return (y==j.getID()||z.type===k.FRIEND);}),x=w.map(this.$ChatSearchSource8);if(x.length)this.$ChatSearchSource0.addLocalEntries(x);};u.prototype.$ChatSearchSource6=function(v){return v.map(this.$ChatSearchSource9,this);};u.prototype.$ChatSearchSource9=function(v,w){if(v.mercury_thread){if(!r)return null;return r.normalizeThreadEntry(v,w);}var x=v.text,y=v.uid;if(!x||!q(y))return null;return new l({uniqueID:y,title:x,order:r?r.getActiveRank(y):0,subtitle:v.subtext,type:v.render_type||v.type,photo:v.photo,uri:v.path,auxiliaryData:{isMessengerUser:v.is_messenger_user,alias:v.alias}});};u.prototype.$ChatSearchSource7=function(v){var w=v.getPayload();if(Array.isArray(w)){return w;}else if(w&&w.entries){return w.entries;}else return [];};u.prototype.$ChatSearchSource8=function(v){var w=n.getNow(v),x=v==j.getID()?k.FRIEND:w.type,y=[w.additionalName,w.alternateName].concat(w.searchTokens||[]).join(' ');return new l({uniqueID:v,title:w.name,order:r?r.getActiveRank(v):0,subtitle:w.additionalName,keywordString:y,type:x,photo:w.thumbSrc,uri:w.uri,auxiliaryData:{isMessengerUser:w.is_messenger_user,alias:w.alias}});};u.prototype.$ChatSearchSource4=function(v,w,x,y){new i(w.uri).setData(Object.assign({},v,w.data)).setMethod('GET').setReadOnly(true).setHandler(x).setErrorHandler(y||p).setAllowCrossPageTransition(true).send();};u.prototype.$ChatSearchSource5=function(v,w){if(v.length)this.$ChatSearchSource0.addQueryEntries(v,w);};u.prototype.addLocalEntries=function(v){this.$ChatSearchSource0.addLocalEntries(v);};u.prototype.refreshData=function(){n.fetchAll();g('AvailableList',function(v){return v.update();});};e.exports=u;},null);
__d("OrderedFriendsList",["AvailableListConstants","PresenceStatus","SearchableEntry","ShortProfiles","WorkModeConfig","createArrayFromMixed","isValidUniqueID","InitialChatFriendsList"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();var n=[],o=[],p={},q=[],r={},s=[],t={contains:function(u){return u in p;},getList:function(){if(k.is_work_user)return l(n);t.reRank();var u=l(n);u=u.filter(function(v){var w=j.getNowUnsafe(v);return !w||w.type=="friend";});return u;},getSearchableEntries:function(u,v){var w=t.getList();j.getMulti(w.slice(0,u),function(x){var y=[];for(var z in x)y.push(t.normalizeProfileEntry(x[z]));var aa=t.getGroups().map(t.normalizeThreadEntry);v(y.concat(aa).filter(function(ba){return !!ba;}).sort(function(ba,ca){return ba.getOrder()-ca.getOrder();}));});},normalizeProfileEntry:function(u){var v=u.searchTokens||[];return new i({uniqueID:u.id,keywordString:v.join(' '),order:t.getRank(u.id),photo:u.thumbSrc,title:u.name,type:u.type,uri:u.uri,auxiliaryData:{isMessengerUser:u.is_messenger_user}});},normalizeThreadEntry:function(u,v){var w=u.mercury_thread,x=u.participants_to_render,y=u.text,z=null;if(!y)y=w.name;var aa=x.map(function(ca){return ca.name;}).join(', ');if(!y){y=aa;}else z=aa;var ba=u.uid;if(!y||!m(ba))return null;return new i({uniqueID:ba,order:v,photo:w.image_src,title:y,subtitle:z,type:'thread',auxiliaryData:{participantsToRender:x,thread:w}});},getRank:function(u){return u in p?p[u]:n.length;},getActiveList:function(){if(q.length>0)return q;return t.getList();},getActiveRank:function(u){return u in r?r[u]:t.getRank(u);},reRank:function(){n=[];var u=0;s.forEach(function(v){var w=v.slice(0,-2),x=v.slice(-1);if(h.get(w)==x){n[u]=w;p[w]=u++;}});},rankActive:function(){var u=0;s.forEach(function(v){var w=v.slice(0,-2),x=v.slice(-1);if(x==g.ACTIVE){q[u]=w;r[w]=u++;}});},getGroups:function(){return o;}};(function(){var u=b('InitialChatFriendsList');n=u.list.length?u.list:[];o=u.groups||[];if(!k.is_work_user){s=n.slice();t.rankActive();t.reRank();}else n.forEach(function(v,w){p[v]=w;});})();e.exports=a.OrderedFriendsList||t;},null);
__d("TypingDetector",["ArbiterMixin","Event","Input","Run","TypingStates","createObjectFrom","emptyFunction"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();function n(o,p){this._input=o;this._ignoreKeys={};this._getValueFn=p;}Object.assign(n.prototype,g,{_timeout:7000,_currentState:k.INACTIVE,init:function(){this.init=m;this.reset();this._subscription=h.listen(this._input,'keyup',this._update.bind(this));j.onUnload(this._onunload.bind(this));},reset:function(){clearTimeout(this._checkTimer);this._checkTimer=null;this._lastKeystrokeAt=null;this._currentState=k.INACTIVE;},setIgnoreKeys:function(o){this._ignoreKeys=l(o);},destroy:function(){this._subscription.remove();},_onunload:function(){if(this._currentState==k.TYPING)this._transition(k.QUITTING);},_update:function(event){var o=h.getKeyCode(event),p=this._currentState;if(!this._ignoreKeys[o]){var q=this._getValueFn?this._getValueFn():i.getValue(this._input);if(q.trim().length===0){if(p==k.TYPING)this._transition(k.INACTIVE);}else if(p==k.TYPING){this._recordKeystroke();}else if(p==k.INACTIVE){this._transition(k.TYPING);this._recordKeystroke();}}},_transition:function(o){this.reset();this._currentState=o;this.inform('change',o);},_recordKeystroke:function(){this._lastKeystrokeTime=Date.now();if(!this._checkTimer)this._checkTimer=setTimeout(this._checkTyping.bind(this),this._timeout);},_checkTyping:function(){var o=this._lastKeystrokeTime+this._timeout,p=Date.now();if(p>o){this._transition(k.INACTIVE);}else{clearTimeout(this._checkTimer);this._checkTimer=setTimeout(this._checkTyping.bind(this),o-p+10);}}});e.exports=n;},null);
__d("TypingDetectorController",["AsyncRequest","AvailableList","AvailableListConstants","ChannelConnection","ChatVisibility","Keys","TypingDetector","TypingStates","emptyFunction","setTimeoutAcrossTransitions","shield"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){b.__markCompiled&&b.__markCompiled();function r(s,t,u,v,w,x){"use strict";this.userID=s;this.input=t;this.source=u;this.threadID=w;this.remoteState=n.INACTIVE;this.notifyTimer=null;v=v||{};this.notifyDelay=v.notifyDelay||this.notifyDelay;this._typingDetector=new m(t,x);this._typingDetector.init(v);this._typingDetector.subscribe('change',this._stateChange.bind(this));}r.prototype.setUserAndThread=function(s,t){"use strict";if(this.userID!==s||this.threadID!==t){this.resetState();this.userID=s;this.threadID=t;}};r.prototype.setIgnoreEnter=function(s){"use strict";var t=s?[l.RETURN]:[];this._typingDetector.setIgnoreKeys(t);};r.prototype.resetState=function(){"use strict";this._notifyState(n.INACTIVE);this.remoteState=n.INACTIVE;this._typingDetector.reset();clearTimeout(this.notifyTimer);this.notifyTimer=null;};r.prototype.destroy=function(){"use strict";this.resetState();this._typingDetector.destroy();};r.prototype._stateChange=function(s,t){"use strict";if(t!=n.QUITTING){clearTimeout(this.notifyTimer);this.notifyTimer=p(q(this._notifyState,this,t),this.notifyDelay);}else this._notifyState(t,true);};r.prototype._notifyState=function(s,t){"use strict";if((!this.userID&&!this.threadID)||!k.isOnline()||s===this.remoteState||j.disconnected())return;this._sendRequest(s,this.userID,t);};r.prototype._sendRequest=function(s,t,u){"use strict";this.remoteState=s;var v={typ:s,to:t,source:this.source,thread:this.threadID};new g().setHandler(this._onTypResponse.bind(this,t)).setErrorHandler(o).setData(v).setURI('/ajax/messaging/typ.php').setAllowCrossPageTransition(true).setOption('asynchronous',!u).send();};r.prototype._onTypResponse=function(s,t){"use strict";var u=t.getPayload()||{};if(u.offline)h.set(s,i.OFFLINE,'typing_response');};Object.assign(r.prototype,{notifyDelay:1000});e.exports=r;},null);
__d("CenteredContainer.react",["React","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=g,k=j.PropTypes,l=g.createClass({displayName:"CenteredContainer",propTypes:{fullHeight:k.bool,vertical:k.bool,horizontal:k.bool},getDefaultProps:function(){return {fullHeight:false,vertical:false,horizontal:true};},render:function(){var m=((this.props.vertical?"_3bwv":'')+(this.props.horizontal?' '+"_3bww":'')),n=g.Children.map(this.props.children,function(p){return (g.createElement("div",{className:"_3bwx"},p));}),o=i(this.props.className,((this.props.fullHeight?"_5bpf":'')));return (g.createElement("div",g.__spread({},this.props,{className:o}),g.createElement("div",{className:m},g.createElement("div",{className:"_3bwy"},n))));}});e.exports=l;},null);
__d("SplitImage.react",["React","Image.react","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=g.createClass({displayName:"SplitImage",render:function(){var l=this.props.size;return (g.createElement("div",g.__spread({},this.props,{className:j(this.props.className,"_55lt"),style:Object.assign({},(this.props.style||{}),{width:l,height:l})}),this.renderImages()));},renderImages:function(){if(!this.props.srcs)return null;var l=this.props.srcs,m=Array.isArray(l);if(!m||l.length==1)return this.renderOne(m?l[0]:l);return l.length==2?this.renderTwo(l):this.renderThree(l);},renderOne:function(l){return (g.createElement(h,{src:l,width:this.props.size,height:this.props.size,alt:""}));},renderTwo:function(l){var m=this.props.size,n=Math.floor(m/2),o=-Math.floor(n/2),p=(("_55lu")+(this.props.border?' '+"_57xo":''));return (g.createElement("div",null,g.createElement("div",{className:"_55lu",style:{width:n}},g.createElement(h,{src:l[0],width:m,height:m,style:{marginLeft:o}})),g.createElement("div",{className:p,style:{width:n}},g.createElement(h,{src:l[1],width:m,height:m,style:{marginLeft:o}}))));},renderThree:function(l){var m=this.props.size,n=Math.floor(m/3*2),o=-Math.floor((m-n)/2),p=Math.floor(m/2),q=m-n,r=-Math.floor((p-q)/2),s=(("_55lu")+(this.props.border?' '+"_57pl":'')),t=(("_55lu")+(this.props.border?' '+"_57pm":''));return (g.createElement("div",null,g.createElement("div",{className:s,style:{width:n}},g.createElement(h,{src:l[0],width:m,height:m,style:{marginLeft:o}})),g.createElement("div",{className:t,style:{width:q,height:p}},g.createElement(h,{src:l[1],width:p,height:p,style:{marginLeft:r}})),g.createElement("div",{className:"_55lu",style:{width:q,height:p}},g.createElement(h,{src:l[2],width:p,height:p,style:{marginLeft:r}}))));}});e.exports=k;},null);
__d("EmoticonsList",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={emotes:{":)":"smile",":-)":"smile",":]":"smile","=)":"smile","(:":"smile","(=":"smile",":(":"frown",":-(":"frown",":[":"frown","=(":"frown",")=":"frown",":poop:":"poop",":putnam:":"putnam",":P":"tongue",":-P":"tongue",":-p":"tongue",":p":"tongue","=P":"tongue","=D":"grin",":-D":"grin",":D":"grin",":o":"gasp",":-O":"gasp",":O":"gasp",":-o":"gasp",";)":"wink",";-)":"wink","8-)":"glasses","B-)":"glasses","B|":"sunglasses","8-|":"sunglasses","8|":"sunglasses","B-|":"sunglasses",">:(":"grumpy",">:-(":"grumpy",":/":"unsure",":-/":"unsure",":\\":"unsure",":-\\":"unsure","=/":"unsure","=\\":"unsure",":'(":"cry","3:)":"devil","3:-)":"devil","O:)":"angel","O:-)":"angel",":*":"kiss",":-*":"kiss","<3":"heart","&lt;3":"heart","♥":"heart","^_^":"kiki","^~^":"kiki","-_-":"squint","o.O":"confused","O.o":"confused_rev",">:o":"upset",">:O":"upset",">:-O":"upset",">:-o":"upset",">_<":"upset",">.<":"upset",":v":"pacman",":V":"pacman",":|]":"robot",":3":"colonthree","<(\")":"penguin","(^^^)":"shark","(y)":"like",":like:":"like","(Y)":"like"},symbols:{smile:":)",frown:":(",poop:":poop:",putnam:":putnam:",tongue:":P",grin:"=D",gasp:":o",wink:";)",glasses:"8-)",sunglasses:"B|",grumpy:">:(",unsure:":/",cry:":'(",devil:"3:)",angel:"O:)",kiss:":*",heart:"<3",kiki:"^_^",squint:"-_-",confused:"o.O",confused_rev:"O.o",upset:">:o",pacman:":v",robot:":|]",colonthree:":3",penguin:"<(\")",shark:"(^^^)",like:"(y)"},regexp:/(^|[\s'".])(:\)(?!\))|:\-\)(?!\))|:\]|=\)(?!\))|\(:|\(=|:\(|:\-\(|:\[|=\(|\)=|:poop:|:putnam:|:P|:\-P|:\-p|:p|=P|=D|:\-D|:D|:o|:\-O|:O|:\-o|;\)(?!\))|;\-\)(?!\))|8\-\)(?!\))|B\-\)(?!\))|B\||8\-\||8\||B\-\||>:\(|>:\-\(|:\/|:\-\/|:\\|:\-\\|=\/|=\\|:'\(|3:\)(?!\))|3:\-\)(?!\))|O:\)(?!\))|O:\-\)(?!\))|:\*|:\-\*|<3|&lt;3|\u2665|\^_\^|\^~\^|\-_\-|o\.O|O\.o|>:o|>:O|>:\-O|>:\-o|>_<|>\.<|:v|:V|:\|\]|:3|<\("\)(?!\))|\(\^\^\^\)(?!\))|\(y\)(?!\))|:like:|\(Y\)(?!\)))([\s'".,!?]|<br>|$)/,noncapturingRegexp:/(?:^|[\s'".])(:\)(?!\))|:\-\)(?!\))|:\]|=\)(?!\))|\(:|\(=|:\(|:\-\(|:\[|=\(|\)=|:poop:|:putnam:|:P|:\-P|:\-p|:p|=P|=D|:\-D|:D|:o|:\-O|:O|:\-o|;\)(?!\))|;\-\)(?!\))|8\-\)(?!\))|B\-\)(?!\))|B\||8\-\||8\||B\-\||>:\(|>:\-\(|:\/|:\-\/|:\\|:\-\\|=\/|=\\|:'\(|3:\)(?!\))|3:\-\)(?!\))|O:\)(?!\))|O:\-\)(?!\))|:\*|:\-\*|<3|&lt;3|\u2665|\^_\^|\^~\^|\-_\-|o\.O|O\.o|>:o|>:O|>:\-O|>:\-o|>_<|>\.<|:v|:V|:\|\]|:3|<\("\)(?!\))|\(\^\^\^\)(?!\))|\(y\)(?!\))|:like:|\(Y\)(?!\)))(?:[\s'".,!?]|<br>|$)/};},null);
__d("P2PTriggersUtils",["CurrentEnvironment","MercuryIDs","P2PGKValues"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=/\$((\d{1,3}(,\d{3})*)|\d+)(\.\d{1,2})?(?=\s|\.\s|\,\s|$|\.$|\,$|\?|\!|\")/,k={canSeeTriggers:function(l){if(!i.P2PEnabled)return false;if(h.isGroupChat(l))if(g.messengerdotcom&&!i.P2PGroupSendMessengerDotCom){return false;}else if(g.facebookdotcom&&!i.P2PGroupSendWWW)return false;return true;},getMatches:function(l){return l.match(j);}};e.exports=k;},null);
__d("Utf16",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={decode:function(h){switch(h.length){case 1:return h.charCodeAt(0);case 2:return 65536|((h.charCodeAt(0)-55296)*1024)|(h.charCodeAt(1)-56320);}},encode:function(h){if(h<65536){return String.fromCharCode(h);}else return String.fromCharCode(55296+((h-65536)>>10))+String.fromCharCode(56320+(h%1024));}};e.exports=g;},null);
__d("SupportedEmoji",["cx","Utf16"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i=new RegExp("([\u203C\u2049\u2100-\u21FF\u2300-\u27FF"+"\u2900-\u29FF\u2B00-\u2BFF\u3000-\u30FF\u3200-\u32FF]|"+"\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDEFF])([\uFE00-\uFE0F])?"),j={126980:"_4_o0",127378:"_4_o1",127385:"_4_o2",127386:"_4_o3",127489:"_4_o4",127490:"_4_o5",127514:"_4_o6",127535:"_4_o7",127539:"_4_o8",127541:"_4_o9",127542:"_4_oa",127543:"_4_ob",127544:"_4_oc",127545:"_4_od",127546:"_4_oe",127568:"_4_of",127744:"_2b_",127746:"_2c0",127747:"_4_og",127748:"_4_oh",127749:"_4_oi",127750:"_4_oj",127751:"_4_ok",127752:"_4_ol",127754:"_2c1",127769:"_2c2",127775:"_2c3",127793:"_2c4",127796:"_2c5",127797:"_2c6",127799:"_2c7",127800:"_2c8",127801:"_2c9",127802:"_2ca",127803:"_2cb",127806:"_2cc",127808:"_2cd",127809:"_2ce",127810:"_2cf",127811:"_2cg",127813:"_4_om",127814:"_4_on",127817:"_4_oo",127818:"_2ch",127822:"_2ci",127827:"_2cj",127828:"_2ck",127832:"_4_op",127833:"_4_oq",127834:"_4_or",127835:"_4_os",127836:"_4_ot",127837:"_4_ou",127838:"_4_ov",127839:"_4_ow",127841:"_4_ox",127842:"_4_oy",127843:"_4_oz",127846:"_4_o-",127847:"_4_o_",127856:"_4_p0",127857:"_4_p1",127858:"_4_p2",127859:"_4_p3",127860:"_4_p4",127861:"_4_p5",127862:"_4_p6",127864:"_2cl",127866:"_2cm",127867:"_4_p7",127872:"_4_p8",127873:"_2cn",127875:"_2co",127876:"_2cp",127877:"_2cq",127880:"_2cr",127881:"_2cs",127884:"_4_p9",127885:"_2ct",127886:"_2cu",127887:"_2cv",127888:"_2cw",127890:"_4_pa",127891:"_2cx",127905:"_4_pb",127906:"_4_pc",127908:"_4_pd",127909:"_4_pe",127910:"_4_pf",127911:"_4_pg",127912:"_4_ph",127913:"_4_pi",127915:"_4_pj",127916:"_4_pk",127917:"_4_pl",127919:"_4_pm",127921:"_4_pn",127925:"_2cy",127926:"_2cz",127927:"_4_po",127928:"_4_pp",127930:"_4_pq",127932:"_2c-",127934:"_4_pr",127935:"_4_ps",127936:"_4_pt",127937:"_4_pu",127942:"_4_pv",127944:"_4_pw",127968:"_4_px",127969:"_4_py",127970:"_4_pz",127971:"_4_p-",127973:"_4_p_",127974:"_4_q0",127975:"_4_q1",127976:"_4_q2",127977:"_4_q3",127978:"_4_q4",127979:"_4_q5",127980:"_4_q6",127981:"_4_q7",127983:"_4_q8",127984:"_4_q9",128013:"_2c_",128014:"_2d0",128017:"_2d1",128018:"_2d2",128020:"_2d3",128023:"_2d4",128024:"_2d5",128025:"_2d6",128026:"_2d7",128027:"_2d8",128031:"_2d9",128032:"_2da",128033:"_2db",128037:"_2dc",128038:"_2dd",128039:"_2de",128040:"_2df",128041:"_2dg",128043:"_2dh",128044:"_2di",128045:"_2dj",128046:"_2dk",128047:"_2dl",128048:"_2dm",128049:"_2dn",128051:"_2do",128052:"_2dp",128053:"_2dq",128054:"_491",128055:"_2dr",128056:"_2ds",128057:"_2dt",128058:"_2du",128059:"_2dv",128062:"_2dw",128064:"_2dx",128066:"_2dy",128067:"_2dz",128068:"_2d-",128069:"_2d_",128070:"_2e0",128071:"_2e1",128072:"_2e2",128073:"_2e3",128074:"_2e4",128075:"_2e5",128076:"_2e6",128077:"_2e7",128078:"_2e8",128079:"_2e9",128080:"_2ea",128081:"_4_qa",128082:"_4_qb",128084:"_4_qc",128085:"_4_qd",128087:"_4_qe",128088:"_4_qf",128089:"_4_qg",128092:"_4_qh",128095:"_4_qi",128096:"_4_qj",128097:"_4_qk",128098:"_4_ql",128102:"_2eb",128103:"_2ec",128104:"_2ed",128105:"_2ee",128107:"_2ef",128110:"_2eg",128111:"_2eh",128113:"_2ei",128114:"_2ej",128115:"_2ek",128116:"_2el",128117:"_2em",128118:"_2en",128119:"_2eo",128120:"_2ep",128123:"_2eq",128124:"_2er",128125:"_2es",128126:"_2et",128127:"_2eu",128128:"_2ev",128130:"_2ew",128131:"_2ex",128132:"_4_qm",128133:"_2ey",128136:"_4_qn",128137:"_4_qo",128138:"_4_qp",128139:"_2ez",128140:"_4_qq",128141:"_4_qr",128142:"_4_qs",128143:"_2e-",128144:"_2e_",128145:"_2f0",128146:"_4_qt",128147:"_2f1",128148:"_2f2",128150:"_2f3",128151:"_2f4",128152:"_2f5",128153:"_2f6",128154:"_2f7",128155:"_2f8",128156:"_2f9",128157:"_2fa",128158:"_4_qu",128159:"_4_qv",128160:"_4_qw",128161:"_4_qx",128162:"_2fb",128163:"_4_qy",128164:"_2fc",128166:"_2fd",128167:"_4_qz",128168:"_2fe",128169:"_2ff",128170:"_2fg",128176:"_4_q-",128178:"_4_q_",128180:"_4_r0",128181:"_4_r1",128186:"_4_r2",128187:"_2fh",128188:"_4_r3",128189:"_2fi",128190:"_2fj",128191:"_2fk",128192:"_2fl",128214:"_4_r4",128221:"_4_r5",128222:"_2fm",128224:"_2fn",128225:"_4_r6",128226:"_4_r7",128227:"_4_r8",128232:"_4_r9",128233:"_4_ra",128234:"_4_rb",128235:"_4_rc",128236:"_4_rd",128237:"_4_re",128238:"_4_rf",128241:"_2fo",128242:"_2fp",128243:"_4_rg",128244:"_4_rh",128246:"_4_ri",128247:"_4_rj",128250:"_2fq",128251:"_4_rk",128252:"_4_rl",128264:"_4_rm",128269:"_4_rn",128270:"_4_ro",128271:"_4_rp",128272:"_4_rq",128273:"_4_rr",128274:"_4_rs",128275:"_4_rt",128276:"_2fr",128286:"_4_ru",128293:"_492",128296:"_4_rv",128299:"_4_rw",128304:"_4_rx",128305:"_4_ry",128306:"_4_rz",128307:"_4_r-",128308:"_4_r_",128309:"_4_s0",128310:"_4_s1",128311:"_4_s2",128312:"_4_s3",128313:"_4_s4",128507:"_4_s5",128508:"_4_s6",128509:"_4_s7",128513:"_2fs",128514:"_2ft",128515:"_2fu",128516:"_2fv",128518:"_2fw",128521:"_2fx",128522:"_1q3y",128524:"_2fz",128525:"_2f-",128527:"_2f_",128530:"_2g0",128531:"_2g1",128532:"_2g2",128534:"_2g3",128536:"_2g4",128538:"_2g5",128540:"_2g6",128541:"_2g7",128542:"_2g8",128544:"_2g9",128545:"_2ga",128546:"_2gb",128547:"_2gc",128548:"_2gd",128549:"_2ge",128552:"_2gf",128553:"_2gg",128554:"_2gh",128555:"_2gi",128557:"_2gj",128560:"_2gk",128561:"_2gl",128562:"_2gm",128563:"_2gn",128565:"_2go",128567:"_2gp",128568:"_2gq",128569:"_2gr",128570:"_2gs",128571:"_2gt",128572:"_2gu",128573:"_2gv",128575:"_2gw",128576:"_2gx",128587:"_2gy",128588:"_2gz",128589:"_2g-",128591:"_2g_",128640:"_4_s8",128643:"_4_s9",128644:"_4_sa",128645:"_4_sb",128649:"_4_sc",128652:"_4_sd",128655:"_4_se",128657:"_4_sf",128658:"_4_sg",128659:"_4_sh",128661:"_4_si",128663:"_4_sj",128665:"_4_sk",128666:"_4_sl",128674:"_4_sm",128676:"_4_sn",128677:"_4_so",128679:"_4_sp",128684:"_4_sq",128685:"_4_sr",128690:"_4_ss",128697:"_4_st",128698:"_4_su",128699:"_4_sv",128700:"_4_sw",128701:"_4_sx",128702:"_4_sy",128704:"_4_sz",9642:"_4_s-",9643:"_4_s_",9723:"_4_t0",9724:"_4_t1",9725:"_4_t2",9726:"_4_t3",9742:"_4_t4",9757:"_2h0",9786:"_2h1",9855:"_4_t5",9888:"_4_t6",9889:"_2h2",9898:"_4_t7",9899:"_4_t8",9917:"_4_t9",9918:"_4_ta",9924:"_2h3",9940:"_4_tb",9962:"_4_tc",9970:"_4_td",9971:"_4_te",9973:"_4_tf",9978:"_4_tg",9981:"_4_th",9994:"_2h4",9995:"_2h5",9996:"_2h6",10060:"_4_ti",10062:"_4_tj",10145:"_4_tk",10175:"_4_tl",11013:"_4_tm",11014:"_4_tn",11015:"_4_to",11035:"_4_tp",11036:"_4_tq",11088:"_4_tr",11093:"_4_ts",12349:"_4_tt",8598:"_4_tu",8599:"_4_tv",8600:"_4_tw",8601:"_4_tx",9728:"_2h7",9729:"_2h8",9748:"_2h9",9749:"_2ha",9824:"_4_ty",9827:"_4_tz",9829:"_4_t-",9830:"_4_t_",9832:"_4_u0",9986:"_4_u1",9992:"_4_u2",9993:"_4_u3",10006:"_4_u4",10024:"_2hb",10035:"_4_u5",10036:"_4_u6",10067:"_4_u7",10068:"_4_u8",10069:"_4_u9",10071:"_4_ua",10084:"_2hc",10548:"_4_ub",10549:"_4_uc",12951:"_4_ud",12953:"_4_ue"},k=function(l){var m=0;while(l.length>0){var n=i.exec(l);if(!n||!n.length)return false;var o=n[1],p=n.index,q=h.decode(o),r=j[q];if(!r){m+=p+1;l=l.substr(p+1);continue;}n.index+=m;n.emoji=r;return n;}return false;};e.exports={findEmoji:k,emoji:j,_utf16Regex:i};},null);
__d("Newline.react",["React"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h=g.createClass({displayName:"Newline",render:function(){return g.createElement("br",g.__spread({},this.props));}});e.exports=h;},null);
__d("Text.react",["React"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h=g.createClass({displayName:"Text",render:function(){return (g.createElement("span",g.__spread({},this.props),this.props.children));}});e.exports=h;},null);
__d("ES6StringUtils",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={fromCodePoint:function(){for(var h=[],i=0,j=arguments.length;i<j;i++)h.push(arguments[i]);"use strict";if(String.fromCodePoint)return String.fromCodePoint.apply(this,h);var k=[];for(var l=0;l<h.length;l++){var m=Number(h[l]);if(!isFinite(m)||Math.floor(m)!=m||m<0||1114111<m)throw RangeError('Invalid code point: '+h[l]);if(m<65536){k.push(String.fromCharCode(m));}else{m-=65536;k.push(String.fromCharCode((m>>10)+55296),String.fromCharCode((m%1024)+56320));}}return k.join('');},codePointAt:function(h){"use strict";if(String.prototype.codePointAt)return String.prototype.codePointAt.call(this,h);if(this==null)throw TypeError('Invalid context: '+this);var i=String(this),j=i.length;h=h?Number(h):0;if(h!=h)h=0;if(h<0||j<=h)return (void 0);var k=i.charCodeAt(h);if(55296<=k&&k<=56319&&j>h+1){var l=i.charCodeAt(h+1);if(56320<=l&&l<=57343)return (k-55296)*1024+l-56320+65536;}return k;}};e.exports=g;},null);
__d("UnicodeUtils",["ES6StringUtils"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';var h=55296,i=57343,j=/[\uD800-\uDFFF]/;function k(s){return h<=s&&s<=i;}function l(s){return j.test(s);}function m(s,t){return 1+k(s.charCodeAt(t));}function n(s){if(!l(s))return s.length;var t=0;for(var u=0;u<s.length;u+=m(s,u))t++;return t;}function o(s,t,u){t=t||0;u=(u===(void 0))?Infinity:(u||0);if(!l(s))return s.substr(t,u);var v=s.length;if(v<=0||t>v||u<=0)return '';var w=0;if(t>0){for(;t>0&&w<v;t--)w+=m(s,w);if(w>=v)return '';}else if(t<0){for(w=v;t<0&&0<w;t++)w-=m(s,w-1);if(w<0)w=0;}var x=v;if(u<v)for(x=w;u>0&&x<v;u--)x+=m(s,x);return s.substring(w,x);}function p(s,t,u){t=t||0;u=(u===(void 0))?Infinity:(u||0);if(t<0)t=0;if(u<0)u=0;var v=Math.abs(u-t);t=(t<u)?t:u;return o(s,t,v);}function q(s){var t=[];for(var u=0;u<s.length;u+=m(s,u)){var v=g.codePointAt.call(s,u);t.push(v);}return t;}var r={isCodeUnitInSurrogateRange:k,getUTF16Length:m,strlen:n,substr:o,substring:p,getCodePoints:q};e.exports=r;},null);
__d("BaseTextWithEntities.react",["Newline.react","React","ReactFragment","Text.react","UnicodeUtils"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l=h,m=l.PropTypes;function n(r,s){return r.offset-s.offset;}var o=/(\r\n|[\r\n])/,p=m.shape({length:m.number.isRequired,offset:m.number.isRequired}),q=h.createClass({displayName:"BaseTextWithEntities",propTypes:{aggregatedRanges:m.array,imageRanges:m.array,ranges:m.arrayOf(p),rangeRenderer:m.func.isRequired,text:m.string.isRequired,textRenderer:m.func.isRequired},_getSortedRanges:function(){var r=[];[this.props.ranges,this.props.aggregatedRanges,this.props.imageRanges].filter(function(s){return s!=null;}).forEach(function(s){return r=r.concat(s);});return r.sort(n);},_renderText:function(r){var s=r.split(o),t={};for(var u=0;u<s.length;u++){var v=s[u];if(v){var w='text'+u;if(u%2===1){t[w]=h.createElement(g,null);}else t[w]=this.props.textRenderer(s[u]);}}return i.create(t);},render:function(){var r=0,s=this.props.text,t=this._getSortedRanges(),u={},v=t.length;for(var w=0,x=v;w<x;w++){var y=t[w];if(y.offset<r)continue;if(y.offset>r)u['text'+w]=this._renderText(k.substring(s,r,y.offset));var z=k.substr(s,y.offset,y.length);u['range'+w]=this.props.rangeRenderer(z,y);r=y.offset+y.length;}if(s.length>r)u.end=this._renderText(k.substr(s,r));return (h.createElement(j,{className:this.props.className,style:this.props.style},i.create(u)));}});e.exports=q;},null);
__d("TransformTextToDOMMixin",["DOMQuery","createArrayFromMixed","flattenArray"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=3,k={transform:function(l,m){return i(l.map(function(n){if(!g.isElementNode(n)){var o=n,p=[],q=this.MAX_ITEMS||j;while(q--){var r=m?[o].concat(m):[o],s=this.match.apply(this,r);if(!s)break;p.push(o.substring(0,s.startIndex));p.push(s.element);o=o.substring(s.endIndex);}o&&p.push(o);return p;}return n;}.bind(this)));},params:function(){var l=this;return {__params:true,obj:l,params:h(arguments)};}};e.exports=k;},null);
__d("DOMEmoji",["CSS","JSXDOM","TransformTextToDOMMixin","SupportedEmoji","cx"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l={MAX_ITEMS:40,match:function(m){var n=j.findEmoji(m);if(!n||!n.length)return false;var o=n[0],p=n.index,q=n.emoji;return {startIndex:p,endIndex:p+o.length,element:this._element(q)};},_element:function(m){var n=h.span(null);g.addClass(n,"_1az");g.addClass(n,"_1a-");g.addClass(n,m);return n;}};e.exports=Object.assign(l,i);},null);
__d("DOMEmote",["CSS","EmoticonsList","JSXDOM","TransformTextToDOMMixin","fbt"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l={MAX_ITEMS:40,match:function(m){var n=h.regexp.exec(m);if(!n||!n.length)return false;var o=n[2],p=n.index+n[1].length;return {startIndex:p,endIndex:p+o.length,element:this._element(o,h.emotes[o])};},_element:function(m,n){var o=k._("{emoticonName} emoticon",[k.param("emoticonName",n)]),p=i.span({className:"emoticon_text"},o),q=i.span({title:m,className:"emoticon"});g.addClass(q,'emoticon_'+n);return [p,q];}};e.exports=Object.assign(l,j);},null);
__d("transformTextToDOM",["createArrayFromMixed"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();function h(i,j){var k=[i];j=g(j);j.forEach(function(l){var m,n=l;if(l.__params){m=l.params;n=l.obj;}k=n.transform(k,m);});return k;}e.exports=h;},null);
__d("emojiAndEmote",["DOMEmoji","DOMEmote","transformTextToDOM"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=function(k){var l=[g,h];return i(k,l);};e.exports=j;},null);
__d("Emoji",["DOMEmoji","JSXDOM","emojiAndEmote","transformTextToDOM"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k={htmlEmojiAndEmote:function(l,m){return (h.span(null,i(l))).innerHTML;},htmlEmojiAndEmoteWithoutFBID:function(l,m){return (h.span(null,i(l,false))).innerHTML;},htmlEmoji:function(l){return (h.span(null,j(l,g))).innerHTML;}};e.exports=k;},null);
__d("Emote",["DOMEmote","JSXDOM","transformTextToDOM"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j={htmlEmoteWithoutFBID:function(k,l){return (h.span(null,i(k,g))).innerHTML;},htmlEmote:function(k,l){return (h.span(null,i(k,[g]))).innerHTML;}};e.exports=j;},null);
__d("TextWithEmoticons.react",["Emoji","Emote","React"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=i.createClass({displayName:"ReactTextWithEmoticons",render:function(){if(!this.props.renderEmoticons&&!this.props.renderEmoji)return i.createElement("span",null,this.props.text);var k;if(this.props.renderEmoticons&&this.props.renderEmoji){k=g.htmlEmojiAndEmoteWithoutFBID(this.props.text);}else if(this.props.renderEmoticons){k=h.htmlEmoteWithoutFBID(this.props.text);}else k=g.htmlEmoji(this.props.text);return i.createElement("span",{dangerouslySetInnerHTML:{__html:k}});}});e.exports=j;},null);
__d("TextWithEntities.react",["Link.react","React","BaseTextWithEntities.react","TextWithEmoticons.react"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';function k(m){return (m).replace(/<3\b|&hearts;/g,'\u2665');}var l=h.createClass({displayName:"TextWithEntities",_renderText:function(m){if(this.props.renderEmoticons||this.props.renderEmoji){return (h.createElement(j,{text:m,renderEmoticons:this.props.renderEmoticons,renderEmoji:this.props.renderEmoji}));}else return k(m);},_renderRange:function(m,n){if(this.props.interpolator){return this.props.interpolator(m,n);}else return (h.createElement(g,{href:n.entity},m));},render:function(){return (h.createElement(i,h.__spread({},this.props,{textRenderer:this._renderText,rangeRenderer:this._renderRange,ranges:this.props.ranges,imageRanges:this.props.imageRanges,aggregatedRanges:this.props.aggregatedRanges,text:this.props.text})));}});e.exports=l;},null);
__d("MessengerDispatcher",["Dispatcher"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';e.exports=new g();},null);
__d("ImageSourceType",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={PROFILE_PICTURE:'profile_picture',IMAGE:'image'};e.exports=g;},null);
__d("ImageSourceRequest",["CurrentUser","ImageSourceType","KeyedCallbackManager","PhotoResizeModeConst","MercuryServerDispatcher","arrayContains"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();function m(){"use strict";this._request={fbid:null,type:null,width:null,height:null,resize_mode:null};this._callback=null;}m.prototype.setFBID=function(q){"use strict";this._request.fbid=q;return this;};m.prototype.setType=function(q){"use strict";if(!l([h.PROFILE_PICTURE,h.IMAGE],q))throw new TypeError('ImageSourceRequest.setType: invalid type '+q);this._request.type=q;return this;};m.prototype.setDimensions=function(q,r){"use strict";this._request.width=q;this._request.height=r;return this;};m.prototype.setResizeMode=function(q){"use strict";if(!l([j.COVER,j.CONTAIN],q))throw new TypeError('ImageSourceRequest.setResizeMode: invalid resize mode '+q);this._request.resize_mode=q;return this;};m.prototype.setCallback=function(q){"use strict";this._callback=q;return this;};m.prototype.send=function(){"use strict";if(!this._request.fbid||!this._request.width||!this._request.height||!this._request.type||!this._request.resize_mode||!this._callback)throw new Error('ImageSourceRequest: You must set all the fields');var q=o(),r=p(this._request);q.executeOrEnqueue(r,this._callback);if(q.getUnavailableResourcesFromRequest(r).length===1){k.trySend('/ajax/image_source.php',{requests:[this._request]});return true;}return false;};var n=null;function o(){if(n)return n;var q=new i();n=q;k.registerEndpoints({'/ajax/image_source.php':{request_user_id:g.getID(),mode:k.BATCH_DEFERRED_MULTI,batch_function:function(r,s){var t;(t=r.requests).push.apply(t,s.requests);return r;},handler:function(r,s){var t=s.getData().requests;for(var u=0;u<t.length;++u)q.setResource(p(t[u]),r[u]);}}});return q;}function p(q){return [q.fbid,q.type,q.width,q.height,q.resize_mode].join('|');}e.exports=m;},null);
__d("MercuryParticipantFetcher",["LogHistory","MercuryIDs","MercuryPayloadSource","MercuryServerPayloadPreprocessor","Set","ShortProfiles","setImmediate"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();'use strict';var n=g.getInstance('short_profiles');function o(q){this.$MercuryParticipantFetcher0=j.getForFBID(q);this.$MercuryParticipantFetcher1=false;this.$MercuryParticipantFetcher2=new k();this.$MercuryParticipantFetcher3=new k();}o.prototype.fetch=function(q){this.$MercuryParticipantFetcher4(q);this.$MercuryParticipantFetcher5();};o.prototype.fetchMulti=function(q){q.forEach(function(r){return this.$MercuryParticipantFetcher4(r);}.bind(this));this.$MercuryParticipantFetcher5();};o.prototype.$MercuryParticipantFetcher4=function(q){if(!this.$MercuryParticipantFetcher3.has(q))this.$MercuryParticipantFetcher2.add(q);};o.prototype.$MercuryParticipantFetcher5=function(){if(this.$MercuryParticipantFetcher1||this.$MercuryParticipantFetcher2.size===0)return;this.$MercuryParticipantFetcher1=true;m(function(){this.$MercuryParticipantFetcher1=false;this.$MercuryParticipantFetcher2.forEach(function(q){return this.$MercuryParticipantFetcher3.add(q);}.bind(this));this.$MercuryParticipantFetcher6(this.$MercuryParticipantFetcher2,function(q){q.forEach(function(r){return this.$MercuryParticipantFetcher3["delete"](r.id);}.bind(this));this.$MercuryParticipantFetcher7(q);}.bind(this));this.$MercuryParticipantFetcher2.clear();}.bind(this));};o.prototype.$MercuryParticipantFetcher6=function(q,r){var s=[];q.forEach(function(t){var u=h.tokenize(t),v=u.type,w=u.value;v==='fbid'&&s.push(w);});if(s.length>0){l.getMulti(s,function(t){var u=[];for(var v in t)u.push(p(t[v],v));r(u);if(u.length!==s.length)n.error('server_fetch_participant_count_error',{expectedIDs:s,receivedIDs:Object.keys(t)});});n.debug('client_fetch_participants',{userIDs:s});}};o.prototype.$MercuryParticipantFetcher7=function(q){this.$MercuryParticipantFetcher0.handleUpdate({participants:q,from_client:false,payload_source:i.SERVER_FETCH_PARTICIPANTS});};function p(q,r){var s=Object.assign({gender:q.gender,fbid:q.id||r,href:q.uri,id:h.getParticipantIDFromUserID(q.id||r),image_src:q.thumbSrc,name:q.name,short_name:q.firstName,employee:q.employee,is_employee_away:q.is_employee_away,type:q.type,vanity:q.vanity,is_friend:q.is_friend,is_messenger_user:q.is_messenger_user,social_snippets:q.social_snippets},{});if(q.officeStatus){s.officeStatus=q.officeStatus;s.officeStatusStartDate=q.officeStatusStartDate;s.officeStatusEndDate=q.officeStatusEndDate;s.officeStatusComment=q.officeStatusComment;s.officeStatusLocation=q.officeStatusLocation;}return s;}e.exports=o;},null);
__d("MercuryVanityIDMap",["Map","MercuryAssert"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';var i=new g(),j=new g(),k={getID:function(l){return i.get(l);},getVanity:function(l){return j.get(l);},hasID:function(l){return j.has(l);},hasVanity:function(l){return i.has(l);},set:function(l,m){h.isParticipantID(m);i.set(l,m);j.set(m,l);}};e.exports=k;},null);
__d("MercuryParticipants",["CurrentUser","EventEmitter","ImageSourceRequest","ImageSourceType","ImmutableObject","KeyedCallbackManager","MercuryAssert","MercuryIDs","MercuryParticipantFetcher","MercuryParticipantTypes","MercuryParticipantsConstants","MercuryDispatcher","MercuryVanityIDMap","PhotoResizeModeConst","Set","createObjectFrom","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){b.__markCompiled&&b.__markCompiled();'use strict';var x='change';function y(aa){this.$MercuryParticipants0=aa;this.$MercuryParticipants1=new h();this.$MercuryParticipants2=new l();this.$MercuryParticipants3=new o(this.$MercuryParticipants0);this.$MercuryParticipants4=r.getForFBID(this.$MercuryParticipants0);this.$MercuryParticipants4.subscribe('update-participants',function(ba,ca){if(ca.participants&&ca.participants.length>0)this.$MercuryParticipants5(ca.participants);}.bind(this));}y.prototype.addListener=function(aa,ba){return this.$MercuryParticipants1.addListener(aa,ba);};y.prototype.getIDFromVanityOrFBID=function(aa){if(!aa)return null;if(s.hasVanity(aa))return s.getID(aa);if(/^\d+$/.test(aa))return n.getParticipantIDFromUserID(aa);};y.prototype.getNow=function(aa){return this.$MercuryParticipants6(aa);};y.prototype.getOrFetch=function(aa){var ba=this.$MercuryParticipants6(aa);if(!ba)this.$MercuryParticipants3.fetch(aa);return ba;};y.prototype.get=function(aa,ba){m.isParticipantID(aa);return this.$MercuryParticipants7([aa],function(ca){ba(ca[aa]);});};y.prototype.getMulti=function(aa,ba){return this.$MercuryParticipants7(aa,ba);};y.prototype.getBigImageMulti=function(aa,ba){m.allParticipantIDs(aa);var ca=q.BIG_IMAGE_SIZE;return this.$MercuryParticipants7(aa,function(da){var ea={},fa=0,ga=new u(),ha=function(la,ma){fa++;ea[la]=ma;if(fa===aa.length){ba(ea);if(ga.size>0)this.$MercuryParticipants8(ga);}}.bind(this),ia=function(la,ma){this.$MercuryParticipants2.setResource(la,k.set(this.$MercuryParticipants2.getResource(la),{big_image_src:ma.uri}));ga.add(la);ha(la,ma.uri);}.bind(this);for(var ja in da){var ka=da[ja];if(!ka.big_image_src){new i().setFBID(n.getUserIDFromParticipantID(ja)).setType(j.PROFILE_PICTURE).setDimensions(ca,ca).setResizeMode(t.COVER).setCallback(ia.bind(null,ja)).send();}else ha(ka.id,ka.big_image_src);}}.bind(this));};y.prototype.getOrderedBigImageMulti=function(aa,ba){return this.getBigImageMulti(aa,function(ca){ba(aa.map(function(da){return ca[da];}));});};y.prototype.$MercuryParticipants7=function(aa,ba){m.allParticipantIDs(aa);var ca=this.$MercuryParticipants2.executeOrEnqueue(aa,ba),da=this.$MercuryParticipants2.getUnavailableResources(ca).filter(function(ea){var fa=n.tokenize(ea),ga=fa.type,ha=fa.value;if(ga==='email'){this.$MercuryParticipants9(ea,ha);return false;}return true;}.bind(this));this.$MercuryParticipants3.fetchMulti(da);return this.$MercuryParticipantsa(ca);};y.prototype.$MercuryParticipants6=function(aa){var ba=this.$MercuryParticipants2.getResource(aa);if(!ba){var ca=n.tokenize(aa),da=ca.type,ea=ca.value;if(da==='email')ba=this.$MercuryParticipants9(aa,ea);}return ba;};y.prototype.$MercuryParticipants9=function(aa,ba){var ca=new k(z(aa,ba));this.$MercuryParticipants2.setResource(aa,ca);return ca;};y.prototype.$MercuryParticipants8=function(aa){this.$MercuryParticipants1.emit(x,aa);};y.prototype.$MercuryParticipants5=function(aa){var ba=aa.map(function(ca){return ca.id;});aa=aa.map(function(ca){if(ca.vanity)s.set(ca.vanity,ca.id);var da=this.$MercuryParticipants2.getResource(ca.id);return da?k.set(da,ca):new k(this.$MercuryParticipantsb(ca));}.bind(this));this.$MercuryParticipants2.addResourcesAndExecute(v(ba,aa));this.$MercuryParticipants8(new u(ba));};y.prototype.$MercuryParticipantsb=function(aa){var ba=aa.type===p.USER||aa.type===p.FRIEND;if(!ba)return aa;if(!aa.name&&!aa.href&&!aa.vanity){var ca=w._("Facebook User");aa.name=ca;aa.short_name=ca;}return aa;};y.prototype.$MercuryParticipantsa=function(aa){return {remove:function(){this.$MercuryParticipants2.unsubscribe(aa);}.bind(this)};};function z(aa,ba){return {gender:q.UNKNOWN_GENDER,href:null,id:aa,image_src:q.EMAIL_IMAGE,big_image_src:q.EMAIL_IMAGE,name:ba,short_name:ba,employee:false};}e.exports=new y(g.getID());},null);
__d("MessengerURIConstants",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();'use strict';var g={COMPOSE_SUBPATH:'/new',GROUPS_PATH:'/groups',PEOPLE_PATH:'/people',THREAD_PREFIX:'/t/',GROUP_PREFIX:'group-',RESERVED_WORDS:['groups','people','new','messenger','t']};e.exports=g;},null);
__d("MessengerStateProcessor",["MercuryAPIArgsSource","MercuryIDs","MercuryParticipantTypes","MercuryParticipants","MercuryThreadIDMap","MercuryThreads","MercuryVanityIDMap","MessengerURIConstants"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();'use strict';var o={preprocess:function(q){var r=q.activeThreadID;if(r){var s=h.getUserIDFromThreadID(r),t=s&&j.getNow(h.getParticipantIDFromUserID(s));if(t&&t.type!==i.EVENT){q.threadKey=t.vanity||s;}else if(s&&!t){var u=h.getParticipantIDFromUserID(s);q.threadKey=m.hasID(u)?m.getVanity(u):s;}else{var v=k.get(),w=v.getFBIDFromClientIDNow(r);q.threadKey=w||r;}}delete q.activeThreadID;return q;},postprocess:function(q){var r=k.get(),s=l.get(),t=p(q.threadKey),u;u=h.isValid(t)?t:r.getClientIDFromFBIDNow(t);if(!u){var v=j.getIDFromVanityOrFBID(t),w=v&&s.getCanonicalThreadToParticipant(v,null,g.MESSENGER);if(w)u=w.thread_id;}if(u){q.activeThreadID=u;q.serverThreadID=r.getFBIDFromClientIDNow(u);}delete q.threadKey;return q;}};function p(q){if(!q)return null;return q.startsWith(n.GROUP_PREFIX)?q.substr(n.GROUP_PREFIX.length):q;}e.exports=o;},null);
__d("MessengerURISerializer",["MessengerStateProcessor","MessengerURIConstants","MessengerView","URI","WWWBase"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l='/?$',m={serialize:function(v){var w=new j(k.uri);v=g.preprocess(v);switch(v.masterView){case i.MASTER.GROUPS:w.setPath(h.GROUPS_PATH);break;case i.MASTER.PEOPLE:w.setPath(h.PEOPLE_PATH);break;}if(v.detailView===i.DETAIL.COMPOSE){w.setPath(w.getPath()+h.COMPOSE_SUBPATH);}else if(v.threadKey)w.setPath(w.getPath()+h.THREAD_PREFIX+t(v.threadKey));return w;},deserialize:function(v){var w={},x=v.getPath();if(x.match('^'+h.GROUPS_PATH)){w.masterView=i.MASTER.GROUPS;}else if(x.match('^'+h.PEOPLE_PATH)){w.masterView=i.MASTER.PEOPLE;}else w.masterView=i.MASTER.RECENT;if(x.match(h.COMPOSE_SUBPATH+l)){w.detailView=i.DETAIL.COMPOSE;}else{var y=n(x);if(y&&!r(y)){w.threadKey=u(y);w.detailView=i.DETAIL.THREAD;}}return g.postprocess(w);}};function n(v){var w=v.match(h.THREAD_PREFIX+'([^/]+)'+l);return w&&w[1];}var o=h.RESERVED_WORDS.join('|'),p=new RegExp('^('+o+')$'),q=new RegExp('^\\.('+o+')$');function r(v){return !!v.match(p);}function s(v){return !!v.match(q);}function t(v){v=r(v)?'.'+v:v;return j.encodeComponent(v);}function u(v){v=j.decodeComponent(v);return s(v)?v.substr(1):v;}e.exports=m;},null);
__d("MessengerActions",["MessengerDispatcher","MessengerURISerializer","MessengerView","URI","goURI","keyMirror"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';var m=l({CHANGE_FOLDER:null,HIDE_DIALOG:null,REPLACE_INFO_PANEL_VISIBILITY:null,REPLACE_STATE:null,SHOW_DIALOG:null}),n={Types:m,changeDetailView:function(p){o(function(q){if(q.detailView!==p)return {detailView:p};});},changeMasterView:function(p){o(function(q){if(q.masterView!==p)return {masterView:p};});},selectThread:function(p){o(function(q){if(q.activeThreadID!==p)return {activeThreadID:p,detailView:i.DETAIL.THREAD};});},changeState:function(p){g.dispatch({type:m.REPLACE_STATE,nextState:p});},changeInfoPanelVisibility:function(p){g.dispatch({type:n.Types.REPLACE_INFO_PANEL_VISIBILITY,nextState:{infoPanelVisibility:p}});},showDialog:function(p,q){g.dispatch({type:n.Types.SHOW_DIALOG,dialogClass:p,dialogProps:q});},hideDialog:function(p){g.dispatch({type:n.Types.HIDE_DIALOG,dialogClass:p});},changeFolder:function(p){g.dispatch({type:n.Types.CHANGE_FOLDER,folder:p});}};function o(p){var q=h.deserialize(new j(window.location.href)),r=p(q);if(r)k(h.serialize(Object.assign(q,r)));}e.exports=n;},null);
__d("P2PActionConstants",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();'use strict';var g={CREDIT_CARDS_UPDATED:'credit_cards_updated',CHANNEL_EVENTS_ALLOWED:'channel_events_allowed',CHANNEL_EVENTS_IGNORED:'channel_events_ignored',CREDIT_CARD_ADDED:'credit_card_added',CREDIT_CARD_ADDED_ERROR:'credit_card_added_error',CREDIT_CARD_DELETED:'credit_card_deleted',CREDIT_CARD_DELETED_ERROR:'credit_card_deleted_error',CREDIT_CARD_UPDATED:'credit_card_updated',CREDIT_CARD_UPDATED_ERROR:'credit_card_updated_error',PRESET_CREDIT_CARD_UPDATED:'preset_credit_card_updated',PRESET_CREDIT_CARD_UPDATED_ERROR:'preset_credit_card_updated_error',CREDIT_CARD_VERIFIED:'credit_card_verified',CREDIT_CARD_VERIFIED_ERROR:'credit_card_verified_error',TRANSFERS_UPDATED:'transfers_updated',TRANSFERS_UPDATED_ERROR:'transfers_updated_error',NUX_TRANSFERS_UPDATED:'nux_transfers_updated',TRANSFER_ADDED:'transfer_added',TRANSFER_ADDED_ERROR:'transfer_added_error',TRANSFER_UPDATED:'transfer_updated',TRANSFER_UPDATED_ERROR:'transfer_updated_error',TRANSFER_ACCEPTED:'transfer_accepted',TRANSFER_DECLINED:'transfer_declined',CHAT_SEND_VIEW_OPENED:'chat_send_view_opened',CHAT_SEND_VIEW_CLOSED:'chat_send_view_closed',BIN_NUMBER_VALIDATED:'bin_number_validated',BIN_NUMBER_VALIDATED_ERROR:'bin_number_validated_error',USER_ELIGIBILITY_UDPATED:'user_eligibility_updated',FRIENDS_LIST_UPDATED:'friends_list_updated',DIALOG_SHOWN:'dialog_shown',DIALOG_CLOSED:'dialog_closed',BANNER_STATES_UPDATED:'banner_states_updated',BANNER_DISMISSED:'banner_dismissed',BANNER_VIEWED:'banner_viewed',BANNER_COMPLETED:'banner_completed',MONEYPENNY_TRANSFER_CREATED:'moneypenny_transfer_created',MONEYPENNY_TRANSFER_CREATED_ERROR:'moneypenny_transfer_created_error',PRODUCT_ITEM_BANNER_UPDATED:'product_item_banner_updated',PRODUCT_ITEM_BANNER_DISMISSED:'product_item_banner_dismissed',EXTENSIVE_TRANSFER_DETAILS_UPDATED:'extensive_transfer_details_updated'};e.exports=g;},null);
__d("P2PDispatcher",["Dispatcher"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';e.exports=new g();},null);
__d("P2PActions",["ChatOpenTab","MessengerActions","P2PActionConstants","P2PDispatcher"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';var k={updateCreditCards:function(l){j.dispatch({type:i.CREDIT_CARDS_UPDATED,data:l});},ignoreCreditCardChannelEvents:function(){j.dispatch({type:i.CHANNEL_EVENTS_IGNORED});},allowCreditCardChannelEvents:function(){j.dispatch({type:i.CHANNEL_EVENTS_ALLOWED});},addCreditCard:function(l){j.dispatch({type:i.CREDIT_CARD_ADDED,data:l});},addCreditCardError:function(l){j.dispatch({type:i.CREDIT_CARD_ADDED_ERROR,data:l});},updatePresetCreditCard:function(l){j.dispatch({type:i.PRESET_CREDIT_CARD_UPDATED,data:l});},updatePresetCreditCardError:function(l){j.dispatch({type:i.PRESET_CREDIT_CARD_UPDATED_ERROR,data:l});},updateCreditCard:function(l){j.dispatch({type:i.CREDIT_CARD_UPDATED,data:l});},updateCreditCardError:function(l){j.dispatch({type:i.CREDIT_CARD_UPDATED_ERROR,data:l});},deleteCreditCard:function(l){j.dispatch({type:i.CREDIT_CARD_DELETED,data:l});},deleteCreditCardError:function(l){j.dispatch({type:i.CREDIT_CARD_DELETED_ERROR,data:l});},verifyCreditCard:function(l){j.dispatch({type:i.CREDIT_CARD_VERIFIED,data:l});},verifyCreditCardError:function(l){j.dispatch({type:i.CREDIT_CARD_VERIFIED_ERROR,data:l});},updateTransfers:function(l){j.dispatch({type:i.TRANSFERS_UPDATED,data:l});},updateTransfersError:function(l){j.dispatch({type:i.TRANSFERS_UPDATED_ERROR,data:l});},updateNUXTransfers:function(l){j.dispatch({type:i.NUX_TRANSFERS_UPDATED,data:l});},transferAdded:function(l){j.dispatch({type:i.TRANSFER_ADDED,data:l});},transferAddedError:function(l){j.dispatch({type:i.TRANSFER_ADDED_ERROR,data:l});},transferUpdated:function(l){j.dispatch({type:i.TRANSFER_UPDATED,data:l});},transferUpdatedError:function(l){j.dispatch({type:i.TRANSFER_UPDATED_ERROR,data:l});},transferAccepted:function(){j.dispatch({type:i.TRANSFER_ACCEPTED});},transferDeclined:function(l){j.dispatch({type:i.TRANSFER_DECLINED,data:l});},chatSendViewOpened:function(l){function m(){j.dispatch({type:i.CHAT_SEND_VIEW_OPENED,data:l});}if(g.canOpenTab()){g.openThread(l.threadID,null,null,m);}else{h.selectThread(l.threadID);m();}},chatSendViewClosed:function(l){j.dispatch({type:i.CHAT_SEND_VIEW_CLOSED,data:l});},binNumberValidated:function(l){j.dispatch({type:i.BIN_NUMBER_VALIDATED,data:l});},binNumberValidatedError:function(l){j.dispatch({type:i.BIN_NUMBER_VALIDATED_ERROR,data:l});},friendsListUpdated:function(l){j.dispatch({type:i.FRIENDS_LIST_UPDATED,data:l});},userEligibilityUpdated:function(l){j.dispatch({type:i.USER_ELIGIBILITY_UDPATED,data:l});},showDialog:function(l,m){j.dispatch({type:i.DIALOG_SHOWN,data:{dialogClass:l,dialogProps:m}});},hideDialog:function(){j.dispatch({type:i.DIALOG_CLOSED});},bannerStatesUpdated:function(l){j.dispatch({type:i.BANNER_STATES_UPDATED,data:l});},bannerDismissed:function(l){j.dispatch({type:i.BANNER_DISMISSED,data:l});},bannerCompleted:function(l){j.dispatch({type:i.BANNER_COMPLETED,data:l});},moneypennyTransferCreated:function(l){j.dispatch({type:i.MONEYPENNY_TRANSFER_CREATED,data:l});},moneypennyTransferCreatedError:function(l){j.dispatch({type:i.MONEYPENNY_TRANSFER_CREATED_ERROR,data:l});},productItemBannerUpdated:function(l){j.dispatch({type:i.PRODUCT_ITEM_BANNER_UPDATED,data:l});},productItemBannerDismissed:function(l){j.dispatch({type:i.PRODUCT_ITEM_BANNER_DISMISSED,data:l});},extensiveTransferDetailsLoaded:function(l){j.dispatch({type:i.EXTENSIVE_TRANSFER_DETAILS_UPDATED,data:l});}};e.exports=k;},null);
__d("P2PAPIUtils",["CreditCardFormParam","fbt","guid"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j={getRandomDigits:function(k){return Math.random().toString().slice(2,2+k);},genRequestID:function(){return 'id:'+i()+':'+Date.now();},genOfflineThreadingID:function(){return Date.now()+''+j.getRandomDigits(6);},getUncaughtErrorMessage:function(){return (h._("Sorry, something went wrong. Please try again later."));},prepareCardMutationData:function(k){var l={},m=k[g.CARD_NUMBER].replace(/ /g,'');l[g.CARD_NUMBER]=m;if(typeof k[g.CARD_EXPIRATION]==='string'){var n=k[g.CARD_EXPIRATION].split('/');l[g.MONTH]=n[0];l[g.YEAR]=n[1];l[g.CARD_EXPIRATION]={};l[g.CARD_EXPIRATION][g.MONTH]=l[g.MONTH];l[g.CARD_EXPIRATION][g.YEAR]=l[g.YEAR];}else{l[g.MONTH]=k[g.CARD_EXPIRATION][g.MONTH];l[g.YEAR]=k[g.CARD_EXPIRATION][g.YEAR];}return Object.assign({},k,l);}};e.exports=j;},null);
__d("XP2PBannerDismissalsUpdateController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/p2p\/banner_dismissals\/_update\/",{banner_type:{type:"String",required:true}});},null);
__d("XP2PBannerStatesController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/p2p\/banner_states\/",{});},null);
__d("XP2PBannerViewsUpdateController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/p2p\/banner_views\/_update\/",{banner_type:{type:"String",required:true}});},null);
__d("XP2PCardBINValidateController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/p2p\/card_bin\/validate\/",{bin_number:{type:"String",required:true}});},null);
__d("XP2PCreditCardDeleteController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/p2p\/credit_cards\/_delete\/",{});},null);
__d("XP2PCreditCardUpdateController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/p2p\/credit_cards\/_update\/",{});},null);
__d("XP2PCreditCardCreateController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/p2p\/credit_cards\/_create\/",{});},null);
__d("XP2PCreditCardVerifyController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/p2p\/credit_cards\/_verify\/",{});},null);
__d("XP2PCreditCardsController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/p2p\/credit_cards\/",{type:{type:"Int",defaultValue:1}});},null);
__d("XP2PExtensiveTransferDetailsController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/p2p\/transaction\/details\/",{id:{type:"String",required:true}});},null);
__d("XP2PFriendPickerController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/p2p\/friend_picker\/",{limit:{type:"Int",defaultValue:100},query:{type:"String"}});},null);
__d("XMoneypennyPaymentsCreateController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/moneypenny\/payments\/_create\/",{});},null);
__d("XP2PPasswordProtectionStatusController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/p2p\/password_protection_status\/",{});},null);
__d("XP2PPasswordProtectionStatusUpdateController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/p2p\/password_protection_status\/_update\/",{});},null);
__d("XP2PPresetCreditCardSetController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/p2p\/preset_credit_card\/_set\/",{});},null);
__d("XP2PProductItemBannerController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/p2p\/product_item_banner\/",{other_user_id:{type:"String",required:true}});},null);
__d("XP2PTransactionsCampaignCreateController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/p2p\/transactions\/campaign\/_create\/",{});},null);
__d("XP2PTransactionsCancelController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/p2p\/transactions\/_cancel\/",{});},null);
__d("XP2PTransactionsCreateController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/p2p\/transactions\/_create\/",{});},null);
__d("XP2PTransactionsController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/p2p\/transactions\/",{since:{type:"Int"}});},null);
__d("XP2PTransactionsDeclineController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/p2p\/transactions\/_decline\/",{});},null);
__d("XP2PUserEligibilityController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/p2p\/user_eligibility\/",{user_ids:{type:"StringVector",required:true}});},null);
__d("P2PAPI",["AsyncRequest","CreditCardFormParam","P2PActions","P2PAPIUtils","P2PPasswordProtectionParam","P2PPaymentCampaignNames","P2PPaymentCreditCardsTypes","P2PTransferParam","ImmutableObject","URI","XP2PBannerDismissalsUpdateController","XP2PBannerStatesController","XP2PBannerViewsUpdateController","XP2PCardBINValidateController","XP2PCreditCardDeleteController","XP2PCreditCardUpdateController","XP2PCreditCardCreateController","XP2PCreditCardVerifyController","XP2PCreditCardsController","XP2PExtensiveTransferDetailsController","XP2PFriendPickerController","XMoneypennyPaymentsCreateController","XP2PPasswordProtectionStatusController","XP2PPasswordProtectionStatusUpdateController","XP2PPresetCreditCardSetController","XP2PProductItemBannerController","XP2PTransactionsCampaignCreateController","XP2PTransactionsCancelController","XP2PTransactionsCreateController","XP2PTransactionsController","XP2PTransactionsDeclineController","XP2PUserEligibilityController","emptyFunction","isEmpty"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na){b.__markCompiled&&b.__markCompiled();'use strict';var oa={getAllCreditCards:function(){var pa=(y.getURIBuilder()).getURI();new g().setData({type:m.SENDING}).setURI(pa).setMethod('GET').setReadOnly(true).setAllowCrossPageTransition(true).setHandler(function(qa){var ra=qa.getPayload();if(!ra.error)i.updateCreditCards(ra);}.bind(this)).send();},createTransaction:function(pa){var qa=(ia.getURIBuilder()).getURI(),ra={},sa=pa.formData,ta=pa.success||ma,ua=pa.error||ma;ra[h.CREDENTIAL_ID]=sa[h.CREDENTIAL_ID];ra.amount=sa.amount;ra.receiver_id=sa.receiverId;ra.offline_threading_id=j.genOfflineThreadingID();ra.group_thread_fbid=sa.group_thread_fbid;new g().setData(ra).setMethod('POST').setURI(qa).setAllowCrossPageTransition(true).setHandler(function(va){var wa=va?va.getPayload():{};if(wa.error){ua(wa.error);}else{ta(wa);this.getAllCreditCards();}}.bind(this)).setErrorHandler(function(){ua({message:j.getUncaughtErrorMessage()});}.bind(this)).send();},addCreditCard:function(pa){i.ignoreCreditCardChannelEvents();var qa=(w.getURIBuilder()).getURI().getPath(),ra=new p('/ajax/payment/token_proxy.php').addQueryData('tpe',qa);pa=j.prepareCardMutationData(pa);var sa=new o(pa);new g().setData(pa).setMethod('POST').setURI(ra).setHandler(function(ta){var ua=ta.getPayload(),va={};if(!ua.errors){va[h.CREDENTIAL_ID]=ua[h.CREDENTIAL_ID];va.isPreset=ua.isPreset;va.isVerified=ua.isVerified;va.passwordProtection=ua.passwordProtection;sa=o.set(sa,va);i.addCreditCard(sa);if(ua.isPreset)i.transferAccepted();}else i.addCreditCardError(Object.assign({requestID:sa.requestID},ua));i.allowCreditCardChannelEvents();}.bind(this)).setErrorHandler(function(){i.addCreditCardError({requestID:sa.requestID,errors:{general:{message:j.getUncaughtErrorMessage()}}});i.allowCreditCardChannelEvents();}.bind(this)).send();},getTransactions:function(pa){pa=pa||{};var qa={},ra=pa,sa=(ja.getURIBuilder()).getURI(),ta=new o(ra);if(ra.since)qa.since=ra.since;return new g().setData(qa).setURI(sa).setMethod('GET').setReadOnly(true).setHandler(function(ua){var va=ua.getPayload();if(!va.error){i.updateTransfers(va);}else i.updateTransfersError(Object.assign({requestID:ta.requestID},va));}.bind(this)).setErrorHandler(function(){i.updateTransfersError({error:{message:j.getUncaughtErrorMessage()},requestID:ta.requestID});}.bind(this)).send();},getExtensiveTransferDetailsByID:function(pa){var qa=(z.getURIBuilder()).setString('id',pa).getURI();new g().setURI(qa).setMethod('GET').setReadOnly(true).setHandler(function(ra){var sa=ra.getPayload();if(!sa.error)i.extensiveTransferDetailsLoaded(sa);}.bind(this)).send();},getNUXTransactions:function(){var pa=(new Date()),qa=Math.round((pa.setDate(pa.getDate()-15))/1000),ra=(ja.getURIBuilder()).getURI();return new g().setData({since:qa}).setURI(ra).setMethod('GET').setReadOnly(true).setHandler(function(sa){var ta=sa.getPayload();if(!ta.error)i.updateNUXTransfers(ta);}.bind(this)).send();},updatePresetCreditCard:function(pa){var qa=(ea.getURIBuilder()).getURI();new g().setData(pa).setURI(qa).setMethod('POST').setHandler(function(ra){var sa=ra.getPayload();if(!sa.error){i.updatePresetCreditCard(Object.assign({},sa,{requestID:pa.requestID}));i.transferAccepted();}else i.updatePresetCreditCardError(Object.assign({},sa,{requestID:pa.requestID}));}.bind(this)).setErrorHandler(function(){i.updatePresetCreditCardError({error:{message:j.getUncaughtErrorMessage()},requestID:pa.requestID});}.bind(this)).send();},updateCreditCard:function(pa){i.ignoreCreditCardChannelEvents();var qa=(v.getURIBuilder()).getURI().getPath(),ra=new p('/ajax/payment/token_proxy.php').addQueryData('tpe',qa);pa=j.prepareCardMutationData(pa);var sa=new o(pa);new g().setData(pa).setMethod('POST').setURI(ra).setHandler(function(ta){var ua=ta.getPayload();if(!ua.errors){i.updateCreditCard(sa);}else i.updateCreditCardError(Object.assign({},ua,{requestID:sa.requestID}));i.allowCreditCardChannelEvents();}.bind(this)).setErrorHandler(function(){i.updateCreditCardError({errors:{general:{message:j.getUncaughtErrorMessage()}},requestID:sa.requestID});i.allowCreditCardChannelEvents();}.bind(this)).send();},deleteCreditCard:function(pa){var qa=(u.getURIBuilder()).getURI();new g().setData(pa).setMethod('POST').setURI(qa).setHandler(function(ra){var sa=ra.getPayload();if(!sa.error){i.deleteCreditCard(Object.assign({},sa,{requestID:pa.requestID}));}else i.deleteCreditCardError(Object.assign({},sa,{requestID:pa.requestID}));}.bind(this)).setErrorHandler(function(){i.deleteCreditCardError({error:{message:j.getUncaughtErrorMessage()},requestID:pa.requestID});}.bind(this)).send();},getPasswordProtectionSetting:function(pa){var qa=(ca.getURIBuilder()).getURI(),ra=pa.success||ma,sa=pa.error||ma;new g().setURI(qa).setMethod('GET').setReadOnly(true).setHandler(function(ta){var ua=ta?ta.getPayload():[];if(ua.error){sa();}else ra(ua);}.bind(this)).setErrorHandler(function(){sa();}.bind(this)).send();},setPasswordProtectionSetting:function(pa){var qa=(da.getURIBuilder()).getURI(),ra=pa.formData,sa=pa.success||ma,ta=pa.error||ma,ua={};ua[k.STATUS]=ra[k.STATUS];new g().setData(ua).setURI(qa).setMethod('POST').setHandler(function(va){var wa=va?va.getPayload():{};if(wa.error){ta(wa.error);}else sa();}.bind(this)).setErrorHandler(function(){ta();}.bind(this)).send();},declineTransaction:function(pa){var qa=(ka.getURIBuilder()).getURI(),ra=pa.formData,sa=pa.success||ma,ta=pa.error||ma,ua={};ua[n.TRANSFER_ID]=ra[n.TRANSFER_ID];new g().setData(ua).setURI(qa).setMethod('POST').setHandler(function(va){var wa=va?va.getPayload():{},xa={};if(wa.error){ta(wa.error);}else{sa();xa[n.TRANSFER_ID]=ua[n.TRANSFER_ID];i.transferDeclined(xa);}}.bind(this)).setErrorHandler(function(){ta();}.bind(this)).send();},cancelTransaction:function(pa){var qa=(ha.getURIBuilder()).getURI(),ra=pa.formData,sa=pa.success||ma,ta=pa.error||ma,ua={};ua[n.TRANSFER_ID]=ra[n.TRANSFER_ID];new g().setData(ua).setURI(qa).setMethod('POST').setHandler(function(va){var wa=va?va.getPayload():{};if(wa.error){ta(wa.error);}else sa();}.bind(this)).setErrorHandler(function(){ta();}.bind(this)).send();},verifyCreditCard:function(pa){var qa=(x.getURIBuilder()).getURI().getPath(),ra=new p('/ajax/payment/token_proxy.php').addQueryData('tpe',qa);new g().setData(pa).setMethod('POST').setURI(ra).setHandler(function(sa){var ta=sa.getPayload();if(!ta.error){i.verifyCreditCard(Object.assign({},ta,{requestID:pa.requestID}));}else i.verifyCreditCardError(Object.assign({},ta,{requestID:pa.requestID}));}.bind(this)).setErrorHandler(function(){i.verifyCreditCardError({error:{message:j.getUncaughtErrorMessage()},requestID:pa.requestID});}.bind(this)).send();},validateBINNumber:function(pa){pa=pa||{};var qa=new o(pa),ra=(t.getURIBuilder()).setString('bin_number',pa.binNumber).getURI();return new g().setURI(ra).setMethod('GET').setReadOnly(true).setHandler(function(sa){var ta=sa.getPayload();if(!ta.error){i.binNumberValidated(Object.assign({},ta,{requestID:pa.requestID}));}else i.binNumberValidatedError(Object.assign({},ta,{requestID:qa.requestID}));}.bind(this)).send();},getUserEligibility:function(pa){pa=pa||{};var qa=(la.getURIBuilder()).setStringVector('user_ids',pa.userIDs).getURI();return new g().setURI(qa).setMethod('GET').setReadOnly(true).setAllowCrossPageTransition(true).setHandler(function(ra){var sa=ra.getPayload();if(!sa.error)i.userEligibilityUpdated(sa);}.bind(this)).send();},getFriendsList:function(pa,qa){var ra=(aa.getURIBuilder()).setInt('limit',pa).setString('query',qa).getURI();return new g().setURI(ra).setMethod('GET').setReadOnly(true).setHandler(function(sa){var ta=sa.getPayload();if(!ta.error)i.friendsListUpdated(ta);}.bind(this)).send();},getBannerStates:function(){var pa=(r.getURIBuilder()).getURI();new g().setURI(pa).setMethod('GET').setReadOnly(true).setHandler(function(qa){var ra=qa.getPayload();if(!ra.error)i.bannerStatesUpdated(ra);}.bind(this)).send();},incrementBannerViews:function(pa){var qa=(s.getURIBuilder()).setString('banner_type',pa).getURI();new g().setMethod('POST').setURI(qa).send();},incrementBannerDismissals:function(pa){var qa;i.bannerDismissed(pa);qa=(q.getURIBuilder()).setString('banner_type',pa).getURI();new g().setMethod('POST').setURI(qa).send();},createMoneypennyTransfer:function(pa){var qa=(ba.getURIBuilder()).getURI();new g().setMethod('POST').setURI(qa).setData({item_id:pa.item_id,credential_id:pa.credential_id,amount:pa.amount,external_request_id:pa.external_request_id}).setHandler(function(ra){var sa=ra.getPayload();if(!sa.error){i.moneypennyTransferCreated(Object.assign({},sa,{requestID:pa.requestID}));this.getAllCreditCards();}else i.moneypennyTransferCreatedError(Object.assign({},sa,{requestID:pa.requestID}));}.bind(this)).setErrorHandler(function(){i.moneypennyTransferCreatedError({error:{message:j.getUncaughtErrorMessage()},requestID:pa.requestID});}).send();},createFinancialIncentivesTransfer:function(pa){var qa=(ga.getURIBuilder()).getURI(),ra=pa.success||ma,sa=pa.error||ma,ta={};ta[h.CREDENTIAL_ID]=pa.credential_id;ta.external_request_id=j.genOfflineThreadingID();ta.campaign_name=l.SEVIPER;new g().setData(ta).setURI(qa).setMethod('POST').setHandler(function(ua){var va=ua.getPayload();if(va.error){sa(va.error);}else ra();}).send();},getProductItemBannerData:function(pa){pa=pa||{};var qa=(fa.getURIBuilder()).setString('other_user_id',pa.otherUserID).getURI();return new g().setURI(qa).setMethod('GET').setReadOnly(true).setAllowCrossPageTransition(true).setHandler(function(ra){var sa=ra.getPayload();if(!sa.error&&!na(sa))i.productItemBannerUpdated(sa);}.bind(this)).send();}};e.exports=oa;},null);
__d("P2PUserEligibilityStore",["P2PActionConstants","EventEmitter","MercuryIDs","P2PAPI","P2PDispatcher"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l,m;for(var n in h)if(h.hasOwnProperty(n))p[n]=h[n];var o=h===null?null:h.prototype;p.prototype=Object.create(o);p.prototype.constructor=p;p.__superConstructor__=h;function p(){h.call(this);m={};l=k.register(this.onEventDispatched.bind(this));}p.prototype.onEventDispatched=function(q){var r=q.data,s=q.type;switch(s){case g.USER_ELIGIBILITY_UDPATED:this.handleEligibilityUpdated(r);this.emit('change');break;}};p.prototype.getEligibilityByUserIDs=function(q){var r=[],s,t,u={};for(var v=0;v<q.length;v++){t=q[v];s=m[t];if(s===(void 0)){m[t]=false;r.push(t);}u[t]=m[t];}if(r.length)j.getUserEligibility({userIDs:r});return u;};p.prototype.getEligibilityByUserID=function(q){var r=this.getEligibilityByUserIDs([q]);return r[q];};p.prototype.getEligibilityByThreadID=function(q){return (this.getEligibilityByUserID(i.getUserIDFromThreadID(q)));};p.prototype.handleEligibilityUpdated=function(q){for(var r=0;r<q.length;r++)m[q[r].user_id]=q[r].p2p_eligible;};e.exports=new p();},null);
__d("StoreBasedStateMixinHelper",["SubscriptionsHandler","invariant"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';function i(j){this.$StoreBasedStateMixinHelper0=j;this.$StoreBasedStateMixinHelper1=new g();}i.prototype.subscribeCallback=function(j){var k=this.$StoreBasedStateMixinHelper0.map(function(l){if(l.hasChanged&&l.getDispatchToken&&l.addListener){return l.addListener(j);}else if(l.subscribe){return l.subscribe('change',j);}else if(l.addListener){return l.addListener('change',j);}else h(false);});if(this.$StoreBasedStateMixinHelper0.length>0)this.$StoreBasedStateMixinHelper1.addSubscriptions.apply(this.$StoreBasedStateMixinHelper1,k);};i.prototype.release=function(){this.$StoreBasedStateMixinHelper1.release();};e.exports=i;},null);
__d("StoreAndPropBasedStateMixin",["StoreBasedStateMixinHelper","invariant","setImmediate"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';var j=function(){for(var k=[],l=0,m=arguments.length;l<m;l++)k.push(arguments[l]);return {getInitialState:function(){return this.constructor.calculateState(this.props);},componentWillMount:function(){h(this.constructor.calculateState);this._recalculateStateID=null;var n=function(){if(this.isMounted())this.setState(this.constructor.calculateState(this.props));this._recalculateStateID=null;}.bind(this);this._mixin=new g(k);this._mixin.subscribeCallback(function(){if(this._recalculateStateID===null)this._recalculateStateID=i(n);}.bind(this));},componentWillReceiveProps:function(n){this.setState(this.constructor.calculateState(n));},componentWillUnmount:function(){this._mixin.release();this._mixin=null;}};}.bind(this);e.exports=j;},null);
__d("P2PAmountUtils",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g=10000,h={isAmountOverLegalLimit:function(i){return parseFloat(this.sanitizeAmount(i))>=g;},isAmountZero:function(i){return parseFloat(this.sanitizeAmount(i))===0;},isValidSendAmount:function(i){return !this.isAmountOverLegalLimit(i)&&!this.isAmountZero(i);},sanitizeAmount:function(i){return i.replace(/[^0-9\.]+/g,'');}};e.exports=h;},null);
__d("DOMP2PTrigger",["CurrentEnvironment","JSXDOM","P2PAmountUtils","P2PTriggersUtils","TransformTextToDOMMixin","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m={MAX_ITEMS:40,match:function(n){var o=j.getMatches(n);if(!o||!o.length)return false;var p=o[0];if(!i.isValidSendAmount(p))return false;var q=o.index;return {startIndex:q,endIndex:q+p.length,element:this._element(p)};},_element:function(n){return (h.a({href:"#",className:(("_35i0")+(g.facebookdotcom?' '+"_4g4e":'')),"data-p2p-trigger":n},n));}};e.exports=Object.assign(m,k);},null);
__d("p2pTriggerJSXDOMToString",["DOMEmoji","DOMEmote","DOMP2PTrigger","JSXDOM","transformTextToDOM"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=function(m,n,o,p){var q=[];if(p)q.push(i);if(n)q.push(g);if(o)q.push(h);return (j.span(null,k(m,q))).innerHTML;};e.exports=l;},null);
__d("P2PTriggers.react",["DOM","Event","MercuryIDs","P2PActions","P2PUserEligibilityStore","StoreAndPropBasedStateMixin","React","nullthrows","p2pTriggerJSXDOMToString"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();'use strict';var p=m,q=p.PropTypes,r=m.createClass({displayName:"P2PTriggers",mixins:[l(k)],propTypes:{renderEmoji:q.bool,renderEmoticons:q.bool,text:q.string.isRequired,threadID:q.string.isRequired},getInitialState:function(){return {amount:''};},statics:{calculateState:function(s){var t=i.isGroupChat(s.threadID)||k.getEligibilityByThreadID(s.threadID);return {isThreadEligible:t};}},_clickListeners:(null),componentDidMount:function(){this._clickListeners=[];this.bindClickListeners();},componentWillUnmount:function(){this.unbindClickListeners();},bindClickListeners:function(){var s=n(this._clickListeners);if(!s.length){var t=g.scry(m.findDOMNode(this),'[data-p2p-trigger]');for(var u=0,v=t.length;u<v;u++)s.push(h.listen(t[u],'click',this.handleTriggerClick));}},unbindClickListeners:function(){var s;if(this._clickListeners){for(var t=0,u=this._clickListeners.length;t<u;t++){s=this._clickListeners[t];if(s)s.remove();}this._clickListeners=[];}},componentDidUpdate:function(s,t){if(!t.isThreadEligible&&this.state.isThreadEligible)this.bindClickListeners();},getAmountFromTriggerClickEvent:function(s){var t=s.target.getAttribute('data-p2p-trigger')||'';return t.replace(/[^0-9\.]+/g,'');},handleTriggerClick:function(s){s.preventDefault();var t=this.getAmountFromTriggerClickEvent(s);this.setState({amount:t});this.openSendView();},openSendView:function(){j.chatSendViewOpened({threadID:this.props.threadID,amount:this.state.amount});},render:function(){var s=o(this.props.text,this.props.renderEmoji,this.props.renderEmoticons,this.state.isThreadEligible);return (m.createElement("span",{dangerouslySetInnerHTML:{__html:s}}));}});e.exports=r;},null);
__d("TextWithEntitiesAndP2P.react",["BaseTextWithEntities.react","Link.react","P2PTriggers.react","React"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';var k=j.createClass({displayName:"TextWithEntitiesAndP2P",_renderText:function(l){return (j.createElement(i,{text:l,renderEmoticons:this.props.renderEmoticons,renderEmoji:this.props.renderEmoji,threadID:this.props.threadID}));},_renderRange:function(l,m){if(this.props.interpolator){return this.props.interpolator(l,m);}else return (j.createElement(h,{href:m.entity},l));},render:function(){return (j.createElement(g,j.__spread({},this.props,{textRenderer:this._renderText,rangeRenderer:this._renderRange,ranges:this.props.ranges,imageRanges:this.props.imageRanges,aggregatedRanges:this.props.aggregatedRanges,text:this.props.text})));}});e.exports=k;},null);
__d("URLMatcher",["URLMatcherConfig"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h='!"#%&\'()*,-./:;<>?@[\\]^_`{|}',i='\u2000-\u206F\u00ab\u00bb\uff08\uff09',j='(?:25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])',k='(?:(?:ht|f)tps?)://',l='(?:(?:'+j+'[.]){3}'+j+')',m='\\[(?:(?:[A-Fa-f0-9]{1,4}::?){1,7}[A-Fa-f0-9]{1,4})\\]',n='(?:\\b)www\\d{0,3}[.]',o='[^\\s'+h+i+']',p='(?:(?:(?:[.:\\-_%@]|'+o+')*'+o+')|'+m+')',q='(?::\\d+){0,1}',r='(?=[/?#])',s=g.tlds,t='(?:'+'(?:'+k+p+q+')|'+'(?:'+l+q+')|'+'(?:'+m+q+')|'+'(?:'+n+p+s+q+')|'+'(?:'+p+s+q+r+')'+')',u='[/#?]',v='\\([^\\s()<>]+\\)',w='[^\\s()<>?#]+',x=new RegExp(t,'im'),y='^\\[[0-9]{1,4}:[0-9]{1,4}:[A-Fa-f0-9]{1,4}\\]',z=new RegExp(y,'im'),aa='(?:'+'(?:'+u+')'+'(?:'+'(?:'+v+'|'+w+')*'+')*'+')*',ba=new RegExp('('+'(?:'+t+')'+'(?:'+aa+')'+')','im'),ca=new RegExp('('+'(?:'+k+p+q+')|'+'(?:'+n+p+s+q+')'+')'),da=/[\s'";]/,ea=new RegExp(u,'im'),fa=new RegExp('[\\s!"#%&\'()*,./:;<>?@[\\]^`{|}\u00ab\u00bb\u2000-\u206F\uff08\uff09]','im'),ga=new RegExp('[\\s()<>?#]','im'),ha=new RegExp('\\s()<>'),ia=function(pa){if(pa&&pa.indexOf('@')!=-1){return (ca.exec(pa))?pa:null;}else return pa;},ja=function(pa){return ka(pa,ba);},ka=function(pa,qa){var ra=(qa.exec(pa)||[])[1]||null;return ia(ra);},la=function(pa){return x.exec(pa);},ma=function(pa){return !da.test(pa.charAt(pa.length-1));},na=function(pa){do{var qa=x.exec(pa);if(!qa)return null;var ra=false;if(qa[0][0]==='['&&qa.index>0&&pa[qa.index-1]==='@'){var sa=z.exec(qa[0]);if(sa){ra=true;pa=pa.substr(qa.index+sa[0].length);}}}while(ra);var ta=pa.substr(qa.index+qa[0].length);if(ta.length===0||!(ea.test(ta[0])))return ia(qa[0]);var ua=0,va=0,wa=1,xa=0,ya=va;for(var za=1;za<ta.length;za++){var ab=ta[za];if(ya===va){if(ab==='('){xa=xa+1;ya=wa;}else if(ea.test(ab)||!(fa.test(ab))){ua=za;}else if(ga.test(ab))break;}else if(ab==='('){xa=xa+1;}else if(ab===')'){xa=xa-1;if(xa===0){ya=va;ua=za;}}else if(ha.test(ab))break;}return ia(qa[0]+ta.substring(0,ua+1));},oa={};oa.permissiveMatch=ja;oa.matchToPattern=ka;oa.matchHost=la;oa.trigger=ma;oa.match=na;e.exports=oa;},null);
__d("URLScraper",["ArbiterMixin","DataStore","Event","URLMatcher","mixin"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l='scraperLastPermissiveMatch',m=k(g);for(var n in m)if(m.hasOwnProperty(n))p[n]=m[n];var o=m===null?null:m.prototype;p.prototype=Object.create(o);p.prototype.constructor=p;p.__superConstructor__=m;function p(q,r){"use strict";m.call(this);this.input=q;this.enable();this.getValueFn=r;}p.prototype.reset=function(){"use strict";h.set(this.input,l,null);};p.prototype.enable=function(){"use strict";if(this.events)return;var q=function(r){setTimeout(this.check.bind(this,r),30);};this.events=i.listen(this.input,{paste:q.bind(this,false),keydown:q.bind(this,true)});};p.prototype.disable=function(){"use strict";if(!this.events)return;for(var event in this.events)this.events[event].remove();this.events=null;};p.prototype.check=function(q){"use strict";var r=this.getValueFn?this.getValueFn():this.input.value;if(q&&p.trigger(r))return;var s=p.match(r),t=j.permissiveMatch(r);if(t&&(t!=h.get(this.input,l))){h.set(this.input,l,t);this.inform('match',{url:s||t,alt_url:t});}};Object.assign(p,j);e.exports=p;},null);
__d("getURLRanges",["URI","URLScraper"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';function i(j,k){k=k||0;var l=h.match(j);if(!l)return [];var m=l;if(!(/^[a-z][a-z0-9\-+.]+:\/\//i.test(l)))m='http://'+l;if(!g.isValidURI(m))return [];k+=j.indexOf(l);var n=l.length,o=[{offset:k,length:l.length,entity:{url:m}}];return o.concat(i(j.substr(k+n),k+n));}e.exports=i;},null);
__d("MercuryMessageBody.react",["EmoticonsList","React","Link.react","P2PTriggersUtils","ReactComponentWithPureRenderMixin","SupportedEmoji","TextWithEntities.react","TextWithEntitiesAndP2P.react","URI","URLMatcher","cancelAnimationFrame","cx","fbt","getURLRanges","isFacebookURI","requestAnimationFrame"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){b.__markCompiled&&b.__markCompiled();var w=h,x=w.PropTypes,y=h.createClass({displayName:"MercuryMessageBody",mixins:[k],propTypes:{body:x.string,ranges:x.array,threadID:x.string},getInitialState:function(){return {richText:false};},_shouldRenderP2PTriggers:false,componentDidMount:function(){this._raf=v(this.setIsRichText);},targetBlankLinkInterpolator:function(z,aa){if(aa.entity&&aa.entity.url){var ba=new o(aa.entity.url);if(u(ba)&&!ba.getFragment())aa.entity.url=ba.addQueryData({__mref:'message_bubble'}).toString();}return (h.createElement(i,{href:aa.entity.url,shimhash:aa.entity.shimhash,target:"_blank"},z));},setIsRichText:function(){delete this._raf;var z=this.props,aa=z.body,ba=z.ranges;aa=aa||'';this._shouldRenderP2PTriggers=!!(this.props.threadID&&j.canSeeTriggers(this.props.threadID)&&j.getMatches(aa));if((ba&&ba.length)||g.noncapturingRegexp.test(aa)||l.findEmoji(aa)||p.match(aa)||this._shouldRenderP2PTriggers)this.setState({richText:true});},componentWillUnmount:function(){this._raf&&q(this._raf);},render:function(){var z=this.props.body||'',aa;if(z.startsWith('?OTR'))return (h.createElement("span",{className:"_89h"},s._("[encrypted message]")));z=z.replace(/\s+$/,'');if(z.length===0)return null;if(!this.state.richText)return h.createElement("span",{className:this.props.className},z);var ba=this.props.ranges;if(ba==undefined)ba=t(z);aa={className:this.props.className,interpolator:this.targetBlankLinkInterpolator,text:z,ranges:ba,renderEmoticons:true,renderEmoji:true};if(this._shouldRenderP2PTriggers){return (h.createElement(n,h.__spread({},aa,{threadID:this.props.threadID})));}else return (h.createElement(m,h.__spread({},aa)));}});e.exports=y;},null);
__d("MercuryAudioPlayer",["Event","Arbiter","DOM","Flash","UserAgent_DEPRECATED"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=200;function m(){if(k.webkit()&&!k.chrome())return false;var v=i.create('audio'),w=false;try{if(!!v.canPlayType)if(v.canPlayType('video/mp4;').replace(/^no$/,''))w=true;}finally{return w;}}function n(){return j.isAvailable();}var o=function(){this.interval=null;this.arbiterInstance=null;this.audio=i.create('audio');g.listen(this.audio,'playing',function(){this.informAttachment('playing',this.audio.currentTime);this.interval=setInterval(function(){this.informAttachment('playing',this.audio.currentTime);}.bind(this),l);}.bind(this));g.listen(this.audio,'ended',function(){clearInterval(this.interval);this.informAttachment('finished');}.bind(this));};Object.assign(o.prototype,{setAudio:function(v,w){this.audio.setAttribute('src',v);this.arbiterInstance=w;},informAttachment:function(v,w){if(this.arbiterInstance)this.arbiterInstance.inform(v,w);},play:function(){this.audio.play();this.informAttachment('played');},resume:function(){this.audio.play();this.informAttachment('played');},pause:function(){this.audio.pause();clearInterval(this.interval);this.informAttachment('paused');},getType:function(){return 'html5';}});var p=function(){this.src=null;this.arbiterInstance=null;var v=i.create('div');document.body.appendChild(v);this.swf=j.embed('/swf/SoundStreamPlayer.swf',v,null,{});this.interval=null;h.subscribe('soundstream/finished',function(){clearInterval(this.interval);this.informAttachment('finished');}.bind(this));};Object.assign(p.prototype,{setAudio:function(v,w){this.src=v;this.arbiterInstance=w;},informAttachment:function(v,w){if(this.arbiterInstance)this.arbiterInstance.inform(v,w);},play:function(){this.swf.playSound(this.src);this.interval=setInterval(function(){var v=this.swf.getCurrentTime();this.informAttachment('playing',v);}.bind(this),l);this.informAttachment('played');},resume:function(){this.swf.resume();this.informAttachment('played');},pause:function(){clearInterval(this.interval);this.swf.pause();this.informAttachment('paused');},getType:function(){return 'flash';}});function q(){if(m()){return new o();}else if(n())return new p();return false;}var r=null,s=null,t=0;function u(v,w){this.src=v;this.arbiterInstance=w;this.audio_id=++t;r!==null||(r=q());if(!r)return false;}Object.assign(u.prototype,{getType:function(){if(!r){return false;}else return r.getType();},play:function(v){if(v&&s==this.audio_id){r.resume();}else{this.pause();s=this.audio_id;r.setAudio(this.src,this.arbiterInstance);r.play();}},pause:function(){r.pause();}});e.exports=u;},null);
__d("MercuryShareAttachmentRenderLocations",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();'use strict';var g={CHAT:'chat',CHAT_PREVIEW:'chat_preview',MESSENGER:'messenger',WEB_INBOX:'web_inbox',getValues:function(){return [g.CHAT,g.CHAT_PREVIEW,g.MESSENGER,g.WEB_INBOX];},isPreview:function(h){return h===g.CHAT_PREVIEW;}};e.exports=g;},null);
__d("MercuryAttachmentAudioClip.react",["Arbiter","ArbiterMixin","MercuryAudioPlayer","CurrentUser","JSLogger","LeftRight.react","MercuryShareAttachmentRenderLocations","React","SubscriptionsHandler","cx","fbt","joinClasses","shield"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){b.__markCompiled&&b.__markCompiled();var t=n,u=t.PropTypes,v='MercuryAttachmentAudioClip/play',w=k.create('mercury_audio_clip'),x=n.createClass({displayName:"AudioClip",mixins:[h],propTypes:{duration:u.number,location:u.oneOf(m.getValues()),rootClassName:u.string,showHelp:u.bool,src:u.string.isRequired,width:u.number},getInitialState:function(){this.logged=false;return {time:0,playing:false,started:false,duration:this.props.duration,audioPlayer:new i(this.props.src,this)};},componentDidMount:function(){this._subscriptionsHandler=new o();this._subscriptionsHandler.addSubscriptions(this.subscribe('playing',this.updateTime),this.subscribe('played',s(this.setState,this,{playing:true,started:true})),this.subscribe('paused',s(this.setState,this,{playing:false})),this.subscribe('finished',s(this.setState,this,{playing:false,started:false,time:this.props.duration})),g.subscribe(v,function(y,z){if(this.props.src!=z)this.setState({time:0});}.bind(this)));},componentWillUnmount:function(){this._subscriptionsHandler&&this._subscriptionsHandler.release();},updateTime:function(y,z){this.setState({time:z});},play:function(){if(this.state.playing){this.state.audioPlayer.pause();}else{this.state.audioPlayer.play(this.state.started);g.inform(v,this.props.src);if(!this.logged){this.logged=true;w.log('play',{uid:j.getID(),duration:this.props.duration});}}},_formatSeconds:function(y){if(y){y=Math.ceil(y);var z=y%60;if(z<10)z='0'+z;var aa=Math.floor(y/60);return aa+':'+z;}else return null;},_renderPlayer:function(y,z){return (n.createElement("a",{className:"_1miz _2e-1",href:"#",style:{width:y},onClick:this.play},n.createElement("span",{className:"_1mi- _2e-2"},n.createElement("i",{className:"_1mi_ _2e-3"})),n.createElement("span",{className:"_1mj0 _2e-4 _3oh-"},z),n.createElement("div",{className:"_1mj1 _2e-5"})));},render:function(){var y=this.state.time,z=this.state.playing,aa=this._formatSeconds(this.state.duration),ba=this.props.location===m.MESSENGER,ca=this.props.width||170;if(ba){var da=this.props.duration;if(da>10){ca=240;}else if(da>5){ca=200;}else if(da>2){ca=160;}else ca=120;}var ea=null,fa=Math.ceil((y*(ca+2))/this.state.duration);if(ba)fa=Math.ceil((y*(ca+24))/this.state.duration);if(this.state.audioPlayer&&this.state.audioPlayer.getType()){var ga=this._renderPlayer(ca,aa),ha=this._renderPlayer(ca,aa),ia=(("_1mj2")+(' '+"_2e-6")+(z&&(y!==0)?' '+"_1mj3":'')+(z&&(y===0)?' '+"_4g4x":''));ea=(n.createElement("div",{className:ia},ga,n.createElement("div",{className:"_1mj4 _2e-7",style:{width:fa}},ha)));}else ea=(n.createElement("div",{className:"_1mj2"},n.createElement("div",{className:"_1miz"},n.createElement(l,null,n.createElement("a",{className:"_1mj5",href:this.props.src},n.createElement("span",{className:"_3qi6"},n.createElement("i",{className:"_1mj6"})),n.createElement("span",{className:"_1mj7"},q._("Voice Message")),n.createElement("span",{className:"_1mj8"},aa)),n.createElement("a",{href:this.props.src,className:"_1mj9"},n.createElement("i",{className:"_1mja"}))))));return (n.createElement("div",{className:r((("_1mjb")+(ba?' '+"_454y":'')),this.props.rootClassName)},ea));}});e.exports=x;},null);
__d("HelpLink.react",["React","joinClasses","TooltipLink.react"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=g.createClass({displayName:"HelpLink",render:function(){return (g.createElement(i,g.__spread({},this.props,{className:h(this.props.className,"uiHelpLink mls")}),(void 0)));}});e.exports=j;},null);
__d("UFICreatorInfo.react",["HelpLink.react","React","URI","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l=h,m=l.PropTypes,n=h.createClass({displayName:"UFICreatorInfo",propTypes:{creatorID:m.string.isRequired,creatorType:m.string.isRequired,creatorName:m.string.isRequired,labelType:m.string.isRequired,pageID:m.string.isRequired,profileURI:m.string},render:function(){var o,p=this.getCreatorLink();switch(this.props.labelType){case 'commented':o=k._("Commented on by {creator}",[k.param("creator",p)]);break;case 'edited_comment':o=k._("Edited by {creator}",[k.param("creator",p)]);break;case 'sent_message':o=k._("Sent by {creator}",[k.param("creator",p)]);break;case 'page_admin_note':o=k._("Noted by {creator}",[k.param("creator",p)]);break;default:return;}return (h.createElement("span",null,o,h.createElement(g,{tooltip:this.getHelpText()})));},getCreatorLink:function(){switch(this.props.creatorType){case 'application':case 'gray_account':case 'indirect_admin':return (h.createElement("a",{className:"uiLinkSubtle","aria-label":this.getTooltipText(),"data-hover":"tooltip"},this.props.creatorName));case 'business_admin':return (h.createElement("a",{className:"uiLinkSubtle",href:this.props.profileURI},this.props.creatorName));case 'direct_admin':return this.getProfileLinkWithHovercard();case 'former_admin':return (h.createElement("span",{className:"uiLinkSubtle"},h.createElement("img",{src:"/images/privacy/cant-see.png",width:9,height:9,className:"_3-8_"}),this.getProfileLinkWithHovercard()));default:return (h.createElement("span",{className:"uiLinkSubtle"},this.props.creatorName));}},getTooltipText:function(){switch(this.props.creatorType){case 'application':return this.getApplicationText();case 'gray_account':return this.getGrayAccountText();case 'indirect_admin':return this.getIndirectAdminText();}},getProfileLinkWithHovercard:function(){if(!this.props.profileURI)return h.createElement("span",null,this.props.creatorName);var o=new i('/ajax/hovercard/user.php').setQueryData({id:this.props.creatorID}).addQueryData({type:'page_admin',extragetparams:JSON.stringify({directed_target_id:this.props.pageID})});return (h.createElement("a",{className:"uiLinkSubtle","data-hovercard":o,href:this.props.profileURI},this.props.creatorName));},getApplicationText:function(){switch(this.props.labelType){case 'commented':return (k._("This was commented on by someone using {application}.",[k.param("application",this.props.creatorName)]));case 'edited_comment':return (k._("This was edited by someone using {application}.",[k.param("application",this.props.creatorName)]));case 'sent_message':return (k._("This was sent by someone using {application}.",[k.param("application",this.props.creatorName)]));case 'page_admin_note':return (k._("This was noted by someone using {application}.",[k.param("application",this.props.creatorName)]));}},getIndirectAdminText:function(){switch(this.props.labelType){case 'commented':return (k._("This was commented on by someone from {page}.",[k.param("page",this.props.creatorName)]));case 'edited_comment':return (k._("This was edited by someone from {page}.",[k.param("page",this.props.creatorName)]));case 'sent_message':return (k._("This was sent by someone from {page}.",[k.param("page",this.props.creatorName)]));case 'page_admin_note':return (k._("This was noted by someone from {page}.",[k.param("page",this.props.creatorName)]));}},getGrayAccountText:function(){switch(this.props.labelType){case 'commented':return (k._("This was commented on by someone who doesn't have a personal Facebook account."));case 'edited_comment':return (k._("This was edited by someone who doesn't have a personal Facebook account."));case 'sent_message':return (k._("This was sent by someone who doesn't have a personal Facebook account."));case 'page_admin_note':return (k._("This was noted by someone who doesn't have a personal Facebook account."));}},getHelpText:function(){switch(this.props.labelType){case 'commented':return (k._("Only people who manage this Page can see who posted a comment"));case 'edited_comment':return (k._("Only people who manage this Page can see who edited a comment"));case 'sent_message':return (k._("Only people who manage this Page can see who sent a message"));case 'page_admin_note':return (k._("Only people who manage this Page can see who created a note"));}}});e.exports=n;},null);
__d("PagesMessengerCreatorInfo.react",["React","UFICreatorInfo.react","XUIGrayText.react","cx"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';var k=g,l=k.PropTypes,m=g.Component;for(var n in m)if(m.hasOwnProperty(n))p[n]=m[n];var o=m===null?null:m.prototype;p.prototype=Object.create(o);p.prototype.constructor=p;p.__superConstructor__=m;function p(){if(m!==null)m.apply(this,arguments);}p.prototype.render=function(){return (g.createElement(i,{className:"_ajk",display:"inline",shade:"light",size:"small"},g.createElement(h,{creatorID:this.props.creator_info.creatorID,creatorType:this.props.creator_info.creatorType,creatorName:this.props.creator_info.creatorName,labelType:this.props.creator_info.labelType,pageID:this.props.creator_info.pageID,profileURI:this.props.creator_info.profileURI})));};p.propTypes={creator_info:l.shape({creatorID:l.string.isRequired,creatorType:l.string.isRequired,labelType:l.string.isRequired,pageID:l.string.isRequired,profileURI:l.string}).isRequired};e.exports=p;},null);
__d("loadImage",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();'use strict';function g(h,i){var j=new Image();j.onload=function(){i(j.width,j.height,j);};j.src=h;}e.exports=g;},null);
__d("PhotoResizeMath",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={getScaledPhotoDimensions:function(h,i,j,k,l){var m=h/i,n=j/k;if(j&&k&&l==='stretch')return {width:j,height:k};if((!j&&k)||((l==='contain')!==(m>=n)))return {width:k*m,height:k};if(j)return {width:j,height:j/m};return {width:h,height:i};}};e.exports=g;},null);
__d("PixelzFocus",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();'use strict';var g={search:function(h,i){var j=0,k=h.length-1;while(j<=k){var l=j+Math.floor((k-j)/2),m=h[l];if(m>i){k=l-1;}else if(m<i){j=l+1;}else return l;}return Math.min(j,k);},forceSpecificPoint:function(h,i,j){var k=1e-09,l=g.search(h,i-j-k)+1,m=g.search(h,i+j);return h.slice(l,m+1);},findBiggestSets:function(h,i){var j=[],k=-1;for(var l=0;l<h.length;++l){var m=h[l],n=l,o=g.search(h,m+i),p=o-n;if(p>k)j=[];if(p>=k){k=p;j.push({low:n,high:o});}}return j;},getBestSet:function(h,i,j){var k=-1,l=null;for(var m=0;m<i.length;++m){var n=i[m],o=h[n.low],p=h[n.high],q=o+(p-o)/2,r=Math.min(o-(q-j),(q+j)-p);if(r>k){k=r;l=n;}}return l;},getFocusFromSet:function(h,i){var j=h[i.low],k=h[i.high];return j+(k-j)/2;},clampFocus:function(h,i){var j=i/2,k=1-(i/2);if(h<j)return j;if(h>k)return k;return h;},convertFromCenterToCSS:function(h,i){if(Math.abs(1-i)<1e-05)return 0;return (h-i/2)/(1-i);},convertFromCSSToCenter:function(h,i){return h*(1-i)+i/2;},getVisible:function(h,i){if(h<i)return h/i;return i/h;},getHidden:function(h,i){return 1-g.getVisible(h,i);},focusHorizontally:function(h,i){return h<i;},convertVectorFromCenterToCSS:function(h,i,j){var k=g.focusHorizontally(i,j),l;if(k){l=h.x/100;}else l=h.x/100;var m=g.convertFromCenterToCSS(l,g.getVisible(i,j));if(k){return {x:m,y:0};}else return {x:0,y:m};},getCropRect:function(h,i,j){var k=g.focusHorizontally(i,j),l=g.getVisible(i,j);if(k){var m=(1-l)*h.x;return {left:m,top:0,width:l,height:1};}else{var n=(1-l)*h.y;return {left:0,top:n,width:1,height:l};}}};e.exports=g;},null);
__d("Pixelz.react",["arrayContains","cx","loadImage","joinClasses","React","PhotoResizeMath","PixelzFocus"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();'use strict';var n=k,o=n.PropTypes,p=k.createClass({displayName:"Pixelz",propTypes:{width:o.number,height:o.number,resizeMode:o.oneOf(['contain','cover','stretch']),alt:o.string,letterbox:o.bool,borderRadius:o.number,insetBorderColor:o.string,animated:o.bool,upscale:o.bool,cropRect:function(q,r,s){var t=q[r],u='Invalid prop `'+r+'` supplied to `'+s+'`, expected a rectangle with values normalized '+'between 0 and 1.';if(t.left<0||t.top<0||t.width<0||t.height<0||t.left+t.width>1||t.top+t.height>1)return new Error(u);},focus:function(q,r,s){var t=q[r],u='Invalid prop `'+r+'` supplied to `'+s+'`, expected either a {x, y, type} vector where type '+'is `css` or `center` or an array of {x, y} vectors. All the vectors '+'have with values normalized between 0 and 1.';if(Array.isArray(t)){for(var v=0;v<t.length;++v)if(!(t[v].x>=0&&t[v].x<=1)||!(t[v].y>=0&&t[v].y<=1))return new Error(u);}else{if(!t.type)t.type='css';if(!(t.x>=0&&t.x<=1)||!(t.y>=0&&t.y<=1)||!g(['center','css'],t.type))return new Error(u);}}},getDefaultProps:function(){return {resizeMode:'cover',alt:'',letterbox:true,upscale:true,cropRect:{width:1,height:1,top:0,left:0},focus:{x:.5,y:.5,type:'css'}};},getInitialState:function(){return {srcDimensions:{}};},getSrcDimensions:function(){var q=this.props.src,r=this.state.srcDimensions[q];if(r)return r;i(q,function(s,t){var u={};u[q]={width:s,height:t};this.isMounted()&&this.setState({srcDimensions:u});}.bind(this));return null;},getCropSrcDimensions:function(){var q=this.getSrcDimensions();return {width:q.width*this.props.cropRect.width,height:q.height*this.props.cropRect.height};},getUpscaleCropDimensions:function(){var q=this.getCropSrcDimensions();return l.getScaledPhotoDimensions(q.width,q.height,this.props.width,this.props.height,this.props.resizeMode);},getCropDimensions:function(){var q=this.getUpscaleCropDimensions(),r=this.getCropSrcDimensions();if(!this.props.upscale)return {width:Math.min(q.width,r.width),height:Math.min(q.height,r.height)};return q;},getCropAspectRatio:function(){var q=this.getCropDimensions();return q.width/q.height;},getContainerDimensions:function(){if(this.props.letterbox&&this.props.width&&this.props.height)return {width:this.props.width,height:this.props.height};return this.getCropDimensions();},getContainerAspectRatio:function(){var q=this.getContainerDimensions();return q.width/q.height;},getContainerPosition:function(){return {left:0,top:0};},getFocus:function(){var q=this.props.focus;if(!Array.isArray(q)&&q.type==='css')return {x:q.x,y:q.y};var r=this.getContainerAspectRatio(),s=this.getCropAspectRatio(),t=m.getVisible(r,s),u=m.focusHorizontally(r,s),v;if(!Array.isArray(q)){v=m.convertFromCenterToCSS(u?q.x:q.y,t);}else{var w=q.map(function(z){return u?z.x:z.y;});w.sort();var x=m.findBiggestSets(w,t),y=m.getBestSet(w,x,t);v=m.getFocusFromSet(w,y);}return {x:u?v:.5,y:u?.5:v};},getCropPosition:function(){var q=this.getCropDimensions(),r=this.getContainerDimensions(),s=this.getFocus();return {left:s.x*(r.width-q.width),top:s.y*(r.height-q.height)};},getScaleDimensions:function(){var q=this.getCropDimensions();return {width:q.width/this.props.cropRect.width,height:q.height/this.props.cropRect.height};},getScalePosition:function(){var q=this.getScaleDimensions();return {left:-q.width*this.props.cropRect.left,top:-q.height*this.props.cropRect.top};},getClipCropRectangle:function(){var q=this.getContainerDimensions(),r=this.getCropDimensions(),s=this.getContainerPosition(),t=this.getCropPosition(),u=Math.max(s.left,t.left),v=Math.max(s.top,t.top),w=Math.min(s.top+q.height,t.top+r.height),x=Math.min(s.left+q.width,t.left+r.width);return {left:u,top:v,width:x-u,height:w-v};},getClipCropPosition:function(){var q=this.getClipCropRectangle();return {left:q.left,top:q.top};},getClipCropDimensions:function(){var q=this.getClipCropRectangle();return {width:q.width,height:q.height};},getClipScalePosition:function(){var q=this.getScalePosition(),r=this.getClipCropPosition(),s=this.getCropPosition();return {left:q.left+(s.left-r.left),top:q.top+(s.top-r.top)};},getClipScaleDimensions:function(){return this.getScaleDimensions();},areDimensionsEqual:function(q,r){return q.width===r.width&&q.height===r.height;},shouldAddAllNodesAndStyles:function(){return this.props.animated;},hasCrop:function(){if(this.shouldAddAllNodesAndStyles())return true;var q=this.getContainerDimensions(),r=this.getClipCropDimensions(),s=this.getClipScaleDimensions();if(this.areDimensionsEqual(q,r)||this.areDimensionsEqual(r,s))return false;return true;},hasContainer:function(){if(this.shouldAddAllNodesAndStyles()||this.hasInsetBorder())return true;var q=this.getContainerDimensions(),r=this.getClipScaleDimensions();if(this.areDimensionsEqual(q,r))return false;return true;},hasInsetBorder:function(){return this.shouldAddAllNodesAndStyles()||this.props.insetBorderColor;},applyPositionStyle:function(q,r){if(this.shouldAddAllNodesAndStyles()||r.left)q.left=Math.round(r.left);if(this.shouldAddAllNodesAndStyles()||r.top)q.top=Math.round(r.top);},applyDimensionsStyle:function(q,r){q.width=Math.round(r.width);q.height=Math.round(r.height);},applyBorderRadiusStyle:function(q){if(this.shouldAddAllNodesAndStyles()||this.props.borderRadius)q.borderRadius=this.props.borderRadius||0;},getScaleStyle:function(){var q={},r=this.getClipCropDimensions(),s=this.getClipScaleDimensions();if(this.shouldAddAllNodesAndStyles()||!this.areDimensionsEqual(r,s)){this.applyPositionStyle(q,this.getClipScalePosition());}else this.applyPositionStyle(q,this.getClipCropPosition());this.applyDimensionsStyle(q,this.getClipScaleDimensions());this.applyBorderRadiusStyle(q);return q;},getCropStyle:function(){var q={};this.applyPositionStyle(q,this.getClipCropPosition());this.applyDimensionsStyle(q,this.getClipCropDimensions());this.applyBorderRadiusStyle(q);return q;},getInsetBorderStyle:function(){var q={borderColor:this.props.insetBorderColor||'transparent'};this.applyPositionStyle(q,this.getClipCropPosition());this.applyDimensionsStyle(q,this.getClipCropDimensions());this.applyBorderRadiusStyle(q);return q;},getContainerStyle:function(){var q={};this.applyDimensionsStyle(q,this.getContainerDimensions());this.applyBorderRadiusStyle(q);return q;},getScale:function(){var q=this.getScaleStyle(),r=q.width,s=q.height;q=Object.assign({},q);delete q.width;delete q.height;return (k.createElement("img",k.__spread({},this.props,{alt:this.props.alt,className:j(this.props.className,(("_56wb")+(this.shouldAddAllNodesAndStyles()?' '+"_56t5":''))),src:this.props.src,style:Object.assign({},(this.props.style||{}),q),width:r,height:s})));},getCrop:function(){var q=this.getScale();if(!this.hasCrop())return q;return (k.createElement("div",{className:(("_56ma")+(this.shouldAddAllNodesAndStyles()?' '+"_56t5":'')),style:this.getCropStyle()},q));},getInsetBorder:function(){if(!this.hasInsetBorder())return null;return (k.createElement("div",{className:(("_56lv")+(this.shouldAddAllNodesAndStyles()?' '+"_56t5":'')),style:this.getInsetBorderStyle()}));},getContainer:function(){var q=this.getCrop();if(!this.hasContainer())return q;var r=this.getInsetBorder();return (k.createElement("div",{className:(("_56jj")+(this.shouldAddAllNodesAndStyles()?' '+"_56t5":'')),style:this.getContainerStyle()},q,r));},render:function(){var q=this.getSrcDimensions();if(!q)return k.createElement("span",null);return this.getContainer();}});e.exports=p;},null);
__d("CloseButton.react",["React","Image.react","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=g.createClass({displayName:"CloseButton",render:function(){var l=this.props,m=l.size||'medium',n=l.appearance||'normal',o=m==='small',p=m==='huge',q=n==='dark',r=n==='inverted',s=l.ajaxify||null,t=l.rel||null,u=(("uiCloseButton")+(o?' '+"uiCloseButtonSmall":'')+(p?' '+"uiCloseButtonHuge":'')+(o&&q?' '+"uiCloseButtonSmallDark":'')+(o&&r?' '+"uiCloseButtonSmallInverted":'')+(!o&&q?' '+"uiCloseButtonDark":'')+(!o&&r?' '+"uiCloseButtonInverted":''));return (g.createElement("a",g.__spread({},this.props,{ajaxify:s,href:"#",role:"button","aria-label":l.tooltip,"data-hover":l.tooltip&&'tooltip',"data-tooltip-alignh":l.tooltip&&'center',className:j(this.props.className,u),rel:t}),g.createElement(h,{className:"uiCloseButtonHighContrast",src:"/images/chat/tab/close.png"})));}});e.exports=k;},null);
__d("InputLabel.react",["React","cx","invariant","joinClasses"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=g,l=k.PropTypes,m=0;function n(){return 'js_input_label_'+(m++);}var o=g.createClass({displayName:"InputLabel",propTypes:{display:l.oneOf(['block','inline'])},getDefaultProps:function(){return {display:'block'};},render:function(){i(this.props.children.length===2);var p=this.props.children[0],q=this.props.children[1],r=p.type==='input';p=g.cloneElement(p,{className:j(p.props.className,(("uiInputLabelInput")+(r&&p.props.type==='radio'?' '+"uiInputLabelRadio":'')+(r&&p.props.type==='checkbox'?' '+"uiInputLabelCheckbox":''))),id:p.props.id||n()});q=g.cloneElement(q,{className:j(q.props.className,'uiInputLabelLabel'),htmlFor:p.props.id});var s=(("uiInputLabel")+(' '+"clearfix")+(this.props.display==='inline'?' '+"inlineBlock":'')+(r?' '+"uiInputLabelLegacy":''));return (g.createElement("div",g.__spread({},this.props,{className:j(this.props.className,s)}),p,q));}});e.exports=o;},null);
__d("ContextualLayer.react",["ContextualLayer","React","ReactLayer","Style"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=h,l=k.PropTypes,m=i.createClass({propTypes:{contextRef:l.func,context:function(n,o,p){if((n.context==null)==(n.contextRef==null))return new Error(("Exactly one of `context` or `contextRef` must be set on `")+(""+p+"`."));var q=n[o];if(q!=null){if(typeof q!=='object')return new Error(("Invalid `"+o+"` supplied to `"+p+"`, ")+("expected a React component."));if(h.isValidElement(q))return new Error(("Invalid `"+o+"` supplied to `"+p+"`, ")+("expected a React component instance. You're passing a React ")+("descriptor."));}}},immutableProps:{modal:null},createLayer:function(n){var o=this._getContextNode(),p={context:o,contextBounds:this.props.contextBounds,position:this.props.position,alignment:this.props.alignment,offsetX:this.props.offsetX,offsetY:this.props.offsetY,addedBehaviors:this.enumerateBehaviors(this.props.behaviors),shouldSetARIAProperties:this.props.shouldSetARIAProperties},q=new g(p,n);this._node=n;this._matchContextSize(this.props);if(this.props.contextBounds)q.setContextWithBounds(o,this.props.contextBounds);q.conditionShow(this.props.shown);return q;},receiveProps:function(n,o){this.updateBehaviors(o.behaviors,n.behaviors);var p=this._getContextNode();if(n.contextBounds){this.layer.setContextWithBounds(p,n.contextBounds);}else this.layer.setContext(p);this._matchContextSize(n);this.layer.setPosition(n.position);this.layer.setAlignment(n.alignment);this.layer.setOffsetX(n.offsetX);this.layer.setOffsetY(n.offsetY);this.layer.conditionShow(n.shown);},getDefaultEnabledBehaviors:function(){return g.getDefaultBehaviorsAsObject();},_getContextNode:function(){var n;if(this.props.context){n=h.findDOMNode(this.props.context);}else if(this.props.contextRef)n=h.findDOMNode(this.props.contextRef());return n;},_matchContextSize:function(n){var o=this._node,p=this._getContextNode();if(n.containerWidthMatchContext)j.set(o,'width',p.offsetWidth+'px');if(n.containerHeightMatchContext)j.set(o,'height',p.offsetHeight+'px');}});e.exports=m;},null);
__d("MenuSeparator",["DOM","CSS","MenuItemInterface","cx"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();for(var k in i)if(i.hasOwnProperty(k))m[k]=i[k];var l=i===null?null:i.prototype;m.prototype=Object.create(l);m.prototype.constructor=m;m.__superConstructor__=i;function m(n){"use strict";i.call(this,n);this._data=n;this.showFn=this._data.should_show_fn;}m.prototype.updateShownState=function(n){"use strict";if(this.showFn){this._isHidden=!this.showFn(n);if(this._root)h.conditionShow(this._root,!this._isHidden);}};m.prototype.isShown=function(n){"use strict";var o=this.showFn?this.showFn(n):true;return o;};m.prototype.render=function(){"use strict";var n="_54ak";if(this._data.className)n+=' '+this._data.className;var o=this._data.label||'',p=g.create('li',{className:n,role:'separator'},o);if(this._isHidden)h.hide(p);return p;};e.exports=m;},null);
__d("MenuSeparator.react",["MenuSeparator"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();function h(j){j.isReactLegacyFactory={};j.type=j;}var i=g;h(i);e.exports=i;},null);
__d("Scrollable",["Event","Parent","Scroll","UserAgent_DEPRECATED"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=function(event){var n=h.byClass(event.getTarget(),'scrollable');if(!n)return;if((typeof event.axis!=='undefined'&&event.axis===event.HORIZONTAL_AXIS)||(event.wheelDeltaX&&!event.wheelDeltaY)||(event.deltaX&&!event.deltaY))return;var o=event.wheelDelta||-event.deltaY||-event.detail,p=n.scrollHeight,q=n.clientHeight;if(p>q){var r=i.getTop(n);if((o>0&&r===0)||(o<0&&r>=p-q-1)){event.prevent();}else if(j.ie()<9)if(n.currentStyle){var s=n.currentStyle.fontSize;if(s.indexOf('px')<0){var t=document.createElement('div');t.style.fontSize=s;t.style.height='1em';s=t.style.pixelHeight;}else s=parseInt(s,10);i.setTop(n,r-Math.round(o/120*s));event.prevent();}}},l=document.documentElement;if(j.firefox()){var m=('WheelEvent' in window)?'wheel':'DOMMouseScroll';l.addEventListener(m,k,false);}else g.listen(l,'mousewheel',k);},null);
__d("ScrollableArea.react",["Bootloader","React","Style","cx","joinClasses","Scrollable"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();b('Scrollable');var l=h,m=l.PropTypes,n="uiScrollableArea native",o="uiScrollableAreaWrap scrollable",p="uiScrollableAreaBody",q="uiScrollableAreaContent",r=h.createClass({displayName:"ReactScrollableArea",propTypes:{width:m.number,height:m.oneOfType([m.number,m.string]),onScroll:m.func,shadow:m.bool,fade:m.bool,persistent:m.bool},render:function(){var s={height:this.props.height};return (h.createElement("div",h.__spread({},this.props,{className:k(this.props.className,n),ref:"root",style:Object.assign({},(this.props.style||{}),s)}),h.createElement("div",{className:o,ref:"wrap"},h.createElement("div",{className:p,ref:"body"},h.createElement("div",{className:q},this.props.children)))));},getArea:function(){return this._area;},componentDidMount:function(){g.loadModules(["ScrollableArea"],this._loadScrollableArea);},componentDidUpdate:function(s){if(s.width!==this.props.width)this._setWidthFromProps();var t=this.getArea();if(t)t.throttledAdjustGripper();},componentWillUnmount:function(){this._area&&this._area.destroy();},_loadScrollableArea:function(s){this._area=s.fromNative(h.findDOMNode(this.refs.root),{fade:this.props.fade,persistent:this.props.persistent,shadow:this.props.shadow===undefined?true:this.props.shadow});this._setWidthFromProps();this.props.onScroll&&this._area.subscribe('scroll',this.props.onScroll);},_setWidthFromProps:function(){var s=h.findDOMNode(this.refs.body);i.set(s,'width',this.props.width+'px');}});e.exports=r;},null);
__d("TokenizerToken.react",["CloseButton.react","React","SearchableEntry","cx","fbt","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m=h,n=m.PropTypes,o=h.createClass({displayName:"TokenizerToken",propTypes:{label:n.string.isRequired,entry:n.instanceOf(i),onRemove:n.func,highlighted:n.bool},render:function(){var p;if(this.props.onRemove)p=h.createElement(g,{"aria-label":k._("Remove {item}",[k.param("item",this.props.label)]),className:"_58zx",size:"small",onClick:this._onClick});var q=(("_58zy")+(this.props.highlighted?' '+"_58zz":''));return (h.createElement("span",h.__spread({},this.props,{className:l(this.props.className,q),label:null}),this.props.label,p));},_onClick:function(p){p.preventDefault();this.props.onRemove(this.props.entry);}});e.exports=o;},null);
__d("AbstractTextFieldMixin.react",["React","Keys","cx","invariant","joinClasses","cloneWithProps"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m=g,n=m.PropTypes,o={propTypes:{value:n.string,placeholder:n.string,tabIndex:n.string,maxLength:n.number,autoComplete:n.string,onBackspace:n.func,onBackTab:n.func,onBlur:n.func,onChange:n.func,onDownArrow:n.func,onEnter:n.func,onEscape:n.func,onFocus:n.func,onKeyDown:n.func,onLeftArrow:n.func,onNoShiftEnter:n.func,onRightArrow:n.func,onShiftEnter:n.func,onShiftDownArrow:n.func,onShiftUpArrow:n.func,onTab:n.func,onUpArrow:n.func,type:n.string,autoCapitalize:n.string,autoCorrect:n.string},getInitialState:function(){return {focused:false,value:this.props.defaultValue||''};},getValue:function(){return this.props.value!=null?this.props.value:this.state.value;},onInputKeyDown:function(p){var q=this.props,r=p.keyCode,s=p.shiftKey;if(r===h.BACKSPACE&&!s&&q.onBackspace){q.onBackspace(p);}else if(r===h.TAB&&!s&&q.onTab){q.onTab(p);}else if(r===h.TAB&&s&&q.onBackTab){q.onBackTab(p);}else if(r===h.UP){if(s){if(q.onShiftUpArrow)q.onShiftUpArrowAttempt(p);}else if(q.onUpArrow)q.onUpArrow(p);}else if(r===h.DOWN&&q.onDownArrow){if(s){if(q.onShiftDownArrow)q.onShiftDownArrow(p);}else if(q.onDownArrow)q.onDownArrow(p);}else if(r===h.LEFT&&q.onLeftArrow){q.onLeftArrow(p);}else if(r===h.RIGHT&&q.onRightArrow){q.onRightArrow(p);}else if(r===h.RETURN){if(q.onEnter)q.onEnter(p);if(s){if(q.onShiftEnter)q.onShiftEnter(p);}else if(q.onNoShiftEnter)q.onNoShiftEnter(p);}else if(r===h.ESC&&q.onEscape)q.onEscape(p);if(q.onKeyDown)q.onKeyDown(p);},onInputChange:function(p){if(this.props.onChange)this.props.onChange(p);if(this.props.value==null)this.setState({value:p.target.value});},focusInput:function(){this.getTextFieldDOM().focus();},blurInput:function(){this.getTextFieldDOM().blur();},onInputBlur:function(event){if(this.props.onBlur)this.props.onBlur(event);if(!event.isDefaultPrevented())this.setState({focused:false});},onInputFocus:function(event){if(this.props.onFocus)this.props.onFocus(event);if(!event.isDefaultPrevented())this.setState({focused:true});},getTextFieldDOM:function(){return g.findDOMNode(this.refs[this.getTextFieldRef()]);},getTextFieldRef:function(){return 'textField';},setTextFieldPropsOn:function(p){return l(p,{'aria-activedescendant':this.props['aria-activedescendant'],'aria-autocomplete':this.props['aria-autocomplete'],'aria-label':this.props['aria-label'],'aria-expanded':this.props['aria-expanded'],'aria-owns':this.props['aria-owns'],'data-testid':this.props['data-testid'],ref:this.getTextFieldRef(),role:this.props.role,placeholder:this.props.placeholder,autoCapitalize:this.props.autoCapitalize,autoComplete:this.props.autoComplete,autoCorrect:this.props.autoCorrect,onKeyDown:this.onInputKeyDown,onBlur:this.onInputBlur,onFocus:this.onInputFocus,onChange:this.onInputChange,disabled:this.props.disabled,defaultValue:this.props.defaultValue,name:this.props.name,value:this.getValue(),id:this.props.id,maxLength:this.props.maxLength,min:this.props.min,max:this.props.max,title:this.props.title,type:this.props.type||p.props.type});},render:function(){var p=k(this.props.className,(("_58ak")+(!this.getValue()?' '+"_3ct8":'')));j(this.renderTextField);return (g.createElement("label",{className:p},this.renderTextField()));}};e.exports=o;},null);
__d("AbstractTextInput.react",["AbstractTextFieldMixin.react","React","cx"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=h.createClass({displayName:"AbstractTextInput",mixins:[g],renderTextField:function(){return this.setTextFieldPropsOn(h.createElement("input",{type:"text",className:"_58al",size:this.props.size,tabIndex:this.props.tabIndex,onClick:this.props.onClick,onKeyUp:this.props.onKeyUp,onPaste:this.props.onPaste}));}});e.exports=j;},null);
__d("SearchableTextInput.react",["EventListener","React","AbstractTextFieldMixin.react","AbstractTextInput.react","getActiveElement"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=h,m=l.PropTypes,n=h.createClass({displayName:"SearchableTextInput",propTypes:Object.assign({},i.propTypes,{queryString:m.string,searchSource:m.object,searchSourceOptions:m.object,onEntriesFound:m.func.isRequired,searchOnFocus:m.bool,searchOnUpdate:m.bool,onPaste:m.func,onFocus:m.func,onChange:m.func}),componentDidMount:function(){if(this.props.onPaste)this._listener=g.listen(this.refs.input.getTextFieldDOM(),'paste',this.props.onPaste);},componentWillReceiveProps:function(o){},componentDidUpdate:function(o){if(this.props.searchOnUpdate)if(o.queryString!==this.props.queryString)this.search(this.props.queryString);},componentWillUnmount:function(){if(this._listener){this._listener.remove();this._listener=null;}},_onInputFocus:function(){this.props.searchSource.bootstrap(function(){if(this.props.searchOnFocus)this.search(this.props.queryString);}.bind(this));this.props.onFocus&&this.props.onFocus();},_onSearchCallback:function(o,p,q){if(this.props.queryString===p)this.props.onEntriesFound(o,p,q);},_onChange:function(event){this.props.onChange&&this.props.onChange(event);var o=event.target.value;setTimeout(function(){return this.search(o);}.bind(this));},search:function(o){this.props.searchSource.search(o,this._onSearchCallback,this.props.searchSourceOptions);},focusInput:function(){var o=this.getTextFieldDOM();if(k()===o){this._onInputFocus();}else o.offsetHeight&&o.focus();},blurInput:function(){var o=this.getTextFieldDOM();o.offsetHeight&&o.blur();},getTextFieldDOM:function(){return this.refs.input.getTextFieldDOM();},render:function(){var o=this.props.queryString||'';return (h.createElement(j,h.__spread({},this.props,{onChange:this._onChange,onFocus:this._onInputFocus,ref:"input",role:"combobox",value:o})));}});e.exports=n;},null);
__d("TypeaheadNavigation",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={moveUp:function(h,i,j){var k=h.indexOf(i),l=k==-1?h.length-1:k-1;j(l==-1?null:h[l]);},moveDown:function(h,i,j){var k=h.indexOf(i)+1;j(k==h.length?null:h[k]);}};e.exports=g;},null);
__d("TypeaheadView.react",["React","cx"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i=g,j=i.PropTypes,k=g.createClass({displayName:"TypeaheadView",propTypes:{entries:j.array.isRequired,extraRendererProps:j.object,highlightedEntry:j.object,isVisible:j.bool,queryString:j.string,Renderer:j.func.isRequired,selectedEntry:j.object},_onSelect:function(l,m){if(this.props.onSelect)this.props.onSelect(l,m);},_onHighlight:function(l){this.props.onHighlight(l);},render:function(){var l=((!this.props.isVisible?"hidden_elem":'')),m=Object.assign({highlightedEntry:this.props.highlightedEntry,selectedEntry:this.props.selectedEntry,entries:this.props.entries,onSelect:this._onSelect,onHighlight:this._onHighlight,onRenderHighlight:this.props.onRenderHighlight,ariaOwneeID:this.props.ariaOwneeID,queryString:this.props.queryString},this.props.extraRendererProps),n=this.props.Renderer;return (g.createElement("div",{className:l},g.createElement(n,g.__spread({},m))));}});e.exports=k;},null);
__d("AbstractTypeahead.react",["AbstractTextFieldMixin.react","ContextualLayer.react","InputSelection","React","ReactLayeredComponentMixin","SearchableTextInput.react","SearchSourceQueryStatus","TypeaheadNavigation","TypeaheadView.react","cx","getOrCreateDOMID","joinClasses","uniqueID"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){b.__markCompiled&&b.__markCompiled();var t=j,u=t.PropTypes,v=[],w=10,x=j.createClass({displayName:"AbstractTypeahead",mixins:[k],propTypes:Object.assign({},g.propTypes,{inputClassName:u.string,inputID:u.string,autoCapitalize:u.string,autoComplete:u.string,autoCorrect:u.string,queryString:u.string,searchSource:u.object.isRequired,searchSourceOptions:u.object,excludedEntries:u.object,presenter:u.object.isRequired,onSelectAttempt:u.func,onEntriesFound:u.func,onNoEntriesFound:u.func,onEnterWithoutSelection:u.func,autoHighlight:u.bool,showEntriesOnFocus:u.bool,selectOnBlur:u.bool,selectOnTab:u.bool,focusedOnInit:u.bool,hideViewWithEntries:u.bool,disabled:u.bool,entriesWidthMatchContext:u.bool,selectedEntry:u.object,onTypeaheadVisibilityChanged:u.func,onPaste:u.func,navigation:u.object}),getDefaultProps:function(){return {autoComplete:'off',autoCorrect:'off',selectOnBlur:false,selectOnTab:true,hideViewWithEntries:true,entriesWidthMatchContext:true,navigation:n};},getInitialState:function(){return {highlightedEntry:null,isAutoHighlight:this.props.autoHighlight,ariaActiveDescendantID:null,ariaOwneeID:s(),activeEntries:null,focused:!!this.props.focusedOnInit,viewIsVisible:!!this.props.focusedOnInit};},_onRenderHighlight:function(y){var z=q(y);this.setState({ariaActiveDescendantID:z});},_determineViewVisibility:function(y,z){if(!y)return false;var aa=y.length>0&&(this.props.showEntriesOnFocus||this.props.queryString.length>0);return !!(z&&(this.props.presenter.alwaysVisibleOnFocus||aa));},_onEntriesFound:function(y,z,aa){if(!this.isMounted())return;if(this.props.excludedEntries){var ba=this.props.excludedEntries;y=y.filter(function(ja){return !ba.hasOwnProperty(ja.getUniqueID());});}var ca=this.props.presenter,da=typeof ca.sortEntries=='function'?ca.sortEntries(y,this.state.activeEntries,this.props.queryString):y,ea=da.slice(0,ca.maxEntries||w),fa=this._determineViewVisibility(ea,this.state.focused);if(!ea.length){this.setState({ariaActiveDescendantID:null,activeEntries:ea,highlightedEntry:null,isAutoHighlight:this.props.autoHighlight});this._setViewIsVisible(fa);if(this.props.onNoEntriesFound&&aa===m.COMPLETE)this.props.onNoEntriesFound();return;}if(this.props.onEntriesFound)this.props.onEntriesFound(ea,aa);var ga=this.state.highlightedEntry,ha=ga&&ea.indexOf(ga)!==-1;if(!this.props.autoHighlight){this.setState({activeEntries:ea,highlightedEntry:ha?ga:null});if(fa)this._setViewIsVisible(true);return;}var ia=this.state.isAutoHighlight;if(ia){ga=ea[0];}else{ga=ha?ga:ea[0];ia=!ha;}this.setState({activeEntries:ea,highlightedEntry:ga,isAutoHighlight:ia});if(fa)this._setViewIsVisible(true);},_onInputFocus:function(){var y=this._determineViewVisibility(this.state.activeEntries,true);if(y)this._setViewIsVisible(true);this.setState({focused:true});this.props.onFocus&&this.props.onFocus();},_onInputBlur:function(){if(this.props.hideViewWithEntries)this._close();if(this.props.selectOnBlur&&this.state.highlightedEntry)this.props.onSelectAttempt(this.state.highlightedEntry);this.setState({focused:false});this.props.onBlur&&this.props.onBlur();},_onInputClick:function(y){var z=this.getTextFieldDOM(),aa=i.get(z);if(aa&&aa.start==aa.end)z.select();this.props.onClick&&this.props.onClick(y);},_onEscape:function(){this._close();this.blurInput();this.setState({focused:false});this.props.onEscape&&this.props.onEscape();},_onEnter:function(event){if(this.props.onEnterWithoutSelection&&(!this.state.viewIsVisible||!this.state.highlightedEntry)){this.props.onEnterWithoutSelection(event);return;}if(!this.state.viewIsVisible)return;if(!this.state.highlightedEntry){event.preventDefault();return;}if(this.props.hideViewWithEntries)this._close();if(this.props.onSelectAttempt)this.props.onSelectAttempt(this.state.highlightedEntry);event.preventDefault();},_onTab:function(event){if(this.props.selectOnTab&&this.state.viewIsVisible&&this.props.onSelectAttempt&&this.state.highlightedEntry){if(this.props.hideViewWithEntries){this._close();event.preventDefault();}this.props.onSelectAttempt(this.state.highlightedEntry);}},_onDownArrow:function(event){event.preventDefault();this.props.navigation.moveDown(this.state.activeEntries||v,this.state.highlightedEntry,this._setHighlight);},_onUpArrow:function(event){event.preventDefault();this.props.navigation.moveUp(this.state.activeEntries||v,this.state.highlightedEntry,this._setHighlight);},_setHighlight:function(y){this.setState({highlightedEntry:y,isAutoHighlight:!y});},_onInputChange:function(event){if(this.props.onChange)this.props.onChange(event);this._setViewIsVisible(this.state.focused&&(this.props.showEntriesOnFocus||event.target.value.length>0)&&(this.state.activeEntries!=null&&this.state.activeEntries.length>0));},_onViewHighlight:function(y){this.setState({highlightedEntry:y,isAutoHighlight:false});},_getView:function(){return (j.createElement(o,{Renderer:this.props.presenter.ViewRenderer,extraRendererProps:this.props.presenter.extraRendererProps,highlightedEntry:this.state.highlightedEntry,selectedEntry:this.props.selectedEntry,isVisible:this.state.viewIsVisible,ariaOwneeID:this.state.ariaOwneeID,onHighlight:this._onViewHighlight,onRenderHighlight:this._onRenderHighlight,onSelect:this.props.onSelectAttempt,entries:this.state.activeEntries||v,queryString:this.props.queryString}));},_setViewIsVisible:function(y){if(y!==this.state.viewIsVisible){if(this.props.onTypeaheadVisibilityChanged)this.props.onTypeaheadVisibilityChanged(y,this.state.activeEntries||v);this.setState({viewIsVisible:y});}},componentWillReceiveProps:function(y){if(!y.queryString&&!this.props.showEntriesOnFocus)this.clearActiveEntries();},componentDidUpdate:function(){var y=this._determineViewVisibility(this.state.activeEntries,this.state.focused);if(y)this._setViewIsVisible(true);},renderLayers:function(){if(!this.props.presenter.useLayer)return {};var y=null,z=null;if(this.props.context){y=this.props.context;}else z=function(){return this.refs.input;}.bind(this);return {typeaheadView:j.createElement(h,{alignment:this.props.presenter.alignment,behaviors:this.props.presenter.layerBehaviors,containerWidthMatchContext:this.props.entriesWidthMatchContext,contextRef:z,context:y,position:this.props.presenter.layerPosition||"below",shown:this.state.viewIsVisible,shouldSetARIAProperties:false},this._getView())};},render:function(){var y=this.state.activeEntries,z=!!(y&&y.length),aa=j.createElement(l,{"aria-activedescendant":this.state.ariaActiveDescendantID,"aria-expanded":z,"aria-autocomplete":"list","aria-label":this.props.ariaLabel,"aria-owns":this.state.ariaOwneeID,ref:"input",autoCapitalize:this.props.autoCapitalize,autoComplete:this.props.autoComplete,autoCorrect:this.props.autoCorrect,className:this.props.inputClassName,id:this.props.inputID,queryString:this.props.queryString,placeholder:this.props.placeholder,maxLength:this.props.maxLength,searchSource:this.props.searchSource,searchSourceOptions:this.props.searchSourceOptions,searchOnFocus:!!this.props.showEntriesOnFocus,disabled:this.props.disabled,onEntriesFound:this._onEntriesFound,onEscape:this._onEscape,onBlur:this._onInputBlur,onFocus:this._onInputFocus,onChange:this._onInputChange,onDownArrow:this._onDownArrow,onUpArrow:this._onUpArrow,onTab:this._onTab,onEnter:this._onEnter,onBackspace:this.props.onBackspace,onPaste:this.props.onPaste,onClick:this._onInputClick,tabIndex:this.props.tabIndex}),ba=null;if(!this.props.presenter.useLayer)ba=this._getView();return (j.createElement("span",j.__spread({},this.props,{className:r(this.props.className,"_58ah"),onBlur:null,onClick:null,onFocus:null,tabIndex:null}),aa,ba));},componentDidMount:function(){if(this.props.focusedOnInit)this.refs.input.focusInput();},clearActiveEntries:function(){this.setState({ariaActiveDescendantID:null,activeEntries:null,highlightedEntry:null});},focusInput:function(){this.refs.input.focusInput();},blurInput:function(){if(this.refs.input.blur){this.refs.input.blur();}else if(this.refs.input.blurInput)this.refs.input.blurInput();},hideView:function(){this._setViewIsVisible(false);},_close:function(){this._setViewIsVisible(false);this.clearActiveEntries();},getTextFieldDOM:function(){return this.refs.input.getTextFieldDOM();}});e.exports=x;},null);
__d("AbstractCheckboxInput.react",["React","cx","invariant","joinClasses"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=g,l=k.PropTypes,m=g.createClass({displayName:"AbstractCheckboxInput",propTypes:{tooltip:l.string},render:function(){i(!this.props.children||this.props.children.length===0);var n=j(this.props.className,"_kv1"),o=g.createElement("input",g.__spread({},this.props,{className:null,type:"checkbox"}),undefined);return (g.createElement("label",{className:n},o,g.createElement("span",{"data-hover":this.props.tooltip?'tooltip':null,"aria-label":this.props.tooltip})));}});e.exports=m;},null);
__d("XUIRadioInput.react",["React","cx","joinClasses","invariant"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=g.createClass({displayName:"XUIRadioInput",render:function(){j(!this.props.children||this.props.children.length===0);var l=i(this.props.className,"_55sh"),m=g.createElement("input",g.__spread({},this.props,{className:null,type:"radio"}),undefined);return (g.createElement("label",{className:l},m,g.createElement("span",null)));}});e.exports=k;},null);
__d("destroyOnUnload",["Run"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();function h(i){g.onLeave(i);}e.exports=h;},null);
__d("DeferredComponent.react",["Map","React"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i=h,j=i.PropTypes,k=new g(),l=h.createClass({displayName:"DeferredComponent",propTypes:{deferredPlaceholder:j.element.isRequired,deferredComponent:j.func.isRequired,onComponentLoad:j.func,module:j.string},getInitialState:function(){return {component:this.props.module?k.get(this.props.module):null};},componentDidMount:function(){if(!this.state.component)this.props.deferredComponent(this.onComponentLoaded);},render:function(){var m=this.state.component;if(!m)return this.props.deferredPlaceholder;return (h.createElement(m,h.__spread({},this.props),this.props.children));},onComponentLoaded:function(m){if(this.props.module)k.set(this.props.module,m);if(this.isMounted())this.setState({component:m},function(){this.props.onComponentLoad&&this.props.onComponentLoad();}.bind(this));}});e.exports=l;},null);
__d("JSResource",["Bootloader","Promise"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();function i(k){"use strict";this.$JSResourceReference0=k;}i.prototype.getModuleId=function(){"use strict";return this.$JSResourceReference0;};i.prototype.load=function(){"use strict";return new h(function(k){g.loadModules.call(g,[this.$JSResourceReference0],k);}.bind(this));};i.prototype.equals=function(k){"use strict";return this===k||this.$JSResourceReference0==k.$JSResourceReference0;};var j=function(k){return new i(k);};j.Reference=i;e.exports=j;},null);
__d("BootloadedComponent.react",["Bootloader","DeferredComponent.react","JSResource","React"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=j,l=k.PropTypes,m=j.createClass({displayName:"BootloadedComponent",propTypes:{bootloadPlaceholder:l.element.isRequired,bootloadLoader:l.instanceOf(i.Reference).isRequired},render:function(){var n=this.props,o=n.bootloadLoader,p=n.bootloadPlaceholder,q=(function(r,s){var t={},u=Object.prototype.hasOwnProperty;if(r==null)throw new TypeError();for(var v in r)if(u.call(r,v)&&!u.call(s,v))t[v]=r[v];return t;})(n,{bootloadLoader:1,bootloadPlaceholder:1});o;return (j.createElement(h,j.__spread({deferredPlaceholder:p,deferredComponent:this._provideComponent},q),this.props.children));},_provideComponent:function(n){g.loadModules.call(g,[this.props.bootloadLoader.getModuleId()],n);}});e.exports=m;},null);
__d("arrayStableSort",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(h,i){return h.map(function(j,k){return {data:j,index:k};}).sort(function(j,k){return i(j.data,k.data)||(j.index-k.index);}).map(function(j){return j.data;});}e.exports=g;},null);
__d("RangedCallbackManager",["CallbackManagerController","arrayStableSort","createObjectFrom"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();function j(k,l,m){"use strict";this.$RangedCallbackManager0=[];this.$RangedCallbackManager1=false;this.$RangedCallbackManager2=false;this.$RangedCallbackManager3={};this.$RangedCallbackManager4=new g(this.$RangedCallbackManager5.bind(this));this.$RangedCallbackManager6=k;this.$RangedCallbackManager7=l;this.$RangedCallbackManager8=m;}j.prototype.executeOrEnqueue=function(k,l,m,n,o){"use strict";return this.$RangedCallbackManager4.executeOrEnqueue({start:k,limit:l},m,{strict:!!n,skipOnStrictHandler:o});};j.prototype.unsubscribe=function(k){"use strict";this.$RangedCallbackManager4.unsubscribe(k);};j.prototype.getUnavailableResources=function(k){"use strict";var l=this.$RangedCallbackManager4.getRequest(k),m=[];if(l&&!this.$RangedCallbackManager1){var n=l.request,o=this.$RangedCallbackManager9(l.options),p=n.start+n.limit;for(var q=o.length;q<p;q++)m.push(q);}return m;};j.prototype.addResources=function(k){"use strict";k.forEach(function(l){if(!this.$RangedCallbackManager3[l]){this.$RangedCallbackManager3[l]=true;this.$RangedCallbackManager0.push(l);this.$RangedCallbackManager2=null;}}.bind(this));this.resortResources();this.$RangedCallbackManager4.runPossibleCallbacks();};j.prototype.addResourcesWithoutSorting=function(k,l){"use strict";var m=this.$RangedCallbackManager0.slice(0,l);m=m.concat(k);m=m.concat(this.$RangedCallbackManager0.slice(l));this.$RangedCallbackManager0=m;Object.assign(this.$RangedCallbackManager3,i(k,true));this.$RangedCallbackManager2=null;this.$RangedCallbackManager4.runPossibleCallbacks();};j.prototype.removeResources=function(k){"use strict";k.forEach(function(l){if(this.$RangedCallbackManager3[l]){this.$RangedCallbackManager3[l]=false;var m=this.$RangedCallbackManager0.indexOf(l);if(m!=-1)this.$RangedCallbackManager0.splice(m,1);}}.bind(this));};j.prototype.removeAllResources=function(){"use strict";this.$RangedCallbackManager0=[];this.$RangedCallbackManager3={};};j.prototype.resortResources=function(){"use strict";this.$RangedCallbackManager0=h(this.$RangedCallbackManager0,function(k,l){return this.$RangedCallbackManager7(this.$RangedCallbackManager6(k),this.$RangedCallbackManager6(l));}.bind(this));};j.prototype.setReachedEndOfArray=function(){"use strict";if(!this.$RangedCallbackManager1){this.$RangedCallbackManager1=true;this.$RangedCallbackManager2=null;this.$RangedCallbackManager4.runPossibleCallbacks();}};j.prototype.hasReachedEndOfArray=function(){"use strict";return this.$RangedCallbackManager1;};j.prototype.setError=function(k){"use strict";if(this.$RangedCallbackManager2!==k){this.$RangedCallbackManager2=k;this.$RangedCallbackManager4.runPossibleCallbacks();}};j.prototype.getError=function(k,l,m){"use strict";var n=this.$RangedCallbackManager9({strict:m});return k+l>n.length?this.$RangedCallbackManager2:null;};j.prototype.hasResource=function(k){"use strict";return this.$RangedCallbackManager3[k];};j.prototype.getResourceAtIndex=function(k){"use strict";return this.$RangedCallbackManager0[k];};j.prototype.getAllResources=function(){"use strict";return this.$RangedCallbackManager0.concat();};j.prototype.getCurrentArraySize=function(k){"use strict";return this.$RangedCallbackManager9(k).length;};j.prototype.$RangedCallbackManager9=function(k){"use strict";var l=this.$RangedCallbackManager0;if(k&&k.strict){var m=k.skipOnStrictHandler||this.$RangedCallbackManager8;if(m)l=l.filter(m);}return l;};j.prototype.$RangedCallbackManager5=function(k,l){"use strict";var m=this.$RangedCallbackManager9(l);if(!this.$RangedCallbackManager1&&!this.$RangedCallbackManager2&&k.start+k.limit>m.length){return false;}else{var n=m.slice(k.start,k.start+k.limit),o=k.start+k.limit>m.length?this.$RangedCallbackManager2:null;return [n,o];}};j.prototype.getElementsUntil=function(k){"use strict";var l=[];for(var m=0;m<this.$RangedCallbackManager0.length;m++){var n=this.$RangedCallbackManager6(this.$RangedCallbackManager0[m]);if(this.$RangedCallbackManager7(n,k)>0)break;l.push(this.$RangedCallbackManager0[m]);}return l;};e.exports=j;},null);
__d("BlobFactory",["emptyFunction"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h,i;function j(){try{new a.Blob();i=true;}catch(l){i=false;}}var k=a.BlobBuilder||a.WebKitBlobBuilder||a.MozBlobBuilder||a.MSBlobBuilder;if(a.Blob){h={getBlob:function(l,m){l=l||[];m=m||{};if(i===(void 0))j();if(i){return new a.Blob(l,m);}else{var n=new k();for(var o=0;o<l.length;o++)n.append(l[o]);return n.getBlob(m.type);}},isSupported:g.thatReturnsTrue};}else h={getBlob:function(){},isSupported:g.thatReturnsFalse};e.exports=h;},null);
__d("Visibility",["mixInEventEmitter"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h,i;if(typeof document.hidden!=='undefined'){h='hidden';i='visibilitychange';}else if(typeof document.mozHidden!=='undefined'){h='mozHidden';i='mozvisibilitychange';}else if(typeof document.msHidden!=='undefined'){h='msHidden';i='msvisibilitychange';}else if(typeof document.webkitHidden!=='undefined'){h='webkitHidden';i='webkitvisibilitychange';}function j(){return h?document[h]:false;}var k={HIDDEN:'hidden',VISIBLE:'visible',isHidden:j};g(k,{visible:true,hidden:true});if(document.addEventListener&&i)document.addEventListener(i,function l(){k.emit(j()?k.HIDDEN:k.VISIBLE);});e.exports=k;},null);
__d("checkRangeOverlap",["invariant"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();function h(i,j,k,l){g(i<=j&&k<=l);return (i<l&&j>k);}e.exports=h;},null);
__d("classWithMixins",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(h,i){var j=function(){h.apply(this,arguments);};j.prototype=Object.assign(Object.create(h.prototype),i.prototype);return j;}e.exports=g;},null);
__d("clearImmediatePolyfill",["ImmediateImplementation"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=a.clearImmediate||b('ImmediateImplementation').clearImmediate;},null);
__d("escapeJSQuotes",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(h){if(typeof h=='undefined'||h==null||!h.valueOf())return '';return h.toString().replace(/\\/g,'\\\\').replace(/\n/g,'\\n').replace(/\r/g,'\\r').replace(/"/g,'\\x22').replace(/'/g,'\\\'').replace(/</g,'\\x3c').replace(/>/g,'\\x3e').replace(/&/g,'\\x26');}e.exports=g;},null);
__d("fillArray",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(h,i){var j=new Array(h);for(var k=0;k<h;k++)j[k]=i;return j;}e.exports=g;},null);
__d("filterObject",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();'use strict';var g=Object.prototype.hasOwnProperty;function h(i,j,k){if(!i)return null;var l={};for(var m in i)if(g.call(i,m)&&j.call(k,i[m],m,i))l[m]=i[m];return l;}e.exports=h;},null);
__d("ImageBlock.react",["LeftRight.react","React","cx","invariant","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();function l(o){j(o.children&&(o.children.length===2||o.children.length===3));}function m(o){return (("img")+(' '+"_8o")+(o==='small'?' '+"_8r":'')+(o==='medium'?' '+"_8s":'')+(o==='large'?' '+"_8t":''));}var n=h.createClass({displayName:"ImageBlock",render:function(){l(this.props);var o=this.props.children[0],p=this.props.children[1],q=this.props.children[2],r=this.props.spacing||'small',s={className:k(o.props.className,m(r),this.props.imageClassName)};if(o.type==='img'){if(o.props.alt===(void 0))s.alt='';}else if((o.type==='a'||o.type==='link')&&o.props.tabIndex===(void 0)&&o.props.title===(void 0)&&o.props['aria-label']===(void 0)){s.tabIndex='-1';s['aria-hidden']='true';}o=h.cloneElement(o,s);var t=k(this.props.contentClassName,(("_42ef")+(r==='small'?' '+"_8u":''))),u;if(!q){u=h.createElement("div",{className:t},p);}else u=h.createElement(g,{className:t,direction:g.DIRECTION.right},p,q);return (h.createElement(g,h.__spread({},this.props,{direction:g.DIRECTION.left}),o,u));}});e.exports=n;},null);
__d("MutationObserver",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(){"use strict";}g.prototype.observe=function(i,j){"use strict";};g.prototype.disconnect=function(){"use strict";};g.prototype.takeRecords=function(){"use strict";return null;};var h=a.MutationObserver||a.WebKitMutationObserver||g;e.exports=h;},null);
__d("SimpleObjectsPool",["invariant"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();function h(i){"use strict";this.$SimpleObjectsPool0=i;this.$SimpleObjectsPool1=[];}h.prototype.get=function(){"use strict";if(this.$SimpleObjectsPool1.length){return this.$SimpleObjectsPool1.pop();}else{var i=this.$SimpleObjectsPool0;return new i();}};h.prototype.put=function(i){"use strict";g(i instanceof this.$SimpleObjectsPool0);this.$SimpleObjectsPool1.push(i);};e.exports=h;},null);
__d("PersistentAnimationFrame",["SimpleObjectsPool","Visibility","cancelAnimationFrame","requestAnimationFrame"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=16,l,m={},n=true;function o(){if(!l)l=new g(p);return l;}p.request=function(s){"use strict";if(!s)return 0;return o().get().request(s);};p.cancel=function(s){"use strict";if(s===0)return;var t=m[String(s)];if(t)t.cancel();};function p(){"use strict";this.$PersistentAnimationFrame0=this.$PersistentAnimationFrame0.bind(this);}p.prototype.request=function(s){"use strict";n&&q();this.callback=s;this.hidden=h.isHidden();if(this.hidden){this.intID=setTimeout(this.$PersistentAnimationFrame0,k);}else this.intID=j(this.$PersistentAnimationFrame0);this.strID=String(this.intID);m[this.strID]=this;return this.intID;};p.prototype.cancel=function(){"use strict";if(this.strID){if(this.hidden){clearTimeout(this.intID);}else i(this.intID);this.$PersistentAnimationFrame1();o().put(this);}};p.prototype.$PersistentAnimationFrame0=function(){"use strict";this.callback();this.$PersistentAnimationFrame1();o().put(this);};p.prototype.$PersistentAnimationFrame1=function(){"use strict";delete m[this.strID];delete this.intID;delete this.strID;delete this.callback;delete this.hidden;};function q(){n=false;h.addListener(h.HIDDEN,r);h.addListener(h.VISIBLE,r);}function r(){Object.keys(m).forEach(function(s){var t=m[s],u=t.callback;t.cancel();u();});}e.exports=p;},null);
__d("requestPersistentAnimationFrame",["PersistentAnimationFrame"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';e.exports=g.request;},null);
__d("ResizeEventHandler",["requestPersistentAnimationFrame"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';function h(i){this.$ResizeEventHandler0=false;this.$ResizeEventHandler1=i;this.$ResizeEventHandler2=this.$ResizeEventHandler2.bind(this);this.handleEvent=this.handleEvent.bind(this);}h.prototype.handleEvent=function(event){if(this.$ResizeEventHandler0===false){this.$ResizeEventHandler0=true;g(this.$ResizeEventHandler2);}};h.prototype.$ResizeEventHandler2=function(){this.$ResizeEventHandler0=false;this.$ResizeEventHandler1();};e.exports=h;},null);
__d("ResponsiveBlock.react",["MutationObserver","React","ResizeEventHandler","UserAgent_DEPRECATED","cx","joinClasses","requestAnimationFrame"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();var n=h,o=n.PropTypes,p=j.ie()&&('onresize' in document.createElement('div')),q={attributes:true,characterData:true,childList:true,subtree:true},r=h.createClass({displayName:"ResponsiveBlock",propTypes:{onResize:o.func.isRequired},componentDidMount:function(){this._width=null;this._height=null;this._resizeHandler=new i(this._didResize);this._bindResizeEvent();this._observer=new g(this._resizeHandler.handleEvent);this._observer.observe(h.findDOMNode(this),q);},componentWillUnmount:function(){if(this._sensorTarget){this._sensorTarget.onresize=null;this._sensorTarget=null;}this._resizeHandler=null;this._observer.disconnect();this._observer=null;this._width=null;this._height=null;},render:function(){var s=l("_4u-c",this.props.className),t;if(p){t=(h.createElement("div",{key:"sensor",ref:"sensorNode",className:"_4u-f"}));}else t=(h.createElement("div",{key:"sensor",className:"_4u-f"},h.createElement("iframe",{"aria-hidden":"true",ref:"sensorNode",className:"_4u-g",tabIndex:"-1"})));return (h.createElement("div",h.__spread({},this.props,{className:s}),this.props.children,t));},_bindResizeEvent:function(){if(!this.isMounted())return;if(p){this._sensorTarget=h.findDOMNode(this.refs.sensorNode);}else this._sensorTarget=h.findDOMNode(this.refs.sensorNode).contentWindow;if(this._sensorTarget){this._sensorTarget.onresize=this._resizeHandler.handleEvent;this._resizeHandler.handleEvent();}else m(this._bindResizeEvent);},_didResize:function(){if(this.isMounted()){var s=h.findDOMNode(this),t=s.offsetWidth,u=s.offsetHeight;if(t!==this._width||u!==this._height){this._width=t;this._height=u;this.props.onResize(t,u);}}}});e.exports=r;},null);
__d("PureStoreBasedStateMixin",["StoreBasedStateMixinHelper","invariant","setImmediate"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';var j=function(){for(var k=[],l=0,m=arguments.length;l<m;l++)k.push(arguments[l]);return {getInitialState:function(){return this.constructor.calculateState();},componentWillMount:function(){h(this.constructor.calculateState);this._recalculateStateID=null;var n=function(){if(this.isMounted())this.setState(this.constructor.calculateState());this._recalculateStateID=null;}.bind(this);this._mixin=new g(k);this._mixin.subscribeCallback(function(){if(this._recalculateStateID===null)this._recalculateStateID=i(n);}.bind(this));},componentWillUnmount:function(){this._mixin.release();this._mixin=null;}};}.bind(this);e.exports=j;},null);
__d("PhotosMimeType",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(h){"use strict";if(this instanceof g===false)return new g(h);this.$PhotosMimeType0=h.split('/');}g.prototype.isImage=function(){"use strict";return this.$PhotosMimeType0[0]==='image';};g.prototype.isJpeg=function(){"use strict";return this.isImage()&&(this.$PhotosMimeType0[1]==='jpeg'||this.$PhotosMimeType0[1]==='pjpeg');};e.exports=g;},null);
__d("DataTransfer",["PhotosMimeType","createArrayFromMixed","emptyFunction"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=new RegExp('\u000D\u000A','g'),k='\u000A',l={'text/rtf':1,'text/html':1};function m(o){if(o.kind=='file')return o.getAsFile();}function n(o){"use strict";this.data=o;this.types=o.types?h(o.types):[];}n.prototype.isRichText=function(){"use strict";return this.types.some(function(o){return l[o];});};n.prototype.getText=function(){"use strict";var o;if(this.data.getData)if(!this.types.length){o=this.data.getData('Text');}else if(this.types.indexOf('text/plain')!=-1)o=this.data.getData('text/plain');return o?o.replace(j,k):null;};n.prototype.getHTML=function(){"use strict";if(this.data.getData)if(!this.types.length){return this.data.getData('Text');}else if(this.types.indexOf('text/html')!=-1)return this.data.getData('text/html');};n.prototype.isLink=function(){"use strict";return this.types.some(function(o){return o.indexOf('url')!=-1||o.indexOf('text/uri-list')!=-1;});};n.prototype.isImage=function(){"use strict";var o=this.types.some(function(s){return s.indexOf('application/x-moz-file')!=-1;});if(o)return true;var p=this.getFiles();for(var q=0;q<p.length;q++){var r=p[q].type;if(!g(r).isImage())return false;}return true;};n.prototype.getCount=function(){"use strict";if(this.data.hasOwnProperty('items')){return this.data.items.length;}else if(this.data.hasOwnProperty('mozItemCount')){return this.data.mozItemCount;}else if(this.data.files)return this.data.files.length;return null;};n.prototype.getFiles=function(){"use strict";if(this.data.items){return Array.prototype.slice.call(this.data.items).map(m).filter(i.thatReturnsArgument);}else if(this.data.files){return Array.prototype.slice.call(this.data.files);}else return [];};n.prototype.hasFiles=function(){"use strict";return this.getFiles().length>0;};e.exports=n;},null);
__d("cssVar",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(h){throw new Error('cssVar'+'("'+h+'"): Unexpected class transformation.');}e.exports=g;},null);
__d("immutable",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();(function(g,h){typeof f==='object'&&typeof e!=='undefined'?e.exports=h():typeof define==='function'&&define.amd?define(h):g.Immutable=h();}(this,function(){'use strict';var g=Array.prototype.slice;function h(xh,yh){if(yh)xh.prototype=Object.create(yh.prototype);xh.prototype.constructor=xh;}var i='delete',j=5,k=1<<j,l=k-1,m={},n={value:false},o={value:false};function p(xh){xh.value=false;return xh;}function q(xh){xh&&(xh.value=true);}function r(){}function s(xh,yh){yh=yh||0;var zh=Math.max(0,xh.length-yh),ai=new Array(zh);for(var bi=0;bi<zh;bi++)ai[bi]=xh[bi+yh];return ai;}function t(xh){if(xh.size===(void 0))xh.size=xh.__iterate(v);return xh.size;}function u(xh,yh){return yh>=0?(+yh):t(xh)+(+yh);}function v(){return true;}function w(xh,yh,zh){return (xh===0||(zh!==(void 0)&&xh<=-zh))&&(yh===(void 0)||(zh!==(void 0)&&yh>=zh));}function x(xh,yh){return z(xh,yh,0);}function y(xh,yh){return z(xh,yh,yh);}function z(xh,yh,zh){return xh===(void 0)?zh:xh<0?Math.max(0,yh+xh):yh===(void 0)?xh:Math.min(yh,xh);}function aa(xh){return ea(xh)?xh:bb(xh);}h(ba,aa);function ba(xh){return fa(xh)?xh:cb(xh);}h(ca,aa);function ca(xh){return ga(xh)?xh:db(xh);}h(da,aa);function da(xh){return ea(xh)&&!ha(xh)?xh:eb(xh);}function ea(xh){return !!(xh&&xh[ja]);}function fa(xh){return !!(xh&&xh[ka]);}function ga(xh){return !!(xh&&xh[la]);}function ha(xh){return fa(xh)||ga(xh);}function ia(xh){return !!(xh&&xh[ma]);}aa.isIterable=ea;aa.isKeyed=fa;aa.isIndexed=ga;aa.isAssociative=ha;aa.isOrdered=ia;aa.Keyed=ba;aa.Indexed=ca;aa.Set=da;var ja='@@__IMMUTABLE_ITERABLE__@@',ka='@@__IMMUTABLE_KEYED__@@',la='@@__IMMUTABLE_INDEXED__@@',ma='@@__IMMUTABLE_ORDERED__@@',na=0,oa=1,pa=2,qa=typeof Symbol==='function'&&Symbol.iterator,ra='@@iterator',sa=qa||ra;function ta(xh){this.next=xh;}ta.prototype.toString=function(){return '[Iterator]';};ta.KEYS=na;ta.VALUES=oa;ta.ENTRIES=pa;ta.prototype.inspect=ta.prototype.toSource=function(){return this.toString();};ta.prototype[sa]=function(){return this;};function ua(xh,yh,zh,ai){var bi=xh===0?yh:xh===1?zh:[yh,zh];ai?(ai.value=bi):(ai={value:bi,done:false});return ai;}function va(){return {value:(void 0),done:true};}function wa(xh){return !!za(xh);}function xa(xh){return xh&&typeof xh.next==='function';}function ya(xh){var yh=za(xh);return yh&&yh.call(xh);}function za(xh){var yh=xh&&((qa&&xh[qa])||xh[ra]);if(typeof yh==='function')return yh;}function ab(xh){return xh&&typeof xh.length==='number';}h(bb,aa);function bb(xh){return xh===null||xh===(void 0)?mb():ea(xh)?xh.toSeq():pb(xh);}bb.of=function(){return bb(arguments);};bb.prototype.toSeq=function(){return this;};bb.prototype.toString=function(){return this.__toString('Seq {','}');};bb.prototype.cacheResult=function(){if(!this._cache&&this.__iterateUncached){this._cache=this.entrySeq().toArray();this.size=this._cache.length;}return this;};bb.prototype.__iterate=function(xh,yh){return rb(this,xh,yh,true);};bb.prototype.__iterator=function(xh,yh){return sb(this,xh,yh,true);};h(cb,bb);function cb(xh){return xh===null||xh===(void 0)?mb().toKeyedSeq():ea(xh)?(fa(xh)?xh.toSeq():xh.fromEntrySeq()):nb(xh);}cb.prototype.toKeyedSeq=function(){return this;};h(db,bb);function db(xh){return xh===null||xh===(void 0)?mb():!ea(xh)?ob(xh):fa(xh)?xh.entrySeq():xh.toIndexedSeq();}db.of=function(){return db(arguments);};db.prototype.toIndexedSeq=function(){return this;};db.prototype.toString=function(){return this.__toString('Seq [',']');};db.prototype.__iterate=function(xh,yh){return rb(this,xh,yh,false);};db.prototype.__iterator=function(xh,yh){return sb(this,xh,yh,false);};h(eb,bb);function eb(xh){return (xh===null||xh===(void 0)?mb():!ea(xh)?ob(xh):fa(xh)?xh.entrySeq():xh).toSetSeq();}eb.of=function(){return eb(arguments);};eb.prototype.toSetSeq=function(){return this;};bb.isSeq=kb;bb.Keyed=cb;bb.Set=eb;bb.Indexed=db;var fb='@@__IMMUTABLE_SEQ__@@';bb.prototype[fb]=true;h(gb,db);function gb(xh){this._array=xh;this.size=xh.length;}gb.prototype.get=function(xh,yh){return this.has(xh)?this._array[u(this,xh)]:yh;};gb.prototype.__iterate=function(xh,yh){var zh=this._array,ai=zh.length-1;for(var bi=0;bi<=ai;bi++)if(xh(zh[yh?ai-bi:bi],bi,this)===false)return bi+1;return bi;};gb.prototype.__iterator=function(xh,yh){var zh=this._array,ai=zh.length-1,bi=0;return new ta(function(){return bi>ai?va():ua(xh,bi,zh[yh?ai-bi++:bi++]);});};h(hb,cb);function hb(xh){var yh=Object.keys(xh);this._object=xh;this._keys=yh;this.size=yh.length;}hb.prototype.get=function(xh,yh){if(yh!==(void 0)&&!this.has(xh))return yh;return this._object[xh];};hb.prototype.has=function(xh){return this._object.hasOwnProperty(xh);};hb.prototype.__iterate=function(xh,yh){var zh=this._object,ai=this._keys,bi=ai.length-1;for(var ci=0;ci<=bi;ci++){var di=ai[yh?bi-ci:ci];if(xh(zh[di],di,this)===false)return ci+1;}return ci;};hb.prototype.__iterator=function(xh,yh){var zh=this._object,ai=this._keys,bi=ai.length-1,ci=0;return new ta(function(){var di=ai[yh?bi-ci:ci];return ci++>bi?va():ua(xh,di,zh[di]);});};hb.prototype[ma]=true;h(ib,db);function ib(xh){this._iterable=xh;this.size=xh.length||xh.size;}ib.prototype.__iterateUncached=function(xh,yh){if(yh)return this.cacheResult().__iterate(xh,yh);var zh=this._iterable,ai=ya(zh),bi=0;if(xa(ai)){var ci;while(!(ci=ai.next()).done)if(xh(ci.value,bi++,this)===false)break;}return bi;};ib.prototype.__iteratorUncached=function(xh,yh){if(yh)return this.cacheResult().__iterator(xh,yh);var zh=this._iterable,ai=ya(zh);if(!xa(ai))return new ta(va);var bi=0;return new ta(function(){var ci=ai.next();return ci.done?ci:ua(xh,bi++,ci.value);});};h(jb,db);function jb(xh){this._iterator=xh;this._iteratorCache=[];}jb.prototype.__iterateUncached=function(xh,yh){if(yh)return this.cacheResult().__iterate(xh,yh);var zh=this._iterator,ai=this._iteratorCache,bi=0;while(bi<ai.length)if(xh(ai[bi],bi++,this)===false)return bi;var ci;while(!(ci=zh.next()).done){var di=ci.value;ai[bi]=di;if(xh(di,bi++,this)===false)break;}return bi;};jb.prototype.__iteratorUncached=function(xh,yh){if(yh)return this.cacheResult().__iterator(xh,yh);var zh=this._iterator,ai=this._iteratorCache,bi=0;return new ta(function(){if(bi>=ai.length){var ci=zh.next();if(ci.done)return ci;ai[bi]=ci.value;}return ua(xh,bi,ai[bi++]);});};function kb(xh){return !!(xh&&xh[fb]);}var lb;function mb(){return lb||(lb=new gb([]));}function nb(xh){var yh=Array.isArray(xh)?new gb(xh).fromEntrySeq():xa(xh)?new jb(xh).fromEntrySeq():wa(xh)?new ib(xh).fromEntrySeq():typeof xh==='object'?new hb(xh):(void 0);if(!yh)throw new TypeError('Expected Array or iterable object of [k, v] entries, '+'or keyed object: '+xh);return yh;}function ob(xh){var yh=qb(xh);if(!yh)throw new TypeError('Expected Array or iterable object of values: '+xh);return yh;}function pb(xh){var yh=qb(xh)||(typeof xh==='object'&&new hb(xh));if(!yh)throw new TypeError('Expected Array or iterable object of values, or keyed object: '+xh);return yh;}function qb(xh){return (ab(xh)?new gb(xh):xa(xh)?new jb(xh):wa(xh)?new ib(xh):(void 0));}function rb(xh,yh,zh,ai){var bi=xh._cache;if(bi){var ci=bi.length-1;for(var di=0;di<=ci;di++){var ei=bi[zh?ci-di:di];if(yh(ei[1],ai?ei[0]:di,xh)===false)return di+1;}return di;}return xh.__iterateUncached(yh,zh);}function sb(xh,yh,zh,ai){var bi=xh._cache;if(bi){var ci=bi.length-1,di=0;return new ta(function(){var ei=bi[zh?ci-di:di];return di++>ci?va():ua(yh,ai?ei[0]:di-1,ei[1]);});}return xh.__iteratorUncached(yh,zh);}h(tb,aa);function tb(){throw TypeError('Abstract');}h(ub,tb);function ub(){}h(vb,tb);function vb(){}h(wb,tb);function wb(){}tb.Keyed=ub;tb.Indexed=vb;tb.Set=wb;function xb(xh,yh){if(xh===yh||(xh!==xh&&yh!==yh))return true;if(!xh||!yh)return false;if(typeof xh.valueOf==='function'&&typeof yh.valueOf==='function'){xh=xh.valueOf();yh=yh.valueOf();if(xh===yh||(xh!==xh&&yh!==yh))return true;if(!xh||!yh)return false;}if(typeof xh.equals==='function'&&typeof yh.equals==='function'&&xh.equals(yh))return true;return false;}function yb(xh,yh){return yh?zb(yh,xh,'',{'':xh}):ac(xh);}function zb(xh,yh,zh,ai){if(Array.isArray(yh))return xh.call(ai,zh,db(yh).map(function(bi,ci){return zb(xh,bi,ci,yh);}));if(bc(yh))return xh.call(ai,zh,cb(yh).map(function(bi,ci){return zb(xh,bi,ci,yh);}));return yh;}function ac(xh){if(Array.isArray(xh))return db(xh).map(ac).toList();if(bc(xh))return cb(xh).map(ac).toMap();return xh;}function bc(xh){return xh&&(xh.constructor===Object||xh.constructor===(void 0));}var cc=typeof Math.imul==='function'&&Math.imul(4294967295,2)===-2?Math.imul:function xh(yh,zh){yh=yh|0;zh=zh|0;var ai=yh&65535,bi=zh&65535;return (ai*bi)+((((yh>>>16)*bi+ai*(zh>>>16))<<16)>>>0)|0;};function dc(xh){return ((xh>>>1)&1073741824)|(xh&3221225471);}function ec(xh){if(xh===false||xh===null||xh===(void 0))return 0;if(typeof xh.valueOf==='function'){xh=xh.valueOf();if(xh===false||xh===null||xh===(void 0))return 0;}if(xh===true)return 1;var yh=typeof xh;if(yh==='number'){var zh=xh|0;if(zh!==xh)zh^=xh*4294967295;while(xh>4294967295){xh/=4294967295;zh^=xh;}return dc(zh);}if(yh==='string')return xh.length>pc?fc(xh):gc(xh);if(typeof xh.hashCode==='function')return xh.hashCode();return hc(xh);}function fc(xh){var yh=sc[xh];if(yh===(void 0)){yh=gc(xh);if(rc===qc){rc=0;sc={};}rc++;sc[xh]=yh;}return yh;}function gc(xh){var yh=0;for(var zh=0;zh<xh.length;zh++)yh=31*yh+xh.charCodeAt(zh)|0;return dc(yh);}function hc(xh){var yh;if(lc){yh=mc.get(xh);if(yh!==(void 0))return yh;}yh=xh[oc];if(yh!==(void 0))return yh;if(!jc){yh=xh.propertyIsEnumerable&&xh.propertyIsEnumerable[oc];if(yh!==(void 0))return yh;yh=kc(xh);if(yh!==(void 0))return yh;}yh=++nc;if(nc&1073741824)nc=0;if(lc){mc.set(xh,yh);}else if(ic!==(void 0)&&ic(xh)===false){throw new Error('Non-extensible objects are not allowed as keys.');}else if(jc){Object.defineProperty(xh,oc,{enumerable:false,configurable:false,writable:false,value:yh});}else if(xh.propertyIsEnumerable!==(void 0)&&xh.propertyIsEnumerable===xh.constructor.prototype.propertyIsEnumerable){xh.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments);};xh.propertyIsEnumerable[oc]=yh;}else if(xh.nodeType!==(void 0)){xh[oc]=yh;}else throw new Error('Unable to set a non-enumerable property on object.');return yh;}var ic=Object.isExtensible,jc=(function(){try{Object.defineProperty({},'@',{});return true;}catch(xh){return false;}}());function kc(xh){if(xh&&xh.nodeType>0)switch(xh.nodeType){case 1:return xh.uniqueID;case 9:return xh.documentElement&&xh.documentElement.uniqueID;}}var lc=typeof WeakMap==='function',mc;if(lc)mc=new WeakMap();var nc=0,oc='__immutablehash__';if(typeof Symbol==='function')oc=Symbol(oc);var pc=16,qc=255,rc=0,sc={};function tc(xh,yh){if(!xh)throw new Error(yh);}function uc(xh){tc(xh!==Infinity);}h(vc,cb);function vc(xh,yh){this._iter=xh;this._useKeys=yh;this.size=xh.size;}vc.prototype.get=function(xh,yh){return this._iter.get(xh,yh);};vc.prototype.has=function(xh){return this._iter.has(xh);};vc.prototype.valueSeq=function(){return this._iter.valueSeq();};vc.prototype.reverse=function(){var xh=this,yh=bd(this,true);if(!this._useKeys)yh.valueSeq=function(){return xh._iter.toSeq().reverse();};return yh;};vc.prototype.map=function(xh,yh){var zh=this,ai=ad(this,xh,yh);if(!this._useKeys)ai.valueSeq=function(){return zh._iter.toSeq().map(xh,yh);};return ai;};vc.prototype.__iterate=function(xh,yh){var zh=this,ai;return this._iter.__iterate(this._useKeys?function(bi,ci){return xh(bi,ci,zh);}:((ai=yh?sd(this):0),function(bi){return xh(bi,yh?--ai:ai++,zh);}),yh);};vc.prototype.__iterator=function(xh,yh){if(this._useKeys)return this._iter.__iterator(xh,yh);var zh=this._iter.__iterator(oa,yh),ai=yh?sd(this):0;return new ta(function(){var bi=zh.next();return bi.done?bi:ua(xh,yh?--ai:ai++,bi.value,bi);});};vc.prototype[ma]=true;h(wc,db);function wc(xh){this._iter=xh;this.size=xh.size;}wc.prototype.includes=function(xh){return this._iter.includes(xh);};wc.prototype.__iterate=function(xh,yh){var zh=this,ai=0;return this._iter.__iterate(function(bi){return xh(bi,ai++,zh);},yh);};wc.prototype.__iterator=function(xh,yh){var zh=this._iter.__iterator(oa,yh),ai=0;return new ta(function(){var bi=zh.next();return bi.done?bi:ua(xh,ai++,bi.value,bi);});};h(xc,eb);function xc(xh){this._iter=xh;this.size=xh.size;}xc.prototype.has=function(xh){return this._iter.includes(xh);};xc.prototype.__iterate=function(xh,yh){var zh=this;return this._iter.__iterate(function(ai){return xh(ai,ai,zh);},yh);};xc.prototype.__iterator=function(xh,yh){var zh=this._iter.__iterator(oa,yh);return new ta(function(){var ai=zh.next();return ai.done?ai:ua(xh,ai.value,ai.value,ai);});};h(yc,cb);function yc(xh){this._iter=xh;this.size=xh.size;}yc.prototype.entrySeq=function(){return this._iter.toSeq();};yc.prototype.__iterate=function(xh,yh){var zh=this;return this._iter.__iterate(function(ai){if(ai){rd(ai);var bi=ea(ai);return xh(bi?ai.get(1):ai[1],bi?ai.get(0):ai[0],zh);}},yh);};yc.prototype.__iterator=function(xh,yh){var zh=this._iter.__iterator(oa,yh);return new ta(function(){while(true){var ai=zh.next();if(ai.done)return ai;var bi=ai.value;if(bi){rd(bi);var ci=ea(bi);return ua(xh,ci?bi.get(0):bi[0],ci?bi.get(1):bi[1],ai);}}});};wc.prototype.cacheResult=vc.prototype.cacheResult=xc.prototype.cacheResult=yc.prototype.cacheResult=vd;function zc(xh){var yh=ud(xh);yh._iter=xh;yh.size=xh.size;yh.flip=function(){return xh;};yh.reverse=function(){var zh=xh.reverse.apply(this);zh.flip=function(){return xh.reverse();};return zh;};yh.has=function(zh){return xh.includes(zh);};yh.includes=function(zh){return xh.has(zh);};yh.cacheResult=vd;yh.__iterateUncached=function(zh,ai){var bi=this;return xh.__iterate(function(ci,di){return zh(di,ci,bi)!==false;},ai);};yh.__iteratorUncached=function(zh,ai){if(zh===pa){var bi=xh.__iterator(zh,ai);return new ta(function(){var ci=bi.next();if(!ci.done){var di=ci.value[0];ci.value[0]=ci.value[1];ci.value[1]=di;}return ci;});}return xh.__iterator(zh===oa?na:oa,ai);};return yh;}function ad(xh,yh,zh){var ai=ud(xh);ai.size=xh.size;ai.has=function(bi){return xh.has(bi);};ai.get=function(bi,ci){var di=xh.get(bi,m);return di===m?ci:yh.call(zh,di,bi,xh);};ai.__iterateUncached=function(bi,ci){var di=this;return xh.__iterate(function(ei,fi,gi){return bi(yh.call(zh,ei,fi,gi),fi,di)!==false;},ci);};ai.__iteratorUncached=function(bi,ci){var di=xh.__iterator(pa,ci);return new ta(function(){var ei=di.next();if(ei.done)return ei;var fi=ei.value,gi=fi[0];return ua(bi,gi,yh.call(zh,fi[1],gi,xh),ei);});};return ai;}function bd(xh,yh){var zh=ud(xh);zh._iter=xh;zh.size=xh.size;zh.reverse=function(){return xh;};if(xh.flip)zh.flip=function(){var ai=zc(xh);ai.reverse=function(){return xh.flip();};return ai;};zh.get=function(ai,bi){return xh.get(yh?ai:-1-ai,bi);};zh.has=function(ai){return xh.has(yh?ai:-1-ai);};zh.includes=function(ai){return xh.includes(ai);};zh.cacheResult=vd;zh.__iterate=function(ai,bi){var ci=this;return xh.__iterate(function(di,ei){return ai(di,ei,ci);},!bi);};zh.__iterator=function(ai,bi){return xh.__iterator(ai,!bi);};return zh;}function cd(xh,yh,zh,ai){var bi=ud(xh);if(ai){bi.has=function(ci){var di=xh.get(ci,m);return di!==m&&!!yh.call(zh,di,ci,xh);};bi.get=function(ci,di){var ei=xh.get(ci,m);return ei!==m&&yh.call(zh,ei,ci,xh)?ei:di;};}bi.__iterateUncached=function(ci,di){var ei=this,fi=0;xh.__iterate(function(gi,hi,ii){if(yh.call(zh,gi,hi,ii)){fi++;return ci(gi,ai?hi:fi-1,ei);}},di);return fi;};bi.__iteratorUncached=function(ci,di){var ei=xh.__iterator(pa,di),fi=0;return new ta(function(){while(true){var gi=ei.next();if(gi.done)return gi;var hi=gi.value,ii=hi[0],ji=hi[1];if(yh.call(zh,ji,ii,xh))return ua(ci,ai?ii:fi++,ji,gi);}});};return bi;}function dd(xh,yh,zh){var ai=yd().asMutable();xh.__iterate(function(bi,ci){ai.update(yh.call(zh,bi,ci,xh),0,function(di){return di+1;});});return ai.asImmutable();}function ed(xh,yh,zh){var ai=fa(xh),bi=(ia(xh)?xf():yd()).asMutable();xh.__iterate(function(di,ei){bi.update(yh.call(zh,di,ei,xh),function(fi){return (fi=fi||[],fi.push(ai?[ei,di]:di),fi);});});var ci=td(xh);return bi.map(function(di){return qd(xh,ci(di));});}function fd(xh,yh,zh,ai){var bi=xh.size;if(w(yh,zh,bi))return xh;var ci=x(yh,bi),di=y(zh,bi);if(ci!==ci||di!==di)return fd(xh.toSeq().cacheResult(),yh,zh,ai);var ei=di-ci,fi;if(ei===ei)fi=ei<0?0:ei;var gi=ud(xh);gi.size=fi;if(!ai&&kb(xh)&&fi>=0)gi.get=function(hi,ii){hi=u(this,hi);return hi>=0&&hi<fi?xh.get(hi+ci,ii):ii;};gi.__iterateUncached=function(hi,ii){var ji=this;if(fi===0)return 0;if(ii)return this.cacheResult().__iterate(hi,ii);var ki=0,li=true,mi=0;xh.__iterate(function(ni,oi){if(!(li&&(li=ki++<ci))){mi++;return hi(ni,ai?oi:mi-1,ji)!==false&&mi!==fi;}});return mi;};gi.__iteratorUncached=function(hi,ii){if(fi!==0&&ii)return this.cacheResult().__iterator(hi,ii);var ji=fi!==0&&xh.__iterator(hi,ii),ki=0,li=0;return new ta(function(){while(ki++<ci)ji.next();if(++li>fi)return va();var mi=ji.next();if(ai||hi===oa){return mi;}else if(hi===na){return ua(hi,li-1,(void 0),mi);}else return ua(hi,li-1,mi.value[1],mi);});};return gi;}function gd(xh,yh,zh){var ai=ud(xh);ai.__iterateUncached=function(bi,ci){var di=this;if(ci)return this.cacheResult().__iterate(bi,ci);var ei=0;xh.__iterate(function(fi,gi,hi){return yh.call(zh,fi,gi,hi)&&++ei&&bi(fi,gi,di);});return ei;};ai.__iteratorUncached=function(bi,ci){var di=this;if(ci)return this.cacheResult().__iterator(bi,ci);var ei=xh.__iterator(pa,ci),fi=true;return new ta(function(){if(!fi)return va();var gi=ei.next();if(gi.done)return gi;var hi=gi.value,ii=hi[0],ji=hi[1];if(!yh.call(zh,ji,ii,di)){fi=false;return va();}return bi===pa?gi:ua(bi,ii,ji,gi);});};return ai;}function hd(xh,yh,zh,ai){var bi=ud(xh);bi.__iterateUncached=function(ci,di){var ei=this;if(di)return this.cacheResult().__iterate(ci,di);var fi=true,gi=0;xh.__iterate(function(hi,ii,ji){if(!(fi&&(fi=yh.call(zh,hi,ii,ji)))){gi++;return ci(hi,ai?ii:gi-1,ei);}});return gi;};bi.__iteratorUncached=function(ci,di){var ei=this;if(di)return this.cacheResult().__iterator(ci,di);var fi=xh.__iterator(pa,di),gi=true,hi=0;return new ta(function(){var ii,ji,ki;do{ii=fi.next();if(ii.done)if(ai||ci===oa){return ii;}else if(ci===na){return ua(ci,hi++,(void 0),ii);}else return ua(ci,hi++,ii.value[1],ii);var li=ii.value;ji=li[0];ki=li[1];gi&&(gi=yh.call(zh,ki,ji,ei));}while(gi);return ci===pa?ii:ua(ci,ji,ki,ii);});};return bi;}function id(xh,yh){var zh=fa(xh),ai=[xh].concat(yh).map(function(di){if(!ea(di)){di=zh?nb(di):ob(Array.isArray(di)?di:[di]);}else if(zh)di=ba(di);return di;}).filter(function(di){return di.size!==0;});if(ai.length===0)return xh;if(ai.length===1){var bi=ai[0];if(bi===xh||zh&&fa(bi)||ga(xh)&&ga(bi))return bi;}var ci=new gb(ai);if(zh){ci=ci.toKeyedSeq();}else if(!ga(xh))ci=ci.toSetSeq();ci=ci.flatten(true);ci.size=ai.reduce(function(di,ei){if(di!==(void 0)){var fi=ei.size;if(fi!==(void 0))return di+fi;}},0);return ci;}function jd(xh,yh,zh){var ai=ud(xh);ai.__iterateUncached=function(bi,ci){var di=0,ei=false;function fi(gi,hi){var ii=this;gi.__iterate(function(ji,ki){if((!yh||hi<yh)&&ea(ji)){fi(ji,hi+1);}else if(bi(ji,zh?ki:di++,ii)===false)ei=true;return !ei;},ci);}fi(xh,0);return di;};ai.__iteratorUncached=function(bi,ci){var di=xh.__iterator(bi,ci),ei=[],fi=0;return new ta(function(){while(di){var gi=di.next();if(gi.done!==false){di=ei.pop();continue;}var hi=gi.value;if(bi===pa)hi=hi[1];if((!yh||ei.length<yh)&&ea(hi)){ei.push(di);di=hi.__iterator(bi,ci);}else return zh?gi:ua(bi,fi++,hi,gi);}return va();});};return ai;}function kd(xh,yh,zh){var ai=td(xh);return xh.toSeq().map(function(bi,ci){return ai(yh.call(zh,bi,ci,xh));}).flatten(true);}function ld(xh,yh){var zh=ud(xh);zh.size=xh.size&&xh.size*2-1;zh.__iterateUncached=function(ai,bi){var ci=this,di=0;xh.__iterate(function(ei,fi){return (!di||ai(yh,di++,ci)!==false)&&ai(ei,di++,ci)!==false;},bi);return di;};zh.__iteratorUncached=function(ai,bi){var ci=xh.__iterator(oa,bi),di=0,ei;return new ta(function(){if(!ei||di%2){ei=ci.next();if(ei.done)return ei;}return di%2?ua(ai,di++,yh):ua(ai,di++,ei.value,ei);});};return zh;}function md(xh,yh,zh){if(!yh)yh=wd;var ai=fa(xh),bi=0,ci=xh.toSeq().map(function(di,ei){return [ei,di,bi++,zh?zh(di,ei,xh):di];}).toArray();ci.sort(function(di,ei){return yh(di[3],ei[3])||di[2]-ei[2];}).forEach(ai?function(di,ei){ci[ei].length=2;}:function(di,ei){ci[ei]=di[1];});return ai?cb(ci):ga(xh)?db(ci):eb(ci);}function nd(xh,yh,zh){if(!yh)yh=wd;if(zh){var ai=xh.toSeq().map(function(bi,ci){return [bi,zh(bi,ci,xh)];}).reduce(function(bi,ci){return od(yh,bi[1],ci[1])?ci:bi;});return ai&&ai[0];}else return xh.reduce(function(bi,ci){return od(yh,bi,ci)?ci:bi;});}function od(xh,yh,zh){var ai=xh(zh,yh);return (ai===0&&zh!==yh&&(zh===(void 0)||zh===null||zh!==zh))||ai>0;}function pd(xh,yh,zh){var ai=ud(xh);ai.size=new gb(zh).map(function(bi){return bi.size;}).min();ai.__iterate=function(bi,ci){var di=this.__iterator(oa,ci),ei,fi=0;while(!(ei=di.next()).done)if(bi(ei.value,fi++,this)===false)break;return fi;};ai.__iteratorUncached=function(bi,ci){var di=zh.map(function(gi){return (gi=aa(gi),ya(ci?gi.reverse():gi));}),ei=0,fi=false;return new ta(function(){var gi;if(!fi){gi=di.map(function(hi){return hi.next();});fi=gi.some(function(hi){return hi.done;});}if(fi)return va();return ua(bi,ei++,yh.apply(null,gi.map(function(hi){return hi.value;})));});};return ai;}function qd(xh,yh){return kb(xh)?yh:xh.constructor(yh);}function rd(xh){if(xh!==Object(xh))throw new TypeError('Expected [K, V] tuple: '+xh);}function sd(xh){uc(xh.size);return t(xh);}function td(xh){return fa(xh)?ba:ga(xh)?ca:da;}function ud(xh){return Object.create((fa(xh)?cb:ga(xh)?db:eb).prototype);}function vd(){if(this._iter.cacheResult){this._iter.cacheResult();this.size=this._iter.size;return this;}else return bb.prototype.cacheResult.call(this);}function wd(xh,yh){return xh>yh?1:xh<yh?-1:0;}function xd(xh){var yh=ya(xh);if(!yh){if(!ab(xh))throw new TypeError('Expected iterable or array-like: '+xh);yh=ya(aa(xh));}return yh;}h(yd,ub);function yd(xh){return xh===null||xh===(void 0)?me():zd(xh)?xh:me().withMutations(function(yh){var zh=ba(xh);uc(zh.size);zh.forEach(function(ai,bi){return yh.set(bi,ai);});});}yd.prototype.toString=function(){return this.__toString('Map {','}');};yd.prototype.get=function(xh,yh){return this._root?this._root.get(0,(void 0),xh,yh):yh;};yd.prototype.set=function(xh,yh){return ne(this,xh,yh);};yd.prototype.setIn=function(xh,yh){return this.updateIn(xh,m,function(){return yh;});};yd.prototype.remove=function(xh){return ne(this,xh,m);};yd.prototype.deleteIn=function(xh){return this.updateIn(xh,function(){return m;});};yd.prototype.update=function(xh,yh,zh){return arguments.length===1?xh(this):this.updateIn([xh],yh,zh);};yd.prototype.updateIn=function(xh,yh,zh){if(!zh){zh=yh;yh=(void 0);}var ai=xe(this,xd(xh),yh,zh);return ai===m?(void 0):ai;};yd.prototype.clear=function(){if(this.size===0)return this;if(this.__ownerID){this.size=0;this._root=null;this.__hash=(void 0);this.__altered=true;return this;}return me();};yd.prototype.merge=function(){return ue(this,(void 0),arguments);};yd.prototype.mergeWith=function(xh){var yh=g.call(arguments,1);return ue(this,xh,yh);};yd.prototype.mergeIn=function(xh){var yh=g.call(arguments,1);return this.updateIn(xh,me(),function(zh){return typeof zh.merge==='function'?zh.merge.apply(zh,yh):yh[yh.length-1];});};yd.prototype.mergeDeep=function(){return ue(this,ve((void 0)),arguments);};yd.prototype.mergeDeepWith=function(xh){var yh=g.call(arguments,1);return ue(this,ve(xh),yh);};yd.prototype.mergeDeepIn=function(xh){var yh=g.call(arguments,1);return this.updateIn(xh,me(),function(zh){return typeof zh.mergeDeep==='function'?zh.mergeDeep.apply(zh,yh):yh[yh.length-1];});};yd.prototype.sort=function(xh){return xf(md(this,xh));};yd.prototype.sortBy=function(xh,yh){return xf(md(this,yh,xh));};yd.prototype.withMutations=function(xh){var yh=this.asMutable();xh(yh);return yh.wasAltered()?yh.__ensureOwner(this.__ownerID):this;};yd.prototype.asMutable=function(){return this.__ownerID?this:this.__ensureOwner(new r());};yd.prototype.asImmutable=function(){return this.__ensureOwner();};yd.prototype.wasAltered=function(){return this.__altered;};yd.prototype.__iterator=function(xh,yh){return new he(this,xh,yh);};yd.prototype.__iterate=function(xh,yh){var zh=this,ai=0;this._root&&this._root.iterate(function(bi){ai++;return xh(bi[1],bi[0],zh);},yh);return ai;};yd.prototype.__ensureOwner=function(xh){if(xh===this.__ownerID)return this;if(!xh){this.__ownerID=xh;this.__altered=false;return this;}return ke(this.size,this._root,xh,this.__hash);};function zd(xh){return !!(xh&&xh[ae]);}yd.isMap=zd;var ae='@@__IMMUTABLE_MAP__@@',be=yd.prototype;be[ae]=true;be[i]=be.remove;be.removeIn=be.deleteIn;function ce(xh,yh){this.ownerID=xh;this.entries=yh;}ce.prototype.get=function(xh,yh,zh,ai){var bi=this.entries;for(var ci=0,di=bi.length;ci<di;ci++)if(xb(zh,bi[ci][0]))return bi[ci][1];return ai;};ce.prototype.update=function(xh,yh,zh,ai,bi,ci,di){var ei=bi===m,fi=this.entries,gi=0;for(var hi=fi.length;gi<hi;gi++)if(xb(ai,fi[gi][0]))break;var ii=gi<hi;if(ii?fi[gi][1]===bi:ei)return this;q(di);(ei||!ii)&&q(ci);if(ei&&fi.length===1)return;if(!ii&&!ei&&fi.length>=cf)return re(xh,fi,ai,bi);var ji=xh&&xh===this.ownerID,ki=ji?fi:s(fi);if(ii){if(ei){gi===hi-1?ki.pop():(ki[gi]=ki.pop());}else ki[gi]=[ai,bi];}else ki.push([ai,bi]);if(ji){this.entries=ki;return this;}return new ce(xh,ki);};function de(xh,yh,zh){this.ownerID=xh;this.bitmap=yh;this.nodes=zh;}de.prototype.get=function(xh,yh,zh,ai){if(yh===(void 0))yh=ec(zh);var bi=(1<<((xh===0?yh:yh>>>xh)&l)),ci=this.bitmap;return (ci&bi)===0?ai:this.nodes[ye(ci&(bi-1))].get(xh+j,yh,zh,ai);};de.prototype.update=function(xh,yh,zh,ai,bi,ci,di){if(zh===(void 0))zh=ec(ai);var ei=(yh===0?zh:zh>>>yh)&l,fi=1<<ei,gi=this.bitmap,hi=(gi&fi)!==0;if(!hi&&bi===m)return this;var ii=ye(gi&(fi-1)),ji=this.nodes,ki=hi?ji[ii]:(void 0),li=oe(ki,xh,yh+j,zh,ai,bi,ci,di);if(li===ki)return this;if(!hi&&li&&ji.length>=df)return te(xh,ji,gi,ei,li);if(hi&&!li&&ji.length===2&&pe(ji[ii^1]))return ji[ii^1];if(hi&&li&&ji.length===1&&pe(li))return li;var mi=xh&&xh===this.ownerID,ni=hi?li?gi:gi^fi:gi|fi,oi=hi?li?ze(ji,ii,li,mi):bf(ji,ii,mi):af(ji,ii,li,mi);if(mi){this.bitmap=ni;this.nodes=oi;return this;}return new de(xh,ni,oi);};function ee(xh,yh,zh){this.ownerID=xh;this.count=yh;this.nodes=zh;}ee.prototype.get=function(xh,yh,zh,ai){if(yh===(void 0))yh=ec(zh);var bi=(xh===0?yh:yh>>>xh)&l,ci=this.nodes[bi];return ci?ci.get(xh+j,yh,zh,ai):ai;};ee.prototype.update=function(xh,yh,zh,ai,bi,ci,di){if(zh===(void 0))zh=ec(ai);var ei=(yh===0?zh:zh>>>yh)&l,fi=bi===m,gi=this.nodes,hi=gi[ei];if(fi&&!hi)return this;var ii=oe(hi,xh,yh+j,zh,ai,bi,ci,di);if(ii===hi)return this;var ji=this.count;if(!hi){ji++;}else if(!ii){ji--;if(ji<ef)return se(xh,gi,ji,ei);}var ki=xh&&xh===this.ownerID,li=ze(gi,ei,ii,ki);if(ki){this.count=ji;this.nodes=li;return this;}return new ee(xh,ji,li);};function fe(xh,yh,zh){this.ownerID=xh;this.keyHash=yh;this.entries=zh;}fe.prototype.get=function(xh,yh,zh,ai){var bi=this.entries;for(var ci=0,di=bi.length;ci<di;ci++)if(xb(zh,bi[ci][0]))return bi[ci][1];return ai;};fe.prototype.update=function(xh,yh,zh,ai,bi,ci,di){if(zh===(void 0))zh=ec(ai);var ei=bi===m;if(zh!==this.keyHash){if(ei)return this;q(di);q(ci);return qe(this,xh,yh,zh,[ai,bi]);}var fi=this.entries,gi=0;for(var hi=fi.length;gi<hi;gi++)if(xb(ai,fi[gi][0]))break;var ii=gi<hi;if(ii?fi[gi][1]===bi:ei)return this;q(di);(ei||!ii)&&q(ci);if(ei&&hi===2)return new ge(xh,this.keyHash,fi[gi^1]);var ji=xh&&xh===this.ownerID,ki=ji?fi:s(fi);if(ii){if(ei){gi===hi-1?ki.pop():(ki[gi]=ki.pop());}else ki[gi]=[ai,bi];}else ki.push([ai,bi]);if(ji){this.entries=ki;return this;}return new fe(xh,this.keyHash,ki);};function ge(xh,yh,zh){this.ownerID=xh;this.keyHash=yh;this.entry=zh;}ge.prototype.get=function(xh,yh,zh,ai){return xb(zh,this.entry[0])?this.entry[1]:ai;};ge.prototype.update=function(xh,yh,zh,ai,bi,ci,di){var ei=bi===m,fi=xb(ai,this.entry[0]);if(fi?bi===this.entry[1]:ei)return this;q(di);if(ei){q(ci);return;}if(fi){if(xh&&xh===this.ownerID){this.entry[1]=bi;return this;}return new ge(xh,this.keyHash,[ai,bi]);}q(ci);return qe(this,xh,yh,ec(ai),[ai,bi]);};ce.prototype.iterate=fe.prototype.iterate=function(xh,yh){var zh=this.entries;for(var ai=0,bi=zh.length-1;ai<=bi;ai++)if(xh(zh[yh?bi-ai:ai])===false)return false;};de.prototype.iterate=ee.prototype.iterate=function(xh,yh){var zh=this.nodes;for(var ai=0,bi=zh.length-1;ai<=bi;ai++){var ci=zh[yh?bi-ai:ai];if(ci&&ci.iterate(xh,yh)===false)return false;}};ge.prototype.iterate=function(xh,yh){return xh(this.entry);};h(he,ta);function he(xh,yh,zh){this._type=yh;this._reverse=zh;this._stack=xh._root&&je(xh._root);}he.prototype.next=function(){var xh=this._type,yh=this._stack;while(yh){var zh=yh.node,ai=yh.index++,bi;if(zh.entry){if(ai===0)return ie(xh,zh.entry);}else if(zh.entries){bi=zh.entries.length-1;if(ai<=bi)return ie(xh,zh.entries[this._reverse?bi-ai:ai]);}else{bi=zh.nodes.length-1;if(ai<=bi){var ci=zh.nodes[this._reverse?bi-ai:ai];if(ci){if(ci.entry)return ie(xh,ci.entry);yh=this._stack=je(ci,yh);}continue;}}yh=this._stack=this._stack.__prev;}return va();};function ie(xh,yh){return ua(xh,yh[0],yh[1]);}function je(xh,yh){return {node:xh,index:0,__prev:yh};}function ke(xh,yh,zh,ai){var bi=Object.create(be);bi.size=xh;bi._root=yh;bi.__ownerID=zh;bi.__hash=ai;bi.__altered=false;return bi;}var le;function me(){return le||(le=ke(0));}function ne(xh,yh,zh){var ai,bi;if(!xh._root){if(zh===m)return xh;bi=1;ai=new ce(xh.__ownerID,[[yh,zh]]);}else{var ci=p(n),di=p(o);ai=oe(xh._root,xh.__ownerID,0,(void 0),yh,zh,ci,di);if(!di.value)return xh;bi=xh.size+(ci.value?zh===m?-1:1:0);}if(xh.__ownerID){xh.size=bi;xh._root=ai;xh.__hash=(void 0);xh.__altered=true;return xh;}return ai?ke(bi,ai):me();}function oe(xh,yh,zh,ai,bi,ci,di,ei){if(!xh){if(ci===m)return xh;q(ei);q(di);return new ge(yh,ai,[bi,ci]);}return xh.update(yh,zh,ai,bi,ci,di,ei);}function pe(xh){return xh.constructor===ge||xh.constructor===fe;}function qe(xh,yh,zh,ai,bi){if(xh.keyHash===ai)return new fe(yh,ai,[xh.entry,bi]);var ci=(zh===0?xh.keyHash:xh.keyHash>>>zh)&l,di=(zh===0?ai:ai>>>zh)&l,ei,fi=ci===di?[qe(xh,yh,zh+j,ai,bi)]:((ei=new ge(yh,ai,bi)),ci<di?[xh,ei]:[ei,xh]);return new de(yh,(1<<ci)|(1<<di),fi);}function re(xh,yh,zh,ai){if(!xh)xh=new r();var bi=new ge(xh,ec(zh),[zh,ai]);for(var ci=0;ci<yh.length;ci++){var di=yh[ci];bi=bi.update(xh,0,(void 0),di[0],di[1]);}return bi;}function se(xh,yh,zh,ai){var bi=0,ci=0,di=new Array(zh);for(var ei=0,fi=1,gi=yh.length;ei<gi;ei++,fi<<=1){var hi=yh[ei];if(hi!==(void 0)&&ei!==ai){bi|=fi;di[ci++]=hi;}}return new de(xh,bi,di);}function te(xh,yh,zh,ai,bi){var ci=0,di=new Array(k);for(var ei=0;zh!==0;ei++,zh>>>=1)di[ei]=zh&1?yh[ci++]:(void 0);di[ai]=bi;return new ee(xh,ci+1,di);}function ue(xh,yh,zh){var ai=[];for(var bi=0;bi<zh.length;bi++){var ci=zh[bi],di=ba(ci);if(!ea(ci))di=di.map(function(ei){return yb(ei);});ai.push(di);}return we(xh,yh,ai);}function ve(xh){return function(yh,zh,ai){return yh&&yh.mergeDeepWith&&ea(zh)?yh.mergeDeepWith(xh,zh):xh?xh(yh,zh,ai):zh;};}function we(xh,yh,zh){zh=zh.filter(function(ai){return ai.size!==0;});if(zh.length===0)return xh;if(xh.size===0&&!xh.__ownerID&&zh.length===1)return xh.constructor(zh[0]);return xh.withMutations(function(ai){var bi=yh?function(di,ei){ai.update(ei,m,function(fi){return fi===m?di:yh(fi,di,ei);});}:function(di,ei){ai.set(ei,di);};for(var ci=0;ci<zh.length;ci++)zh[ci].forEach(bi);});}function xe(xh,yh,zh,ai){var bi=xh===m,ci=yh.next();if(ci.done){var di=bi?zh:xh,ei=ai(di);return ei===di?xh:ei;}tc(bi||(xh&&xh.set));var fi=ci.value,gi=bi?m:xh.get(fi,m),hi=xe(gi,yh,zh,ai);return hi===gi?xh:hi===m?xh.remove(fi):(bi?me():xh).set(fi,hi);}function ye(xh){xh=xh-((xh>>1)&1431655765);xh=(xh&858993459)+((xh>>2)&858993459);xh=(xh+(xh>>4))&252645135;xh=xh+(xh>>8);xh=xh+(xh>>16);return xh&127;}function ze(xh,yh,zh,ai){var bi=ai?xh:s(xh);bi[yh]=zh;return bi;}function af(xh,yh,zh,ai){var bi=xh.length+1;if(ai&&yh+1===bi){xh[yh]=zh;return xh;}var ci=new Array(bi),di=0;for(var ei=0;ei<bi;ei++)if(ei===yh){ci[ei]=zh;di=-1;}else ci[ei]=xh[ei+di];return ci;}function bf(xh,yh,zh){var ai=xh.length-1;if(zh&&yh===ai){xh.pop();return xh;}var bi=new Array(ai),ci=0;for(var di=0;di<ai;di++){if(di===yh)ci=1;bi[di]=xh[di+ci];}return bi;}var cf=k/4,df=k/2,ef=k/4;h(ff,vb);function ff(xh){var yh=pf();if(xh===null||xh===(void 0))return yh;if(gf(xh))return xh;var zh=ca(xh),ai=zh.size;if(ai===0)return yh;uc(ai);if(ai>0&&ai<k)return nf(0,ai,j,null,new kf(zh.toArray()));return yh.withMutations(function(bi){bi.setSize(ai);zh.forEach(function(ci,di){return bi.set(di,ci);});});}ff.of=function(){return this(arguments);};ff.prototype.toString=function(){return this.__toString('List [',']');};ff.prototype.get=function(xh,yh){xh=u(this,xh);if(xh<0||xh>=this.size)return yh;xh+=this._origin;var zh=tf(this,xh);return zh&&zh.array[xh&l];};ff.prototype.set=function(xh,yh){return qf(this,xh,yh);};ff.prototype.remove=function(xh){return !this.has(xh)?this:xh===0?this.shift():xh===this.size-1?this.pop():this.splice(xh,1);};ff.prototype.clear=function(){if(this.size===0)return this;if(this.__ownerID){this.size=this._origin=this._capacity=0;this._level=j;this._root=this._tail=null;this.__hash=(void 0);this.__altered=true;return this;}return pf();};ff.prototype.push=function(){var xh=arguments,yh=this.size;return this.withMutations(function(zh){uf(zh,0,yh+xh.length);for(var ai=0;ai<xh.length;ai++)zh.set(yh+ai,xh[ai]);});};ff.prototype.pop=function(){return uf(this,0,-1);};ff.prototype.unshift=function(){var xh=arguments;return this.withMutations(function(yh){uf(yh,-xh.length);for(var zh=0;zh<xh.length;zh++)yh.set(zh,xh[zh]);});};ff.prototype.shift=function(){return uf(this,1);};ff.prototype.merge=function(){return vf(this,(void 0),arguments);};ff.prototype.mergeWith=function(xh){var yh=g.call(arguments,1);return vf(this,xh,yh);};ff.prototype.mergeDeep=function(){return vf(this,ve((void 0)),arguments);};ff.prototype.mergeDeepWith=function(xh){var yh=g.call(arguments,1);return vf(this,ve(xh),yh);};ff.prototype.setSize=function(xh){return uf(this,0,xh);};ff.prototype.slice=function(xh,yh){var zh=this.size;if(w(xh,yh,zh))return this;return uf(this,x(xh,zh),y(yh,zh));};ff.prototype.__iterator=function(xh,yh){var zh=0,ai=mf(this,yh);return new ta(function(){var bi=ai();return bi===lf?va():ua(xh,zh++,bi);});};ff.prototype.__iterate=function(xh,yh){var zh=0,ai=mf(this,yh),bi;while((bi=ai())!==lf)if(xh(bi,zh++,this)===false)break;return zh;};ff.prototype.__ensureOwner=function(xh){if(xh===this.__ownerID)return this;if(!xh){this.__ownerID=xh;return this;}return nf(this._origin,this._capacity,this._level,this._root,this._tail,xh,this.__hash);};function gf(xh){return !!(xh&&xh[hf]);}ff.isList=gf;var hf='@@__IMMUTABLE_LIST__@@',jf=ff.prototype;jf[hf]=true;jf[i]=jf.remove;jf.setIn=be.setIn;jf.deleteIn=jf.removeIn=be.removeIn;jf.update=be.update;jf.updateIn=be.updateIn;jf.mergeIn=be.mergeIn;jf.mergeDeepIn=be.mergeDeepIn;jf.withMutations=be.withMutations;jf.asMutable=be.asMutable;jf.asImmutable=be.asImmutable;jf.wasAltered=be.wasAltered;function kf(xh,yh){this.array=xh;this.ownerID=yh;}kf.prototype.removeBefore=function(xh,yh,zh){if(zh===yh?1<<yh:this.array.length===0)return this;var ai=(zh>>>yh)&l;if(ai>=this.array.length)return new kf([],xh);var bi=ai===0,ci;if(yh>0){var di=this.array[ai];ci=di&&di.removeBefore(xh,yh-j,zh);if(ci===di&&bi)return this;}if(bi&&!ci)return this;var ei=sf(this,xh);if(!bi)for(var fi=0;fi<ai;fi++)ei.array[fi]=(void 0);if(ci)ei.array[ai]=ci;return ei;};kf.prototype.removeAfter=function(xh,yh,zh){if(zh===yh?1<<yh:this.array.length===0)return this;var ai=((zh-1)>>>yh)&l;if(ai>=this.array.length)return this;var bi=ai===this.array.length-1,ci;if(yh>0){var di=this.array[ai];ci=di&&di.removeAfter(xh,yh-j,zh);if(ci===di&&bi)return this;}if(bi&&!ci)return this;var ei=sf(this,xh);if(!bi)ei.array.pop();if(ci)ei.array[ai]=ci;return ei;};var lf={};function mf(xh,yh){var zh=xh._origin,ai=xh._capacity,bi=wf(ai),ci=xh._tail;return di(xh._root,xh._level,0);function di(gi,hi,ii){return hi===0?ei(gi,ii):fi(gi,hi,ii);}function ei(gi,hi){var ii=hi===bi?ci&&ci.array:gi&&gi.array,ji=hi>zh?0:zh-hi,ki=ai-hi;if(ki>k)ki=k;return function(){if(ji===ki)return lf;var li=yh?--ki:ji++;return ii&&ii[li];};}function fi(gi,hi,ii){var ji,ki=gi&&gi.array,li=ii>zh?0:(zh-ii)>>hi,mi=((ai-ii)>>hi)+1;if(mi>k)mi=k;return function(){do{if(ji){var ni=ji();if(ni!==lf)return ni;ji=null;}if(li===mi)return lf;var oi=yh?--mi:li++;ji=di(ki&&ki[oi],hi-j,ii+(oi<<hi));}while(true);};}}function nf(xh,yh,zh,ai,bi,ci,di){var ei=Object.create(jf);ei.size=yh-xh;ei._origin=xh;ei._capacity=yh;ei._level=zh;ei._root=ai;ei._tail=bi;ei.__ownerID=ci;ei.__hash=di;ei.__altered=false;return ei;}var of;function pf(){return of||(of=nf(0,0,j));}function qf(xh,yh,zh){yh=u(xh,yh);if(yh>=xh.size||yh<0)return xh.withMutations(function(di){yh<0?uf(di,yh).set(0,zh):uf(di,0,yh+1).set(yh,zh);});yh+=xh._origin;var ai=xh._tail,bi=xh._root,ci=p(o);if(yh>=wf(xh._capacity)){ai=rf(ai,xh.__ownerID,0,yh,zh,ci);}else bi=rf(bi,xh.__ownerID,xh._level,yh,zh,ci);if(!ci.value)return xh;if(xh.__ownerID){xh._root=bi;xh._tail=ai;xh.__hash=(void 0);xh.__altered=true;return xh;}return nf(xh._origin,xh._capacity,xh._level,bi,ai);}function rf(xh,yh,zh,ai,bi,ci){var di=(ai>>>zh)&l,ei=xh&&di<xh.array.length;if(!ei&&bi===(void 0))return xh;var fi;if(zh>0){var gi=xh&&xh.array[di],hi=rf(gi,yh,zh-j,ai,bi,ci);if(hi===gi)return xh;fi=sf(xh,yh);fi.array[di]=hi;return fi;}if(ei&&xh.array[di]===bi)return xh;q(ci);fi=sf(xh,yh);if(bi===(void 0)&&di===fi.array.length-1){fi.array.pop();}else fi.array[di]=bi;return fi;}function sf(xh,yh){if(yh&&xh&&yh===xh.ownerID)return xh;return new kf(xh?xh.array.slice():[],yh);}function tf(xh,yh){if(yh>=wf(xh._capacity))return xh._tail;if(yh<1<<(xh._level+j)){var zh=xh._root,ai=xh._level;while(zh&&ai>0){zh=zh.array[(yh>>>ai)&l];ai-=j;}return zh;}}function uf(xh,yh,zh){var ai=xh.__ownerID||new r(),bi=xh._origin,ci=xh._capacity,di=bi+yh,ei=zh===(void 0)?ci:zh<0?ci+zh:bi+zh;if(di===bi&&ei===ci)return xh;if(di>=ei)return xh.clear();var fi=xh._level,gi=xh._root,hi=0;while(di+hi<0){gi=new kf(gi&&gi.array.length?[(void 0),gi]:[],ai);fi+=j;hi+=1<<fi;}if(hi){di+=hi;bi+=hi;ei+=hi;ci+=hi;}var ii=wf(ci),ji=wf(ei);while(ji>=1<<(fi+j)){gi=new kf(gi&&gi.array.length?[gi]:[],ai);fi+=j;}var ki=xh._tail,li=ji<ii?tf(xh,ei-1):ji>ii?new kf([],ai):ki;if(ki&&ji>ii&&di<ci&&ki.array.length){gi=sf(gi,ai);var mi=gi;for(var ni=fi;ni>j;ni-=j){var oi=(ii>>>ni)&l;mi=mi.array[oi]=sf(mi.array[oi],ai);}mi.array[(ii>>>j)&l]=ki;}if(ei<ci)li=li&&li.removeAfter(ai,0,ei);if(di>=ji){di-=ji;ei-=ji;fi=j;gi=null;li=li&&li.removeBefore(ai,0,di);}else if(di>bi||ji<ii){hi=0;while(gi){var pi=(di>>>fi)&l;if(pi!==(ji>>>fi)&l)break;if(pi)hi+=(1<<fi)*pi;fi-=j;gi=gi.array[pi];}if(gi&&di>bi)gi=gi.removeBefore(ai,fi,di-hi);if(gi&&ji<ii)gi=gi.removeAfter(ai,fi,ji-hi);if(hi){di-=hi;ei-=hi;}}if(xh.__ownerID){xh.size=ei-di;xh._origin=di;xh._capacity=ei;xh._level=fi;xh._root=gi;xh._tail=li;xh.__hash=(void 0);xh.__altered=true;return xh;}return nf(di,ei,fi,gi,li);}function vf(xh,yh,zh){var ai=[],bi=0;for(var ci=0;ci<zh.length;ci++){var di=zh[ci],ei=ca(di);if(ei.size>bi)bi=ei.size;if(!ea(di))ei=ei.map(function(fi){return yb(fi);});ai.push(ei);}if(bi>xh.size)xh=xh.setSize(bi);return we(xh,yh,ai);}function wf(xh){return xh<k?0:(((xh-1)>>>j)<<j);}h(xf,yd);function xf(xh){return xh===null||xh===(void 0)?bg():yf(xh)?xh:bg().withMutations(function(yh){var zh=ba(xh);uc(zh.size);zh.forEach(function(ai,bi){return yh.set(bi,ai);});});}xf.of=function(){return this(arguments);};xf.prototype.toString=function(){return this.__toString('OrderedMap {','}');};xf.prototype.get=function(xh,yh){var zh=this._map.get(xh);return zh!==(void 0)?this._list.get(zh)[1]:yh;};xf.prototype.clear=function(){if(this.size===0)return this;if(this.__ownerID){this.size=0;this._map.clear();this._list.clear();return this;}return bg();};xf.prototype.set=function(xh,yh){return cg(this,xh,yh);};xf.prototype.remove=function(xh){return cg(this,xh,m);};xf.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered();};xf.prototype.__iterate=function(xh,yh){var zh=this;return this._list.__iterate(function(ai){return ai&&xh(ai[1],ai[0],zh);},yh);};xf.prototype.__iterator=function(xh,yh){return this._list.fromEntrySeq().__iterator(xh,yh);};xf.prototype.__ensureOwner=function(xh){if(xh===this.__ownerID)return this;var yh=this._map.__ensureOwner(xh),zh=this._list.__ensureOwner(xh);if(!xh){this.__ownerID=xh;this._map=yh;this._list=zh;return this;}return zf(yh,zh,xh,this.__hash);};function yf(xh){return zd(xh)&&ia(xh);}xf.isOrderedMap=yf;xf.prototype[ma]=true;xf.prototype[i]=xf.prototype.remove;function zf(xh,yh,zh,ai){var bi=Object.create(xf.prototype);bi.size=xh?xh.size:0;bi._map=xh;bi._list=yh;bi.__ownerID=zh;bi.__hash=ai;return bi;}var ag;function bg(){return ag||(ag=zf(me(),pf()));}function cg(xh,yh,zh){var ai=xh._map,bi=xh._list,ci=ai.get(yh),di=ci!==(void 0),ei,fi;if(zh===m){if(!di)return xh;if(bi.size>=k&&bi.size>=ai.size*2){fi=bi.filter(function(gi,hi){return gi!==(void 0)&&ci!==hi;});ei=fi.toKeyedSeq().map(function(gi){return gi[0];}).flip().toMap();if(xh.__ownerID)ei.__ownerID=fi.__ownerID=xh.__ownerID;}else{ei=ai.remove(yh);fi=ci===bi.size-1?bi.pop():bi.set(ci,(void 0));}}else if(di){if(zh===bi.get(ci)[1])return xh;ei=ai;fi=bi.set(ci,[yh,zh]);}else{ei=ai.set(yh,bi.size);fi=bi.set(bi.size,[yh,zh]);}if(xh.__ownerID){xh.size=ei.size;xh._map=ei;xh._list=fi;xh.__hash=(void 0);return xh;}return zf(ei,fi);}h(dg,vb);function dg(xh){return xh===null||xh===(void 0)?jg():eg(xh)?xh:jg().unshiftAll(xh);}dg.of=function(){return this(arguments);};dg.prototype.toString=function(){return this.__toString('Stack [',']');};dg.prototype.get=function(xh,yh){var zh=this._head;xh=u(this,xh);while(zh&&xh--)zh=zh.next;return zh?zh.value:yh;};dg.prototype.peek=function(){return this._head&&this._head.value;};dg.prototype.push=function(){if(arguments.length===0)return this;var xh=this.size+arguments.length,yh=this._head;for(var zh=arguments.length-1;zh>=0;zh--)yh={value:arguments[zh],next:yh};if(this.__ownerID){this.size=xh;this._head=yh;this.__hash=(void 0);this.__altered=true;return this;}return hg(xh,yh);};dg.prototype.pushAll=function(xh){xh=ca(xh);if(xh.size===0)return this;uc(xh.size);var yh=this.size,zh=this._head;xh.reverse().forEach(function(ai){yh++;zh={value:ai,next:zh};});if(this.__ownerID){this.size=yh;this._head=zh;this.__hash=(void 0);this.__altered=true;return this;}return hg(yh,zh);};dg.prototype.pop=function(){return this.slice(1);};dg.prototype.unshift=function(){return this.push.apply(this,arguments);};dg.prototype.unshiftAll=function(xh){return this.pushAll(xh);};dg.prototype.shift=function(){return this.pop.apply(this,arguments);};dg.prototype.clear=function(){if(this.size===0)return this;if(this.__ownerID){this.size=0;this._head=(void 0);this.__hash=(void 0);this.__altered=true;return this;}return jg();};dg.prototype.slice=function(xh,yh){if(w(xh,yh,this.size))return this;var zh=x(xh,this.size),ai=y(yh,this.size);if(ai!==this.size)return vb.prototype.slice.call(this,xh,yh);var bi=this.size-zh,ci=this._head;while(zh--)ci=ci.next;if(this.__ownerID){this.size=bi;this._head=ci;this.__hash=(void 0);this.__altered=true;return this;}return hg(bi,ci);};dg.prototype.__ensureOwner=function(xh){if(xh===this.__ownerID)return this;if(!xh){this.__ownerID=xh;this.__altered=false;return this;}return hg(this.size,this._head,xh,this.__hash);};dg.prototype.__iterate=function(xh,yh){if(yh)return this.reverse().__iterate(xh);var zh=0,ai=this._head;while(ai){if(xh(ai.value,zh++,this)===false)break;ai=ai.next;}return zh;};dg.prototype.__iterator=function(xh,yh){if(yh)return this.reverse().__iterator(xh);var zh=0,ai=this._head;return new ta(function(){if(ai){var bi=ai.value;ai=ai.next;return ua(xh,zh++,bi);}return va();});};function eg(xh){return !!(xh&&xh[fg]);}dg.isStack=eg;var fg='@@__IMMUTABLE_STACK__@@',gg=dg.prototype;gg[fg]=true;gg.withMutations=be.withMutations;gg.asMutable=be.asMutable;gg.asImmutable=be.asImmutable;gg.wasAltered=be.wasAltered;function hg(xh,yh,zh,ai){var bi=Object.create(gg);bi.size=xh;bi._head=yh;bi.__ownerID=zh;bi.__hash=ai;bi.__altered=false;return bi;}var ig;function jg(){return ig||(ig=hg(0));}h(kg,wb);function kg(xh){return xh===null||xh===(void 0)?rg():lg(xh)?xh:rg().withMutations(function(yh){var zh=da(xh);uc(zh.size);zh.forEach(function(ai){return yh.add(ai);});});}kg.of=function(){return this(arguments);};kg.fromKeys=function(xh){return this(ba(xh).keySeq());};kg.prototype.toString=function(){return this.__toString('Set {','}');};kg.prototype.has=function(xh){return this._map.has(xh);};kg.prototype.add=function(xh){return og(this,this._map.set(xh,true));};kg.prototype.remove=function(xh){return og(this,this._map.remove(xh));};kg.prototype.clear=function(){return og(this,this._map.clear());};kg.prototype.union=function(){var xh=g.call(arguments,0);xh=xh.filter(function(yh){return yh.size!==0;});if(xh.length===0)return this;if(this.size===0&&!this.__ownerID&&xh.length===1)return this.constructor(xh[0]);return this.withMutations(function(yh){for(var zh=0;zh<xh.length;zh++)da(xh[zh]).forEach(function(ai){return yh.add(ai);});});};kg.prototype.intersect=function(){var xh=g.call(arguments,0);if(xh.length===0)return this;xh=xh.map(function(zh){return da(zh);});var yh=this;return this.withMutations(function(zh){yh.forEach(function(ai){if(!xh.every(function(bi){return bi.includes(ai);}))zh.remove(ai);});});};kg.prototype.subtract=function(){var xh=g.call(arguments,0);if(xh.length===0)return this;xh=xh.map(function(zh){return da(zh);});var yh=this;return this.withMutations(function(zh){yh.forEach(function(ai){if(xh.some(function(bi){return bi.includes(ai);}))zh.remove(ai);});});};kg.prototype.merge=function(){return this.union.apply(this,arguments);};kg.prototype.mergeWith=function(xh){var yh=g.call(arguments,1);return this.union.apply(this,yh);};kg.prototype.sort=function(xh){return sg(md(this,xh));};kg.prototype.sortBy=function(xh,yh){return sg(md(this,yh,xh));};kg.prototype.wasAltered=function(){return this._map.wasAltered();};kg.prototype.__iterate=function(xh,yh){var zh=this;return this._map.__iterate(function(ai,bi){return xh(bi,bi,zh);},yh);};kg.prototype.__iterator=function(xh,yh){return this._map.map(function(zh,ai){return ai;}).__iterator(xh,yh);};kg.prototype.__ensureOwner=function(xh){if(xh===this.__ownerID)return this;var yh=this._map.__ensureOwner(xh);if(!xh){this.__ownerID=xh;this._map=yh;return this;}return this.__make(yh,xh);};function lg(xh){return !!(xh&&xh[mg]);}kg.isSet=lg;var mg='@@__IMMUTABLE_SET__@@',ng=kg.prototype;ng[mg]=true;ng[i]=ng.remove;ng.mergeDeep=ng.merge;ng.mergeDeepWith=ng.mergeWith;ng.withMutations=be.withMutations;ng.asMutable=be.asMutable;ng.asImmutable=be.asImmutable;ng.__empty=rg;ng.__make=pg;function og(xh,yh){if(xh.__ownerID){xh.size=yh.size;xh._map=yh;return xh;}return yh===xh._map?xh:yh.size===0?xh.__empty():xh.__make(yh);}function pg(xh,yh){var zh=Object.create(ng);zh.size=xh?xh.size:0;zh._map=xh;zh.__ownerID=yh;return zh;}var qg;function rg(){return qg||(qg=pg(me()));}h(sg,kg);function sg(xh){return xh===null||xh===(void 0)?xg():tg(xh)?xh:xg().withMutations(function(yh){var zh=da(xh);uc(zh.size);zh.forEach(function(ai){return yh.add(ai);});});}sg.of=function(){return this(arguments);};sg.fromKeys=function(xh){return this(ba(xh).keySeq());};sg.prototype.toString=function(){return this.__toString('OrderedSet {','}');};function tg(xh){return lg(xh)&&ia(xh);}sg.isOrderedSet=tg;var ug=sg.prototype;ug[ma]=true;ug.__empty=xg;ug.__make=vg;function vg(xh,yh){var zh=Object.create(ug);zh.size=xh?xh.size:0;zh._map=xh;zh.__ownerID=yh;return zh;}var wg;function xg(){return wg||(wg=vg(bg()));}h(yg,ub);function yg(xh,yh){var zh,ai=function ci(di){if(di instanceof ai)return di;if(!(this instanceof ai))return new ai(di);if(!zh){zh=true;var ei=Object.keys(xh);ch(bi,ei);bi.size=ei.length;bi._name=yh;bi._keys=ei;bi._defaultValues=xh;}this._map=yd(di);},bi=ai.prototype=Object.create(zg);bi.constructor=ai;return ai;}yg.prototype.toString=function(){return this.__toString(bh(this)+' {','}');};yg.prototype.has=function(xh){return this._defaultValues.hasOwnProperty(xh);};yg.prototype.get=function(xh,yh){if(!this.has(xh))return yh;var zh=this._defaultValues[xh];return this._map?this._map.get(xh,zh):zh;};yg.prototype.clear=function(){if(this.__ownerID){this._map&&this._map.clear();return this;}var xh=this.constructor;return xh._empty||(xh._empty=ah(this,me()));};yg.prototype.set=function(xh,yh){if(!this.has(xh))throw new Error('Cannot set unknown key "'+xh+'" on '+bh(this));var zh=this._map&&this._map.set(xh,yh);if(this.__ownerID||zh===this._map)return this;return ah(this,zh);};yg.prototype.remove=function(xh){if(!this.has(xh))return this;var yh=this._map&&this._map.remove(xh);if(this.__ownerID||yh===this._map)return this;return ah(this,yh);};yg.prototype.wasAltered=function(){return this._map.wasAltered();};yg.prototype.__iterator=function(xh,yh){var zh=this;return ba(this._defaultValues).map(function(ai,bi){return zh.get(bi);}).__iterator(xh,yh);};yg.prototype.__iterate=function(xh,yh){var zh=this;return ba(this._defaultValues).map(function(ai,bi){return zh.get(bi);}).__iterate(xh,yh);};yg.prototype.__ensureOwner=function(xh){if(xh===this.__ownerID)return this;var yh=this._map&&this._map.__ensureOwner(xh);if(!xh){this.__ownerID=xh;this._map=yh;return this;}return ah(this,yh,xh);};var zg=yg.prototype;zg[i]=zg.remove;zg.deleteIn=zg.removeIn=be.removeIn;zg.merge=be.merge;zg.mergeWith=be.mergeWith;zg.mergeIn=be.mergeIn;zg.mergeDeep=be.mergeDeep;zg.mergeDeepWith=be.mergeDeepWith;zg.mergeDeepIn=be.mergeDeepIn;zg.setIn=be.setIn;zg.update=be.update;zg.updateIn=be.updateIn;zg.withMutations=be.withMutations;zg.asMutable=be.asMutable;zg.asImmutable=be.asImmutable;function ah(xh,yh,zh){var ai=Object.create(Object.getPrototypeOf(xh));ai._map=yh;ai.__ownerID=zh;return ai;}function bh(xh){return xh._name||xh.constructor.name||'Record';}function ch(xh,yh){try{yh.forEach(dh.bind((void 0),xh));}catch(zh){}}function dh(xh,yh){Object.defineProperty(xh,yh,{get:function(){return this.get(yh);},set:function(zh){tc(this.__ownerID);this.set(yh,zh);}});}function eh(xh,yh){if(xh===yh)return true;if(!ea(yh)||xh.size!==(void 0)&&yh.size!==(void 0)&&xh.size!==yh.size||xh.__hash!==(void 0)&&yh.__hash!==(void 0)&&xh.__hash!==yh.__hash||fa(xh)!==fa(yh)||ga(xh)!==ga(yh)||ia(xh)!==ia(yh))return false;if(xh.size===0&&yh.size===0)return true;var zh=!ha(xh);if(ia(xh)){var ai=xh.entries();return yh.every(function(fi,gi){var hi=ai.next().value;return hi&&xb(hi[1],fi)&&(zh||xb(hi[0],gi));})&&ai.next().done;}var bi=false;if(xh.size===(void 0))if(yh.size===(void 0)){if(typeof xh.cacheResult==='function')xh.cacheResult();}else{bi=true;var ci=xh;xh=yh;yh=ci;}var di=true,ei=yh.__iterate(function(fi,gi){if(zh?!xh.has(fi):bi?!xb(fi,xh.get(gi,m)):!xb(xh.get(gi,m),fi)){di=false;return false;}});return di&&xh.size===ei;}h(fh,db);function fh(xh,yh,zh){if(!(this instanceof fh))return new fh(xh,yh,zh);tc(zh!==0);xh=xh||0;if(yh===(void 0))yh=Infinity;zh=zh===(void 0)?1:Math.abs(zh);if(yh<xh)zh=-zh;this._start=xh;this._end=yh;this._step=zh;this.size=Math.max(0,Math.ceil((yh-xh)/zh-1)+1);if(this.size===0){if(gh)return gh;gh=this;}}fh.prototype.toString=function(){if(this.size===0)return 'Range []';return 'Range [ '+this._start+'...'+this._end+(this._step>1?' by '+this._step:'')+' ]';};fh.prototype.get=function(xh,yh){return this.has(xh)?this._start+u(this,xh)*this._step:yh;};fh.prototype.includes=function(xh){var yh=(xh-this._start)/this._step;return yh>=0&&yh<this.size&&yh===Math.floor(yh);};fh.prototype.slice=function(xh,yh){if(w(xh,yh,this.size))return this;xh=x(xh,this.size);yh=y(yh,this.size);if(yh<=xh)return new fh(0,0);return new fh(this.get(xh,this._end),this.get(yh,this._end),this._step);};fh.prototype.indexOf=function(xh){var yh=xh-this._start;if(yh%this._step===0){var zh=yh/this._step;if(zh>=0&&zh<this.size)return zh;}return -1;};fh.prototype.lastIndexOf=function(xh){return this.indexOf(xh);};fh.prototype.__iterate=function(xh,yh){var zh=this.size-1,ai=this._step,bi=yh?this._start+zh*ai:this._start;for(var ci=0;ci<=zh;ci++){if(xh(bi,ci,this)===false)return ci+1;bi+=yh?-ai:ai;}return ci;};fh.prototype.__iterator=function(xh,yh){var zh=this.size-1,ai=this._step,bi=yh?this._start+zh*ai:this._start,ci=0;return new ta(function(){var di=bi;bi+=yh?-ai:ai;return ci>zh?va():ua(xh,ci++,di);});};fh.prototype.equals=function(xh){return xh instanceof fh?this._start===xh._start&&this._end===xh._end&&this._step===xh._step:eh(this,xh);};var gh;h(hh,db);function hh(xh,yh){if(!(this instanceof hh))return new hh(xh,yh);this._value=xh;this.size=yh===(void 0)?Infinity:Math.max(0,yh);if(this.size===0){if(ih)return ih;ih=this;}}hh.prototype.toString=function(){if(this.size===0)return 'Repeat []';return 'Repeat [ '+this._value+' '+this.size+' times ]';};hh.prototype.get=function(xh,yh){return this.has(xh)?this._value:yh;};hh.prototype.includes=function(xh){return xb(this._value,xh);};hh.prototype.slice=function(xh,yh){var zh=this.size;return w(xh,yh,zh)?this:new hh(this._value,y(yh,zh)-x(xh,zh));};hh.prototype.reverse=function(){return this;};hh.prototype.indexOf=function(xh){if(xb(this._value,xh))return 0;return -1;};hh.prototype.lastIndexOf=function(xh){if(xb(this._value,xh))return this.size;return -1;};hh.prototype.__iterate=function(xh,yh){for(var zh=0;zh<this.size;zh++)if(xh(this._value,zh,this)===false)return zh+1;return zh;};hh.prototype.__iterator=function(xh,yh){var zh=this,ai=0;return new ta(function(){return ai<zh.size?ua(xh,ai++,zh._value):va();});};hh.prototype.equals=function(xh){return xh instanceof hh?xb(this._value,xh._value):eh(xh);};var ih;function jh(xh,yh){var zh=function(ai){xh.prototype[ai]=yh[ai];};Object.keys(yh).forEach(zh);Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(yh).forEach(zh);return xh;}aa.Iterator=ta;jh(aa,{toArray:function(){uc(this.size);var xh=new Array(this.size||0);this.valueSeq().__iterate(function(yh,zh){xh[zh]=yh;});return xh;},toIndexedSeq:function(){return new wc(this);},toJS:function(){return this.toSeq().map(function(xh){return xh&&typeof xh.toJS==='function'?xh.toJS():xh;}).__toJS();},toJSON:function(){return this.toSeq().map(function(xh){return xh&&typeof xh.toJSON==='function'?xh.toJSON():xh;}).__toJS();},toKeyedSeq:function(){return new vc(this,true);},toMap:function(){return yd(this.toKeyedSeq());},toObject:function(){uc(this.size);var xh={};this.__iterate(function(yh,zh){xh[zh]=yh;});return xh;},toOrderedMap:function(){return xf(this.toKeyedSeq());},toOrderedSet:function(){return sg(fa(this)?this.valueSeq():this);},toSet:function(){return kg(fa(this)?this.valueSeq():this);},toSetSeq:function(){return new xc(this);},toSeq:function(){return ga(this)?this.toIndexedSeq():fa(this)?this.toKeyedSeq():this.toSetSeq();},toStack:function(){return dg(fa(this)?this.valueSeq():this);},toList:function(){return ff(fa(this)?this.valueSeq():this);},toString:function(){return '[Iterable]';},__toString:function(xh,yh){if(this.size===0)return xh+yh;return xh+' '+this.toSeq().map(this.__toStringMapper).join(', ')+' '+yh;},concat:function(){var xh=g.call(arguments,0);return qd(this,id(this,xh));},contains:function(xh){return this.includes(xh);},includes:function(xh){return this.some(function(yh){return xb(yh,xh);});},entries:function(){return this.__iterator(pa);},every:function(xh,yh){uc(this.size);var zh=true;this.__iterate(function(ai,bi,ci){if(!xh.call(yh,ai,bi,ci)){zh=false;return false;}});return zh;},filter:function(xh,yh){return qd(this,cd(this,xh,yh,true));},find:function(xh,yh,zh){var ai=this.findEntry(xh,yh);return ai?ai[1]:zh;},findEntry:function(xh,yh){var zh;this.__iterate(function(ai,bi,ci){if(xh.call(yh,ai,bi,ci)){zh=[bi,ai];return false;}});return zh;},findLastEntry:function(xh,yh){return this.toSeq().reverse().findEntry(xh,yh);},forEach:function(xh,yh){uc(this.size);return this.__iterate(yh?xh.bind(yh):xh);},join:function(xh){uc(this.size);xh=xh!==(void 0)?''+xh:',';var yh='',zh=true;this.__iterate(function(ai){zh?(zh=false):(yh+=xh);yh+=ai!==null&&ai!==(void 0)?ai.toString():'';});return yh;},keys:function(){return this.__iterator(na);},map:function(xh,yh){return qd(this,ad(this,xh,yh));},reduce:function(xh,yh,zh){uc(this.size);var ai,bi;if(arguments.length<2){bi=true;}else ai=yh;this.__iterate(function(ci,di,ei){if(bi){bi=false;ai=ci;}else ai=xh.call(zh,ai,ci,di,ei);});return ai;},reduceRight:function(xh,yh,zh){var ai=this.toKeyedSeq().reverse();return ai.reduce.apply(ai,arguments);},reverse:function(){return qd(this,bd(this,true));},slice:function(xh,yh){return qd(this,fd(this,xh,yh,true));},some:function(xh,yh){return !this.every(oh(xh),yh);},sort:function(xh){return qd(this,md(this,xh));},values:function(){return this.__iterator(oa);},butLast:function(){return this.slice(0,-1);},isEmpty:function(){return this.size!==(void 0)?this.size===0:!this.some(function(){return true;});},count:function(xh,yh){return t(xh?this.toSeq().filter(xh,yh):this);},countBy:function(xh,yh){return dd(this,xh,yh);},equals:function(xh){return eh(this,xh);},entrySeq:function(){var xh=this;if(xh._cache)return new gb(xh._cache);var yh=xh.toSeq().map(nh).toIndexedSeq();yh.fromEntrySeq=function(){return xh.toSeq();};return yh;},filterNot:function(xh,yh){return this.filter(oh(xh),yh);},findLast:function(xh,yh,zh){return this.toKeyedSeq().reverse().find(xh,yh,zh);},first:function(){return this.find(v);},flatMap:function(xh,yh){return qd(this,kd(this,xh,yh));},flatten:function(xh){return qd(this,jd(this,xh,true));},fromEntrySeq:function(){return new yc(this);},get:function(xh,yh){return this.find(function(zh,ai){return xb(ai,xh);},(void 0),yh);},getIn:function(xh,yh){var zh=this,ai=xd(xh),bi;while(!(bi=ai.next()).done){var ci=bi.value;zh=zh&&zh.get?zh.get(ci,m):m;if(zh===m)return yh;}return zh;},groupBy:function(xh,yh){return ed(this,xh,yh);},has:function(xh){return this.get(xh,m)!==m;},hasIn:function(xh){return this.getIn(xh,m)!==m;},isSubset:function(xh){xh=typeof xh.includes==='function'?xh:aa(xh);return this.every(function(yh){return xh.includes(yh);});},isSuperset:function(xh){return xh.isSubset(this);},keySeq:function(){return this.toSeq().map(mh).toIndexedSeq();},last:function(){return this.toSeq().reverse().first();},max:function(xh){return nd(this,xh);},maxBy:function(xh,yh){return nd(this,yh,xh);},min:function(xh){return nd(this,xh?ph(xh):sh);},minBy:function(xh,yh){return nd(this,yh?ph(yh):sh,xh);},rest:function(){return this.slice(1);},skip:function(xh){return this.slice(Math.max(0,xh));},skipLast:function(xh){return qd(this,this.toSeq().reverse().skip(xh).reverse());},skipWhile:function(xh,yh){return qd(this,hd(this,xh,yh,true));},skipUntil:function(xh,yh){return this.skipWhile(oh(xh),yh);},sortBy:function(xh,yh){return qd(this,md(this,yh,xh));},take:function(xh){return this.slice(0,Math.max(0,xh));},takeLast:function(xh){return qd(this,this.toSeq().reverse().take(xh).reverse());},takeWhile:function(xh,yh){return qd(this,gd(this,xh,yh));},takeUntil:function(xh,yh){return this.takeWhile(oh(xh),yh);},valueSeq:function(){return this.toIndexedSeq();},hashCode:function(){return this.__hash||(this.__hash=th(this));}});var kh=aa.prototype;kh[ja]=true;kh[sa]=kh.values;kh.__toJS=kh.toArray;kh.__toStringMapper=qh;kh.inspect=kh.toSource=function(){return this.toString();};kh.chain=kh.flatMap;(function(){try{Object.defineProperty(kh,'length',{get:function(){if(!aa.noLengthWarning){var yh;try{throw new Error();}catch(zh){yh=zh.stack;}if(yh.indexOf('_wrapObject')===-1){console&&emptyFunction&&false;return this.size;}}}});}catch(xh){}})();jh(ba,{flip:function(){return qd(this,zc(this));},findKey:function(xh,yh){var zh=this.findEntry(xh,yh);return zh&&zh[0];},findLastKey:function(xh,yh){return this.toSeq().reverse().findKey(xh,yh);},keyOf:function(xh){return this.findKey(function(yh){return xb(yh,xh);});},lastKeyOf:function(xh){return this.findLastKey(function(yh){return xb(yh,xh);});},mapEntries:function(xh,yh){var zh=this,ai=0;return qd(this,this.toSeq().map(function(bi,ci){return xh.call(yh,[ci,bi],ai++,zh);}).fromEntrySeq());},mapKeys:function(xh,yh){var zh=this;return qd(this,this.toSeq().flip().map(function(ai,bi){return xh.call(yh,ai,bi,zh);}).flip());}});var lh=ba.prototype;lh[ka]=true;lh[sa]=kh.entries;lh.__toJS=kh.toObject;lh.__toStringMapper=function(xh,yh){return JSON.stringify(yh)+': '+qh(xh);};jh(ca,{toKeyedSeq:function(){return new vc(this,false);},filter:function(xh,yh){return qd(this,cd(this,xh,yh,false));},findIndex:function(xh,yh){var zh=this.findEntry(xh,yh);return zh?zh[0]:-1;},indexOf:function(xh){var yh=this.toKeyedSeq().keyOf(xh);return yh===(void 0)?-1:yh;},lastIndexOf:function(xh){return this.toSeq().reverse().indexOf(xh);},reverse:function(){return qd(this,bd(this,false));},slice:function(xh,yh){return qd(this,fd(this,xh,yh,false));},splice:function(xh,yh){var zh=arguments.length;yh=Math.max(yh|0,0);if(zh===0||(zh===2&&!yh))return this;xh=x(xh,this.size);var ai=this.slice(0,xh);return qd(this,zh===1?ai:ai.concat(s(arguments,2),this.slice(xh+yh)));},findLastIndex:function(xh,yh){var zh=this.toKeyedSeq().findLastKey(xh,yh);return zh===(void 0)?-1:zh;},first:function(){return this.get(0);},flatten:function(xh){return qd(this,jd(this,xh,false));},get:function(xh,yh){xh=u(this,xh);return (xh<0||(this.size===Infinity||(this.size!==(void 0)&&xh>this.size)))?yh:this.find(function(zh,ai){return ai===xh;},(void 0),yh);},has:function(xh){xh=u(this,xh);return xh>=0&&(this.size!==(void 0)?this.size===Infinity||xh<this.size:this.indexOf(xh)!==-1);},interpose:function(xh){return qd(this,ld(this,xh));},interleave:function(){var xh=[this].concat(s(arguments)),yh=pd(this.toSeq(),db.of,xh),zh=yh.flatten(true);if(yh.size)zh.size=yh.size*xh.length;return qd(this,zh);},last:function(){return this.get(-1);},skipWhile:function(xh,yh){return qd(this,hd(this,xh,yh,false));},zip:function(){var xh=[this].concat(s(arguments));return qd(this,pd(this,rh,xh));},zipWith:function(xh){var yh=s(arguments);yh[0]=this;return qd(this,pd(this,xh,yh));}});ca.prototype[la]=true;ca.prototype[ma]=true;jh(da,{get:function(xh,yh){return this.has(xh)?xh:yh;},includes:function(xh){return this.has(xh);},keySeq:function(){return this.valueSeq();}});da.prototype.has=kh.includes;jh(cb,ba.prototype);jh(db,ca.prototype);jh(eb,da.prototype);jh(ub,ba.prototype);jh(vb,ca.prototype);jh(wb,da.prototype);function mh(xh,yh){return yh;}function nh(xh,yh){return [yh,xh];}function oh(xh){return function(){return !xh.apply(this,arguments);};}function ph(xh){return function(){return -xh.apply(this,arguments);};}function qh(xh){return typeof xh==='string'?JSON.stringify(xh):xh;}function rh(){return s(arguments);}function sh(xh,yh){return xh<yh?1:xh>yh?-1:0;}function th(xh){if(xh.size===Infinity)return 0;var yh=ia(xh),zh=fa(xh),ai=yh?1:0,bi=xh.__iterate(zh?yh?function(ci,di){ai=31*ai+vh(ec(ci),ec(di))|0;}:function(ci,di){ai=ai+vh(ec(ci),ec(di))|0;}:yh?function(ci){ai=31*ai+ec(ci)|0;}:function(ci){ai=ai+ec(ci)|0;});return uh(bi,ai);}function uh(xh,yh){yh=cc(yh,3432918353);yh=cc(yh<<15|yh>>>-15,461845907);yh=cc(yh<<13|yh>>>-13,5);yh=(yh+3864292196|0)^xh;yh=cc(yh^yh>>>16,2246822507);yh=cc(yh^yh>>>13,3266489909);yh=dc(yh^yh>>>16);return yh;}function vh(xh,yh){return xh^yh+2654435769+(xh<<6)+(xh>>2)|0;}var wh={Iterable:aa,Seq:bb,Collection:tb,Map:yd,OrderedMap:xf,List:ff,Stack:dg,Set:kg,OrderedSet:sg,Record:yg,Range:fh,Repeat:hh,is:xb,fromJS:yb};return wh;}));},null);
__d("keyMirrorRecursive",["invariant"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';function h(k,l){return i(k,l);}function i(k,l){var m={},n;g(j(k));for(n in k){if(!k.hasOwnProperty(n))continue;var o=k[n],p=l?l+'.'+n:n;if(j(o)){o=i(o,p);}else o=p;m[n]=o;}return m;}function j(k){return k instanceof Object&&!Array.isArray(k);}e.exports=h;},null);
__d("mergeDeepInto",["invariant","mergeHelpers"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';var i=h.ArrayStrategies,j=h.checkArrayStrategy,k=h.checkMergeArrayArgs,l=h.checkMergeLevel,m=h.checkMergeObjectArgs,n=h.isTerminal,o=h.normalizeMergeArg,p=function(t,u,v,w){m(t,u);l(w);var x=u?Object.keys(u):[];for(var y=0;y<x.length;y++){var z=x[y];r(t,u,z,v,w);}},q=function(t,u,v,w){k(t,u);l(w);var x=Math.max(t.length,u.length);for(var y=0;y<x;y++)r(t,u,y,v,w);},r=function(t,u,v,w,x){var y=u[v],z=u.hasOwnProperty(v),aa=z&&n(y),ba=z&&Array.isArray(y),ca=z&&!ba&&!ba,da=t[v],ea=t.hasOwnProperty(v),fa=ea&&n(da),ga=ea&&Array.isArray(da),ha=ea&&!ga&&!ga;if(fa){if(aa){t[v]=y;}else if(ba){t[v]=[];q(t[v],y,w,x+1);}else if(ca){t[v]={};p(t[v],y,w,x+1);}else if(!z)t[v]=da;}else if(ga){if(aa){t[v]=y;}else if(ba){g(i[w]);if(w===i.Clobber)da.length=0;q(da,y,w,x+1);}else if(ca){t[v]={};p(t[v],y,w,x+1);}else !z;}else if(ha){if(aa){t[v]=y;}else if(ba){t[v]=[];q(t[v],y,w,x+1);}else if(ca){p(da,y,w,x+1);}else !z;}else if(!ea)if(aa){t[v]=y;}else if(ba){t[v]=[];q(t[v],y,w,x+1);}else if(ca){t[v]={};p(t[v],y,w,x+1);}else !z;},s=function(t,u,v){var w=o(u);j(v);p(t,w,v,0);};e.exports=s;},null);
__d("mergeDeep",["mergeHelpers","mergeDeepInto"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';var i=g.checkArrayStrategy,j=g.checkMergeObjectArgs,k=g.normalizeMergeArg,l=function(m,n,o){var p=k(m),q=k(n);j(p,q);i(o);var r={};h(r,p,o);h(r,q,o);return r;};e.exports=l;},null);
__d("clearImmediate",["clearImmediatePolyfill"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();e.exports=g.bind(a);},null);
__d("PaymentMethodUtils",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g=16,h=4,i=[{pattern:/^5[1-5]/,name:'mc',cscDigits:3,digits:16,supported:true,code:77},{pattern:/^4/,name:'visa',cscDigits:3,digits:16,supported:true,code:86},{pattern:/^3[47]/,name:'amex',cscDigits:4,digits:15,supported:true,code:65},{pattern:/^35(2[8-9]|[3-8])/,name:'jcb',cscDigits:3,digits:16,supported:true,code:74},{pattern:/^(6011|65|64[4-9]|622([2-8]|1[3-9]|12[6-9]|9[0-1]|92[0-5]))/,name:'disc',cscDigits:3,digits:16,supported:true,code:68},{pattern:/^30[0-5]/,name:'diners',digits:14,cscDigits:3,supported:false,code:64},{name:'unknown',digits:16,cscDigits:3,supported:false,code:85}],j=function(l){return l.replace(/[iIl]/g,'1').replace(/[Oo]/g,'0').replace(/[^\d]/gi,'');},k={getCardType:function(l){l=j(l);l=l.substr(0,6);for(var m=0;m<i.length;m++)if(l.match(i[m].pattern))return i[m];},getCardTypeFromCode:function(l){for(var m=0;m<i.length;m++)if(l==i[m].code)return i[m];return null;},isValidCCNumber:function(l){l=j(l);var m=k.getCardType(l);if(m.digits!==l.length)return false;if(!m.supported)return false;return k.isValidLuhn(l);},isValidLuhn:function(l){l=j(l);var m=l.split('').reverse(),n='';for(var o=0;o<m.length;o++){var p=parseInt(m[o],10);if(o%2!==0)p=p*2;n=n+p;}var q=0;for(o=0;o<n.length;o++)q=q+parseInt(n.charAt(o),10);return !!(q!==0&&q%10===0);},getMaxCardLength:function(l){return g;},getMaxCSCLength:function(){return h;}};e.exports=k;},null);
__d("PhotoStoreCore",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={actions:{UPDATE:'update'},_photoCache:{},_postCreateCallbacks:{},getPhotoCache:function(h){if(!this._photoCache[h])throw new Error('Photo cache requested for unknown set ID');return this._photoCache[h];},hasBeenCreated:function(h){return !!this._photoCache[h];},clearSetCache:function(h){delete this._photoCache[h];delete this._postCreateCallbacks[h];},getByIndex:function(h,i,j){this.getPhotoCache(h).getItemAtIndex(i,j);},getByIndexImmediate:function(h,i){if(this._photoCache[h])return this._photoCache[h].getItemAtIndexImmediate(i);return (void 0);},getItemsInAvailableRange:function(h){var i=this.getAvailableRange(h),j=[];for(var k=i.offset;k<i.length;k++)j.push(this.getByIndexImmediate(h,k));return j;},getItemsAfterIndex:function(h,i,j,k){var l=this.getCursorByIndexImmediate(h,i);this.fetchForward(h,l,j,k);},getAllByIDImmediate:function(h){var i=Object.keys(this._photoCache);return i.map(function(j){return this.getByIndexImmediate(j,this.getIndexForID(j,h));}.bind(this)).filter(function(j){return !!j;});},getIndexForID:function(h,i){if(this._photoCache[h])return this._photoCache[h].getIndexForID(i);return (void 0);},getEndIndex:function(h){var i=this.getAvailableRange(h);return i.offset+i.length-1;},getCursorByIndexImmediate:function(h,i){var j=this.getByIndexImmediate(h,i);if(j)return this._photoCache[h].getCursorForID(j.id);return (void 0);},hasNextPage:function(h){var i=this.getCursorByIndexImmediate(h,this.getEndIndex(h));return this.getPhotoCache(h).hasNextPage(i);},getAvailableRange:function(h){return this.getPhotoCache(h).getAvailableRange();},hasLooped:function(h){return this.getPhotoCache(h).hasLooped();},fetchForward:function(h,i,j,k){this.getPhotoCache(h).getItemsAfterCursor(i,j,k);},fetchBackward:function(h,i,j,k){this.getPhotoCache(h).getItemsBeforeCursor(i,j,k);},executePostCreate:function(h,i){if(this._photoCache[h]){i&&i();}else this._postCreateCallbacks[h]=i;},runPostCreateCallback:function(h){var i=this._postCreateCallbacks[h];if(i){i();delete this._postCreateCallbacks[h];}},setPreFetchCallback:function(h,i){this.getPhotoCache(h).setPreFetchCallback(i);},updateData:function(h){var i=h.set_id;if(!this._photoCache[i]){this._photoCache[i]=new h.cache_class(h);this.runPostCreateCallback(i);}else if(h.query_metadata.action==g.actions.UPDATE){this._photoCache[i].updateData(h);}else this._photoCache[i].addData(h);},updateFeedbackData:function(h){var i=Object.keys(h);i.forEach(function(j){return g.getAllByIDImmediate(j).forEach(function(k){k.feedback=h[j].feedback;});});},reset:function(){Object.keys(this._photoCache).forEach(function(h){return this.clearSetCache(h);}.bind(this));}};e.exports=g;},null);
__d("ReactComponentRenderer",["React","Object.assign","warning"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';function j(k,l){this.klass=k;this.container=l;this.props={};this.component=null;}j.prototype.replaceProps=function(k,l){this.props={};this.setProps(k,l);};j.prototype.setProps=function(k,l){if(this.klass==null)return;h(this.props,k);var m=g.createElement(this.klass,this.props);this.component=g.render(m,this.container,l);};j.prototype.unmount=function(){g.unmountComponentAtNode(this.container);this.klass=null;};e.exports=j;},null);
__d("XHRHttpError",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g='HTTP_CLIENT_ERROR',h='HTTP_PROXY_ERROR',i='HTTP_SERVER_ERROR',j='HTTP_TRANSPORT_ERROR',k='HTTP_UNKNOWN_ERROR';function l(m,n){if(n===0){var o=m.getProtocol();if(o==='file'||o==='ftp')return null;return j;}else if(n>=100&&n<200){return h;}else if(n>=200&&n<300){return null;}else if(n>=400&&n<500){return g;}else if(n>=500&&n<600){return i;}else if(n>=12001&&n<12156){return j;}else return k;}e.exports={getErrorCode:l,HTTP_CLIENT_ERROR:g,HTTP_PROXY_ERROR:h,HTTP_SERVER_ERROR:i,HTTP_TRANSPORT_ERROR:j,HTTP_UNKNOWN_ERROR:k};},null);
__d("xhrSimpleDataSerializer",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(h){var i=[],j;for(j in h)i.push(encodeURIComponent(j)+'='+encodeURIComponent(h[j]));return i.join('&');}e.exports=g;},null);
__d("XHRRequest",["ErrorUtils","TimeSlice","URI","XHRHttpError","getSameOriginTransport","invariant","xhrSimpleDataSerializer"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();var n={errorCode:null,errorMsg:null,errorType:null},o={loadedBytes:null,totalBytes:null};function p(q){"use strict";this.setURI(q);this.setMethod('POST');this.setTransportBuilder(k);this.setDataSerializer(m);this.$XHRRequest0=this.$XHRRequest0.bind(this);}p.prototype.setURI=function(q){"use strict";this.$XHRRequest1=new i(q);return this;};p.prototype.getURI=function(){"use strict";return this.$XHRRequest1;};p.prototype.setMethod=function(q){"use strict";this.$XHRRequest2=q;return this;};p.prototype.getMethod=function(){"use strict";return this.$XHRRequest2;};p.prototype.setData=function(q){"use strict";this.$XHRRequest3=q;return this;};p.prototype.getData=function(){"use strict";return this.$XHRRequest3;};p.prototype.setRawData=function(q){"use strict";this.$XHRRequest4=q;return this;};p.prototype.setRequestHeader=function(q,r){"use strict";if(!this.$XHRRequest5)this.$XHRRequest5={};this.$XHRRequest5[q]=r;return this;};p.prototype.setTimeout=function(q){"use strict";this.$XHRRequest6=q;return this;};p.prototype.setResponseHandler=function(q){"use strict";this.$XHRRequest7=q;return this;};p.prototype.setErrorHandler=function(q){"use strict";this.$XHRRequest8=q;return this;};p.prototype.setAbortHandler=function(q){"use strict";this.$XHRRequest9=q;return this;};p.prototype.setTimeoutHandler=function(q){"use strict";this.$XHRRequesta=q;return this;};p.prototype.setUploadProgressHandler=function(q){"use strict";this.$XHRRequestb=q;return this;};p.prototype.setTransportBuilder=function(q){"use strict";this.$XHRRequestc=q;return this;};p.prototype.setDataSerializer=function(q){"use strict";this.$XHRRequestd=q;return this;};p.prototype.send=function(){"use strict";var q=this.$XHRRequest6,r=this.$XHRRequestc(),s=this.getURI();this.$XHRRequeste=r;var t;l(this.$XHRRequest2==='POST'||!this.$XHRRequest4);if(this.$XHRRequest2==='GET'||this.$XHRRequest4){s.addQueryData(this.$XHRRequest3);t=this.$XHRRequest4;}else t=this.$XHRRequestd(this.$XHRRequest3);r.onreadystatechange=h.guard(this.$XHRRequest0,'XHRRequest onreadystatechange');if(r.upload&&this.$XHRRequestb)r.upload.onprogress=this.$XHRRequestf.bind(this);if(q)this.$XHRRequestg=setTimeout(this.$XHRRequesth.bind(this),q);r.open(this.$XHRRequest2,s.toString(),true);if(this.$XHRRequest5)for(var u in this.$XHRRequest5)r.setRequestHeader(u,this.$XHRRequest5[u]);r.send(t);};p.prototype.abort=function(){"use strict";this.$XHRRequesti();if(this.$XHRRequest9)g.applyWithGuard(this.$XHRRequest9,null,null,null,'XHRRequest:_abortHandler');};p.prototype.$XHRRequesti=function(){"use strict";var q=this.$XHRRequeste;if(q){q.onreadystatechange=null;q.abort();}this.$XHRRequestj();};p.prototype.$XHRRequesth=function(){"use strict";this.$XHRRequesti();if(this.$XHRRequesta)g.applyWithGuard(this.$XHRRequesta,null,null,null,'XHRRequest:_abortHandler');};p.prototype.$XHRRequest0=function(){"use strict";var q=this.$XHRRequeste,r=q,s=r.readyState;if(s>=2){var t=s===4,u=this.getURI(),v=j.getErrorCode(u,q.status),w=this.$XHRRequest7;if(v!==null){if(t){n.errorCode=v;n.errorMsg=q.responseText;n.errorType='HTTP';if(this.$XHRRequest8)g.applyWithGuard(this.$XHRRequest8,null,[n],null,'XHRRequest:_errorHandler');}}else if(w){var x=null;if(w.includeHeaders)x=q.getAllResponseHeaders();if(t||(w.parseStreaming&&s===3))g.applyWithGuard(w,null,[q.responseText,x,t],null,'XHRRequest:handler');}if(t)this.$XHRRequestj();}};p.prototype.$XHRRequestf=function(q){"use strict";o.loadedBytes=q.loaded;o.totalBytes=q.total;if(this.$XHRRequestb)g.applyWithGuard(this.$XHRRequestb,null,[o],null,'XHRRequest:_uploadProgressHandler');};p.prototype.$XHRRequestj=function(){"use strict";clearTimeout(this.$XHRRequestg);delete this.$XHRRequeste;};e.exports=p;},null);
__d("getCrossOriginTransport",["ex","invariant"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();function i(){try{var k=new XMLHttpRequest();if(!('withCredentials' in k)&&typeof XDomainRequest!=='undefined')k=new XDomainRequest();return k;}catch(j){throw new Error(g('getCrossOriginTransport: %s',j.message));}}i.withCredentials=function(){var j=i();h('withCredentials' in j);var k=j.open;j.open=function(){k.apply(this,arguments);this.withCredentials=true;};return j;};e.exports=i;},null);
__d("findRangesImmutable",["immutable"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h=g,i=h.List;i;function j(k,l,m,n){if(!k.size)return;var o=0;k.reduce(function(p,q,r){if(!l(p,q)){if(m(p))n(o,r);o=r;}return q;});m(k.last())&&n(o,k.count());}e.exports=j;},null);
__d("BlockTree",["immutable","emptyFunction","findRangesImmutable"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';var j=g,k=j.List,l=j.Repeat,m=j.Record,n=h.thatReturnsTrue,o='-',p={start:null,end:null},q=m(p),r={start:null,end:null,decoratorKey:null,leaves:null},s=m(r),t={generate:function(w,x){var y=w.getLength();if(!y)return k.of(new s({start:0,end:0,decoratorKey:null,leaves:k.of(new q({start:0,end:0}))}));var z=[],aa=x?x.getDecorations(w):k(l(null,y)),ba=w.getCharacterList();i(aa,v,n,function(ca,da){z.push(new s({start:ca,end:da,decoratorKey:aa.get(ca),leaves:u(ba.slice(ca,da).toList(),ca)}));});return k(z);},getFingerprint:function(w){return w.map(function(x){var y=x.get('decoratorKey'),z=y!==null?y+'.'+(x.get('end')-x.get('start')):'';return ''+z+'.'+x.get('leaves').size;}).join(o);}};function u(w,x){var y=[],z=w.map(function(aa){return aa.getStyle();});i(z,v,n,function(aa,ba){y.push(new q({start:aa+x,end:ba+x}));});return k(y);}function v(w,x){return w===x;}e.exports=t;},null);
__d("UnicodeBidiDirection-upstream",["invariant"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';var h='NEUTRAL',i='LTR',j='RTL',k=null;function l(q){return q===i||q===j;}function m(q){g(l(q));k=q;}function n(){m(i);}function o(){if(k==null)n();return k;}var p={NEUTRAL:h,LTR:i,RTL:j,isStrong:l,setGlobalDir:m,getGlobalDir:o};e.exports=p;},null);
__d("UnicodeBidiDirection",["Locale","UnicodeBidiDirection-upstream"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();h.setGlobalDir(g.isRTL()?h.RTL:h.LTR);e.exports=h;},null);
__d("UnicodeBidi",["UnicodeBidiDirection"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';var h={L:'A-Za-z\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u01BA\u01BB'+'\u01BC-\u01BF\u01C0-\u01C3\u01C4-\u0293\u0294\u0295-\u02AF\u02B0-\u02B8'+'\u02BB-\u02C1\u02D0-\u02D1\u02E0-\u02E4\u02EE\u0370-\u0373\u0376-\u0377'+'\u037A\u037B-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1'+'\u03A3-\u03F5\u03F7-\u0481\u0482\u048A-\u052F\u0531-\u0556\u0559'+'\u055A-\u055F\u0561-\u0587\u0589\u0903\u0904-\u0939\u093B\u093D'+'\u093E-\u0940\u0949-\u094C\u094E-\u094F\u0950\u0958-\u0961\u0964-\u0965'+'\u0966-\u096F\u0970\u0971\u0972-\u0980\u0982-\u0983\u0985-\u098C'+'\u098F-\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD'+'\u09BE-\u09C0\u09C7-\u09C8\u09CB-\u09CC\u09CE\u09D7\u09DC-\u09DD'+'\u09DF-\u09E1\u09E6-\u09EF\u09F0-\u09F1\u09F4-\u09F9\u09FA\u0A03'+'\u0A05-\u0A0A\u0A0F-\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32-\u0A33'+'\u0A35-\u0A36\u0A38-\u0A39\u0A3E-\u0A40\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F'+'\u0A72-\u0A74\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0'+'\u0AB2-\u0AB3\u0AB5-\u0AB9\u0ABD\u0ABE-\u0AC0\u0AC9\u0ACB-\u0ACC\u0AD0'+'\u0AE0-\u0AE1\u0AE6-\u0AEF\u0AF0\u0B02-\u0B03\u0B05-\u0B0C\u0B0F-\u0B10'+'\u0B13-\u0B28\u0B2A-\u0B30\u0B32-\u0B33\u0B35-\u0B39\u0B3D\u0B3E\u0B40'+'\u0B47-\u0B48\u0B4B-\u0B4C\u0B57\u0B5C-\u0B5D\u0B5F-\u0B61\u0B66-\u0B6F'+'\u0B70\u0B71\u0B72-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95'+'\u0B99-\u0B9A\u0B9C\u0B9E-\u0B9F\u0BA3-\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9'+'\u0BBE-\u0BBF\u0BC1-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCC\u0BD0\u0BD7'+'\u0BE6-\u0BEF\u0BF0-\u0BF2\u0C01-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10'+'\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C41-\u0C44\u0C58-\u0C59\u0C60-\u0C61'+'\u0C66-\u0C6F\u0C7F\u0C82-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8'+'\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CBE\u0CBF\u0CC0-\u0CC4\u0CC6'+'\u0CC7-\u0CC8\u0CCA-\u0CCB\u0CD5-\u0CD6\u0CDE\u0CE0-\u0CE1\u0CE6-\u0CEF'+'\u0CF1-\u0CF2\u0D02-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D'+'\u0D3E-\u0D40\u0D46-\u0D48\u0D4A-\u0D4C\u0D4E\u0D57\u0D60-\u0D61'+'\u0D66-\u0D6F\u0D70-\u0D75\u0D79\u0D7A-\u0D7F\u0D82-\u0D83\u0D85-\u0D96'+'\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCF-\u0DD1\u0DD8-\u0DDF'+'\u0DE6-\u0DEF\u0DF2-\u0DF3\u0DF4\u0E01-\u0E30\u0E32-\u0E33\u0E40-\u0E45'+'\u0E46\u0E4F\u0E50-\u0E59\u0E5A-\u0E5B\u0E81-\u0E82\u0E84\u0E87-\u0E88'+'\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7'+'\u0EAA-\u0EAB\u0EAD-\u0EB0\u0EB2-\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6'+'\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F01-\u0F03\u0F04-\u0F12\u0F13\u0F14'+'\u0F15-\u0F17\u0F1A-\u0F1F\u0F20-\u0F29\u0F2A-\u0F33\u0F34\u0F36\u0F38'+'\u0F3E-\u0F3F\u0F40-\u0F47\u0F49-\u0F6C\u0F7F\u0F85\u0F88-\u0F8C'+'\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE-\u0FCF\u0FD0-\u0FD4\u0FD5-\u0FD8'+'\u0FD9-\u0FDA\u1000-\u102A\u102B-\u102C\u1031\u1038\u103B-\u103C\u103F'+'\u1040-\u1049\u104A-\u104F\u1050-\u1055\u1056-\u1057\u105A-\u105D\u1061'+'\u1062-\u1064\u1065-\u1066\u1067-\u106D\u106E-\u1070\u1075-\u1081'+'\u1083-\u1084\u1087-\u108C\u108E\u108F\u1090-\u1099\u109A-\u109C'+'\u109E-\u109F\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FB\u10FC'+'\u10FD-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288'+'\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5'+'\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1360-\u1368'+'\u1369-\u137C\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166D-\u166E'+'\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EB-\u16ED\u16EE-\u16F0'+'\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1735-\u1736'+'\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17B6\u17BE-\u17C5'+'\u17C7-\u17C8\u17D4-\u17D6\u17D7\u17D8-\u17DA\u17DC\u17E0-\u17E9'+'\u1810-\u1819\u1820-\u1842\u1843\u1844-\u1877\u1880-\u18A8\u18AA'+'\u18B0-\u18F5\u1900-\u191E\u1923-\u1926\u1929-\u192B\u1930-\u1931'+'\u1933-\u1938\u1946-\u194F\u1950-\u196D\u1970-\u1974\u1980-\u19AB'+'\u19B0-\u19C0\u19C1-\u19C7\u19C8-\u19C9\u19D0-\u19D9\u19DA\u1A00-\u1A16'+'\u1A19-\u1A1A\u1A1E-\u1A1F\u1A20-\u1A54\u1A55\u1A57\u1A61\u1A63-\u1A64'+'\u1A6D-\u1A72\u1A80-\u1A89\u1A90-\u1A99\u1AA0-\u1AA6\u1AA7\u1AA8-\u1AAD'+'\u1B04\u1B05-\u1B33\u1B35\u1B3B\u1B3D-\u1B41\u1B43-\u1B44\u1B45-\u1B4B'+'\u1B50-\u1B59\u1B5A-\u1B60\u1B61-\u1B6A\u1B74-\u1B7C\u1B82\u1B83-\u1BA0'+'\u1BA1\u1BA6-\u1BA7\u1BAA\u1BAE-\u1BAF\u1BB0-\u1BB9\u1BBA-\u1BE5\u1BE7'+'\u1BEA-\u1BEC\u1BEE\u1BF2-\u1BF3\u1BFC-\u1BFF\u1C00-\u1C23\u1C24-\u1C2B'+'\u1C34-\u1C35\u1C3B-\u1C3F\u1C40-\u1C49\u1C4D-\u1C4F\u1C50-\u1C59'+'\u1C5A-\u1C77\u1C78-\u1C7D\u1C7E-\u1C7F\u1CC0-\u1CC7\u1CD3\u1CE1'+'\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF2-\u1CF3\u1CF5-\u1CF6\u1D00-\u1D2B'+'\u1D2C-\u1D6A\u1D6B-\u1D77\u1D78\u1D79-\u1D9A\u1D9B-\u1DBF\u1E00-\u1F15'+'\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D'+'\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC'+'\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200E'+'\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D'+'\u2124\u2126\u2128\u212A-\u212D\u212F-\u2134\u2135-\u2138\u2139'+'\u213C-\u213F\u2145-\u2149\u214E\u214F\u2160-\u2182\u2183-\u2184'+'\u2185-\u2188\u2336-\u237A\u2395\u249C-\u24E9\u26AC\u2800-\u28FF'+'\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2C7B\u2C7C-\u2C7D\u2C7E-\u2CE4'+'\u2CEB-\u2CEE\u2CF2-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F'+'\u2D70\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE'+'\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005\u3006\u3007'+'\u3021-\u3029\u302E-\u302F\u3031-\u3035\u3038-\u303A\u303B\u303C'+'\u3041-\u3096\u309D-\u309E\u309F\u30A1-\u30FA\u30FC-\u30FE\u30FF'+'\u3105-\u312D\u3131-\u318E\u3190-\u3191\u3192-\u3195\u3196-\u319F'+'\u31A0-\u31BA\u31F0-\u31FF\u3200-\u321C\u3220-\u3229\u322A-\u3247'+'\u3248-\u324F\u3260-\u327B\u327F\u3280-\u3289\u328A-\u32B0\u32C0-\u32CB'+'\u32D0-\u32FE\u3300-\u3376\u337B-\u33DD\u33E0-\u33FE\u3400-\u4DB5'+'\u4E00-\u9FCC\uA000-\uA014\uA015\uA016-\uA48C\uA4D0-\uA4F7\uA4F8-\uA4FD'+'\uA4FE-\uA4FF\uA500-\uA60B\uA60C\uA610-\uA61F\uA620-\uA629\uA62A-\uA62B'+'\uA640-\uA66D\uA66E\uA680-\uA69B\uA69C-\uA69D\uA6A0-\uA6E5\uA6E6-\uA6EF'+'\uA6F2-\uA6F7\uA722-\uA76F\uA770\uA771-\uA787\uA789-\uA78A\uA78B-\uA78E'+'\uA790-\uA7AD\uA7B0-\uA7B1\uA7F7\uA7F8-\uA7F9\uA7FA\uA7FB-\uA801'+'\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA823-\uA824\uA827\uA830-\uA835'+'\uA836-\uA837\uA840-\uA873\uA880-\uA881\uA882-\uA8B3\uA8B4-\uA8C3'+'\uA8CE-\uA8CF\uA8D0-\uA8D9\uA8F2-\uA8F7\uA8F8-\uA8FA\uA8FB\uA900-\uA909'+'\uA90A-\uA925\uA92E-\uA92F\uA930-\uA946\uA952-\uA953\uA95F\uA960-\uA97C'+'\uA983\uA984-\uA9B2\uA9B4-\uA9B5\uA9BA-\uA9BB\uA9BD-\uA9C0\uA9C1-\uA9CD'+'\uA9CF\uA9D0-\uA9D9\uA9DE-\uA9DF\uA9E0-\uA9E4\uA9E6\uA9E7-\uA9EF'+'\uA9F0-\uA9F9\uA9FA-\uA9FE\uAA00-\uAA28\uAA2F-\uAA30\uAA33-\uAA34'+'\uAA40-\uAA42\uAA44-\uAA4B\uAA4D\uAA50-\uAA59\uAA5C-\uAA5F\uAA60-\uAA6F'+'\uAA70\uAA71-\uAA76\uAA77-\uAA79\uAA7A\uAA7B\uAA7D\uAA7E-\uAAAF\uAAB1'+'\uAAB5-\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADC\uAADD\uAADE-\uAADF'+'\uAAE0-\uAAEA\uAAEB\uAAEE-\uAAEF\uAAF0-\uAAF1\uAAF2\uAAF3-\uAAF4\uAAF5'+'\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E'+'\uAB30-\uAB5A\uAB5B\uAB5C-\uAB5F\uAB64-\uAB65\uABC0-\uABE2\uABE3-\uABE4'+'\uABE6-\uABE7\uABE9-\uABEA\uABEB\uABEC\uABF0-\uABF9\uAC00-\uD7A3'+'\uD7B0-\uD7C6\uD7CB-\uD7FB\uE000-\uF8FF\uF900-\uFA6D\uFA70-\uFAD9'+'\uFB00-\uFB06\uFB13-\uFB17\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFF6F\uFF70'+'\uFF71-\uFF9D\uFF9E-\uFF9F\uFFA0-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF'+'\uFFD2-\uFFD7\uFFDA-\uFFDC',R:'\u0590\u05BE\u05C0\u05C3\u05C6\u05C8-\u05CF\u05D0-\u05EA\u05EB-\u05EF'+'\u05F0-\u05F2\u05F3-\u05F4\u05F5-\u05FF\u07C0-\u07C9\u07CA-\u07EA'+'\u07F4-\u07F5\u07FA\u07FB-\u07FF\u0800-\u0815\u081A\u0824\u0828'+'\u082E-\u082F\u0830-\u083E\u083F\u0840-\u0858\u085C-\u085D\u085E'+'\u085F-\u089F\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB37\uFB38-\uFB3C'+'\uFB3D\uFB3E\uFB3F\uFB40-\uFB41\uFB42\uFB43-\uFB44\uFB45\uFB46-\uFB4F',AL:'\u0608\u060B\u060D\u061B\u061C\u061D\u061E-\u061F\u0620-\u063F\u0640'+'\u0641-\u064A\u066D\u066E-\u066F\u0671-\u06D3\u06D4\u06D5\u06E5-\u06E6'+'\u06EE-\u06EF\u06FA-\u06FC\u06FD-\u06FE\u06FF\u0700-\u070D\u070E\u070F'+'\u0710\u0712-\u072F\u074B-\u074C\u074D-\u07A5\u07B1\u07B2-\u07BF'+'\u08A0-\u08B2\u08B3-\u08E3\uFB50-\uFBB1\uFBB2-\uFBC1\uFBC2-\uFBD2'+'\uFBD3-\uFD3D\uFD40-\uFD4F\uFD50-\uFD8F\uFD90-\uFD91\uFD92-\uFDC7'+'\uFDC8-\uFDCF\uFDF0-\uFDFB\uFDFC\uFDFE-\uFDFF\uFE70-\uFE74\uFE75'+'\uFE76-\uFEFC\uFEFD-\uFEFE'},i=new RegExp('['+h.L+h.R+h.AL+']'),j=new RegExp('['+h.R+h.AL+']');function k(q){var r=i.exec(q);if(!r)return g.NEUTRAL;var s=j.exec(r[0]);return s?g.RTL:g.LTR;}function l(q,r){r=r||g.NEUTRAL;if(!q.length)return r;var s=k(q);return (s===g.NEUTRAL)?r:s;}function m(q,r){if(!r||!g.isStrong(r))r=g.getGlobalDir();return l(q,r);}function n(q,r){return m(q,r)===g.LTR;}function o(q,r){return m(q,r)===g.RTL;}var p={firstStrongCharDir:k,resolveBlockDir:l,getDirection:m,isDirectionLTR:n,isDirectionRTL:o};e.exports=p;},null);
__d("UnicodeBidiService",["UnicodeBidi","UnicodeBidiDirection","invariant"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';function j(k){if(!k)k=h.getGlobalDir();i(h.isStrong(k));this.defaultDir=k;this.reset();}j.prototype.reset=function(){this.lastDir=this.defaultDir;};j.prototype.getDirection=function(k){this.lastDir=g.getDirection(k,this.lastDir);return this.lastDir;};e.exports=j;},null);
__d("EditorBidiService",["immutable","UnicodeBidiService","nullthrows"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';var j=g,k=j.OrderedMap,l,m={getDirectionMap:function(n,o){if(!l){l=new h();}else l.reset();var p=n.getBlockMap(),q=p.valueSeq().map(function(s){return i(l).getDirection(s.getText());}),r=k(p.keySeq().zip(q));return g.is(o,r)?o:r;}};e.exports=m;},null);
__d("EditorChangeType",["keyMirror"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';var h=g({UNDO:true,REDO:true,CHANGE_SELECTION:true,INSERT_CHARACTERS:true,BACKSPACE_CHARACTER:true,DELETE_CHARACTER:true,REMOVE_RANGE:true,SPLIT_BLOCK:true,INSERT_FRAGMENT:true,CHANGE_INLINE_STYLE:true,CHANGE_BLOCK_TYPE:true,APPLY_ENTITY:true,RESET_BLOCK:true,ADJUST_DEPTH:true});e.exports=h;},null);
__d("SelectionState",["immutable"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';var h=g,i=h.Record,j={anchorKey:'',anchorOffset:0,focusKey:'',focusOffset:0,isBackward:false,hasFocus:false},k=i(j);for(var l in k)if(k.hasOwnProperty(l))n[l]=k[l];var m=k===null?null:k.prototype;n.prototype=Object.create(m);n.prototype.constructor=n;n.__superConstructor__=k;function n(){if(k!==null)k.apply(this,arguments);}n.prototype.serialize=function(){return ('Anchor: '+this.getAnchorKey()+':'+this.getAnchorOffset()+', '+'Focus: '+this.getFocusKey()+':'+this.getFocusOffset()+', '+'Is Backward: '+String(this.getIsBackward())+', '+'Has Focus: '+String(this.getHasFocus()));};n.prototype.getAnchorKey=function(){return this.anchorKey;};n.prototype.getAnchorOffset=function(){return this.anchorOffset;};n.prototype.getFocusKey=function(){return this.focusKey;};n.prototype.getFocusOffset=function(){return this.focusOffset;};n.prototype.getIsBackward=function(){return this.isBackward;};n.prototype.getHasFocus=function(){return this.hasFocus;};n.prototype.hasEdgeWithin=function(o,p,q){var r=this.getAnchorKey(),s=this.getFocusKey();if(r===s&&r===o){var t=this.getStartOffset(),u=this.getEndOffset();return p<=u&&t<=q;}if(o!==r&&o!==s)return false;var v=o===r?this.getAnchorOffset():this.getFocusOffset();return p<=v&&q>=v;};n.prototype.isCollapsed=function(){return (this.getAnchorKey()===this.getFocusKey()&&this.getAnchorOffset()===this.getFocusOffset());};n.prototype.getStartKey=function(){return this.getIsBackward()?this.getFocusKey():this.getAnchorKey();};n.prototype.getStartOffset=function(){return this.getIsBackward()?this.getFocusOffset():this.getAnchorOffset();};n.prototype.getEndKey=function(){return this.getIsBackward()?this.getAnchorKey():this.getFocusKey();};n.prototype.getEndOffset=function(){return this.getIsBackward()?this.getAnchorOffset():this.getFocusOffset();};e.exports=n;},null);
__d("EditorState",["BlockTree","ComposedInlineStyle","EditorBidiService","EditorChangeType","immutable","SelectionState"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';var m=k,n=m.List,o=m.OrderedMap,p=m.Record,q=m.Stack;n;o;p;var r={allowUndo:true,currentContent:null,decorator:null,directionMap:null,forceSelection:false,inCompositionMode:false,inlineStyleOverride:null,lastChangeType:null,nativelyRenderedContent:null,redoStack:q(),selection:null,treeMap:null,undoStack:q()},s=k.Record(r);t.create=function(ca){ca.treeMap=v(ca.currentContent,ca.decorator);ca.directionMap=i.getDirectionMap(ca.currentContent);return new t(new s(ca));};t.set=function(ca,da){var ea=ca.getImmutable().withMutations(function(fa){var ga=fa.get('decorator'),ha=ga;if(da.decorator===null){ha=null;}else if(da.decorator)ha=da.decorator;var ia=da.currentContent||ca.getCurrentContent();if(ha!==ga){var ja=fa.get('treeMap'),ka;if(ha&&ga){ka=x(ia.getBlockMap(),ja,ha,ga);}else ka=v(ia,ha);fa.merge({decorator:ha,treeMap:ka,nativelyRenderedContent:null});return;}var la=ca.getCurrentContent();if(ia!==la)fa.set('treeMap',w(ca,ia.getBlockMap(),ha));fa.merge(da);});return new t(ea);};t.prototype.toJS=function(){return this.getImmutable().toJS();};t.prototype.getAllowUndo=function(){return this.getImmutable().get('allowUndo');};t.prototype.getCurrentContent=function(){return this.getImmutable().get('currentContent');};t.prototype.getUndoStack=function(){return this.getImmutable().get('undoStack');};t.prototype.getRedoStack=function(){return this.getImmutable().get('redoStack');};t.prototype.getSelection=function(){return this.getImmutable().get('selection');};t.prototype.getDecorator=function(){return this.getImmutable().get('decorator');};t.prototype.isInCompositionMode=function(){return this.getImmutable().get('inCompositionMode');};t.prototype.mustForceSelection=function(){return this.getImmutable().get('forceSelection');};t.prototype.getNativelyRenderedContent=function(){return this.getImmutable().get('nativelyRenderedContent');};t.prototype.getLastChangeType=function(){return this.getImmutable().get('lastChangeType');};t.prototype.getInlineStyleOverride=function(){return this.getImmutable().get('inlineStyleOverride');};t.prototype.getCurrentInlineStyle=function(){var ca=this.getInlineStyleOverride();if(ca!=null)return ca;var da=this.getCurrentContent(),ea=this.getSelection();if(ea.isCollapsed())return z(da,ea);return aa(da,ea);};t.prototype.getBlockTree=function(ca){return this.getImmutable().getIn(['treeMap',ca]);};t.prototype.isAtDocumentStart=function(){var ca=this.getCurrentContent().getBlockMap().first().getKey();return this.getSelection().hasEdgeWithin(ca,0,0);};t.prototype.isAtDocumentEnd=function(){var ca=this.getCurrentContent(),da=ca.getBlockMap(),ea=da.last(),fa=ea.getLength();return this.getSelection().hasEdgeWithin(ea.getKey(),fa,fa);};t.prototype.getDirectionMap=function(){return this.getImmutable().get('directionMap');};t.acceptSelection=function(ca,da){return u(ca,da,false);};t.forceSelection=function(ca,da){if(!da.getHasFocus())da=da.set('hasFocus',true);return u(ca,da,true);};t.moveSelectionToEnd=function(ca){var da=ca.getCurrentContent(),ea=da.getLastBlock(),fa=ea.getKey(),ga=ea.getLength();return t.acceptSelection(ca,new l({anchorKey:fa,anchorOffset:ga,focusKey:fa,focusOffset:ga,isBackward:false}));};t.moveFocusToEnd=function(ca){var da=t.moveSelectionToEnd(ca);return t.forceSelection(da,da.getSelection());};t.push=function(ca,da,ea){if(ca.getCurrentContent()===da)return ca;var fa=ea!==j.INSERT_CHARACTERS,ga=i.getDirectionMap(da,ca.getDirectionMap());if(!ca.getAllowUndo())return t.set(ca,{currentContent:da,directionMap:ga,lastChangeType:ea,selection:da.getSelectionAfter(),forceSelection:fa,inlineStyleOverride:null});var ha=ca.getSelection(),ia=ca.getCurrentContent(),ja=ca.getUndoStack(),ka=da;if(ha!==ia.getSelectionAfter()||y(ca,ea)){ja=ja.push(ia);ka=ka.set('selectionBefore',ha);}else if(ea===j.INSERT_CHARACTERS||ea===j.BACKSPACE_CHARACTER||ea===j.DELETE_CHARACTER)ka=ka.set('selectionBefore',ia.getSelectionBefore());return t.set(ca,{currentContent:ka,directionMap:ga,undoStack:ja,redoStack:k.Stack(),lastChangeType:ea,selection:da.getSelectionAfter(),forceSelection:fa,inlineStyleOverride:null});};t.undo=function(ca){if(!ca.getAllowUndo())return ca;var da=ca.getUndoStack(),ea=da.peek();if(!ea)return ca;var fa=ca.getCurrentContent(),ga=i.getDirectionMap(ea,ca.getDirectionMap());return t.set(ca,{currentContent:ea,directionMap:ga,undoStack:da.shift(),redoStack:ca.getRedoStack().push(fa),forceSelection:true,inlineStyleOverride:null,lastChangeType:j.UNDO,nativelyRenderedContent:null,selection:fa.getSelectionBefore()});};t.redo=function(ca){if(!ca.getAllowUndo())return ca;var da=ca.getRedoStack(),ea=da.peek();if(!ea)return ca;var fa=ca.getCurrentContent(),ga=i.getDirectionMap(ea,ca.getDirectionMap());return t.set(ca,{currentContent:ea,directionMap:ga,undoStack:ca.getUndoStack().push(fa),redoStack:da.shift(),forceSelection:true,inlineStyleOverride:null,lastChangeType:j.REDO,nativelyRenderedContent:null,selection:ea.getSelectionAfter()});};function t(ca){this.$EditorState0=ca;}t.prototype.getImmutable=function(){return this.$EditorState0;};function u(ca,da,ea){return t.set(ca,{selection:da,forceSelection:ea,nativelyRenderedContent:null,inlineStyleOverride:null});}function v(ca,da){return ca.getBlockMap().map(function(ea){return g.generate(ea,da);});}function w(ca,da,ea){var fa=ca.getCurrentContent().getBlockMap(),ga=ca.getImmutable().get('treeMap');return ga.merge(da.toSeq().filter(function(ha,ia){return ha!==fa.get(ia);}).map(function(ha){return g.generate(ha,ea);}));}function x(ca,da,ea,fa){return da.merge(ca.toSeq().filter(function(ga){return (ea.getDecorations(ga)!==fa.getDecorations(ga));}).map(function(ga){return g.generate(ga,ea);}));}function y(ca,da){var ea=ca.getLastChangeType();return (da!==ea||(da!==j.INSERT_CHARACTERS&&da!==j.BACKSPACE_CHARACTER&&da!==j.DELETE_CHARACTER));}function z(ca,da){var ea=da.getStartKey(),fa=da.getStartOffset(),ga=ca.getBlockForKey(ea);if(fa>0)return ga.getInlineStyleAt(fa-1);if(ga.getLength())return ga.getInlineStyleAt(0);return ba(ca,ea);}function aa(ca,da){var ea=da.getStartKey(),fa=da.getStartOffset(),ga=ca.getBlockForKey(ea);if(fa<ga.getLength())return ga.getInlineStyleAt(fa);if(fa>0)return ga.getInlineStyleAt(fa-1);return ba(ca,ea);}function ba(ca,da){var ea=ca.getBlockBefore(da),fa;while(ea){fa=ea.getLength();if(fa)return ea.getInlineStyleAt(fa-1);ea=ca.getBlockBefore(ea.getKey());}return h.NONE;}e.exports=t;},null);
__d("AbstractTextEditorPlaceholder.react",["EditorState","React","cx"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=h,k=j.PropTypes,l=h.createClass({displayName:"AbstractTextEditorPlaceholder",propTypes:{editorState:k.instanceOf(g).isRequired,text:k.string.isRequired},shouldComponentUpdate:function(m,n){if(this.props.text!==m.text)return true;var o=this.props.editorState,p=m.editorState,q=o.getSelection(),r=p.getSelection();return (q.getHasFocus()!==r.getHasFocus());},render:function(){var m=this.props.editorState.getSelection().getHasFocus(),n=(("_5ywb")+(m?' '+"_5ywc":''));return (h.createElement("div",{className:n},h.createElement("div",{className:"_3br6"},this.props.text)));}});e.exports=l;},null);
__d("DocumentCommands",["keyMirror"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h=g({UNDO:true,REDO:true,DELETE:true,DELETE_WORD:true,BACKSPACE:true,BACKSPACE_WORD:true,BACKSPACE_TO_END_OF_BLOCK:true,BOLD:true,ITALIC:true,UNDERLINE:true,CODE:true,INSERT_BLOCK_DELIMITER:true,TRANSPOSE_CHARACTERS:true,MOVE_SELECTION_TO_START_OF_BLOCK:true,MOVE_SELECTION_TO_END_OF_BLOCK:true,SECONDARY_CUT:true,SECONDARY_PASTE:true});e.exports=h;},null);
__d("KeyBindingUtil",["UserAgent"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h=g.isPlatform('Mac OS X'),i={isCtrlKeyCommand:function(j){return !!j.ctrlKey&&!j.altKey;},hasCommandModifier:function(j){return h?(!!j.metaKey&&!j.altKey):i.isCtrlKeyCommand(j);}};e.exports=i;},null);
__d("getDefaultKeyBinding",["DocumentCommands","KeyBindingUtil","Keys","UserAgent"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';var k=j.isPlatform('Mac OS X'),l=j.isPlatform('Windows'),m=j.isBrowser('Firefox'),n=k&&m&&m<29,o=h,p=o.hasCommandModifier,q=o.isCtrlKeyCommand;function r(w){return (k&&!!w.altKey)||q(w);}function s(w){if(p(w))return w.shiftKey?g.REDO:g.UNDO;}function t(w){if(l&&w.shiftKey)return null;return r(w)?g.DELETE_WORD:g.DELETE;}function u(w){if(p(w)&&k)return g.BACKSPACE_TO_END_OF_BLOCK;return r(w)?g.BACKSPACE_WORD:g.BACKSPACE;}function v(w){switch(w.keyCode){case 66:return p(w)?g.BOLD:null;case 68:return q(w)?g.DELETE:null;case 72:return q(w)?g.BACKSPACE:null;case 73:return p(w)?g.ITALIC:null;case 74:return p(w)?g.CODE:null;case 75:if(!l&&q(w))return g.SECONDARY_CUT;return null;case 79:return q(w)?g.INSERT_BLOCK_DELIMITER:null;case 84:return k&&q(w)?g.TRANSPOSE_CHARACTERS:null;case 85:if(k&&q(w))return g.BACKSPACE_TO_END_OF_BLOCK;return p(w)?g.UNDERLINE:null;case 87:return k&&q(w)?g.BACKSPACE_WORD:null;case 89:if(q(w))return l?g.REDO:g.SECONDARY_PASTE;return null;case 90:return s(w)||null;case i.DELETE:return t(w);case i.BACKSPACE:return u(w);case i.LEFT:return (n&&p(w)?g.MOVE_SELECTION_TO_START_OF_BLOCK:null);case i.RIGHT:return (n&&p(w)?g.MOVE_SELECTION_TO_END_OF_BLOCK:null);default:return null;}}e.exports=v;},null);
__d("AbstractTextEditorProps",["EditorState","React","emptyFunction","getDefaultKeyBinding"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=h,l=k.PropTypes,m=i.thatReturns(''),n=i.thatReturns(null),o={propTypes:{editorState:l.instanceOf(g).isRequired,placeholder:l.string,textAlignment:l.oneOf(['left','center','right']),blockRendererFn:l.func,blockStyleFn:l.func,inlineStyleFn:l.func,keyBindingFn:l.func,readOnly:l.bool,spellCheck:l.bool,stripPastedStyles:l.bool,handleReturn:l.func,handleKeyCommand:l.func,handleBeforeInput:l.func,handlePastedFiles:l.func,onEscape:l.func,onTab:l.func,onUpArrow:l.func,onDownArrow:l.func,onPasteRawText:l.func,onBlur:l.func,onFocus:l.func},getDefaultProps:function(){return {blockRendererFn:n,blockStyleFn:m,inlineStyleFn:m,keyBindingFn:j,readOnly:false,spellCheck:false,stripPastedStyles:false};}};e.exports=o;},null);
__d("CharacterMetadata",["ComposedInlineStyle","immutable"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';var i=g,j=i.NONE,k=h,l=k.Record,m=k.is,n={style:j,entity:null},o=l(n);for(var p in o)if(o.hasOwnProperty(p))r[p]=o[p];var q=o===null?null:o.prototype;r.prototype=Object.create(q);r.prototype.constructor=r;r.__superConstructor__=o;function r(){if(o!==null)o.apply(this,arguments);}r.prototype.getStyle=function(){return this.get('style');};r.prototype.getEntity=function(){return this.get('entity');};r.prototype.hasStyle=function(t){return !!(this.getStyle()&t);};r.applyStyle=function(t,u){return t.set('style',t.getStyle()|u);};r.removeStyle=function(t,u){var v=t.set('style',t.getStyle()&(~u));return m(v,s)?s:v;};r.applyEntity=function(t,u){var v=t.getEntity()===u?t:t.set('entity',u);return m(v,s)?s:v;};var s=new r();r.EMPTY=s;e.exports=r;},null);
__d("ContentStateInlineStyle",["CharacterMetadata","immutable"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';var i={add:function(k,l,m){return j(k,l,m,true);},remove:function(k,l,m){return j(k,l,m,false);}};function j(k,l,m,n){var o=k.getBlockMap(),p=l.getStartKey(),q=l.getStartOffset(),r=l.getEndKey(),s=l.getEndOffset(),t=o.skipUntil(function(u,v){return v===p;}).takeUntil(function(u,v){return v===r;}).concat(h.Map([[r,o.get(r)]])).map(function(u,v){var w,x;if(p===r){w=q;x=s;}else{w=v===p?q:0;x=v===r?s:u.getLength();}var y=u.getCharacterList(),z;while(w<x){z=y.get(w);y=y.set(w,n?g.applyStyle(z,m):g.removeStyle(z,m));w++;}return u.set('characterList',y);});return k.merge({blockMap:o.merge(t),selectionBefore:l,selectionAfter:l});}e.exports=i;},null);
__d("DocumentRemovalDirection",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={BACKWARD:0,FORWARD:1};e.exports=g;},null);
__d("applyEntityToContentBlock",["CharacterMetadata"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';function h(i,j,k,l){var m=i.getCharacterList();while(j<k){m=m.set(j,g.applyEntity(m.get(j),l));j++;}return i.set('characterList',m);}e.exports=h;},null);
__d("applyEntityToContentState",["immutable","applyEntityToContentBlock"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';function i(j,k,l){var m=j.getBlockMap(),n=k.getStartKey(),o=k.getStartOffset(),p=k.getEndKey(),q=k.getEndOffset(),r=m.skipUntil(function(s,t){return t===n;}).takeUntil(function(s,t){return t===p;}).merge(g.OrderedMap([[p,m.get(p)]])).map(function(s,t){var u,v;if(n===p){u=o;v=q;}else{u=t===n?o:0;v=t===p?0:s.getLength();}return h(s,u,v,l);});return j.merge({blockMap:m.merge(r),selectionBefore:k,selectionAfter:k});}e.exports=i;},null);
__d("DocumentEntityInstance",["ComposedEntityMutability","ComposedEntityType","arrayContains","getObjectValues","invariant"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=j(h),m=j(g);function n(o,p,q){"use strict";k(i(l,o));k(i(m,p));this.$DocumentEntityInstance0=o;this.$DocumentEntityInstance1=p;this.$DocumentEntityInstance2=q||{};}n.prototype.getType=function(){"use strict";return this.$DocumentEntityInstance0;};n.prototype.getMutability=function(){"use strict";return this.$DocumentEntityInstance1;};n.prototype.getData=function(){"use strict";return this.$DocumentEntityInstance2;};n.prototype.replaceData=function(o){"use strict";this.$DocumentEntityInstance2=o;};e.exports=n;},null);
__d("DocumentEntity",["DocumentEntityInstance","invariant"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i={},j=0,k={create:function(l,m,n){return k.add(new g(l,m,n));},add:function(l){i[++j]=l;return j.toString();},get:function(l){var m=i[l];h(!!m);return m;}};e.exports=k;},null);
__d("DocumentEntitySegments",["DocumentRemovalDirection"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h=g,i=h.FORWARD,j={getRemovalRange:function(k,l,m,n,o){var p=m.split(' ');p=p.map(function(z,aa){if(o===i){if(aa>0)return ' '+z;}else if(aa<p.length-1)return z+' ';return z;});var q=n,r,s,t=null,u=null;for(var v=0;v<p.length;v++){s=p[v];r=q+s.length;if(k<r&&q<l){if(t!==null){u=r;}else{t=q;u=r;}}else if(t!==null)break;q=r;}var w=n+m.length,x=t===n,y=u===w;if((!x&&y)||(x&&!y))if(o===i){if(u!==w)u++;}else if(t!==n)t--;return {start:t,end:u};}};e.exports=j;},null);
__d("getRangesForDocumentEntity",["invariant"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();function h(i,j){var k=[];i.findEntityRanges(function(l){return l.getEntity()===j;},function(l,m){k.push({start:l,end:m});});g(!!k.length);return k;}e.exports=h;},null);
__d("getCharacterRemovalRange",["ComposedEntityMutability","DocumentEntity","DocumentEntitySegments","checkRangeOverlap","getRangesForDocumentEntity","invariant"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m=g,n=m.MUTABLE,o=m.IMMUTABLE;function p(q,r,s){var t=r.getStartOffset(),u=r.getEndOffset(),v=q.getEntityAt(t);if(!v)return r;var w=h.get(v),x=w.getMutability();if(x===n)return r;var y=k(q,v).filter(function(ba){return j(t,u,ba.start,ba.end);});l(y.length==1);var z=y[0];if(x===o)return r.merge({anchorOffset:z.start,focusOffset:z.end,isBackward:false});var aa=i.getRemovalRange(t,u,q.getText().slice(z.start,z.end),z.start,s);return r.merge({anchorOffset:aa.start,focusOffset:aa.end,isBackward:false});}e.exports=p;},null);
__d("generateBlockKey",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={},h=Math.pow(2,24);function i(){var j;while(j===(void 0)||g.hasOwnProperty(j)||!isNaN(+j))j=Math.floor(Math.random()*h).toString(32);g[j]=true;return j;}e.exports=i;},null);
__d("removeEntitiesAtEdges",["CharacterMetadata","ComposedEntityMutability","DocumentEntity","immutable","findRangesImmutable","invariant"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';var m=j,n=m.List,o=h,p=o.MUTABLE;n;function q(t,u){var v=t.getBlockMap(),w={},x=u.getStartKey(),y=u.getStartOffset(),z=v.get(x),aa=s(z,y);if(aa!==z)w[x]=aa;var ba=u.getEndKey(),ca=u.getEndOffset(),da=v.get(ba);if(x===ba)da=aa;var ea=s(da,ca);if(ea!==da)w[ba]=ea;if(!Object.keys(w).length)return t.set('selectionAfter',u);return t.merge({blockMap:v.merge(w),selectionAfter:u});}function r(t,u,v){var w;k(t,function(x,y){return x.getEntity()===y.getEntity();},function(x){return x.getEntity()===u;},function(x,y){if(x<=v&&y>=v)w={start:x,end:y};});l(typeof w==='object');return w;}function s(t,u){var v=t.getCharacterList(),w=u>0?v.get(u-1):undefined,x=u<v.count()?v.get(u):undefined,y=w?w.getEntity():undefined,z=x?x.getEntity():undefined;if(z&&z===y){var aa=i.get(z);if(aa.getMutability()!==p){var ba=r(v,z,u),ca=ba.start,da=ba.end,ea;while(ca<da){ea=v.get(ca);v=v.set(ca,g.applyEntity(ea,null));ca++;}return t.set('characterList',v);}}return t;}e.exports=q;},null);
__d("getContentStateFragment",["immutable","generateBlockKey","removeEntitiesAtEdges"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';var j=g,k=j.OrderedMap;k;function l(m,n){var o=n.getStartKey(),p=n.getStartOffset(),q=n.getEndKey(),r=n.getEndOffset(),s=i(m,n),t=s.getBlockMap(),u=t.keySeq(),v=u.indexOf(o),w=u.indexOf(q)+1;return t.slice(v,w).map(function(x,y){var z=h(),aa=x.getText(),ba=x.getCharacterList();if(o===q)return x.merge({key:z,text:aa.slice(p,r),characterList:ba.slice(p,r)});if(y===o)return x.merge({key:z,text:aa.slice(p),characterList:ba.slice(p)});if(y===q)return x.merge({key:z,text:aa.slice(0,r),characterList:ba.slice(0,r)});return x.set('key',z);});}e.exports=l;},null);
__d("createOrderedMapFromBlockArray",["immutable"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h=g,i=h.OrderedMap;function j(k){return i(k.map(function(l){return [l.getKey(),l];}));}e.exports=j;},null);
__d("insertIntoList",["immutable"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';var h=g,i=h.List;i;function j(k,l,m){if(m===k.count()){l.forEach(function(n){k=k.push(n);});}else if(m===0){l.reverse().forEach(function(n){k=k.unshift(n);});}else k=k.slice(0,m).concat(l,k.slice(m));return k;}e.exports=j;},null);
__d("insertFragmentIntoContentState",["immutable","createOrderedMapFromBlockArray","generateBlockKey","insertIntoList","invariant"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l=g,m=l.OrderedMap;m;function n(o,p,q){k(p.isCollapsed());var r=p.getStartKey(),s=p.getStartOffset(),t=o.getBlockMap(),u=q.size,v,w;if(u===1){var x=t.get(r),y=q.first(),z=x.getText(),aa=x.getCharacterList(),ba=x.merge({text:(z.slice(0,s)+y.getText()+z.slice(s)),characterList:j(aa,y.getCharacterList(),s)});t=t.set(r,ba);v=r;w=s+y.getText().length;return o.merge({blockMap:t.set(r,ba),selectionBefore:p,selectionAfter:p.merge({anchorKey:v,anchorOffset:w,focusKey:v,focusOffset:w,isBackward:false})});}var ca=[];o.getBlockMap().forEach(function(da,ea){if(ea!==r){ca.push(da);return;}var fa=da.getText(),ga=da.getCharacterList(),ha=fa.length,ia=fa.slice(0,s),ja=ga.slice(0,s),ka=q.first(),la=da.merge({text:ia+ka.getText(),characterList:ja.concat(ka.getCharacterList())});ca.push(la);q.slice(1,u-1).forEach(function(qa){ca.push(qa.set('key',i()));});var ma=fa.slice(s,ha),na=ga.slice(s,ha),oa=q.last();v=i();var pa=oa.merge({key:v,text:oa.getText()+ma,characterList:oa.getCharacterList().concat(na)});ca.push(pa);});w=q.last().getLength();return o.merge({blockMap:h(ca),selectionBefore:p,selectionAfter:p.merge({anchorKey:v,anchorOffset:w,focusKey:v,focusOffset:w,isBackward:false})});}e.exports=n;},null);
__d("insertTextIntoContentState",["immutable","insertIntoList","invariant"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';var j=g,k=j.Repeat;function l(m,n,o,p){i(n.isCollapsed());var q=o.length;if(!q)return m;var r=m.getBlockMap(),s=n.getStartKey(),t=n.getStartOffset(),u=r.get(s),v=u.getText(),w=u.merge({text:(v.slice(0,t)+o+v.slice(t,u.getLength())),characterList:h(u.getCharacterList(),k(p,q),t)}),x=t+q;return m.merge({blockMap:r.set(s,w),selectionAfter:n.merge({anchorOffset:x,focusOffset:x})});}e.exports=l;},null);
__d("removeRangeFromContentState",["immutable"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';var h=g,i=h.List;i;function j(l,m){if(m.isCollapsed())return l;var n=l.getBlockMap(),o=m.getStartKey(),p=m.getStartOffset(),q=m.getEndKey(),r=m.getEndOffset(),s=n.get(o),t=n.get(q),u;if(s===t){u=k(s.getCharacterList(),p,r);}else u=s.getCharacterList().slice(0,p).concat(t.getCharacterList().slice(r));var v=s.merge({text:(s.getText().slice(0,p)+t.getText().slice(r)),characterList:u}),w=n.toSeq().skipUntil(function(x,y){return y===o;}).takeUntil(function(x,y){return y===q;}).concat(g.Map([[q,null]])).map(function(x,y){return y===o?v:null;});n=n.merge(w).filter(function(x){return !!x;});return l.merge({blockMap:n,selectionBefore:m,selectionAfter:m.merge({anchorKey:o,anchorOffset:p,focusKey:o,focusOffset:p,isBackward:false})});}function k(l,m,n){if(m===0){while(m<n){l=l.shift();m++;}}else if(n===l.count()){while(n>m){l=l.pop();n--;}}else l=l.slice(0,m).concat(l.slice(n));return l;}e.exports=j;},null);
__d("setBlockTypeForContentState",["immutable"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';function h(i,j,k){var l=j.getStartKey(),m=j.getEndKey(),n=i.getBlockMap(),o=n.toSeq().skipUntil(function(p,q){return q===l;}).takeUntil(function(p,q){return q===m;}).concat(g.Map([[m,n.get(m)]])).map(function(p){return p.merge({type:k,depth:0});});return i.merge({blockMap:n.merge(o),selectionBefore:j,selectionAfter:j});}e.exports=h;},null);
__d("splitBlockInContentState",["generateBlockKey","invariant"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';function i(j,k){h(k.isCollapsed());var l=k.getAnchorKey(),m=k.getAnchorOffset(),n=j.getBlockMap(),o=n.get(l),p=o.getText(),q=o.getCharacterList(),r=o.merge({text:p.slice(0,m),characterList:q.slice(0,m)}),s=g(),t=r.merge({key:s,text:p.slice(m),characterList:q.slice(m)}),u=n.toSeq().takeUntil(function(x){return x===o;}),v=n.toSeq().skipUntil(function(x){return x===o;}).rest(),w=u.concat([[r.getKey(),r],[t.getKey(),t]],v).toOrderedMap();return j.merge({blockMap:w,selectionBefore:k,selectionAfter:k.merge({anchorKey:s,anchorOffset:0,focusKey:s,focusOffset:0,isBackward:false})});}e.exports=i;},null);
__d("DocumentModifier",["CharacterMetadata","ComposedInlineStyle","ContentStateInlineStyle","DocumentRemovalDirection","immutable","applyEntityToContentState","getCharacterRemovalRange","getContentStateFragment","insertFragmentIntoContentState","insertTextIntoContentState","invariant","removeEntitiesAtEdges","removeRangeFromContentState","setBlockTypeForContentState","splitBlockInContentState"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){b.__markCompiled&&b.__markCompiled();'use strict';var v=k,w=v.OrderedMap,x=h,y=x.NONE;w;var z={replaceText:function(aa,ba,ca,da,ea){if(da===undefined)da=y;if(ea===undefined)ea=null;var fa=r(aa,ba),ga=s(fa,ba),ha;if(da===y&&ea===null){ha=g.EMPTY;}else ha=new g({style:da,entity:ea});return p(ga,ga.getSelectionAfter(),ca,ha);},insertText:function(aa,ba,ca,da,ea){q(ba.isCollapsed());if(da===undefined)da=y;if(ea===undefined)ea=null;var fa;if(da===y&&ea===null){fa=g.EMPTY;}else fa=new g({style:da,entity:ea});var ga=r(aa,ba);return p(ga,ga.getSelectionAfter(),ca,fa);},moveText:function(aa,ba,ca){var da=n(aa,ba),ea=z.removeRange(aa,ba,j.BACKWARD);return z.replaceWithFragment(ea,ca,da);},replaceWithFragment:function(aa,ba,ca){var da=r(aa,ba),ea=s(da,ba);return o(ea,ea.getSelectionAfter(),ca);},removeRange:function(aa,ba,ca){if(ba.getAnchorKey()===ba.getFocusKey()){var da=ba.getAnchorKey(),ea=ba.getStartOffset(),fa=ba.getEndOffset(),ga=aa.getBlockForKey(da),ha=ga.getEntityAt(ea),ia=ga.getEntityAt(fa-1);if(ha&&ha===ia){var ja=m(ga,ba,ca);return s(aa,ja);}}var ka=r(aa,ba);return s(ka,ba);},splitBlock:function(aa,ba){var ca=r(aa,ba),da=s(ca,ba);return u(da,da.getSelectionAfter());},applyInlineStyle:function(aa,ba,ca){return i.add(aa,ba,ca);},removeInlineStyle:function(aa,ba,ca){return i.remove(aa,ba,ca);},setBlockType:function(aa,ba,ca){return t(aa,ba,ca);},applyEntity:function(aa,ba,ca){var da=r(aa,ba);return l(da,ba,ca);}};e.exports=z;},null);
__d("isSelectionAtLeafStart",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();'use strict';function g(h){var i=h.getSelection(),j=i.getAnchorKey(),k=h.getBlockTree(j),l=i.getStartOffset(),m=false;k.some(function(n){if(l===n.get('start')){m=true;return true;}if(l<n.get('end'))return n.get('leaves').some(function(o){var p=o.get('start');if(l===p){m=true;return true;}if(l<p)return false;});});return m;}e.exports=g;},null);
__d("TextEditorCompositionHandler",["ComposedInlineStyle","DocumentModifier","EditorChangeType","EditorState","Keys","isSelectionAtLeafStart"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m=g.NONE,n=20,o={onBeforeInput:function(p){this._textInputData=(this._textInputData||'')+p.data;},onCompositionStart:function(){this._stillComposing=true;},onCompositionEnd:function(p){this._resolved=false;this._stillComposing=false;setTimeout(function(){if(!this._resolved)o.resolveComposition.call(this);}.bind(this),n);},onKeyDown:function(p){if(p.which===k.RIGHT||p.which===k.LEFT)p.preventDefault();},onKeyPress:function(p){if(p.which===k.RETURN)p.preventDefault();},resolveComposition:function(){if(this._stillComposing)return;this._resolved=true;var p=this._textInputData;this._textInputData='';var q=j.set(this.props.editorState,{inCompositionMode:false}),r=!p||l(q);if(r)this.restoreEditorDOM();this.exitCurrentMode();this.removeRenderGuard();if(p){var s=h.replaceText(q.getCurrentContent(),q.getSelection(),p,m,null);this.update(j.push(q,s,i.INSERT_CHARACTERS));return;}if(r)this.update(j.set(q,{nativelyRenderedContent:null,forceSelection:true}));}};e.exports=o;},null);
__d("DocumentOffsetKey",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g='-',h={encode:function(i,j,k){return i+g+j+g+k;},decode:function(i){var j=i.split(g),k=j[0],l=j[1],m=j[2];return {blockKey:k,decoratorKey:parseInt(l,10),leafKey:parseInt(m,10)};}};e.exports=h;},null);
__d("ElementForBlockType",["ComposedBlockType"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h={getElement:function(i){switch(i){case g.HEADER_ONE:return 'h2';case g.HEADER_TWO:return 'h3';case g.UNORDERED_LIST_ITEM:case g.ORDERED_LIST_ITEM:return 'li';case g.BLOCKQUOTE:return 'blockquote';case g.MEDIA:return 'figure';default:return 'div';}},getWrapperElement:function(i){switch(i){case g.UNORDERED_LIST_ITEM:case g.ORDERED_LIST_ITEM:return 'ul';case g.CODE:return 'pre';default:return null;}}};e.exports=h;},null);
__d("ContentBlock",["ComposedBlockType","ComposedInlineStyle","immutable","findRangesImmutable"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';var k=g,l=k.UNSTYLED,m=h,n=m.NONE,o=i,p=o.List,q=o.Record,r={key:'',type:l,text:'',characterList:p(),depth:0},s=q(r);for(var t in s)if(s.hasOwnProperty(t))v[t]=s[t];var u=s===null?null:s.prototype;v.prototype=Object.create(u);v.prototype.constructor=v;v.__superConstructor__=s;function v(){if(s!==null)s.apply(this,arguments);}v.prototype.getKey=function(){return this.get('key');};v.prototype.getType=function(){return this.get('type');};v.prototype.getText=function(){return this.get('text');};v.prototype.getCharacterList=function(){return this.get('characterList');};v.prototype.getLength=function(){return this.getText().length;};v.prototype.getDepth=function(){return this.get('depth');};v.prototype.getInlineStyleAt=function(y){var z=this.getCharacterList().get(y);return z?z.getStyle():n;};v.prototype.getEntityAt=function(y){var z=this.getCharacterList().get(y);return z?z.getEntity():null;};v.prototype.findStyleRanges=function(y,z){j(this.getCharacterList(),w,y,z);};v.prototype.findEntityRanges=function(y,z){j(this.getCharacterList(),x,y,z);};function w(y,z){return y.getStyle()===z.getStyle();}function x(y,z){return y.getEntity()===z.getEntity();}e.exports=v;},null);
__d("DocumentCharacters",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={BLOCK_DELIMITER:'\u000D',SOFT_NEWLINE:'\u000A',PHOTO:'\ud83d\udcf7',VIDEO:'\ud83d\udcf9'};e.exports=g;},null);
__d("TextEditorTextNode.react",["React","UserAgent","getTextContentAccessor"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';var j=h.isBrowser('IE <= 11'),k=i();function l(p){return j?p[k]==='\n':p.tagName==='BR';}var m=j?g.createElement("span",{key:"A"},'\n'):g.createElement("br",{key:"A"}),n=j?g.createElement("span",{key:"B"},'\n'):g.createElement("br",{key:"B"}),o=g.createClass({displayName:"TextEditorTextNode",shouldComponentUpdate:function(p){var q=g.findDOMNode(this),r=p.children==='';if(r)return !l(q);return q[k]!==p.children;},componentWillUpdate:function(){this.forceFlag=!this.forceFlag;},render:function(){if(this.props.children==='')return this.forceFlag?m:n;return g.createElement("span",{key:this.forceFlag?'A':'B'},this.props.children);}});e.exports=o;},null);
__d("DocumentStringKey",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();'use strict';var g={stringify:function(h){return '_'+String(h);},unstringify:function(h){return h.slice(1);}};e.exports=g;},null);
__d("encodeEntityRanges",["DocumentStringKey","UnicodeUtils"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';var i=h,j=i.strlen;function k(l,m){var n=[];l.findEntityRanges(function(o){return !!o.getEntity();},function(o,p){var q=l.getText(),r=l.getEntityAt(o);n.push({offset:j(q.slice(0,o)),length:j(q.slice(o,p)),key:Number(m[g.stringify(r)])});});return n;}e.exports=k;},null);
__d("encodeInlineStyleRanges",["ComposedInlineStyle","immutable","UnicodeUtils","findRangesImmutable","getObjectValues"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l=h,m=l.List,n=function(s,t){return s===t;},o=function(s){return !!s;},p=[];m;function q(s,t,u){var v=[],w=t.map(function(x){return x&u;});j(w,n,o,function(x,y){var z=s.getText();v.push({offset:i.strlen(z.slice(0,x)),length:i.strlen(z.slice(x,y)),style:u});});return v;}function r(s){var t=s.getCharacterList().map(function(v){return v.getStyle();}),u=k(g).filter(function(v){return !!v;});return Array.prototype.concat.apply(p,u.map(function(v){return q(s,t,v);}));}e.exports=r;},null);
__d("encodeBlocks",["ComposedBlockType","DocumentEntity","DocumentStringKey","encodeEntityRanges","encodeInlineStyleRanges","mapObject"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';var m=g,n=m.ORDERED_LIST_ITEM,o=m.UNORDERED_LIST_ITEM;function p(r){var s=r.getBlockMap(),t=0,u={},v=[];s.forEach(function(y,z){y.findEntityRanges(function(aa){return aa.getEntity()!==null;},function(aa,ba){var ca=i.stringify(y.getEntityAt(aa));if(!u.hasOwnProperty(ca))u[ca]=''+(t++);});v.push({key:z,text:y.getText(),type:y.getType(),depth:q(y)?y.getDepth():0,inlineStyleRanges:k(y),entityRanges:j(y,u)});});var w=Object.keys(u),x={};w.forEach(function(y,z){var aa=h.get(i.unstringify(y)),ba=null,ca=null,da=aa.getData();if(da){ba=da.id||null;ca=l(da,function(ea){return ''+ea;});delete ca.id;}x[z]={id:ba,type:aa.getType(),data:ca&&Object.keys(ca).length?ca:undefined};});return {entityMap:x,blocks:v};}function q(r){var s=r.getType();return s===n||s===o;}e.exports=p;},null);
__d("TextEditorBanzai",["BanzaiScuba","ReactMount","containsNode","encodeBlocks","invariant"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=3,m={logSetSelectionError:function(s,t){var u=p();u.addNormal('error_type','setSelection');var v=t,w=v[0],x=v[1],y=v[2],z=v[3],aa=v[4];u.addNormal('selection_state',w.serialize());var ba=n(x);u.addNormal('node_html',ba);u.addNormal('selection_params','Key: '+y+', Start: '+z+', End: '+aa);u.addNormal('error_text',s.message);u.post();},logGetSelectionError:function(s,t){var u=p();u.addNormal('error_type','getSelection');var v=t,w=v[0],x=v[1],y=w.getCurrentContent(),z=j(y),aa=z.blocks;aa=aa.map(function(ea){var fa=ea,ga=fa.text,ha=(function(ia,ja){var ka={},la=Object.prototype.hasOwnProperty;if(ia==null)throw new TypeError();for(var ma in ia)if(la.call(ia,ma)&&!la.call(ja,ma))ka[ma]=ia[ma];return ka;})(fa,{text:1});return Object.assign({},ha,{length:ga.length});});var ba=w.getSelection();u.addNormal('content_state',JSON.stringify(aa));u.addNormal('selection_state',ba.serialize());u.addNormal('error_text',s.message);var ca=n(x);u.addNormal('node_html',ca);var da=q(x);u.addNormal('dom_selection',da);u.post();}};function n(s){if(!s)return '[empty]';var t=o(s);if(t.nodeType===l)return t.textContent;k(t instanceof Element);return t.innerHTML;}function o(s){if(s.nodeType===l){var t=s.textContent.length;return document.createTextNode('[text '+t+']');}var u=s.cloneNode(),v=s.childNodes;for(var w=0;w<v.length;w++)u.appendChild(o(v[w]));return u;}function p(){return new g('text_editor_error_log',null,{addBrowserFields:true});}function q(s){if(!a.getSelection)return '[not available]';var t=a.getSelection(),u=t.anchorNode,v=t.anchorOffset,w=t.focusNode,x=t.focusOffset;u=r(u,s);w=r(w,s);return JSON.stringify({anchorNode:u,anchorOffset:v,focusNode:w,focusOffset:x});}function r(s,t){if(!s)return '[none]';if(s===window)return '[window]';if(s===document.documentElement)return '[document]';if(s===document.body)return '[body]';if(!i(t,s)){var u=h.getID(s);if(u)return '[outside root: '+u+']';var v=s.id;return v?'[outside root: '+v+']':'[outside root]';}return n(s);}e.exports=m;},null);
__d("setDocumentSelection",["ErrorUtils","TextEditorBanzai","containsNode"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';function j(n,o,p,q,r){var s=[n,o,p,q,r];return g.applyWithGuard(k,null,s,function(t){return h.logSetSelectionError(t,s);},'TextEditor:setSelection');}function k(n,o,p,q,r){if(!i(document.documentElement,o))return;var s=a.getSelection(),t=n.getAnchorKey(),u=n.getAnchorOffset(),v=n.getFocusKey(),w=n.getFocusOffset(),x=n.getIsBackward();if(!s.extend&&x){var y=t,z=u;t=v;u=w;v=y;w=z;x=false;}var aa=(t===p&&q<=u&&r>=u),ba=(v===p&&q<=w&&r>=w);if(aa&&ba){s.removeAllRanges();m(s,o,u-q);l(s,o,w-q);return;}if(!x){if(aa){s.removeAllRanges();m(s,o,u-q);}if(ba)l(s,o,w-q);}else{if(ba){s.removeAllRanges();m(s,o,w-q);}if(aa){var ca=s.focusNode,da=s.focusOffset;s.removeAllRanges();m(s,o,u-q);l(s,ca,da);}}}function l(n,o,p){if(n.extend){n.extend(o,p);}else{var q=n.getRangeAt(0);q.setEnd(o,p);n.addRange(q.cloneRange());}}function m(n,o,p){var q=document.createRange();q.setStart(o,p);n.addRange(q);}e.exports=j;},null);
__d("TextEditorLeaf.react",["DocumentCharacters","React","SelectionState","TextEditorTextNode.react","setDocumentSelection"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l=h,m=l.PropTypes,n=g.SOFT_NEWLINE,o=3,p=h.createClass({displayName:"TextEditorLeaf",propTypes:{selection:m.instanceOf(i),start:m.number.isRequired,blockKey:m.string.isRequired,text:m.string.isRequired,style:m.number,inlineStyleFn:m.func.isRequired,isLast:m.bool.isRequired},_setSelection:function(){var q=this.props.selection;if(q==null||!q.getHasFocus())return;var r=this.props.start,s=r+this.props.text.length,t=this.props.blockKey;if(!q.hasEdgeWithin(t,r,s))return;var u=h.findDOMNode(this),v=u.firstChild,w;if(v.nodeType===o){w=v;}else if(v.tagName==='BR'){w=u;}else w=v.firstChild;k(q,w,t,r,s);},shouldComponentUpdate:function(q){return (h.findDOMNode(this.refs.leaf).textContent!==q.text||q.forceSelection);},componentDidUpdate:function(){this._setSelection();},componentDidMount:function(){this._setSelection();},render:function(){var q=this.props.text;if(q.endsWith(n)&&this.props.isLast)q+=n;var r;if(this.props.style)r=this.props.inlineStyleFn(this.props.style);return (h.createElement("span",{"data-offset-key":this.props.offsetKey,className:r,ref:"leaf"},h.createElement(j,null,q)));}});e.exports=p;},null);
__d("TextEditorBlock.react",["ContentBlock","DocumentOffsetKey","ElementForBlockType","React","Scroll","SelectionState","Style","TextEditorLeaf.react","UnicodeBidiDirection","cx","getElementPosition","getScrollPosition","getViewportDimensions","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){b.__markCompiled&&b.__markCompiled();var u=j,v=u.PropTypes,w=o.LTR,x=o.RTL,y=10,z=j.createClass({displayName:"TextEditorBlock",propTypes:{block:v.instanceOf(g).isRequired,tree:v.object.isRequired,selection:v.instanceOf(l).isRequired,decorator:v.object,forceSelection:v.bool.isRequired,direction:v.string.isRequired,blockProps:v.object,startIndent:v.bool,blockStyleFn:v.func.isRequired,inlineStyleFn:v.func.isRequired},shouldComponentUpdate:function(ba){return (this.props.block!==ba.block||this.props.tree!==ba.tree||this.props.direction!==ba.direction||(aa(ba.selection,ba.block.getKey())&&ba.forceSelection));},componentDidMount:function(){var ba=this.props.selection,ca=ba.getEndKey();if(!ba.getHasFocus()||ca!==this.props.block.getKey())return;var da=j.findDOMNode(this),ea=m.getScrollParent(da),fa=r(ea),ga;if(ea===window){var ha=q(da),ia=ha.y+ha.height,ja=s().height;ga=ia-ja;if(ga>0)window.scrollTo(fa.x,fa.y+ga+y);}else{var ka=da.offsetHeight+da.offsetTop,la=ea.offsetHeight+fa.y;ga=ka-la;if(ga>0)k.setTop(ea,k.getTop(ea)+ga+y);}},_renderChildren:function(){var ba=this.props.block,ca=ba.getKey(),da=ba.getText(),ea=this.props.tree.size-1,fa=aa(this.props.selection,ca);return this.props.tree.map(function(ga,ha){var ia=ga.get('leaves'),ja=ia.size-1,ka=ia.map(function(pa,qa){var ra=h.encode(ca,ha,qa),sa=pa.get('start'),ta=pa.get('end');return (j.createElement(n,{key:ra,offsetKey:ra,blockKey:ca,start:sa,selection:fa?this.props.selection:null,forceSelection:this.props.forceSelection,text:da.slice(sa,ta),style:ba.getInlineStyleAt(sa),inlineStyleFn:this.props.inlineStyleFn,isLast:ha===ea&&qa===ja}));}.bind(this)).toArray(),la=ga.get('decoratorKey');if(la==null)return ka;var ma=this.props.decorator.getComponentForKey(la);if(!ma)return ka;var na=this.props.decorator.getPropsForKey(la),oa=h.encode(ca,ha,0);return (j.createElement(ma,j.__spread({},na,{key:oa,entityKey:ba.getEntityAt(ga.get('start')),offsetKey:oa}),ka));}.bind(this)).toArray();},render:function(){var ba=this.props.block,ca=ba.getKey(),da=ba.getDepth(),ea=i.getElement(ba.getType()),fa=t(this.props.blockStyleFn(ba.getType()),(("_209g")+(this.props.direction===w?' '+"_2vxa":'')+(this.props.direction===x?' '+"_2vxb":'')));if(ea==='li'){var ga=this.props.startIndent;fa=t(fa,((ga&&da===0?"_2yj9":'')+(ga&&da===1?' '+"_2yja":'')+(ga&&da===2?' '+"_2yjb":'')+(ga&&da===3?' '+"_2yje":'')+(ga&&da===4?' '+"_2yjf":'')+(da===0?' '+"_2yjg":'')+(da===1?' '+"_2yjh":'')+(da===2?' '+"_2yji":'')+(da===3?' '+"_2yjj":'')+(da===4?' '+"_2yjn":'')));}var ha=Object.assign({'data-block':true,'data-offset-key':h.encode(ca,0,0),className:fa},this.props.blockProps);return (j.createElement(ea,j.__spread({},ha),this._renderChildren()));}});function aa(ba,ca){return (ba.getAnchorKey()===ca||ba.getFocusKey()===ca);}e.exports=z;},null);
__d("TextEditorContents.react",["DocumentOffsetKey","EditorState","ElementForBlockType","React","TextEditorBlock.react","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';var m=j,n=m.PropTypes,o=j.createClass({displayName:"TextEditorContents",propTypes:{blockRendererFn:n.func,blockStyleFn:n.func.isRequired,editorState:n.instanceOf(h).isRequired,inlineStyleFn:n.func.isRequired},shouldComponentUpdate:function(q){var r=this.props.editorState,s=q.editorState,t=r.getDirectionMap(),u=s.getDirectionMap();if(t!==u)return true;var v=r.getSelection().getHasFocus(),w=s.getSelection().getHasFocus();if(v!==w)return true;var x=s.getNativelyRenderedContent(),y=r.isInCompositionMode(),z=s.isInCompositionMode();if(r===s||(x!==null&&s.getCurrentContent()===x)||(y&&z))return false;var aa=r.getCurrentContent(),ba=s.getCurrentContent(),ca=r.getDecorator(),da=s.getDecorator();return (y!==z||aa!==ba||ca!==da||s.mustForceSelection());},render:function(){var q=this.props.editorState,r=q.getCurrentContent(),s=q.getSelection(),t=q.mustForceSelection(),u=q.getDirectionMap(),v=r.getBlocksAsArray(),w=[],x=null,y=null,z=null,aa,ba,ca,da,ea,fa,ga,ha;for(var ia=0;ia<v.length;ia++){ca=v[ia];da=ca.getKey();ea=ca.getText();fa=ca.getType();var ja=this.props.blockRendererFn(ca)||p,ka=ja.component,la=ja.props;aa=ka;ga=j.createElement(aa,{key:da,tree:q.getBlockTree(da),decorator:q.getDecorator(),block:ca,selection:s,forceSelection:t,direction:u.get(da),blockProps:la,startIndent:z===null||ca.getDepth()>z,blockStyleFn:this.props.blockStyleFn,inlineStyleFn:this.props.inlineStyleFn});ha=i.getWrapperElement(fa);if(ha){if(y!==ha){ba=[];x=j.createElement(ha,{className:"_4noe",key:da+'-wrap',"data-offset-key":g.encode(da,0,0)},ba);y=ha;w.push(x);}z=ca.getDepth();ba.push(ga);}else{ba=null;x=null;y=null;z=null;w.push(ga);}}return j.createElement("div",{"data-contents":"true"},w);}}),p={component:k,props:null};e.exports=o;},null);
__d("DocumentRemovableWord",["TokenizeUtil"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';var h=g.getPunctuation();h=h.replace("\'","").slice(1,-1);var i='\\s'+h,j='^('+'['+i+']*'+'[^'+i+']+'+'|['+i+']+'+')',k=new RegExp(j),l='('+'[^'+i+']+'+'['+i+']*'+'|['+i+']+'+')$',m=new RegExp(l);function n(p,q){var r=q?m.exec(p):k.exec(p);return r?r[0]:null;}var o={getBackward:function(p){return n(p,true);},getForward:function(p){return n(p,false);}};e.exports=o;},null);
__d("TextEditorModes",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={EDIT:0,COMPOSITE:1,DRAG:2,RENDER:3,CUT:4};e.exports=g;},null);
__d("getSafeBodyFromHTML",["UserAgent"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h=g.isBrowser('IE <= 9');function i(j){var k,l=null;if(!h&&document.implementation&&document.implementation.createHTMLDocument){k=document.implementation.createHTMLDocument('foo');k.documentElement.innerHTML=j;l=k.getElementsByTagName('body')[0];}return l;}e.exports=i;},null);
__d("TextEditorPasteHandler",["CharacterMetadata","ComposedBlockType","ComposedEntityMutability","ComposedLinkEntityProperties","ComposedEntityType","ComposedInlineStyle","ContentBlock","DocumentCharacters","DocumentEntity","immutable","URI","arrayContains","fillArray","generateBlockKey","getSafeBodyFromHTML"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){b.__markCompiled&&b.__markCompiled();var v=h,w=v.HEADER_ONE,x=v.HEADER_TWO,y=v.ORDERED_LIST_ITEM,z=v.UNORDERED_LIST_ITEM,aa=v.BLOCKQUOTE,ba=v.UNSTYLED,ca=l,da=ca.BOLD,ea=ca.ITALIC,fa=ca.UNDERLINE,ga=ca.CODE,ha=ca.STRIKETHROUGH,ia=ca.NONE,ja=g,ka=ja.EMPTY,la=i,ma=la.MUTABLE,na=j,oa=na.URL,pa=k,qa=pa.LINK,ra=n,sa=ra.BLOCK_DELIMITER,ta=ra.SOFT_NEWLINE,ua=p,va=ua.List,wa=ua.Repeat,xa='&nbsp;',ya=' ',za=4,ab=new RegExp(sa,'g'),bb=new RegExp(ta,'g'),cb=new RegExp(xa,'g'),db=['p','h1','h2','h3','li','blockquote','pre'],eb={b:da,code:ga,del:ha,em:ea,i:ea,s:ha,strike:ha,strong:da,u:fa};function fb(){return {text:'',inlines:[],entities:[],blocks:[]};}function gb(rb){var sb=new Array(1);if(rb)sb[0]=rb;return {text:ya,inlines:[ia],entities:sb,blocks:[]};}function hb(){return {text:ta,inlines:[ia],entities:new Array(1),blocks:[]};}function ib(rb,sb){return {text:sa,inlines:[ia],entities:new Array(1),blocks:[{type:rb,depth:Math.max(0,Math.min(za,sb))}]};}function jb(rb,sb){switch(rb){case 'h1':return w;case 'h2':return x;case 'li':if(sb==='ol')return y;return z;case 'blockquote':return aa;case 'pre':return h.CODE;default:return ba;}}function kb(rb,sb,tb){var ub=eb[rb];if(ub){tb|=ub;}else if(sb.style){tb|=sb.style.fontWeight==='bold'?da:0;tb|=sb.style.fontStyle==='italic'?ea:0;tb|=sb.style.textDecoration==='underline'?fa:0;tb|=(sb.style.textDecoration==='line-through'?ha:0);}return tb;}function lb(rb,sb){if(rb.text.slice(-1)===sa&&sb.text.slice(0,1)===sa){rb.text=rb.text.slice(0,-1);rb.inlines.pop();rb.entities.pop();rb.blocks.pop();}if(rb.text.slice(-1)===sa&&(sb.text===ya||sb.text===ta))return rb;return {text:rb.text+sb.text,inlines:rb.inlines.concat(sb.inlines),entities:rb.entities.concat(sb.entities),blocks:rb.blocks.concat(sb.blocks)};}function mb(rb){return db.some(function(sb){return rb.indexOf('<'+sb)!==-1;});}function nb(rb){var sb=new q(rb),tb=sb.getProtocol();return (tb==='http'||tb==='https');}function ob(rb,sb,tb,ub,vb,wb,xb){var yb=rb.nodeName.toLowerCase(),zb=false,ac=ba;if(yb==='#text'){var bc=rb.textContent;if(bc.trim()===''&&ub!=='pre')return gb(xb);if(ub!=='pre')bc=bc.replace(bb,ya);return {text:bc,inlines:s(bc.length,sb),entities:s(bc.length,xb),blocks:[]};}if(yb==='br')return hb();var cc=fb(),dc;sb=kb(yb,rb,sb);if(yb==='ul'||yb==='ol'){if(tb)wb+=1;tb=yb;}if(!ub&&r(vb,yb)){cc=ib(jb(yb,tb),wb);ub=yb;zb=true;}else if(tb&&ub==='li'&&yb==='li'){cc=ib(jb(yb,tb),wb);ub=yb;zb=true;ac=tb==='ul'?z:y;}rb=rb.firstChild;yb=rb&&rb.nodeName.toLowerCase();var ec,fc,gc;while(rb){if(yb==='a'&&rb.href&&nb(rb.href)){fc=new q(rb.href).toString();gc={};gc[oa]=fc;ec=o.create(qa,ma,gc);}else ec=undefined;dc=ob(rb,sb,tb,ub,vb,wb,ec||xb);cc=lb(cc,dc);rb=rb.nextSibling;if(rb&&vb.indexOf(yb)>=0&&ub)cc=lb(cc,hb());yb=rb&&rb.nodeName.toLowerCase();}if(zb)cc=lb(cc,ib(ac,wb));return cc;}function pb(rb){rb=rb.trim().replace(ab,'').replace(cb,ya);var sb=u(rb);if(!sb)return null;var tb=mb(rb)?db:['div'],ub=ob(sb,ia,'ul',null,tb,-1);if(ub.text.indexOf(sa)===0)ub={text:ub.text.slice(1),inlines:ub.inlines.slice(1),entities:ub.entities.slice(1),blocks:ub.blocks};if(ub.text.slice(-1)===sa){ub.text=ub.text.slice(0,-1);ub.inlines=ub.inlines.slice(0,-1);ub.entities=ub.entities.slice(0,-1);ub.blocks.pop();}if(ub.blocks.length===0)ub.blocks.push({type:ba,depth:0});if(ub.text.split(sa).length===ub.blocks.length+1)ub.blocks.unshift({type:ba,depth:0});return ub;}var qb={processHTML:function(rb){var sb=pb(rb);if(!sb)return null;var tb=0;return sb.text.split(sa).map(function(ub,vb){var wb=tb+ub.length,xb=sb.inlines.slice(tb,wb),yb=sb.entities.slice(tb,wb),zb=va(xb.map(function(ac,bc){var cc={style:ac};if(yb[bc])cc.entity=yb[bc];return new g(cc);}));tb=wb+1;return new m({key:t(),type:sb.blocks[vb].type,depth:sb.blocks[vb].depth,text:ub,characterList:zb});});},processText:function(rb){return rb.map(function(sb){return new m({key:t(),type:ba,text:sb,characterList:va(wa(ka,sb.length))});});}};e.exports=qb;},null);
__d("getSelectionOffsetKeyForNode",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();'use strict';function g(h){return h instanceof Element?h.getAttribute('data-offset-key'):null;}e.exports=g;},null);
__d("findAncestorOffsetKey",["getSelectionOffsetKeyForNode"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';function h(i){while(i&&i!==document.documentElement){var j=g(i);if(j!=null)return j;i=i.parentNode;}return null;}e.exports=h;},null);
__d("getUpdatedSelectionState",["DocumentOffsetKey"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();function h(i,j,k,l,m){var n=i.getSelection(),o=g.decode(j),p=o.blockKey,q=i.getBlockTree(p).getIn([o.decoratorKey,'leaves',o.leafKey]),r=g.decode(l),s=r.blockKey,t=i.getBlockTree(s).getIn([r.decoratorKey,'leaves',r.leafKey]),u=q.get('start'),v=t.get('start'),w=q?u+k:null,x=t?v+m:null,y=(n.getAnchorKey()===p&&n.getAnchorOffset()===w&&n.getFocusKey()===s&&n.getFocusOffset()===x);if(y)return n;var z=false;if(p===s){var aa=q.get('end'),ba=t.get('end');if(v===u&&ba===aa){z=m<k;}else z=v<u;}else{var ca=i.getCurrentContent().getBlockMap().keySeq().skipUntil(function(da){return da===p||da===s;}).first();z=ca===s;}return n.merge({anchorKey:p,anchorOffset:w,focusKey:s,focusOffset:x,isBackward:z});}e.exports=h;},null);
__d("getDocumentSelection",["DocumentCharacters","ErrorUtils","TextEditorBanzai","findAncestorOffsetKey","getSelectionOffsetKeyForNode","getUpdatedSelectionState","invariant","nullthrows"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();'use strict';var o=g,p=o.SOFT_NEWLINE;function q(w,x){var y=[w,x];return h.applyWithGuard(r,null,y,function(z){return i.logGetSelectionError(z,y);},'TextEditor:getSelection');}function r(w,x){var y=a.getSelection();if(y.rangeCount===0)return {selectionState:w.getSelection().set('hasFocus',false),needsRecovery:false};var z=y.anchorNode,aa=y.focusNode,ba=y.anchorOffset,ca=y.focusOffset,da=z.nodeType===Node.TEXT_NODE,ea=aa.nodeType===Node.TEXT_NODE;if(da&&ea)return {selectionState:l(w,n(j(z)),ba,n(j(aa)),ca),needsRecovery:false};var fa=null,ga=null;if(da){fa={key:n(j(z)),offset:ba};ga=u(x,aa,ca);}else if(ea){ga={key:n(j(aa)),offset:ca};fa=u(x,z,ba);}else{fa=u(x,z,ba);ga=u(x,aa,ca);}return {selectionState:l(w,fa.key,fa.offset,ga.key,ga.offset),needsRecovery:true};}function s(w){while(w.firstChild&&k(w.firstChild))w=w.firstChild;return w;}function t(w){while(w.lastChild&&k(w.lastChild))w=w.lastChild;return w;}function u(w,x,y){var z=j(x);m(z!=null||w===x||w.firstChild===x);if(w===x){x=x.firstChild;m(x instanceof Element&&x.getAttribute('data-contents')==='true');if(y>0)y=x.childNodes.length;}if(y===0)return {key:z||k(s(x)),offset:0};var aa=x.childNodes[y-1],ba,ca;if(!k(aa)){ba=z;ca=v(aa);}else{var da=t(aa);ba=k(da);ca=v(da);}return {key:ba,offset:ca};}function v(w){var x=w.textContent;return x===p?0:x.length;}e.exports=q;},null);
__d("getEntityKeyForSelection",["ComposedEntityMutability","DocumentEntity"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i=g,j=i.MUTABLE;function k(m,n){var o;if(n.isCollapsed()){var p=n.getAnchorKey(),q=n.getAnchorOffset();if(q>0){o=m.getBlockForKey(p).getEntityAt(q-1);return l(o);}return null;}var r=n.getStartKey(),s=n.getStartOffset(),t=m.getBlockForKey(r);o=s===t.getLength()?null:t.getEntityAt(s);return l(o);}function l(m){if(m){var n=h.get(m);return n.getMutability()===j?m:null;}return null;}e.exports=k;},null);
__d("getTextContentFromFiles",["DocumentCharacters"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h=g.BLOCK_DELIMITER,i=/\.textClipping$/,j={'text/plain':true,'text/html':true,'text/rtf':true};function k(m,n){var o=0,p=[];m.forEach(function(q){l(q,function(r){o++;r&&p.push(r);if(o==m.length)n(p.join(h));});});}function l(m,n){if(!a.FileReader||(m.type&&!(m.type in j))){n('');return;}if(m.type===''&&i.test(m.name)){n(m.name.replace(i,''));return;}var o=new FileReader();o.onload=function(){n(o.result);};o.onerror=function(){n('');};o.readAsText(m);}e.exports=k;},null);
__d("TextEditorEditHandler",["BlockTree","DataTransfer","DocumentCharacters","DocumentCommands","DocumentModifier","DocumentOffsetKey","DocumentRemovableWord","DocumentRemovalDirection","EditorChangeType","EditorState","Keys","React","TextEditorModes","TextEditorPasteHandler","UnicodeUtils","UserAgent","areEqual","createOrderedMapFromBlockArray","findAncestorOffsetKey","getActiveElement","getContentStateFragment","getDocumentSelection","getEntityKeyForSelection","getTextContentFromFiles","isSelectionAtLeafStart"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea){b.__markCompiled&&b.__markCompiled();'use strict';var fa=i.SOFT_NEWLINE,ga=v.isEngine('WebKit'),ha=null,ia={onFocus:function(jb){var kb=this.props.editorState,lb=kb.getSelection();if(lb.getHasFocus())return;var mb=lb.set('hasFocus',true);this.props.onFocus&&this.props.onFocus(jb);this.update(p.acceptSelection(kb,mb));},onBlur:function(jb){if(ga&&z()===document.body)a.getSelection().removeAllRanges();var kb=this.props.editorState,lb=kb.getSelection();if(!lb.getHasFocus())return;var mb=lb.set('hasFocus',false);this.props.onBlur&&this.props.onBlur(jb);this.update(p.acceptSelection(kb,mb));},onBeforeInput:function(jb){var kb=jb.data;if(!kb)return;if(this.props.handleBeforeInput&&this.props.handleBeforeInput(kb)){jb.preventDefault();return;}var lb=this.props.editorState,mb=lb.getSelection();if(!mb.isCollapsed()){jb.preventDefault();this.update(ma(lb,kb,lb.getCurrentInlineStyle(),ca(lb.getCurrentContent(),lb.getSelection())));return;}var nb=!ea(lb),ob=ma(lb,kb,lb.getCurrentInlineStyle(),ca(lb.getCurrentContent(),lb.getSelection()));if(!nb){jb.preventDefault();this.update(ob);return;}var pb=mb.getAnchorKey(),qb=lb.getBlockTree(pb),rb=g.getFingerprint(qb),sb=g.getFingerprint(ob.getBlockTree(pb));if(ib(kb)||rb!==sb||(ob.getDirectionMap().get(pb)!==lb.getDirectionMap().get(pb))){jb.preventDefault();}else ob=p.set(ob,{nativelyRenderedContent:ob.getCurrentContent()});this.update(ob);},onSelect:function(jb){if(this._blockSelectEvents)return;var kb=this.props.editorState,lb=ba(kb,r.findDOMNode(this.refs.editorContainer).firstChild),mb=lb.selectionState;if(mb!==kb.getSelection()){if(!!lb.needsRecovery){kb=p.forceSelection(kb,mb);}else kb=p.acceptSelection(kb,mb);this.update(kb);}},onKeyDown:function(jb){var kb=jb.which,lb=this.props.editorState;switch(kb){case q.RETURN:jb.preventDefault();if(!this.props.handleReturn||!this.props.handleReturn(jb))this.update(xa(lb));return;case q.ESC:jb.preventDefault();this.props.onEscape&&this.props.onEscape(jb);return;case q.TAB:this.props.onTab&&this.props.onTab(jb);return;case q.UP:this.props.onUpArrow&&this.props.onUpArrow(jb);return;case q.DOWN:this.props.onDownArrow&&this.props.onDownArrow(jb);return;}var mb=this.props.keyBindingFn(jb);if(!mb)return;jb.preventDefault();if(this.props.handleKeyCommand&&this.props.handleKeyCommand(mb))return;if(mb===j.UNDO){ka(lb,this.update);return;}var nb=ja(mb,lb);if(nb!==lb)this.update(nb);},onCharacterData:function(jb){var kb=y(jb),lb=this.props.editorState,mb=lb.getSelection(),nb=lb.getCurrentContent(),ob=l.decode(kb),pb=ob.blockKey,qb=lb.getBlockTree(pb),rb=qb.getIn([ob.decoratorKey,'leaves',ob.leafKey]),sb=nb.getBlockForKey(pb);if(sb.getText().slice(rb.start,rb.end)===jb.textContent)return;var tb=lb.getSelection().merge({anchorOffset:rb.start,focusOffset:rb.end,isBackward:false}),ub=k.replaceText(nb,tb,jb.textContent,sb.getInlineStyleAt(rb.start),null),vb=ba(this.props.editorState,r.findDOMNode(this.refs.editorContainer).firstChild),wb=ub.merge({selectionBefore:mb,selectionAfter:vb.selectionState});this.update(p.push(lb,wb,o.INSERT_FRAGMENT));},onDragStart:function(jb){this._internalDrag=true;this.setMode(s.DRAG);},onDragOver:function(jb){this._internalDrag=false;this.setMode(s.DRAG);jb.preventDefault();},onCompositionStart:function(jb){this.setRenderGuard();this.setMode(s.COMPOSITE);this.update(p.set(this.props.editorState,{inCompositionMode:true}));},onCut:function(jb){var kb=this.props.editorState,lb=kb.getSelection();if(lb.isCollapsed()){jb.preventDefault();return;}this.setRenderGuard();eb(kb,function(mb){this._clipboard=mb;this.setMode(s.CUT);setTimeout(function(){this.restoreEditorDOM();this.removeRenderGuard();this.exitCurrentMode();this.update(db(kb));}.bind(this),0);}.bind(this));},onCopy:function(){eb(this.props.editorState,function(jb){this._clipboard=jb;}.bind(this));},onPaste:function(jb){jb.preventDefault();var kb=new h(jb.clipboardData);if(!kb.isRichText()){var lb=kb.getFiles(),mb=kb.getText();if(lb.length>0){if(this.props.handlePastedFiles&&this.props.handlePastedFiles(lb))return;da(lb,function(xb){xb=xb||mb;if(!xb)return;var yb=xb.split(fa),zb=t.processText(yb),ac=this.props.editorState,bc=x(zb),cc=k.replaceWithFragment(ac.getCurrentContent(),ac.getSelection(),bc);this.update(p.push(ac,cc,o.INSERT_FRAGMENT));}.bind(this));return;}}var nb,ob=kb.getText();this.props.onPasteRawText&&this.props.onPasteRawText(ob);if(ob)nb=ob.split(fa);if(!this.props.stripPastedStyles){if(this._clipboard){var pb=nb.filter(bb),qb=this._clipboard.toSeq().map(function(xb){return xb.getText();}).filter(bb).toArray(),rb=w(pb,qb);if(rb){this.update(cb(this.props.editorState,this._clipboard));return;}}var sb=kb.getHTML();if(sb){var tb=t.processHTML(sb);if(tb){var ub=x(tb);this.update(cb(this.props.editorState,ub));return;}}this._clipboard=null;}if(nb){var vb=t.processText(nb),wb=x(vb);this.update(cb(this.props.editorState,wb));}}};function ja(jb,kb){switch(jb){case j.UNDO:return ka(kb);case j.REDO:return la(kb);case j.DELETE:return oa(kb);case j.DELETE_WORD:return pa(kb);case j.BACKSPACE:return sa(kb);case j.BACKSPACE_WORD:return va(kb);case j.BACKSPACE_TO_END_OF_BLOCK:return wa(kb);case j.INSERT_BLOCK_DELIMITER:return xa(kb);case j.TRANSPOSE_CHARACTERS:return ya(kb);case j.MOVE_SELECTION_TO_START_OF_BLOCK:return za(kb);case j.MOVE_SELECTION_TO_END_OF_BLOCK:return ab(kb);case j.SECONDARY_CUT:return qa(kb);case j.SECONDARY_PASTE:return ra(kb);default:return kb;}}function ka(jb,kb){var lb=p.undo(jb);if(!jb.getNativelyRenderedContent()){kb(lb);return;}kb(p.set(jb,{nativelyRenderedContent:null}));setTimeout(function(){kb(lb);});}function la(jb){return p.redo(jb);}function ma(jb,kb,lb,mb){var nb=k.replaceText(jb.getCurrentContent(),jb.getSelection(),kb,lb,mb||null);return p.push(jb,nb,o.INSERT_CHARACTERS);}function na(jb,kb,lb){var mb=jb.getSelection(),nb=jb.getCurrentContent(),ob=mb;if(mb.isCollapsed()){if(lb===n.FORWARD){if(jb.isAtDocumentEnd())return nb;}else if(jb.isAtDocumentStart())return nb;ob=kb(jb);if(ob===mb)return nb;}return k.removeRange(nb,ob,lb);}function oa(jb){var kb=na(jb,function(mb){var nb=mb.getSelection(),ob=mb.getCurrentContent(),pb=nb.getAnchorKey(),qb=nb.getAnchorOffset(),rb=ob.getBlockForKey(pb).getText()[qb];return ua(mb,rb?u.getUTF16Length(rb,0):1);},n.FORWARD);if(kb===jb.getCurrentContent())return jb;kb=kb.set('selectionBefore',jb.getSelection());var lb=jb.getSelection().isCollapsed()?o.DELETE_CHARACTER:o.REMOVE_RANGE;return p.push(jb,kb,lb);}function pa(jb){var kb=na(jb,function(lb){var mb=lb.getSelection(),nb=mb.getStartOffset(),ob=mb.getStartKey(),pb=lb.getCurrentContent(),qb=pb.getBlockForKey(ob).getText().slice(nb),rb=m.getForward(qb)||'';return ua(lb,rb.length||1);},n.FORWARD);if(kb===jb.getCurrentContent())return jb;return p.push(jb,kb,o.REMOVE_RANGE);}function qa(jb){var kb=jb.getCurrentContent(),lb=jb.getSelection(),mb;if(lb.isCollapsed()){var nb=lb.getAnchorKey(),ob=kb.getBlockForKey(nb).getLength();if(ob===lb.getAnchorOffset())return jb;mb=lb.set('focusOffset',ob);}else mb=lb;ha=aa(kb,mb);var pb=k.removeRange(kb,mb,n.FORWARD);if(pb===kb)return jb;return p.push(jb,pb,o.REMOVE_RANGE);}function ra(jb){return (ha?cb(jb,ha):jb);}function sa(jb){var kb=na(jb,function(mb){var nb=mb.getSelection(),ob=mb.getCurrentContent(),pb=nb.getAnchorKey(),qb=nb.getAnchorOffset(),rb=ob.getBlockForKey(pb).getText()[qb-1];return ta(mb,rb?u.getUTF16Length(rb,0):1);},n.BACKWARD);if(kb===jb.getCurrentContent())return jb;kb=kb.set('selectionBefore',jb.getSelection());var lb=jb.getSelection().isCollapsed()?o.BACKSPACE_CHARACTER:o.REMOVE_RANGE;return p.push(jb,kb,lb);}function ta(jb,kb){var lb=jb.getSelection(),mb=jb.getCurrentContent(),nb=lb.getStartKey(),ob=lb.getStartOffset(),pb=nb,qb;if(kb>ob){var rb=mb.getKeyBefore(nb);pb=rb;var sb=mb.getBlockForKey(rb);qb=sb.getText().length;}else qb=ob-kb;return lb.merge({focusKey:pb,focusOffset:qb,isBackward:true});}function ua(jb,kb){var lb=jb.getSelection(),mb=lb.getStartKey(),nb=lb.getStartOffset(),ob=jb.getCurrentContent(),pb=mb,qb,rb=ob.getBlockForKey(mb);if(kb>(rb.getText().length-nb)){pb=ob.getKeyAfter(mb);qb=0;}else qb=nb+kb;return lb.merge({focusKey:pb,focusOffset:qb});}function va(jb){var kb=na(jb,function(lb){var mb=lb.getSelection(),nb=mb.getStartOffset();if(nb===0)return ta(lb,1);var ob=mb.getStartKey(),pb=lb.getCurrentContent(),qb=pb.getBlockForKey(ob).getText().slice(0,nb),rb=m.getBackward(qb)||'';return ta(lb,rb.length||1);},n.BACKWARD);if(kb===jb.getCurrentContent())return jb;return p.push(jb,kb,o.REMOVE_RANGE);}function wa(jb){var kb=na(jb,function(lb){var mb=lb.getSelection();if(mb.getStartOffset()===0)return ta(lb,1);return mb.merge({focusOffset:0,isBackward:true});},n.BACKWARD);if(kb===jb.getCurrentContent())return jb;return p.push(jb,kb,o.REMOVE_RANGE);}function xa(jb){var kb=k.splitBlock(jb.getCurrentContent(),jb.getSelection());return p.push(jb,kb,o.SPLIT_BLOCK);}function ya(jb){var kb=jb.getSelection();if(!kb.isCollapsed())return jb;var lb=kb.getAnchorOffset();if(lb===0)return jb;var mb=kb.getAnchorKey(),nb=jb.getCurrentContent(),ob=nb.getBlockForKey(mb),pb=ob.getLength();if(pb<=1)return jb;var qb,rb;if(lb===pb){qb=kb.set('anchorOffset',lb-1);rb=kb;}else{qb=kb.set('focusOffset',lb+1);rb=qb.set('anchorOffset',lb+1);}var sb=aa(nb,qb),tb=k.removeRange(nb,qb,n.BACKWARD),ub=tb.getSelectionAfter(),vb=ub.getAnchorOffset()-1,wb=ub.merge({anchorOffset:vb,focusOffset:vb}),xb=k.replaceWithFragment(tb,wb,sb),yb=p.push(jb,xb,o.INSERT_FRAGMENT);return p.acceptSelection(yb,rb);}function za(jb){var kb=jb.getSelection(),lb=kb.getStartKey();return p.set(jb,{selection:kb.merge({anchorKey:lb,anchorOffset:0,focusKey:lb,focusOffset:0,isBackward:false}),forceSelection:true});}function ab(jb){var kb=jb.getSelection(),lb=kb.getEndKey(),mb=jb.getCurrentContent(),nb=mb.getBlockForKey(lb).getLength();return p.set(jb,{selection:kb.merge({anchorKey:lb,anchorOffset:nb,focusKey:lb,focusOffset:nb,isBackward:false}),forceSelection:true});}function bb(jb){return jb.length>0;}function cb(jb,kb){var lb=k.replaceWithFragment(jb.getCurrentContent(),jb.getSelection(),kb);return p.push(jb,lb,o.INSERT_FRAGMENT);}function db(jb){var kb=k.removeRange(jb.getCurrentContent(),jb.getSelection(),n.FORWARD);return p.push(jb,kb,o.REMOVE_RANGE);}function eb(jb,kb){var lb=jb.getSelection();if(!lb.isCollapsed())kb(aa(jb.getCurrentContent(),lb));}var fb='\'',gb='\/',hb=v.isBrowser('Firefox');function ib(jb){return (hb&&(jb==fb||jb==gb));}e.exports=ia;},null);
__d("TextEditorDragHandler",["DataTransfer","DocumentModifier","EditorState","EditorChangeType","ex","findAncestorOffsetKey","getTextContentFromFiles","getUpdatedSelectionState"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();'use strict';function o(event,s){var t,u;if(document.caretRangeFromPoint){var v=document.caretRangeFromPoint(event.x,event.y);t=v.startContainer;u=v.startOffset;}else if(event.rangeParent){t=event.rangeParent;u=event.rangeOffset;}else return null;var w=l(t);if(w===null){var x='';if(t.dataset&&t.dataset.reactid)x=' Node ID: '+t.dataset.reactid;throw new Error(k('Invalid range for drop event.'+x+' Offset: '+u));}return n(s,w,u,w,u);}var p={onDragEnd:function(){this.exitCurrentMode();},onDrop:function(s){var t=new g(s.nativeEvent.dataTransfer),u=this.props.editorState,v=o(s.nativeEvent,u);s.preventDefault();this.exitCurrentMode();if(v===null)return;var w=t.getFiles();if(w.length>0){if(this.props.handleDroppedFiles&&this.props.handleDroppedFiles(v,w))return;m(w,function(x){x&&this.update(r(u,v,x));}.bind(this));return;}if(this._internalDrag){this.update(q(u,v));return;}this.update(r(u,v,t.getText()));}};function q(s,t){var u=h.moveText(s.getCurrentContent(),s.getSelection(),t);return i.push(s,u,j.INSERT_FRAGMENT);}function r(s,t,u){var v=h.insertText(s.getCurrentContent(),t,u,s.getCurrentInlineStyle());return i.push(s,v,j.INSERT_FRAGMENT);}e.exports=p;},null);
__d("AbstractTextEditor.react",["AbstractTextEditorPlaceholder.react","AbstractTextEditorProps","DOMVector","EditorState","React","TextEditorCompositionHandler","TextEditorContents.react","TextEditorEditHandler","TextEditorDragHandler","TextEditorModes","UserAgent","cx","requestAnimationFrame","setImmediate"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){b.__markCompiled&&b.__markCompiled();'use strict';var u=a.MutationObserver||a.WebKitMutationObserver,v=(q.isBrowser('Safari')||q.isBrowser('Mobile Safari')),w=q.isBrowser('IE'),x=!!u;function y(ba){return function(ca){if(!this.props.readOnly){var da=this._handler&&this._handler[ba];da&&da.call(this,ca);}};}function z(ba){switch(ba){case p.EDIT:return n;case p.COMPOSITE:return l;case p.DRAG:return o;case p.CUT:case p.RENDER:return null;}}var aa=k.createClass({displayName:"AbstractTextEditor",getDefaultProps:h.getDefaultProps,_onBlur:y('onBlur'),_onFocus:y('onFocus'),_onSelect:y('onSelect'),_onKeyDown:y('onKeyDown'),_onKeyUp:y('onKeyUp'),_onKeyPress:y('onKeyPress'),_onMouseDown:y('onMouseDown'),_onMouseUp:y('onMouseUp'),_onCharacterData:y('onCharacterData'),_onCompositionStart:y('onCompositionStart'),_onCompositionEnd:y('onCompositionEnd'),_onDragStart:y('onDragStart'),_onDragOver:y('onDragOver'),_onDragEnd:y('onDragEnd'),_onDrop:y('onDrop'),_onCut:y('onCut'),_onCopy:y('onCopy'),_onPaste:y('onPaste'),_onBeforeInput:y('onBeforeInput'),_attachMutationObserver:function(){if(!u)return;var ba=[],ca=function(){if(ba.length>1){var da=ba[0],ea=da.target;t(function(){if(this.isMounted()&&ea.parentNode)this._onCharacterData(ea);}.bind(this));}ba.length=0;}.bind(this);this._mutationObserver=new u(function(da){var ea;if(this._guardAgainstRender)return;if(v){if(ba.length===0)s(ca);(ea=ba).push.apply(ea,da);}else{ba=da;ca();}}.bind(this));this._mutationObserver.observe(k.findDOMNode(this.refs.editorContainer),{characterDataOldValue:true,characterData:true,subtree:true});},_disableIELinkDetection:function(){if(w)document.execCommand('AutoUrlDetect',false,false);},_renderPlaceholder:function(){var ba=this.props.editorState.getCurrentContent(),ca=(this.props.placeholder&&!this.props.editorState.isInCompositionMode()&&!ba.hasText());if(ca)return (k.createElement(g,{text:this.props.placeholder,editorState:this.props.editorState,textAlignment:this.props.textAlignment}));},getInitialState:function(){return {containerKey:0};},render:function(){var ba=this.props.textAlignment,ca=(("_5yw9")+(ba==='left'?' '+"_48yc":'')+(ba==='right'?' '+"_48yd":'')+(ba==='center'?' '+"_48ye":'')),da=this.props.editorState.getCurrentContent().hasText();return (k.createElement("div",{className:ca},this._renderPlaceholder(),k.createElement("div",{className:"_5ywa",ref:"editorContainer",key:'editor'+this.state.containerKey},k.createElement("div",{ref:"editor",title:da?null:this.props.placeholder,role:this.props.readOnly?null:(this.props.role||"textbox"),"aria-label":this.props.ariaLabel,"aria-activedescendant":this.props.readOnly?null:this.props.ariaActiveDescendantID,"aria-autocomplete":this.props.readOnly?null:this.props.ariaAutoComplete,"aria-expanded":this.props.readOnly?null:this.props.ariaExpanded,"aria-owns":this.props.readOnly?null:this.props.ariaOwneeID,"aria-haspopup":this.props.readOnly?null:this.props.ariaHasPopup,className:"_54-z","data-testid":this.props.webDriverTestID,onBlur:this._onBlur,onFocus:this._onFocus,onSelect:this._onSelect,onMouseUp:this._onMouseUp,onKeyDown:this._onKeyDown,onKeyUp:this._onKeyUp,onKeyPress:this._onKeyPress,onCut:this._onCut,onCopy:this._onCopy,onPaste:this._onPaste,onDragStart:this._onDragStart,onDragOver:this._onDragOver,onDragEnd:this._onDragEnd,onDrop:this._onDrop,onCompositionStart:this._onCompositionStart,onCompositionEnd:this._onCompositionEnd,onBeforeInput:this._onBeforeInput,spellCheck:x&&this.props.spellCheck,tabIndex:this.props.tabIndex,contentEditable:!this.props.readOnly},k.createElement(m,{blockRendererFn:this.props.blockRendererFn,blockStyleFn:this.props.blockStyleFn,editorState:this.props.editorState,inlineStyleFn:this.props.inlineStyleFn})))));},focus:function(){var ba=this.props.editorState,ca=ba.getSelection().getHasFocus(),da=i.getScrollPosition();this.refs.editor.focus();window.scrollTo(da.x,da.y);if(ca)return;this.update(j.forceSelection(ba,ba.getSelection()));},blur:function(){k.findDOMNode(this.refs.editor).blur();},componentDidMount:function(){this._clipboard=null;this._guardAgainstRender=false;this._handler=n;this._attachMutationObserver();this._disableIELinkDetection();},componentWillUpdate:function(ba){this._blockSelectEvents=true;},componentDidUpdate:function(){this._blockSelectEvents=false;},componentWillUnmount:function(){if(this._mutationObserver){this._mutationObserver.disconnect();this._mutationObserver=null;}},setMode:function(ba){this._handler=z(ba);},exitCurrentMode:function(){this.setMode(p.EDIT);},restoreEditorDOM:function(){this.setState({containerKey:this.state.containerKey+1},this.focus);},setRenderGuard:function(){this._guardAgainstRender=true;},removeRenderGuard:function(){this._guardAgainstRender=false;},update:function(ba){this.props.onChange(ba);}});e.exports=aa;},null);
__d("EmoticonSpan.react",["DocumentEntity","React","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=h.createClass({displayName:"EmoticonSpan",render:function(){var l=g.get(this.props.entityKey),m=l.getData(),n=m.type,o=j("_1ty6",'emoticon_'+n);return (h.createElement("span",{className:o,title:n,"data-offset-key":this.props.offsetKey},h.createElement("span",{className:"_5ukz"},this.props.children)));}});e.exports=k;},null);
__d("isSoftNewlineEvent",["Keys"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();function h(i){return i.which===g.RETURN&&(i.getModifierState('Shift')||i.getModifierState('Alt')||i.getModifierState('Control'));}e.exports=h;},null);
__d("ContentState",["DocumentCharacters","immutable"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';var i=h,j=i.OrderedMap,k=i.Record;j;var l=g,m=l.SOFT_NEWLINE,n={blockMap:null,selectionBefore:null,selectionAfter:null},o=k(n);for(var p in o)if(o.hasOwnProperty(p))r[p]=o[p];var q=o===null?null:o.prototype;r.prototype=Object.create(q);r.prototype.constructor=r;r.__superConstructor__=o;function r(){if(o!==null)o.apply(this,arguments);}r.prototype.getBlockMap=function(){return this.blockMap;};r.prototype.getSelectionBefore=function(){return this.selectionBefore;};r.prototype.getSelectionAfter=function(){return this.selectionAfter;};r.prototype.getBlockForKey=function(s){var t=this.getBlockMap().get(s);return t;};r.prototype.getKeyBefore=function(s){return this.getBlockMap().reverse().keySeq().skipUntil(function(t){return t===s;}).skip(1).first();};r.prototype.getKeyAfter=function(s){return this.getBlockMap().keySeq().skipUntil(function(t){return t===s;}).skip(1).first();};r.prototype.getBlockAfter=function(s){return this.getBlockMap().skipUntil(function(t,u){return u===s;}).skip(1).first();};r.prototype.getBlockBefore=function(s){return this.getBlockMap().reverse().skipUntil(function(t,u){return u===s;}).skip(1).first();};r.prototype.getBlocksAsArray=function(){return this.getBlockMap().toArray();};r.prototype.getLastBlock=function(){return this.getBlockMap().last();};r.prototype.getPlainText=function(s){return this.getBlockMap().map(function(t){return t?t.getText():'';}).join(s||m);};r.prototype.hasText=function(){var s=this.getBlockMap();return (s.size>1||s.first().getLength()>0);};e.exports=r;},null);
__d("createEmptySelectionState",["SelectionState"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';function h(i){return new g({anchorKey:i,anchorOffset:0,focusKey:i,focusOffset:0,isBackward:false,hasFocus:false});}e.exports=h;},null);
__d("createContentStateFromBlocks",["ContentState","createEmptySelectionState","createOrderedMapFromBlockArray"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';function j(k){var l=i(k),m=h(l.first().getKey());return new g({blockMap:l,selectionBefore:m,selectionAfter:m});}e.exports=j;},null);
__d("createInitialEditorState",["EditorState","immutable","createEmptySelectionState"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';var j=h,k=j.Stack;function l(m,n){var o=m.getBlockMap().first().getKey();return g.create({currentContent:m,undoStack:k(),redoStack:k(),decorator:n||null,selection:i(o)});}e.exports=l;},null);
__d("createPlainBlocksFromText",["CharacterMetadata","ComposedBlockType","ContentBlock","immutable","generateBlockKey"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=j,m=l.List,n=l.Repeat,o=g,p=o.EMPTY,q=h,r=q.UNSTYLED;function s(t){return t.map(function(u){var v=u.length;return new i({key:k(),text:u,type:r,characterList:m(n(p,v))});});}e.exports=s;},null);
__d("createEmptyEditorState",["createContentStateFromBlocks","createInitialEditorState","createPlainBlocksFromText"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';function j(k){var l=i(['']),m=g(l);return h(m,k);}e.exports=j;},null);
__d("DocumentCompositeDecorator",["immutable","fillArray"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';var i=g,j=i.List,k='.';function l(o){this.$DocumentCompositeDecorator0=o.slice();}l.prototype.getDecorations=function(o){var p=h(o.getText().length,null);this.$DocumentCompositeDecorator0.forEach(function(q,r){var s=0,t=q.getStrategy();t(o,function(u,v){if(m(p,u,v)){n(p,u,v,r+k+s);s++;}});});return j(p);};l.prototype.getComponentForKey=function(o){var p=parseInt(o.split(k)[0],10);return this.$DocumentCompositeDecorator0[p].getComponent();};l.prototype.getPropsForKey=function(o){var p=parseInt(o.split(k)[0],10);return this.$DocumentCompositeDecorator0[p].getProps();};function m(o,p,q){for(var r=p;r<q;r++)if(o[r]!=null)return false;return true;}function n(o,p,q,r){for(var s=p;s<q;s++)o[s]=r;}e.exports=l;},null);
__d("DocumentDecorator",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(h,i,j){"use strict";this.$DocumentDecorator0=h;this.$DocumentDecorator1=i;this.$DocumentDecorator2=j||{};}g.prototype.getStrategy=function(){"use strict";return this.$DocumentDecorator0;};g.prototype.getComponent=function(){"use strict";return this.$DocumentDecorator1;};g.prototype.getProps=function(){"use strict";return this.$DocumentDecorator2;};e.exports=g;},null);
__d("getEntityMatcher",["DocumentEntity"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h=g.get;function i(j,k){var l=k||h;return function(m,n){m.findEntityRanges(function(o){var p=o.getEntity();return typeof p==='string'&&j(l(p));},n);};}e.exports=i;},null);
__d("applyEmoticonToContentBlock",["CharacterMetadata","ComposedEntityMutability","ComposedEntityType","DocumentEntity","EmoticonsList","immutable"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';var m=l,n=m.List,o='\u3000';function p(q,r,s){if(!k.emotes[r])return q;var t=j.create(i.EMOTICON,h.IMMUTABLE,{type:k.emotes[r],originalEmoticon:r}),u=q.getText(),v=q.getCharacterList(),w=r.length,x=v.get(s);return q.merge({text:(u.slice(0,s)+o+u.slice(s+w)),characterList:v.slice(0,s).concat(n.of(g.applyEntity(x,t)),v.slice(s+w))});}e.exports=p;},null);
__d("getTextAfterNearestEntity",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(h,i){var j=i;while(j>0&&h.getEntityAt(j-1)===null)j--;return h.getText().slice(j,i);}e.exports=g;},null);
__d("applyEmoticonToContentState",["EmoticonsList","applyEmoticonToContentBlock","getTextAfterNearestEntity"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';var j=new RegExp(g.regexp.source,'g');function k(l,m){var n=m.getAnchorKey(),o=m.getAnchorOffset(),p=l.getBlockForKey(n),q=i(p,o),r,s;while(s!==null){s=j.exec(q);if(s!==null)r=s;}if(!r)return l;var t=r[1];if(!t&&o!==q.length)return l;var u=r[2],v=o-q.length,w=v+r.index+r[1].length,x=l.getBlockMap().set(n,h(p,u,w));o-=(u.length-1);return l.merge({blockMap:x,selectionBefore:m,selectionAfter:m.merge({anchorOffset:o,focusOffset:o})});}e.exports=k;},null);
__d("handleBeforeInputForEmoticon",["DocumentModifier","EditorChangeType","EditorState","applyEmoticonToContentState"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=new RegExp(/[\s'".,!?]/);function l(m,n){var o=m.getSelection();if(!o.isCollapsed()||!n||!k.test(n))return m;var p=m.getCurrentContent(),q=j(p,o);if(q===p)return m;var r=g.insertText(q,q.getSelectionAfter(),n);return i.push(m,r,h.INSERT_CHARACTERS);}e.exports=l;},null);
__d("handleSoftNewlineForEmoticon",["DocumentModifier","EditorChangeType","EditorState","applyEmoticonToContentState"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();function k(l){var m=l.getCurrentContent(),n=l.getSelection(),o=j(m,n);if(o===m)return l;var p=g.splitBlock(o,o.getSelectionAfter());return i.push(l,p,h.SPLIT_BLOCK);}e.exports=k;},null);
__d("createCharacterList",["CharacterMetadata","ComposedInlineStyle","immutable"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';var j=g,k=j.EMPTY,l=h,m=l.NONE,n=i,o=n.List;function p(q,r){var s=q.map(function(t,u){var v=r[u];if(t===m&&v===null)return k;return new g({style:t,entity:v});});return o(s);}e.exports=p;},null);
__d("decodeEntityRanges",["UnicodeUtils","fillArray"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';var i=g,j=i.substr;function k(l,m){var n=h(l.length,null);if(m)m.forEach(function(o){var p=j(l,0,o.offset).length,q=p+j(l,o.offset,o.length).length;for(var r=p;r<q;r++)n[r]=o.key;});return n;}e.exports=k;},null);
__d("decodeInlineStyleRanges",["ComposedInlineStyle","UnicodeUtils","fillArray"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';var j=h,k=j.substr,l=g,m=l.NONE;function n(o,p){var q=i(o.length,m);if(p)p.forEach(function(r){var s=k(o,0,r.offset).length,t=s+k(o,r.offset,r.length).length;while(s<t){q[s]|=r.style;s++;}});return q;}e.exports=n;},null);
__d("decodeBlocks",["ContentBlock","DocumentEntity","createCharacterList","decodeEntityRanges","decodeInlineStyleRanges","generateBlockKey"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';function m(n,o){var p={};Object.keys(o).forEach(function(q){var r=o[q];if(r){var s=h.add(r);p[q]=s;}});return n.map(function(q,r){var s=q.type,t=q.text,u=q.depth||0,v=k(q.text,q.inlineStyleRanges),w;if(q.entityRanges)w=q.entityRanges.filter(function(y){return p.hasOwnProperty(y.key);}).map(function(y){y.key=p[y.key];return y;});var x=j(q.text,w);return new g({key:q.key||l(),type:s,text:t,depth:u,characterList:i(v,x)});});}e.exports=m;},null);
__d("getVisibleValueForContentState",["ComposedEntityType","DocumentCharacters","DocumentEntity","emptyFunction"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=g.EMOTICON,l=h.SOFT_NEWLINE;function m(n){var o=n.getBlockMap().map(function(p){var q=p.getText(),r='';p.findEntityRanges(j.thatReturnsTrue,function(s,t){var u=p.getEntityAt(s);if(u===null){r+=q.slice(s,t);}else{var v=i.get(u);if(v.getType()===k){r+=v.getData().originalEmoticon;}else r+=q.slice(s,t);}});return r;});return o.join(l);}e.exports=m;},null);
__d("insertEmoticonIntoContentState",["DocumentModifier","applyEmoticonToContentBlock"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';function i(j,k,l){var m=g.replaceText(k,l,j),n=l.getAnchorKey(),o=l.getAnchorOffset(),p=m.getBlockForKey(n),q=m.getBlockMap().set(n,h(p,j,o));o++;return k.merge({blockMap:q,selectionBefore:l,selectionAfter:l.merge({anchorOffset:o,focusOffset:o})});}e.exports=i;},null);
__d("insertEmoticonIntoEditorState",["DocumentModifier","EditorChangeType","EditorState","insertEmoticonIntoContentState"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';var k=' ';function l(m,n){var o=n.getSelection(),p=n.getCurrentContent(),q=o.getStartOffset(),r=o.getEndOffset(),s=p.getBlockForKey(o.getStartKey()).getText(),t=p.getBlockForKey(o.getEndKey()).getText(),u='';if(r<=t.length&&t[r]!==k)u=k;if(q>0&&s[q-1]!==k){p=g.insertText(p,o,k);o=p.getSelectionAfter();}var v=j(m,p,o);p=g.insertText(v,v.getSelectionAfter(),u);return i.push(n,p,h.INSERT_CHARACTERS);}e.exports=l;},null);
__d("AbstractTokenizer.react",["AbstractTypeahead.react","React","TokenizerToken.react","cx","ex","emptyFunction","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();var n=h,o=n.PropTypes,p=h.createClass({displayName:"AbstractTokenizer",propTypes:{alwaysShowPlaceholder:o.bool,className:o.string,excludeTokenEntries:o.bool,extraTokenRendererProps:o.object,inputClassName:o.string,tokenClassName:o.string,placeholder:o.string,queryString:o.string,searchSource:o.object.isRequired,searchSourceOptions:o.object,presenter:o.object.isRequired,entries:o.array,onAddEntryAttempt:o.func.isRequired,onEntriesFound:o.func,onPaste:o.func,onRemoveEntryAttempt:o.func.isRequired,onReorderEntryAttempt:o.func,onQueryStringChange:o.func,onInputFocus:o.func,onInputBlur:o.func,onTypeaheadMouseDown:o.func,excludedEntries:o.object,inputID:o.string,entriesWidthMatchContext:o.bool,hideViewWithEntries:o.bool,disabled:o.bool,limit:function(q,r,s){var t=q[r],u=t==null||(typeof t==='number'&&t>0);if(!u)return new Error(k('Invalid entries limit `%s` provided, must be a positive '+'number if set.',t));},selectOnBlur:o.bool,selectOnTab:o.bool,tokenizeQueryString:o.func,tokenizeQueryStringOnBlur:o.func},getDefaultProps:function(){return {autoHighlight:true,excludeTokenEntries:true,hideViewWithEntries:true,onInputBlur:l,selectOnBlur:false,selectOnTab:true,tokenizeQueryString:l.thatReturnsNull,tokenizeQueryStringOnBlur:l.thatReturnsNull,entriesWidthMatchContext:true};},getInitialState:function(){return {queryString:''};},_getQueryString:function(){return this.props.queryString||this.state.queryString;},_hasReachedEntriesLimit:function(){if(this.props.limit&&this.props.entries)return this.props.entries.length>=this.props.limit;return false;},componentWillReceiveProps:function(q){if(q.queryString==null&&this.props.queryString!=null)this.setState({queryString:this.props.queryString});},render:function(){var q=!!this.props.onReorderEntryAttempt,r=m((("_58-2")+(q?' '+"_5ph3":'')),'clearfix',this.props.className),s,t=this.props.entries,u={},v=t&&t.length>0,w;if(v){s=[];for(var x=0,y=t.length;x<y;x++){var z=t[x];w=z.getUniqueID();s[x]=this._renderToken(z,x);if(this.props.excludeTokenEntries)u[w]=true;}}if(this.props.excludedEntries)for(w in this.props.excludedEntries)u[w]=this.props.excludedEntries[w];var aa=null;if(!v||this.props.alwaysShowPlaceholder)aa=this.props.placeholder;return (h.createElement("div",h.__spread({},this.props,{className:m(this.props.className,r),placeholder:null,onClick:this._focusTypeahead,onMouseDown:this._onTypeaheadMouseDown,onDragOver:this.onBackgroundDragOver,onDrop:this.onBackgroundDrop,tabIndex:null,"data-testid":this.props['data-testid']}),s,h.createElement(g,{ref:"typeahead",selectedEntry:null,className:"_58-0",ariaLabel:this.props.placeholder,"data-testid":this.props['data-testid'],inputClassName:this.props.inputClassName,showEntriesOnFocus:this.props.showEntriesOnFocus,queryString:this._getQueryString(),placeholder:aa,presenter:this.props.presenter,searchSource:this.props.searchSource,searchSourceOptions:this.props.searchSourceOptions,excludedEntries:u,onSelectAttempt:this._onSelectAttempt,onEntriesFound:this.props.onEntriesFound,onEnterWithoutSelection:this.props.onEnterWithoutSelection,onChange:this._onInputChange,onFocus:this.props.onInputFocus,onBlur:this._onInputBlur,onBackspace:this._onBackspace,onPaste:this.props.onPaste,tabIndex:this.props.tabIndex,autoHighlight:this.props.autoHighlight,selectOnBlur:this.props.selectOnBlur,selectOnTab:this.props.selectOnTab,context:this.props.context,focusedOnInit:this.props.focusedOnInit,inputID:this.props.inputID,entriesWidthMatchContext:this.props.entriesWidthMatchContext,hideViewWithEntries:this.props.hideViewWithEntries,disabled:this.props.disabled}),h.createElement("span",{ref:"textSizeProxy",className:"_58-3","aria-hidden":"true"},this._getQueryString()||aa)));},componentDidMount:function(){this._syncTimer=setTimeout(this._syncInputWidth,0);},componentDidUpdate:function(){clearTimeout(this._syncTimer);this._syncTimer=setTimeout(this._syncInputWidth,0);},componentWillUnmount:function(){clearTimeout(this._syncTimer);},clearActiveEntries:function(){this.refs.typeahead&&this.refs.typeahead.clearActiveEntries();},focusInput:function(){if(this.refs&&this.refs.typeahead)this.refs.typeahead.focusInput();},_focusTypeahead:function(q){q.preventDefault();this.focusInput();},_onTypeaheadMouseDown:function(){this.props.onTypeaheadMouseDown&&this.props.onTypeaheadMouseDown();},_onInputChange:function(event){if(this._hasReachedEntriesLimit())return;var q=event.target.value,r=this.props.tokenizeQueryString(q);if(r){this._onSelectAttempt(r);}else if(this.props.queryString==null)this.setState({queryString:q});if(this.props.onQueryStringChange)this.props.onQueryStringChange(event);},_onInputBlur:function(){var q=this._getQueryString(),r=this.props.tokenizeQueryStringOnBlur(q);if(r)this._onBlurringSelectAttempt(r);this.props.onInputBlur();},_onSelectAttempt:function(q){this._onAddEntryAttempt(q);setTimeout(this.focusInput,0);},_onBlurringSelectAttempt:function(q){this._onAddEntryAttempt(q);},_onAddEntryAttempt:function(q){if(q){this.props.onAddEntryAttempt(q);if(this.props.queryString==null)this.setState({queryString:''});}},_onRemove:function(q){this.props.onRemoveEntryAttempt(q);},_onBackspace:function(event){var q=this.props.entries;if(q&&!this._getQueryString()&&q.length){var r=q[q.length-1];this.props.onRemoveEntryAttempt(r);event.preventDefault();setTimeout(this.focusInput,0);}},_syncInputWidth:function(){var q=h.findDOMNode(this.refs.textSizeProxy).offsetWidth;if(q===0)return;this.refs.typeahead.getTextFieldDOM().style.width=q+'px';},onBackgroundDragOver:function(event){event.preventDefault();var q=event.nativeEvent.dataTransfer;if(q)q.dropEffect='move';var r=this.props.entries;this.onTokenDragOver(r[r.length-1],r.length-1,false);},onBackgroundDrop:function(event){this.onTokenDrop(null,this.props.entries.length);},onTokenDragStart:function(q,r){this.setState({draggingIndex:r});},onTokenDragEnd:function(q,r){this.setState({draggingIndex:null});},onTokenDragLeave:function(q,r){if(this.leaveTimer)return;this.leaveTimer=setTimeout(function(){this.leaveTimer=null;if(this.state.dragTargetIndex===null)return;this.setState({dragTargetIndex:null});}.bind(this),100);},onTokenDragOver:function(q,r,s){if(this.leaveTimer){clearTimeout(this.leaveTimer);this.leaveTimer=null;}if(this.state.draggingIndex!==null&&this.state.draggingIndex!==r&&this.props.onReorderEntryAttempt){if(this.state.dragTargetIndex===r&&this.state.draggedOverLeftSideOfElement===s)return;this.setState({dragTargetIndex:r,draggedOverLeftSideOfElement:s});}},onTokenDrop:function(q,r){if(this.state.draggingIndex!==null&&this.props.onReorderEntryAttempt){if(!this.state.draggedOverLeftSideOfElement)r++;if(this.state.draggingIndex!==r)this.props.onReorderEntryAttempt(this.state.draggingIndex,r);}this.setState({draggingIndex:null,dragTargetIndex:null,draggedOverLeftSideOfElement:null});},_renderToken:function(q,r){var s=this.props.presenter.TokenRenderer||i,t=this.state.draggingIndex===r,u=!!this.props.onReorderEntryAttempt,v=this.state.dragTargetIndex===r,w=m((("_2ei6")+(t?' '+"_5ph4":'')+(v?' '+"_5o8i":'')+(v&&this.state.draggedOverLeftSideOfElement?' '+"_5o8j":'')+(v&&!this.state.draggedOverLeftSideOfElement?' '+"_5o8k":'')),this.props.tokenClassName);return (h.createElement(s,h.__spread({},this.props.extraTokenRendererProps,{className:w,key:q.getUniqueID(),label:q.getTitle(),entry:q,index:r,onRemove:this._onRemove,isDragDropEnabled:u,onTokenDragStart:this.onTokenDragStart,onTokenDragEnd:this.onTokenDragEnd,onTokenDragOver:this.onTokenDragOver,onTokenDragLeave:this.onTokenDragLeave,onTokenDrop:this.onTokenDrop})));}});e.exports=p;},null);
__d("WebWorker",["BanzaiLogger","WebWorkerConfig","BlobFactory","EventListener","URI","areSameOrigin","destroyOnUnload","SubscriptionsHandler","XHRRequest","arrayContains","emptyFunction","getCrossOriginTransport","performanceNow","invariant","memoize","filterObject"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){b.__markCompiled&&b.__markCompiled();var w=a.URL||a.webkitURL;function x(da){"use strict";this.$WebWorker0=false;this.$WebWorker1=null;this.$WebWorker2=da;this.$WebWorker3=null;this.$WebWorker4=q;this.$WebWorker5=q;this.$WebWorker6=[];this.$WebWorker7=false;this.$WebWorker8=new n();m(function(){if(!this.$WebWorker7)this.terminate();}.bind(this));this.$WebWorker9('constructed');}x.prototype.setMessageHandler=function(da){"use strict";this.$WebWorker4=da||q;return this;};x.prototype.setErrorHandler=function(da){"use strict";this.$WebWorker5=da||q;return this;};x.prototype.postMessage=function(da,ea){"use strict";t(!this.isCurrentState('constructed'));t(!this.isCurrentState('terminated'));if(this.isCurrentState('preparing')){this.$WebWorker6.push(this.postMessage.bind(this,da,ea));return this;}var fa={type:'message',message:da};if(ea){this.$WebWorker3.postMessage(fa,ea);}else this.$WebWorker3.postMessage(fa);return this;};x.prototype.terminate=function(){"use strict";if(this.isCurrentState('executing'))this.$WebWorker3.terminate();if(!this.isCurrentState('terminated')){this.$WebWorker9('terminated');this.$WebWorker3=null;this.$WebWorkera();this.$WebWorker6=[];}return this;};x.prototype.execute=function(){"use strict";t(!this.isCurrentState('terminated'));if(['preparing','executing'].some(this.isCurrentState,this))return this;this.$WebWorker9('preparing');x.prepareResource(this.$WebWorker2,this.$WebWorkerb.bind(this));return this;};x.prototype.setAllowCrossPageTransition=function(da){"use strict";this.$WebWorker7=da;return this;};x.prototype.isCurrentState=function(da){"use strict";t(p(x.states,da));return da===this.$WebWorker1;};x.prototype.$WebWorkerb=function(){"use strict";t(!this.isCurrentState('executing'));if(this.isCurrentState('terminated'))return;t(this.$WebWorker2.sameOriginURL||this.$WebWorker2.source);if(this.$WebWorker2.sameOriginURL){this.$WebWorker3=new a.Worker(this.$WebWorker2.sameOriginURL);}else{this.$WebWorker3=new a.Worker(x.evalWorkerURL);this.$WebWorker3.postMessage(this.$WebWorker2.source);}this.$WebWorkerc('ping',Date.now());if(this.$WebWorker2.dynamicModules)this.$WebWorkerc('defineModules',this.$WebWorker2.dynamicModules);this.$WebWorkerd();this.$WebWorker9('executing');this.$WebWorker6.forEach(function(da){return da();});this.$WebWorker6=null;};x.prototype.$WebWorkera=function(){"use strict";this.$WebWorker8.release();};x.prototype.$WebWorkerc=function(da){"use strict";for(var ea=[],fa=1,ga=arguments.length;fa<ga;fa++)ea.push(arguments[fa]);this.$WebWorker3.postMessage({type:da,args:ea});};x.prototype.$WebWorkere=function(event,da){"use strict";x.$WebWorkere(event,this.$WebWorker2.name,Object.assign({},da,{cross_page_transition:!!this.$WebWorker7,state:this.$WebWorker1}));};x.$WebWorkerf=function(){"use strict";return Object.keys(v({object_url:x.$WebWorkerg(),eval_url:ba(),data_url:x.$WebWorkerh(),worker:x.isSupported(),transferables:x.areTransferablesSupported()},function(da){return !!da;}));};x.prototype.$WebWorkerd=function(){"use strict";this.$WebWorker8.addSubscriptions(j.listen(this.$WebWorker3,'message',this.$WebWorkeri.bind(this)),j.listen(this.$WebWorker3,'error',this.$WebWorkerj.bind(this)));};x.prototype.$WebWorkerj=function(da){"use strict";var ea=this.$WebWorker5(da);if(!ea&&!da.defaultPrevented)this.$WebWorkere('exception',{message:da.message});};x.prototype.$WebWorkeri=function(event){"use strict";var da=event.data;switch(da.type){case 'message':this.$WebWorker4(da.message);break;case 'pong':this.$WebWorker0=true;this.$WebWorkere('executed',{dt:Math.floor(da.args[1]-da.args[0]),bytes:this.$WebWorker2.source.length});break;case 'terminate':this.terminate();break;case 'haste-error':this.terminate();this.$WebWorkere('haste_error',{message:da.message});break;case 'console':var ea=da.args.shift();t(p(['log','error','info','debug','warn'],ea));a.console[ea].apply(a.console,da.args);break;}};x.prototype.$WebWorker9=function(da){"use strict";t(p(x.states,da));this.$WebWorkere('transition',{next_state:da});this.$WebWorker1=da;};x.prepareResource=function(da,ea){"use strict";ea=ea||q;t(da.sameOriginURL||da.url||da.source);t(!!x.isSupported());if(da.sameOriginURL){ea();}else if(da.url&&l(new k(da.url),new k(a.location.href))){da.sameOriginURL=da.url;ea();}else if(da.source){if(x.$WebWorkerk())da.sameOriginURL=x.$WebWorkerl(da.source);ea();}else if(!da.loading){var fa=s();da.loading=[ea];x.$WebWorkerm(da.url,function(ga){if(ga){da.source=ga;if(x.$WebWorkerk())da.sameOriginURL=x.$WebWorkerl(ga);}x.$WebWorkere('prepared',da.name,{dt:Math.floor(s()-fa),bytes:ga.length});da.loading.forEach(function(ha){return ha();});da.loading=false;});}else da.loading.push(ea);return da;};x.releaseResource=function(da){"use strict";if(da.sameOriginURL.indexOf('blob:')===0){if(w.revokeObjectURL)w.revokeObjectURL(da.sameOriginURL);da.sameOriginURL=null;}return da;};x.isSupported=function(){"use strict";return aa&&(x.$WebWorkerk()||ba());};x.areTransferablesSupported=function(){"use strict";return x.isSupported()&&ca();};x.$WebWorkerm=function(da,ea){"use strict";new o(da).setTransportBuilder(r).setMethod('GET').setResponseHandler(function(fa){ea(fa);}).setErrorHandler(ea.bind(null,null)).send();};x.$WebWorkerl=function(da){"use strict";t(x.$WebWorkerk());if(x.$WebWorkerg()){var ea=i.getBlob([da],{type:'application/javascript'});return w.createObjectURL(ea);}if(x.$WebWorkerh())return 'data:application/javascript,'+encodeURIComponent(da);};x.$WebWorkerg=function(){"use strict";return i.isSupported()&&y();};x.$WebWorkerh=function(){"use strict";return z();};x.$WebWorkerk=function(){"use strict";return x.$WebWorkerg()||x.$WebWorkerh();};x.$WebWorkere=function(event,da,ea){"use strict";if(!h.logging.enabled)return;g.log(h.logging.config,Object.assign({},ea,{features_array:x.$WebWorkerf(),event:event,resource:da}));};var y=u(function(){var da,ea;if(!w||!w.createObjectURL)return false;try{da=w.createObjectURL(i.getBlob([''],{type:'application/javascript'}));var ga=new a.Worker(da);ga.terminate();ea=true;}catch(fa){ea=false;}finally{if(w.revokeObjectURL)w.revokeObjectURL(da);}return ea;}),z=u(function(){var da;try{var fa=new a.Worker('data:application/javascript,');fa.terminate();da=true;}catch(ea){da=false;}return da;}),aa=!!a.Worker,ba=u(function(){var da;try{var fa=new a.Worker(x.evalWorkerURL);fa.terminate();da=true;}catch(ea){da=false;}return da;}),ca=u(function(){var da;try{var fa=new a.Worker(x.evalWorkerURL),ga=new ArrayBuffer(0);fa.postMessage({buffer:ga},[ga]);fa.terminate();da=true;}catch(ea){da=false;}return da;});x.states=['constructed','preparing','executing','terminated'];x.evalWorkerURL=h.evalWorkerURL;e.exports=x;},null);
__d("isRTL",["UnicodeBidi","UnicodeBidiDirection"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();function i(j){return g.getDirection(j)===h.RTL;}e.exports=i;},null);
__d("MercuryLocalIDs",["PresenceUtil","randomInt"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';var i={generateMessageID:function(k){var l=k||Date.now(),m=h(0,4294967295),n=g.getSessionID();return ("<"+l+":"+m+"-"+n+"@mail.projektitan.com>");},generateThreadID:function(k){return 'root:'+i.generateMessageID(k);},generateOfflineThreadingID:function(k){var l=k||Date.now(),m=h(0,4294967295),n=('0000000000000000000000'+m.toString(2)).slice(-22),o=l.toString(2)+n;return j(o);}};function j(k){var l='';while(k!='0'){var m=0,n='';for(var o=0;o<k.length;o++){m=2*m+parseInt(k[o],10);if(m>=10){n+='1';m-=10;}else n+='0';}l=m.toString()+l;k=n.slice(n.indexOf('1'));}return l;}e.exports=i;},null);
__d("MercuryMessageObject",["MercuryActionStatus","MercuryActionType","MercuryIDs","MercuryLocalIDs","MercuryMessageClientState","MercuryMessageSourceTags","MercurySingletonMixin","MercurySourceType","MercuryTimePassed","MercurySendMessageFields","fbt","formatDate"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){b.__markCompiled&&b.__markCompiled();function s(v){"use strict";this.$MercuryMessageObject0=v;}s.prototype.constructUserGeneratedMessageObject=function(v,w,x,y,z){"use strict";var aa=t(this.$MercuryMessageObject0,h.USER_GENERATED_MESSAGE,w,x);if(typeof v=='string')v=v.replace(/^\s+/,'').replace(/\s+$/,'');aa.body=v;aa.has_attachment=false;aa.html_body=false;aa.attachments=[];aa.specific_to_list=y||[];aa.creator_info=z;return aa;};s.prototype.constructStickerMessageObject=function(v,w,x){"use strict";var y=t(this.$MercuryMessageObject0,h.USER_GENERATED_MESSAGE,w,x);y.has_attachment=true;y.html_body=false;y.attachments=[];y.sticker_id=v;y.specific_to_list=[];return y;};s.prototype.constructAttachmentMessageObject=function(v,w){"use strict";var x=t(this.$MercuryMessageObject0,h.USER_GENERATED_MESSAGE,v,w);x.attachments=[];x.specific_to_list=[];return x;};s.prototype.constructLogMessageObject=function(v,w,x,y){"use strict";var z=t(this.$MercuryMessageObject0,h.LOG_MESSAGE,v,w);z.log_message_type=x;z.log_message_data=y;return z;};s.prototype.normalizeNewMessage=function(v){"use strict";if(v.status===undefined)v.status=g.UNSENT;v.timestamp_absolute=q._("Today");v.threading_id=v.threading_id||j.generateMessageID(v.timestamp);v.offline_threading_id=v.offline_threading_id||j.generateOfflineThreadingID(v.timestamp);v.message_id=v.message_id||v.offline_threading_id;var w=i.getParticipantIDFromUserID(this.$MercuryMessageObject0);v.specific_to_list=v.specific_to_list||[];if(v.specific_to_list.length&&v.specific_to_list.indexOf(w)===-1)v.specific_to_list.push(w);if(!v.thread_id){if(v.specific_to_list.length==1){v.thread_id='user:'+this.$MercuryMessageObject0;}else if(v.specific_to_list.length==2){var x=v.specific_to_list[0]==w?v.specific_to_list[1]:v.specific_to_list[0];v.thread_id=i.getThreadIDFromParticipantID(x);}v.thread_id=v.thread_id||'root:'+v.threading_id;}if(!v.specific_to_list.length){var y=i.tokenize(v.thread_id),z=y.type,aa=y.value;if(z=='user')v.specific_to_list=['fbid:'+aa,w];}if(!v[p.MANUAL_RETRY_CNT])v[p.MANUAL_RETRY_CNT]=0;};s.prototype.normalizeResendMessage=function(v){"use strict";v.status=g.RESENDING;v.timestamp=Date.now();v[p.MANUAL_RETRY_CNT]+=1;};s.prototype.normalizeAddAttachmentPlaceholder=function(v,w,x){"use strict";if(x.preview_attachments.length>0){v.has_attachment=true;v.preview_attachments=x.preview_attachments;}v.client_state=k.DO_NOT_SEND_TO_SERVER;v.status=g.RESENDING;v.upload_id=w;};function t(v,w,x,y){var z=u(x)?[l.CHAT]:[],aa=Date.now(),ba=r(new Date(aa),'g:ia'),ca={action_type:w,thread_id:y,author:i.getParticipantIDFromUserID(v),author_email:null,timestamp:aa,timestamp_absolute:(new Date(aa)).toLocaleDateString(),timestamp_relative:ba,timestamp_time_passed:o.TODAY,is_unread:false,is_forward:false,is_filtered_content:false,is_filtered_content_bh:false,is_filtered_content_account:false,is_spoof_warning:false,source:x,source_tags:z};return ca;}function u(v){switch(v){case n.CHAT_WEB:case n.CHAT_JABBER:case n.CHAT_IPHONE:case n.CHAT_MEEBO:case n.CHAT_ORCA:case n.CHAT_TEST:case n.CHAT:case n.DESKTOP:return true;default:return false;}}Object.assign(s,m);e.exports=s;},null);
__d("MercuryMessageActions",["MercuryActionType","MercuryDispatcher","MercuryMessageObject","MercuryPayloadSource","MercuryServerRequests","MercurySingletonMixin"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';function m(n){this.$MercuryMessageActions0=n;this.$MercuryMessageActions1=i.getForFBID(this.$MercuryMessageActions0);this.$MercuryMessageActions2=k.getForFBID(this.$MercuryMessageActions0);this.$MercuryMessageActions3=h.getForFBID(this.$MercuryMessageActions0);}m.prototype.send=function(n,o,p){o=o||Function.prototype;this.$MercuryMessageActions1.normalizeNewMessage(n);this.$MercuryMessageActions3.handleUpdate(this.$MercuryMessageActions4(Object.assign({},n),j.CLIENT_SEND_MESSAGE));this.$MercuryMessageActions2.sendNewMessage(n,p);o(n.thread_id);};m.prototype.resend=function(n,o){var p=Object.assign({},n);this.$MercuryMessageActions1.normalizeResendMessage(p);this.send(p,(void 0),o);};m.prototype.addAttachmentPlaceholder=function(n,o,p){this.$MercuryMessageActions1.normalizeAddAttachmentPlaceholder(n,o,p);this.$MercuryMessageActions1.normalizeNewMessage(n);this.$MercuryMessageActions3.handleUpdate(this.$MercuryMessageActions4(Object.assign({},n),j.CLIENT_SEND_MESSAGE));};m.prototype.cancelAttachmentPlaceholder=function(n,o){this.$MercuryMessageActions3.handleUpdate(this.$MercuryMessageActions4({upload_id:n,upload_data:o,action_type:g.CANCEL_ATTACHMENT_PLACEHOLDER},j.CLIENT_SEND_MESSAGE));};m.prototype.confirmAttachmentPlaceholder=function(n,o){this.$MercuryMessageActions3.handleUpdate(this.$MercuryMessageActions4({upload_id:n,upload_data:o,action_type:g.CONFIRM_ATTACHMENT_PLACEHOLDER},j.CLIENT_SEND_MESSAGE));};m.prototype["delete"]=function(n,o,p){this.$MercuryMessageActions3.handleUpdate(this.$MercuryMessageActions5(n,o,g.DELETE_MESSAGES,p||j.CLIENT_DELETE_MESSAGES));};m.prototype.$MercuryMessageActions4=function(n,o){return {actions:[n],from_client:true,payload_source:o};};m.prototype.$MercuryMessageActions6=function(n,o){return {actions:[n],from_client:false,payload_source:o};};m.prototype.$MercuryMessageActions5=function(n,o,p,q){return {actions:[{action_type:p,action_id:null,thread_id:n,message_ids:o}],from_client:true,payload_source:q};};Object.assign(m,l);e.exports=m;},null);
__d("MercurySendMessageHandler",["MercuryMessageActions","MercuryMessageObject","MercurySingletonMixin"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';function j(k){this.$MercurySendMessageHandler0=k;this.$MercurySendMessageHandler1=g.getForFBID(this.$MercurySendMessageHandler0);this.$MercurySendMessageHandler2=h.getForFBID(this.$MercurySendMessageHandler0);}j.prototype.sendPlainTextMessage=function(k,l,m){var n=this.$MercurySendMessageHandler2.constructUserGeneratedMessageObject(l,m,k);this.$MercurySendMessageHandler1.send(n);};j.prototype.sendSticker=function(k,l,m){var n=this.$MercurySendMessageHandler2.constructStickerMessageObject(l,m,k);this.$MercurySendMessageHandler1.send(n);};j.prototype.sendAttachment=function(k,l,m){var n=this.$MercurySendMessageHandler2.constructAttachmentMessageObject(m,k);this.$MercurySendMessageHandler1.addAttachmentPlaceholder(n,l.upload_id,l);};Object.assign(j,i);e.exports=j;},null);
__d("XNFXMessengerBlockActionController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/nfx\/block_messages\/",{thread_fbid:{type:"Int",required:true},av:{type:"Int"},location:{type:"Enum",required:true,enumType:1},__asyncDialog:{type:"Int"}});},null);
__d("MercuryThreadActions",["AsyncDialog","AsyncRequest","MercuryActionType","MercuryDispatcher","MercuryIDs","MercuryMessengerBlockingUtils","MercuryPayloadSource","MercuryServerRequests","MercurySingletonMixin","MessagingTag","XNFXMessengerBlockActionController","URI"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){b.__markCompiled&&b.__markCompiled();'use strict';function s(t){this.$MercuryThreadActions0=t;this.__serverRequests=n.getForFBID(this.$MercuryThreadActions0);this.__dispatcher=j.getForFBID(this.$MercuryThreadActions0);}s.prototype.markRead=function(t,u){this.batchMarkRead([t],u);};s.prototype.batchMarkRead=function(t,u){this.__dispatcher.handleUpdate(this.$MercuryThreadActions1(t,true,u));};s.prototype.markUnread=function(t,u){this.batchMarkUnread([t],u);};s.prototype.batchMarkUnread=function(t,u){this.__dispatcher.handleUpdate(this.$MercuryThreadActions1(t,false,u));};s.prototype.markSeen=function(t,u){this.__dispatcher.handleUpdate(this.__constructClientPayload([t],i.MARK_THREAD_SEEN,m.CLIENT_MARK_THREAD_SEEN,{persistent:u}));};s.prototype.archive=function(t,u){this.batchArchive([t],u);};s.prototype.batchArchive=function(t,u){t.forEach(function(v){this.__serverRequests.changeThreadArchivedStatus(v,true,u);}.bind(this));this.__dispatcher.handleUpdate(this.$MercuryThreadActions2(t,true));};s.prototype.unarchive=function(t,u){this.batchUnarchive([t],u);};s.prototype.batchUnarchive=function(t,u){t.forEach(function(v){this.__serverRequests.changeThreadArchivedStatus(v,false,u);}.bind(this));this.__dispatcher.handleUpdate(this.$MercuryThreadActions2(t,false));};s.prototype.markSpam=function(t,u){this.batchMarkSpam([t],u);};s.prototype.batchMarkSpam=function(t,u){t.forEach(function(v){this.__serverRequests.markThreadSpam(v,u);}.bind(this));this.__dispatcher.handleUpdate(this.$MercuryThreadActions3(t,p.SPAM));};s.prototype.unmarkSpam=function(t,u){this.batchUnmarkSpam([t],u);};s.prototype.batchUnmarkSpam=function(t,u){t.forEach(function(v){this.__serverRequests.unmarkThreadSpam(v,u);}.bind(this));this.__dispatcher.handleUpdate(this.$MercuryThreadActions3(t,p.INBOX));};s.prototype.changeFolder=function(t,u){this.batchChangeFolder([t],u);};s.prototype.batchChangeFolder=function(t,u){t.forEach(function(v){this.__serverRequests.changeThreadFolder(v,u);}.bind(this));this.__dispatcher.handleUpdate(this.$MercuryThreadActions3(t,u));};s.prototype["delete"]=function(t,u){this.batchDelete([t],u);};s.prototype.batchDelete=function(t,u){t.forEach(function(v){this.__serverRequests.deleteThread(v,u);}.bind(this));this.__dispatcher.handleUpdate(this.__constructClientPayload(t,i.DELETE_THREAD,m.CLIENT_DELETE_THREAD));};s.prototype.openNotificationSettings=function(t){this.__serverRequests.openNotificationSettings(t);};s.prototype.unmute=function(t){this.updateMuteSetting(t,0);};s.prototype.updateMuteSetting=function(t,u){this.__serverRequests.changeMutingOnThread(t,u);this.__dispatcher.handleUpdate(this.__constructClientPayload([t],i.CHANGE_MUTE_SETTINGS,m.CLIENT_CHANGE_MUTE_SETTINGS,{mute_settings:u}));};s.prototype.blockMessages=function(t){var u=q.getURIBuilder().setInt('thread_fbid',k.getUserIDFromThreadID(t)).setEnum('location','www_chat_head').getURI();g.send(new h(u));};s.prototype.unblockMessages=function(t){var u=JSON.stringify({reportable_ent_token:k.getUserIDFromThreadID(t),initial_action_name:l.block_messages});new h(new r('/ajax/nfx/messenger_undo_block').addQueryData({story_location:'messenger',context:u})).send();};s.prototype.addParticipants=function(t,u){this.__dispatcher.handleUpdate(this.__constructClientPayload([t],i.ADD_PARTICIPANTS,m.CLIENT_ADD_PARTICIPANTS,{participants:u}));};s.prototype.unpinThread=function(t){this.__serverRequests.unpinThread(t);this.__dispatcher.handleUpdate(this.__constructClientPayload([t],i.UNPIN_THREAD,m.CLIENT_UNPIN_THREAD));};s.prototype.movePendingToInbox=function(t){this.__dispatcher.handleUpdate(this.__constructClientPayload([t],i.MOVE_PENDING_TO_INBOX,m.CLIENT_MOVE_PENDING_TO_INBOX));};s.prototype.$MercuryThreadActions1=function(t,u,v){return this.__constructClientPayload(t,i.CHANGE_READ_STATUS,m.CLIENT_CHANGE_READ_STATUS,{mark_as_read:u,source:v});};s.prototype.$MercuryThreadActions2=function(t,u){return this.__constructClientPayload(t,i.CHANGE_ARCHIVED_STATUS,m.CLIENT_CHANGE_ARCHIVED_STATUS,{archived:u});};s.prototype.$MercuryThreadActions3=function(t,u){return this.__constructClientPayload(t,i.CHANGE_FOLDER,m.CLIENT_CHANGE_FOLDER,{new_folder:u});};s.prototype.__constructClientPayload=function(t,u,v,w){return {actions:t.map(function(x){return Object.assign({action_type:u,action_id:null,thread_id:x},w);}),from_client:true,payload_source:v};};Object.assign(s,o);e.exports=s;},null);
__d("MercuryAttachmentSnippetType",["keyMirror"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h=g({PHOTO:null,GIF:null,VIDEO:null,AUDIO_CLIP:null,STICKER:null,ORION:null,SHARE:null,ERROR:null,MIXED:null});e.exports=h;},null);
__d("FBRTCAvailability",["ChannelConstants","PresenceStatus"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';var i={isCallable:function(j){var k=h.getCapabilities(j),l=g.CAPABILITY_VOIP_INTEROP|g.CAPABILITY_VIDEO;return !!(k&l);}};e.exports=i;},null);
__d("FBRTCCallSummaryUploader",["Bootloader"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h={init:function(){g.loadModules(["Banzai","FBRTCCallSummary","FBRTCCallSummaryStore"],function(i,j,k){var l=k.getInstance();i.subscribe(i.SEND,function(){j.logSavedSummaries(l);});});}};e.exports=h;},null);
__d("FBRTCCallUI",["BanzaiLogger","Cookie","UserAgent","FBRTCCallSummary","FBRTCCallSummaryStore","FBRTCConstants","FBRTCLogger","FBRTCUrlManager","pageID"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();var p=null,q={openAsCaller:function(r,s,t,u){if(!p&&window.rtcCallChildWindow){p=window.rtcCallChildWindow;window.rtcCallChildWindow=null;}if(this._shouldFocusCallWindow(r)){p.focus();return;}if(this._shouldCloseCallWindow())p.close();g.log('VideoCallLoggerConfig',{event:'open_as_caller'});m.getInstance().logCallAction(r,s,m.CallAction.START_CALL,null,t);var v=new j({peerID:r,callID:s,isCaller:true});v.onCallStarted(t);this._open(r,s,true,v,false,u);},openAsCallee:function(r,s,t,u,v){g.log('VideoCallLoggerConfig',{event:'open_as_callee'});this._open(r,s,false,t,u,v);},_shouldFocusCallWindow:function(r){return p&&!p.closed&&p.rtcCallInProgessWith===r;},_shouldCloseCallWindow:function(){return p&&!p.closed&&!p.rtcCallInProgessWith;},_open:function(r,s,t,u,v,w){h.clear('vcpwn');h.clear('vctid');var x=this._windowPosition(),y=['menubar=no','location=no','scrollbars=no','status=no','personalbar=no',x.height,x.width,x.top,x.left].join(',');if(this._isSparkBrowser())y='';u.addExtraInfo(m.Key.INITIATED_BY_PAGE_ID,o);u.onCallEnded(l.CallEndReason.CLIENT_ERROR,false,true,'PopupPending');u.save(k.getInstance());g.log('VideoCallLoggerConfig',{event:'open_popup'});if(!v){p=window.open('','Video Call',y);this._setUri(p,r,s,t,w);}else{m.getInstance().logCallAction(r,s,m.CallAction.OPEN_POPUP);p=window.open(v,'Video Call',y);}if(window.focus)p.focus();},_setUri:function(r,s,t,u,v){n.getCallUri(s,t,u,v,function(w){m.getInstance().logCallAction(s,t,m.CallAction.OPEN_POPUP);r.location=w;},function(){m.getInstance().logCallAction(s,t,m.CallAction.FAILED_GETTING_URI);});},_windowPosition:function(){var r=960,s=540,t,u,v,w;if(screen&&screen.width>1280){r=1280;s=720;}if(window.innerWidth!==(void 0)){u=window.innerWidth;t=window.innerHeight;}else{u=screen.width;t=screen.height;}if(window.screenLeft!==(void 0)){v=window.screenLeft;w=window.screenTop;}else{v=window.screenX;w=window.screenY;}var x=Math.floor(((u/2)-(r/2))+v),y=Math.floor(((t/2)-(s/2))+w);return {height:'height='+s.toString(),width:'width='+r.toString(),top:'top='+y.toString(),left:'left='+x.toString()};},_isSparkBrowser:function(){return i.isBrowser('Chrome < 34')&&i.isBrowser('Chrome > 33');}};e.exports=q;},null);
__d("FBRTCCore",["Bootloader","FBRTCAvailability","FBRTCCallUI","VideoCallSupport","invariant","randomInt"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m=false,n={startOutgoingCall:function(o,p,q){k(!isNaN(parseInt(o,10)));if(m)return;m=true;setTimeout(function(){m=false;},1000);if(j.isWebrtcSupported()){var r=this._generateCallID();i.openAsCaller(o,r,p,q);}else g.loadModules(["FBRTCUnsupportedBrowserMessage"],function(s){s.showForOutgoingCall();});},isAvailableForWebrtcCalling:function(o){return h.isCallable(o);},shouldEnableVideoCalling:function(){return j.isOSSupported();},_generateCallID:function(){return l(0,4294967295);}};e.exports=n;},null);
__d("FBRTCCallabilityActions",["keyMirror"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';var h=g({CALLABILITY_FETCHED:null,CALLABILITY_FETCH_ERROR:null});function i(j){this.$FBRTCCallabilityActions0=j;}i.prototype.callabilityFetched=function(j,k){this.$FBRTCCallabilityActions0.dispatch({type:h.CALLABILITY_FETCHED,userID:j,callability:k});};i.prototype.callabilityFetchError=function(j){this.$FBRTCCallabilityActions0.dispatch({type:h.CALLABILITY_FETCH_ERROR,userID:j});};i.Types=h;e.exports=i;},null);
__d("XRTCCallabilityController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/rtc\/callability\/",{user_id:{type:"Int",required:true}});},null);
__d("FBRTCCallabilityDataManager",["AsyncRequest","FBRTCCallabilityActions","XRTCCallabilityController"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';function j(k){this.$FBRTCCallabilityDataManager0=new h(k);}j.prototype.fetchCallability=function(k){var l=i.getURIBuilder().setInt('user_id',parseInt(k,10)).getURI(),m=this.$FBRTCCallabilityDataManager1.bind(this,k),n=this.$FBRTCCallabilityDataManager2.bind(this,k);new g().setURI(l).setHandler(m).setErrorHandler(n).setAllowCrossPageTransition(true).send();};j.prototype.$FBRTCCallabilityDataManager1=function(k,l){this.$FBRTCCallabilityDataManager0.callabilityFetched(k,l.payload);};j.prototype.$FBRTCCallabilityDataManager2=function(k,l){this.$FBRTCCallabilityDataManager0.callabilityFetchError(k);};e.exports=j;},null);
__d("RTCCallabilityStore",["Cache","FBRTCAvailability","FluxStore","FBRTCCallabilityActions","FBRTCCallabilityDataManager","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';var m=.5,n=5;for(var o in i)if(i.hasOwnProperty(o))q[o]=i[o];var p=i===null?null:i.prototype;q.prototype=Object.create(p);q.prototype.constructor=q;q.__superConstructor__=i;function q(r){i.call(this,r);this.$RTCCallabilityStore0=new k(r);this.$RTCCallabilityStore1=new g();}q.prototype.__onDispatch=function(r){var s=r.type;switch(s){case j.Types.CALLABILITY_FETCHED:var t=r,u=t.userID,v=t.callability;this.$RTCCallabilityStore1.set(u,v.is_callable,null,(v.is_callable?n:m));this.__emitChange();break;case j.Types.CALLABILITY_FETCH_ERROR:this.$RTCCallabilityStore1.set(r.userID,false,null,m);this.__emitChange();break;}};q.prototype.isCallable=function(r){if(h.isCallable(r))return true;if(!this.$RTCCallabilityStore1.has(r)){this.$RTCCallabilityStore0.fetchCallability(r);this.$RTCCallabilityStore1.set(r,false,null,m);}return !!(this.$RTCCallabilityStore1.get(r));};q.prototype.callButtonTooltip=function(r,s){if(this.isCallable(r))return l._("Start a video call with {shortname}",[l.param("shortname",s)]);return l._("{shortname} is currently unavailable for video calling",[l.param("shortname",s)]);};q.prototype.voiceCallButtonTooltip=function(r,s){if(this.isCallable(r))return l._("Start a voice call with {shortname}",[l.param("shortname",s)]);return l._("{shortname} is currently unavailable for voice calling",[l.param("shortname",s)]);};e.exports=q;},null);
__d("ChatAuthorPhotoBlock.react",["MercuryParticipants","React","cx","fbt","formatDate","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m=h,n=m.PropTypes,o=86400000,p=h.createClass({displayName:"ChatAuthorPhotoBlock",propTypes:{authorID:n.string.isRequired,className:n.string,hideName:n.bool,hidePhoto:n.bool,timestamp:n.number},getInitialState:function(){return {author:{id:null,name:'',href:'#',image_src:''}};},componentDidMount:function(){this.updateAuthor(this.props.authorID);},componentWillReceiveProps:function(q){if(q.authorID!=this.state.author.id)this.updateAuthor(q.authorID);},render:function(){return (h.createElement("div",h.__spread({},this.props,{className:l(this.props.className,"_5yt9")}),this.renderAuthorName(),this.renderAuthorPhoto(),this.props.children));},renderAuthorName:function(){if(!this.props.hideName)return (h.createElement("div",{className:"_5ys-",ref:"name"},this.state.author.name));},renderAuthorPhoto:function(){if(!this.props.hidePhoto){var q=null;if(this.props.timestamp){var r=this._getFormat(this.props.timestamp);q=k(new Date(this.props.timestamp),r);}var s=j._("{name} {time}",[j.param("name",this.state.author.name),j.param("time",q)]);return (h.createElement("a",{"aria-label":s,className:"_5ys_","data-hover":"tooltip","data-tooltip-position":"left",href:this.state.author.href||'#',ref:"link"},h.createElement("img",{src:this.state.author.image_src,ref:"image"})));}},updateAuthor:function(q){g.get(q,function(r){this.isMounted()&&this.setState({author:r});}.bind(this));},_getFormat:function(q){if(Date.now()-this.props.timestamp<o){return 'g:ia';}else if((new Date()).getFullYear()===(new Date(q).getFullYear())){return 'M jS, g:ia';}else return 'M j, Y g:ia';}});e.exports=p;},null);
__d("ChatPhotoUploader.react",["Bootloader","Image.react","InlineBlock.react","Link.react","MercuryConfig","Promise","React","SubscriptionsHandler","cx","emptyFunction","fbt","ix","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){b.__markCompiled&&b.__markCompiled();'use strict';var t=m,u=t.PropTypes,v=m.createClass({displayName:"ChatPhotoUploader",propTypes:{actionURI:u.string,allowCrossPage:u.bool,disabled:u.bool,imageClassName:u.string,imagesOnly:u.bool,linkClassName:u.string,onSubmit:u.func,onAllUploadsComplete:u.func,onLastUploadFail:u.func,onLastUploadCancel:u.func,onUploadError:u.func},getDefaultProps:function(){return {actionURI:k.upload_url,allowCrossPage:true,disabled:false,imageClassName:"_509w",imagesOnly:true,linkClassName:'',onSubmit:p,onAllUploadsComplete:p,onLastUploadFail:p,onLastUploadCancel:p};},shouldComponentUpdate:function(w,x){return w.actionURI!=this.props.actionURI||w.disabled!==this.props.disabled;},componentDidUpdate:function(w,x){if(this._uploader)this._uploader.setAllowCrossPage(this.props.allowCrossPage);},componentWillUnmount:function(){if(!this.isUploading()||!this.props.allowCrossPage)this._cleanup();},render:function(){var w=this.props.imagesOnly?q._("Add Photos"):q._("Add Files");return (m.createElement("form",{action:this.props.actionURI,className:"_vzk",title:w,method:"post",onClick:function(x){x.stopPropagation();if(this.props.disabled)x.preventDefault();}.bind(this),ref:"form"},m.createElement("input",{type:"hidden",name:"attach_id",ref:"attachID"}),m.createElement("input",{type:"hidden",name:"images_only",value:this.props.imagesOnly}),m.createElement(i,{onClick:this._bootloadChatAutoSendPhotoUploader,className:"_m _4q60 _3rzn"},m.createElement(j,{className:s("_4q61 _5f0v _509v",this.props.linkClassName)},m.createElement(h,{className:this.props.imageClassName,src:r('/images/chat/chat_camera_icon.png'),alt:q._("Camera")})),m.createElement("input",{disabled:this.props.disabled,type:"file",className:"_n",name:"attachment[]",multiple:"true",accept:this.props.imagesOnly?'image/*':'*',ref:"input",title:w}))));},_handleSubmit:function(w,x){this.props.onSubmit(w,x);},_handleAllUploadsCompleted:function(w,x){this.props.onAllUploadsComplete(w,x);if(!this.isMounted())this._cleanup();},_handleLastUploadFailed:function(w,x){this.props.onLastUploadFail(w,x);if(!this.isMounted())this._cleanup();},_handleLastUploadCanceled:function(w,x){this.props.onLastUploadCancel(w,x);if(!this.isMounted())this._cleanup();},_handleUploadError:function(){this.props.onUploadError();if(!this.isMounted())this._cleanup();},isUploading:function(){return (this._uploader&&this._uploader.isUploading()||this._uploaderPromiseIsResolving);},_bootloadChatAutoSendPhotoUploader:function(){if(!this._uploaderPromise){this._uploaderPromiseIsResolving=true;this._uploaderPromise=new l(function(w){g.loadModules(["ChatAutoSendPhotoUploader"],function(x){this._uploaderPromiseIsResolving=false;this._uploader=new x(m.findDOMNode(this.refs.form),m.findDOMNode(this.refs.input),m.findDOMNode(this.refs.attachID));this._uploader.setAllowCrossPage(this.props.allowCrossPage);this._subscriptions=new n();this._subscriptions.addSubscriptions(this._uploader.subscribe('submit',this._handleSubmit),this._uploader.subscribe('all-uploads-completed',this._handleAllUploadsCompleted),this._uploader.subscribe('last-upload-failed',this._handleLastUploadFailed),this._uploader.subscribe('last-upload-canceled',this._handleLastUploadCanceled),this._uploader.subscribe('file-upload-error',this._handleUploadError));w(this._uploader);}.bind(this));}.bind(this));}return this._uploaderPromise;},uploadFile:function(w){this._bootloadChatAutoSendPhotoUploader().then(function(x){x.uploadFile(w);});},uploadURL:function(w){this._bootloadChatAutoSendPhotoUploader().then(function(x){x.uploadURL(w);});},_cleanup:function(){this._subscriptions&&this._subscriptions.release();this._uploader&&this._uploader.destroy();}});e.exports=v;},null);
__d("StickersDispatcher",["Dispatcher","StickerConstants"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';var i=Object.assign(new g(),{_handleUpdate:function(j,k){var l=Object.assign({payloadSource:j},k);this.dispatch(l);},handleUpdateFromViewActions:function(j){this._handleUpdate(h.PayloadSource.VIEW_ACTION,j);}});e.exports=i;},null);
__d("StickerActions",["BanzaiLogger","StickersDispatcher","keyMirror"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';var j=i({ADD_PACK:null,CLICKED_STICKER_IN_THREAD:null,HIDE_TRAY:null,REMOVE_PACK:null,REPLACE_STICKER_STATE:null,RESET_NUM_NEW_PACKS:null,SELECT_PACK:null,SELECT_STORE_PACK:null,SHOW_TRAY:null,UPDATE_TRAY_DATA:null,TRAY_DATA_READY:null}),k={Types:j,addPack:function(l){h.dispatch({type:j.ADD_PACK,packID:l});},removePack:function(l){h.dispatch({type:j.REMOVE_PACK,packID:l});},selectPack:function(l,m){if(!m)g.log('StickersLoggerConfig',{event:'select_pack',packid:l});h.dispatch({type:j.SELECT_PACK,packID:l});},selectStorePack:function(l){h.dispatch({type:j.SELECT_STORE_PACK,packID:l});},resetNumNewPacks:function(){h.dispatch({type:j.RESET_NUM_NEW_PACKS});},handleStickerClick:function(l,m){h.dispatch({packID:l,threadID:m,type:k.Types.CLICKED_STICKER_IN_THREAD});},showStickerTray:function(l){h.dispatch({type:k.Types.SHOW_TRAY,threadID:l});},hideStickerTray:function(){h.dispatch({type:k.Types.HIDE_TRAY});},updateTrayData:function(){h.dispatch({type:k.Types.UPDATE_TRAY_DATA});},loadedTrayData:function(){h.dispatch({type:k.Types.TRAY_DATA_READY});}};e.exports=k;},null);
__d("ContextualLayerAutoFlipHorizontal",["ContextualLayerAutoFlip"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();for(var h in g)if(g.hasOwnProperty(h))j[h]=g[h];var i=g===null?null:g.prototype;j.prototype=Object.create(i);j.prototype.constructor=j;j.__superConstructor__=g;function j(){"use strict";if(g!==null)g.apply(this,arguments);}j.prototype.getValidPositions=function(k){"use strict";return [k.getPosition()];};e.exports=j;},null);
__d("StickerContextualDialog.react",["ContextualLayerAutoFlipHorizontal","ReactAbstractContextualDialog","ReactLayer","cx"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';var k=47,l=i.createClass(h.createSpec({addedBehaviors:[g],displayName:'StickerXUIContextualDialog',theme:{wrapperClassName:"_53ii",arrowDimensions:{offset:k,length:16}}}));l.WIDTH={NORMAL:312,WIDE:400};e.exports=l;},null);
__d("XStickerPackImagesController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/stickers\/{pack_id}\/images\/",{pack_id:{type:"Int",required:true},sticker_size:{type:"Int",defaultValue:50}});},null);
__d("XStickersAddPackController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/stickers\/addpack\/",{pack_id:{type:"Int"},size:{type:"String"},redirect_uri:{type:"String"},is_promoted:{type:"Bool",defaultValue:false}});},null);
__d("XStickersRemovePackController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/stickers\/removepack\/",{pack_id:{type:"Int"},size:{type:"String"},redirect_uri:{type:"String"}});},null);
__d("XStickerStateInitialDataController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/stickers\/state\/",{});},null);
__d("XStickerStatePackDataController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/stickers\/state\/pack\/",{pack_id:{type:"Int",required:true}});},null);
__d("XStickerStateStoreDataController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/stickers\/state\/store\/",{});},null);
__d("XStickerSearchPromotePackController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/stickers\/search\/promotePack\/",{sticker_id:{type:"Int",required:true}});},null);
__d("XStickerSearchNUXSeenController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/stickers\/searchNUX\/seen\/",{});},null);
__d("XStickerTagDataController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/stickers\/tag\/data\/",{});},null);
__d("XStickerQueryImagesController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/stickers\/query\/images\/",{query:{type:"String",required:true}});},null);
__d("StickerServerRequests",["AsyncRequest","Promise","XStickerPackImagesController","XStickersAddPackController","XStickersRemovePackController","XStickerStateInitialDataController","XStickerStatePackDataController","XStickerStateStoreDataController","XStickerSearchPromotePackController","XStickerSearchNUXSeenController","XStickerTagDataController","XStickerQueryImagesController"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){b.__markCompiled&&b.__markCompiled();'use strict';var s={addPack:function(u,v,w){var x=j.getURIBuilder().setInt('pack_id',u).setBool('is_promoted',v).getURI();new g(x).setHandler(function(y){return w(y.payload);}).send();},removePack:function(u,v){var w=k.getURIBuilder().setInt('pack_id',u).getURI();new g(w).setHandler(function(x){return v(x.payload);}).send();},getStickersForPack:function(u,v){var w=i.getURIBuilder().setInt('pack_id',u).setInt('sticker_size',v).getURI();return new h(function(x,y){return new g().setURI(w).setMethod("POST").setHandler(function(z){return x(z.payload);}).send();});},getStickersForQuery:function(u,v){new g().setURI(r.getURIBuilder().setString('query',u).getURI()).setMethod("POST").setHandler(function(w){return v(w);}).send();},fetchTrayData:function(u){return t(l.getURIBuilder().getURI(),u,true);},fetchStoreData:function(u){return t(n.getURIBuilder().getURI(),u);},fetchPackData:function(u,v){return t(m.getURIBuilder().setInt('pack_id',u).getURI(),v);},fetchTagData:function(u){return t(q.getURIBuilder().getURI(),u,true);},markSeenSearchNUX:function(){new g(p.getURIBuilder().getURI().toString()).send();},promotePackSentFromSearch:function(u,v){var w=o.getURIBuilder().setInt('sticker_id',u).getURI();t(w,v,true);}};function t(u,v,w){return new h(function(x,y){return new g(u).setHandler(function(z){return x(z.getPayload());}).setAllowCrossPageTransition(w).send();}).then(v);}e.exports=s;},null);
__d("StickerImages",["StickerServerRequests"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';var h={},i={},j={},k={getStickerTagsData:function(){return j;},requestStickersForPack:function(l,m,n){if(!l)return;if(!i[l]){i[l]=g.getStickersForPack(l,m);i[l].then(function(o){o.forEach(function(p){return this.cacheSticker(p);}.bind(this));}.bind(this));}i[l].then(function(o){return n(o);});},cacheSticker:function(l){h[l.id]=l;},getSticker:function(l){return h[l];}};e.exports=k;},null);
__d("StickerState",["ImmutableObject","StickerConfig","PresenceState","StickerActions","StickerConstants","StickerImages","StickerServerRequests"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();'use strict';var n={},o,p,q,r=null,s=0,t={},u=[],v=[],w=[],x=null,y=null,z=i.get();if(z)x=z.tray_pack_id;var aa=h.ShowStickerReplyNUX,ba=h.ShowStickerSearchNUX,ca={onTrayDataReady:function(ea){if(!p)p=m.fetchTrayData(function(fa){u=fa.packs.map(function(ga){return da(ga);});q=fa.mru;s=fa.num_new_packs;w=fa.tags;});p.then(function(){ea();j.loadedTrayData();});},onStoreDataReady:function(ea){if(!o)o=m.fetchStoreData(function(fa){v=fa.packs.map(function(ga){return da(ga);});});o.then(ea);},onPackDataReady:function(ea,fa){if(!n[ea])n[ea]=m.fetchPackData(ea,function(ga){da(ga);});n[ea].then(fa);},getPacksInTrayAllInterfaces:function(){return u;},getPacksInTray:function(){var ea=[],fa;for(var ga=0;ga<u.length;ga++)if(u[ga].id==k.EMOTICON_PACK_ID){fa=u[ga];}else if(u[ga].isMessengerCapable)ea.push(u[ga]);fa&&ea.push(fa);return ea;},getPacksInCommentsTray:function(){var ea=[],fa=[],ga;for(var ha=0;ha<u.length;ha++)if(u[ha].id==k.EMOTICON_PACK_ID){ga=u[ha];}else if(u[ha].isCommentsCapable){ea.push(u[ha]);}else fa.push(u[ha]);var ia=ea.concat(fa);if(ga)ia.push(ga);return ia;},getPacksInComposerTray:function(){return u.filter(function(ea){return ea.isComposerCapable;});},getPackIDsInTray:function(){return u.map(function(ea){return ea.id;});},getPacksInStore:function(){return v.filter(function(ea){return ea.isMessengerCapable;});},getComposerPacksInStore:function(){return v.filter(function(ea){return ea.isComposerCapable;});},getPack:function(ea){return t[ea];},getNumNewPacks:function(){return s;},getFeaturedTags:function(){return w;},resetNumNewPacks:function(){s=0;},addMRUPack:function(){if(q){this._addPackToTray(q);q=null;}},addPack:function(ea){var fa=false;if(t[ea])fa=t[ea].isPromoted;m.addPack(ea,fa,function(ga){this._addPackToTray(ga);}.bind(this));},removePack:function(ea){m.removePack(ea,function(fa){u=u.filter(function(ga){return ga.id!==fa;});t[fa]=g.set(t[fa],{isInTray:false});v=v.map(function(ga){return t[ga.id];});j.updateTrayData();}.bind(this));},setTrayPackID:function(ea){x=ea;i.doSync();},getTrayPackID:function(ea){if(ea&&ea.length>0&&!ea.some(function(fa){return fa.id===x;})){return ea[0].id;}else return x;},setStorePackID:function(ea){y=ea;},getStorePackID:function(){return y;},shouldShowStickerReplyNUX:function(){return aa;},clearShowStickerReplyNUX:function(){aa=false;},shouldShowStickerSearchNUX:function(){return ba;},clearShowStickerSearchNUX:function(){m.markSeenSearchNUX();ba=false;},_addPackToTray:function(ea,fa){da(ea);t[ea.id]=g.set(t[ea.id],{isPurchased:!fa,isInTray:true});var ga=u.filter(function(ia){return ia.id===ea.id;}).length>0;if(!ga){var ha;if(!fa){ha=u.filter(function(ia){return ia.isMRU||ia.isSearch;}).length;}else ha=u.filter(function(ia){return ia.id!==k.EMOTICON_PACK_ID;}).length;u.splice(ha,0,t[ea.id]);}v=v.map(function(ia){return t[ia.id];});j.updateTrayData();},_addRecentlyUsedSticker:function(ea){for(var fa=0;fa<r.length;++fa)if(r[fa].id===ea.id){r.splice(fa,1);break;}r.unshift(ea);},getMRUStickerPack:function(ea){if(!r)r=ea;return r;},updateRecentlyUsed:function(ea){if(!r){this.addMRUPack();return;}this._addRecentlyUsedSticker(l.getSticker(ea));},promotePackSentFromSearch:function(ea){m.promotePackSentFromSearch(ea,function(fa){return fa&&this._addPackToTray(fa,true);}.bind(this));}};i.registerStateStorer(function(ea){ea.tray_pack_id=x;});function da(ea){var fa=ea.id;if(!t[fa]){return (t[fa]=new g(ea));}else return (t[fa]=g.set(t[fa],ea));}e.exports=ca;},null);
__d("AbstractDialogFitHeight",["CSS","DOM","Event","Style","SubscriptionsHandler","Vector","csx","cx","throttle"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();var p=450,q=100,r=67,s=67;function t(u){"use strict";this.$AbstractDialogFitHeight0=u;}t.prototype.enable=function(){"use strict";this.$AbstractDialogFitHeight1=new k();this.$AbstractDialogFitHeight1.addSubscriptions(this.$AbstractDialogFitHeight0.subscribe('beforeshow',this.$AbstractDialogFitHeight2.bind(this)),i.listen(window,'resize',o(this.$AbstractDialogFitHeight2.bind(this))));this.$AbstractDialogFitHeight3=h.find(this.$AbstractDialogFitHeight0.getRoot(),"._4-i2");g.addClass(this.$AbstractDialogFitHeight3,"_5pfh");this.$AbstractDialogFitHeight4=q;if(h.scry(this.$AbstractDialogFitHeight0.getRoot(),"._4-i0").length)this.$AbstractDialogFitHeight4+=r;if(h.scry(this.$AbstractDialogFitHeight0.getRoot(),"._5a8u").length)this.$AbstractDialogFitHeight4+=s;};t.prototype.disable=function(){"use strict";this.$AbstractDialogFitHeight1.release();this.$AbstractDialogFitHeight1=null;g.removeClass(this.$AbstractDialogFitHeight3,"_5pfh");};t.prototype.$AbstractDialogFitHeight2=function(){"use strict";var u=l.getViewportDimensions().y,v=u-this.$AbstractDialogFitHeight4;j.set(this.$AbstractDialogFitHeight3,this.getHeightProperty(),Math.max(p,v)+'px');this.$AbstractDialogFitHeight0.updatePosition();};e.exports=t;},null);
__d("DialogFitHeight",["AbstractDialogFitHeight"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();for(var h in g)if(g.hasOwnProperty(h))j[h]=g[h];var i=g===null?null:g.prototype;j.prototype=Object.create(i);j.prototype.constructor=j;j.__superConstructor__=g;function j(){"use strict";if(g!==null)g.apply(this,arguments);}j.prototype.getHeightProperty=function(){"use strict";return 'height';};e.exports=j;},null);
__d("StickerStoreController",["Bootloader","DialogFitHeight","DOM","LayerAutoFocus","LayerFadeOnHide","LayerHideOnEscape","React","ReactComponentRenderer","StickerActions","XUIDialog.react","XUIDialogBody.react","XUISpinner.react","cx","requestAnimationFrame"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){b.__markCompiled&&b.__markCompiled();'use strict';var u=m,v=u.PropTypes,w=688,x=null,y=m.createClass({displayName:"StoreLayer",propTypes:{isComposer:v.bool,shown:v.bool},getDefaultProps:function(){return {isComposer:false,shown:false};},getInitialState:function(){return {renderStore:function(){return (m.createElement("div",{className:"_5r5e"},m.createElement(r,{background:"light",size:"large"})));}};},componentDidMount:function(){g.loadModules(["StickerStore.react"],function(ba){this.setState({renderStore:function(){return (m.createElement(ba,{isComposer:this.props.isComposer,shown:this.props.shown}));}.bind(this)});}.bind(this));},_onToggle:function(ba){t(this.setProps.bind(this,{shown:ba}));},render:function(){return (m.createElement(p,{behaviors:{DialogFitHeight:h,LayerAutoFocus:j,LayerFadeOnHide:k,LayerHideOnEscape:l},onToggle:this._onToggle,shown:this.props.shown,width:w},m.createElement(q,{className:"_5rq- autofocus"},this.state.renderStore())));}});function z(ba){var ca=i.create('div');i.appendContent(document.body,ca);x=new n(y,ca);x.setProps({isComposer:ba,shown:true});}var aa={showStore:function(ba,ca){if(!x){z(!!ca);}else x.setProps({shown:true,isComposer:!!ca});o.selectStorePack(ba);}};e.exports=aa;},null);
__d("StickerStateStore",["FluxStore","StickerActions","StickerInterfaces","StickersDispatcher","StickerState","StickerStoreController","arrayContains"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();'use strict';for(var n in g)if(g.hasOwnProperty(n))p[n]=g[n];var o=g===null?null:g.prototype;p.prototype=Object.create(o);p.prototype.constructor=p;p.__superConstructor__=g;function p(){g.call(this,j);this.$StickerStateStore0=false;}p.prototype.getState=function(q){var r=null;if(q===i.COMPOSER){r=k.getPacksInComposerTray();}else if(q===i.COMMENTS){r=k.getPacksInCommentsTray();}else r=k.getPacksInTray();return {showTray:this.$StickerStateStore1,storePackID:k.getStorePackID(),packID:k.getTrayPackID(r),trayPacks:r,numNewPacks:k.getNumNewPacks(),threadID:this.$StickerStateStore2,trayDataReady:this.$StickerStateStore0};};p.prototype.isPackInTray=function(q){var r=k.getPacksInTrayAllInterfaces();return r.some(function(s){return s.id===q;});};p.prototype.__onDispatch=function(q){var r=h.Types;switch(q.type){case r.REPLACE_STICKER_STATE:this.$StickerStateStore1=!!q.showTray;break;case r.SHOW_TRAY:this.$StickerStateStore1=true;this.$StickerStateStore2=q.threadID;break;case r.HIDE_TRAY:this.$StickerStateStore1=false;break;case r.CLICKED_STICKER_IN_THREAD:k.onTrayDataReady(function(){if(m(k.getPackIDsInTray(),q.packID)){k.setTrayPackID(q.packID);this.$StickerStateStore1=true;this.$StickerStateStore2=q.threadID;}else{this.$StickerStateStore1=false;l.showStore(q.packID);}}.bind(this));break;case r.SELECT_PACK:k.setTrayPackID(q.packID);break;case r.SELECT_STORE_PACK:k.setStorePackID(q.packID);break;case r.RESET_NUM_NEW_PACKS:k.resetNumNewPacks();break;case r.ADD_PACK:k.addPack(q.packID);break;case r.REMOVE_PACK:k.removePack(q.packID);break;case r.UPDATE_TRAY_DATA:break;case r.TRAY_DATA_READY:this.$StickerStateStore0=true;break;}this.__emitChange();};e.exports=new p();},null);
__d("ChatStickerButton.react",["BootloadedComponent.react","Link.react","JSResource","ReactComponentWithPureRenderMixin","React","ReactLayeredComponentMixin","StickerActions","StickerContextualDialog.react","StickerStateStore","StoreAndPropBasedStateMixin","XUISpinner.react","cx","emptyFunction","fbt","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){b.__markCompiled&&b.__markCompiled();'use strict';var v=k,w=v.PropTypes,x=278,y=k.createClass({displayName:"ChatStickerButton",_clickGuard:(false),mixins:[j,l,p(o)],propTypes:{className:w.string,ContextualDialogClass:w.func.isRequired,disabled:w.bool,flyoutClassName:w.string,flyoutWidth:w.number,onStickerSelect:w.func.isRequired,onEmoticonSelect:w.func.isRequired,onFlyoutShown:w.func,onFlyoutHidden:w.func,threaadID:w.string},statics:{calculateState:function(z){var aa=o.getState();return {shown:aa.showTray&&z.threadID===aa.threadID};}},getDefaultProps:function(){return {ContextualDialogClass:n,disabled:false,flyoutWidth:x,onStickerSelect:s,onEmoticonSelect:s};},componentWillUnmount:function(){if(this.state.shown)this._hideFlyout();},render:function(){return (k.createElement(h,{className:u(this.props.className,((this.state.shown?"open":''))),onClick:this.showFlyout,onMouseDown:this._prepareForClick,title:t._("Choose a sticker or emoticon"),ref:"link"},k.createElement("i",{className:"_4l9x"})));},renderLayers:function(){var z=this.props.ContextualDialogClass;return {contextualDialog:k.createElement(z,{alignment:this.props.flyoutAlignment,className:"_5e-r",contextRef:function(){return this.refs.link;}.bind(this),onBlur:this._hideFlyout,position:"above",shown:this.state.shown,width:this.props.flyoutWidth},k.createElement(g,{bootloadPlaceholder:k.createElement("div",{style:{padding:'30px',textAlign:'center'}},k.createElement(q,{size:"large"})),bootloadLoader:i('StickersFlyout.react'),className:this.props.flyoutClassName,onShown:function(aa){if(this.props.onFlyoutShown)this.props.onFlyoutShown(aa);}.bind(this),onHidden:function(){if(this.props.onFlyoutHidden)this.props.onFlyoutHidden();}.bind(this),onEscKeyDown:this._hideFlyout,onStickerSelect:this._handleStickerSelected,onEmoticonSelect:this._handleEmoticonSelected,shown:this.state.shown}))};},_prepareForClick:function(){this._clickGuard=this.state.shown;},showFlyout:function(z){z&&z.stopPropagation();if(this._clickGuard||this.props.disabled){this._clickGuard=false;return;}m.showStickerTray(this.props.threadID);},_hideFlyout:function(){m.hideStickerTray();},_handleStickerSelected:function(z){this.props.onStickerSelect(z);},_handleEmoticonSelected:function(z){this._hideFlyout();this.props.onEmoticonSelect(z);}});e.exports=y;},null);
__d("MercuryTypingAnimation.react",["React","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';var j=g,k=j.PropTypes,l=g.createClass({displayName:"MercuryTypingAnimation",propTypes:{color:k.oneOf(['light','dark']),noAnimation:k.bool},getDefaultProps:function(){return {color:'dark',noAnimation:false};},render:function(){var m=(("_4a0v")+(this.props.color==='light'?' '+"_4a0w":'')+(this.props.color==='dark'?' '+"_4a0x":'')+(this.props.noAnimation?' '+"_374p":''));return (g.createElement("div",{className:i(this.props.className,m)},g.createElement("div",{className:"_4b0g"},g.createElement("div",{className:"_5pd7"}),g.createElement("div",{className:"_5pd7"}),g.createElement("div",{className:"_5pd7"}))));}});e.exports=l;},null);
__d("ChatTypingIndicator.react",["ChatAuthorPhotoBlock.react","ChatConfig","MercuryParticipants","MercuryTypingAnimation.react","ReactComponentWithPureRenderMixin","React","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();var o=l,p=o.PropTypes,q=l.createClass({displayName:"ChatTypingIndicator",mixins:[k],propTypes:{userID:p.string,showName:p.bool},render:function(){var r=this.props,s=r.userID,t=r.showName;if(h.get('webmessenger_chat_tab_redesign'))return (l.createElement("div",{className:"_4tdt"},this._renderPhoto(s),l.createElement("div",{className:(("_5wd4")+(' '+"_1nc7")+(' '+"_2cnu")+(t?' '+"_5ysy":''))},l.createElement("div",{className:"_5wd9"},l.createElement("div",{className:"_5w1r _5wdf"},l.createElement(j,{className:"_5x7x",noAnimation:!h.get('chat_react_typing_animation'),ref:"bubble"}))))));return (l.createElement(g,{authorID:s,className:(("_5wd4")+(' '+"_1nc7")+(t?' '+"_5ysy":'')),hideName:!t},l.createElement("div",{className:"_5wd9"},l.createElement(j,{className:"_3e2s",noAnimation:!h.get('chat_react_typing_animation'),ref:"bubble"}))));},getBubble:function(){return this.refs.bubble;},_renderPhoto:function(r){var s=i.getNow(r),t=n._("{name}",[n.param("name",s.name)]);return (l.createElement("a",{"aria-label":t,className:"_4tdw","data-hover":"tooltip","data-tooltip-position":"left",href:s.href||'#',ref:"link"},l.createElement("img",{src:s.image_src,ref:"image"})));}});e.exports=q;},null);
__d("MercuryViewer",["CurrentUser","MercuryAssert"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';var i='fbid:'+g.getID(),j={getID:function(){return i;},isViewer:function(k){h.isParticipantID(k);return k===i;}};e.exports=j;},null);
__d("MercuryTypingReceiver",["Arbiter","ChannelConstants","FBID","MercuryActionType","MercuryIDs","MercuryPayloadSource","MercuryDispatcher","MercurySingletonMixin","MercuryViewer","TypingStates","isEmpty","mixInEventEmitter","setTimeoutAcrossTransitions","MercuryThreadIDMap"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){b.__markCompiled&&b.__markCompiled();var t=b('MercuryThreadIDMap').get(),u=30000;function v(w){"use strict";this.$MercuryTypingReceiver0=null;this.$MercuryTypingReceiver1={};this.$MercuryTypingReceiver2=m.getForFBID(w);this.$MercuryTypingReceiver2.subscribe('update-typing-state',function(y,z){var aa=z.payload_source;if(aa!=l.CLIENT_CHANNEL_MESSAGE)return;var ba=z.actions;if(!ba||!ba.length)return;var ca=j.USER_GENERATED_MESSAGE;ba.forEach(function(da){if(da.action_type==ca&&da.author!=o.getID())this.$MercuryTypingReceiver4(da.thread_id,da.author);}.bind(this));}.bind(this));var x;if(i.isUser(w)){x=[h.getArbiterType('typ'),h.getArbiterType('ttyp')];}else x=[h.getArbiterType('page_typing')];g.subscribe(x,function(y,z){var aa=z.obj,ba=this.$MercuryTypingReceiver5(aa);if(ba){var ca=k.getParticipantIDFromUserID(aa.from);if(aa.st==p.TYPING){this.$MercuryTypingReceiver1[ba]=this.$MercuryTypingReceiver1[ba]||{};var da=this.$MercuryTypingReceiver1[ba][ca];this.$MercuryTypingReceiver1[ba][ca]=Date.now();if(!this.$MercuryTypingReceiver0)this.$MercuryTypingReceiver0=s(function(){this.$MercuryTypingReceiver6();}.bind(this),3000);!da&&this.$MercuryTypingReceiver7(ba);}else if(aa.st==p.INACTIVE)this.$MercuryTypingReceiver4(ba,ca);}}.bind(this));}v.prototype.$MercuryTypingReceiver8=function(w){"use strict";var x=this.$MercuryTypingReceiver1[w]||{},y=Object.keys(x);y.sort(function(z,aa){return x[z]-x[aa];});return y;};v.prototype.$MercuryTypingReceiver6=function(){"use strict";this.$MercuryTypingReceiver0=null;var w=Date.now(),x={},y=false;for(var z in this.$MercuryTypingReceiver1){var aa=false;for(var ba in this.$MercuryTypingReceiver1[z]||{})if(this.$MercuryTypingReceiver1[z][ba]<w-u){delete this.$MercuryTypingReceiver1[z][ba];aa=true;}else y=true;if(aa)x[z]=this.$MercuryTypingReceiver8(z);}if(!q(x))this.$MercuryTypingReceiver9(x);if(y)this.$MercuryTypingReceiver0=s(function(){this.$MercuryTypingReceiver6();}.bind(this),3000);};v.prototype.$MercuryTypingReceiver4=function(w,x){"use strict";if(w in this.$MercuryTypingReceiver1)if(x in this.$MercuryTypingReceiver1[w]){delete this.$MercuryTypingReceiver1[w][x];this.$MercuryTypingReceiver7(w);}};v.prototype.$MercuryTypingReceiver9=function(w){"use strict";this.releaseHeldEventType('state-changed');this.emitAndHold('state-changed',w);};v.prototype.$MercuryTypingReceiver7=function(w){"use strict";var x={};x[w]=this.$MercuryTypingReceiver8(w);this.$MercuryTypingReceiver9(x);};v.prototype.$MercuryTypingReceiver5=function(w){"use strict";if(w.thread_fbid)return t.getClientIDFromFBIDNow(w.thread_fbid);if(w.type==='typ'||w.type==='page_typing')return k.getThreadIDFromUserID(w.from);return null;};r(v,{'state-changed':true});Object.assign(v,n);e.exports=v;},null);
__d("ChatTypingIndicators.react",["ChatTypingIndicator.react","DOM","MercuryIDs","MercuryThreadInformer","MercuryTypingReceiver","MercuryParticipants","React","SubscriptionsHandler","TooltipData","createObjectFrom","emptyFunction","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){b.__markCompiled&&b.__markCompiled();var s=m,t=s.PropTypes,u=m.createClass({displayName:"ChatTypingIndicators",propTypes:{indicatorClass:t.func,indicatorsWillShow:t.func,indicatorsDidShow:t.func,rootClassName:t.string,threadID:t.string.isRequired,viewer:t.string.isRequired},getDefaultProps:function(){return {indicatorClass:g,indicatorsWillShow:q,indicatorsDidShow:q};},getInitialState:function(){return {typingUserIDs:[]};},componentDidMount:function(){var v=j.getForFBID(this.props.viewer),w=k.getForFBID(this.props.viewer);this._subscriptions=new n();this._subscriptions.addSubscriptions(w.addRetroactiveListener('state-changed',this.typingStateChanged),v.subscribe('messages-received',this.messagesReceived));},componentWillReceiveProps:function(v){if(v.threadID!=this.props.threadID)this.setState({typingUserIDs:[]});},componentWillUpdate:function(v,w){if(w.typingUserIDs.length>0)this.props.indicatorsWillShow();},componentDidUpdate:function(){if(this.state.typingUserIDs.length>0)this.props.indicatorsDidShow();l.getMulti(this.state.typingUserIDs,function(v){if(this.isMounted())this.state.typingUserIDs.forEach(function(w){var x=v[w],y=this.refs[w].getBubble();if(y)o.set(m.findDOMNode(y),this.renderTooltip(x.short_name),'above','left');}.bind(this));}.bind(this));},componentWillUnmount:function(){this._subscriptions.release();},render:function(){var v=i.isGroupChat(this.props.threadID);return (m.createElement("div",{className:this.props.rootClassName},this.state.typingUserIDs.map(function(w){return this._renderTypingIndicator(w,!!v);}.bind(this))));},_renderTypingIndicator:function(v,w){var x=this.props.indicatorClass;return (m.createElement(x,{key:v,ref:v,showName:w,userID:v}));},renderTooltip:function(v){var w=h.create('span');m.render(m.createElement("span",null,r._("{name} is typing...",[r.param("name",v)])),w);return w;},typingStateChanged:function(v){if(this.props.threadID in v)this.setState({typingUserIDs:v[this.props.threadID].slice().sort()});},messagesReceived:function(v,w){if(this.props.threadID in w){var x=w[this.props.threadID],y=p(x.map(function(z){return z.author;}));this.setState({typingUserIDs:this.state.typingUserIDs.filter(function(z){return !y[z];}).sort()});}}});e.exports=u;},null);
__d("MercuryShareAttachmentReactShape",["React"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';var h=g,i=h.PropTypes,j=i.shape({share_id:i.string,description:i.string,media:i.shape({image:i.string,image_size:i.shape({height:i.number,width:i.number}),duration:i.number,playable:i.bool,source:i.string}),source:i.string,style_list:i.arrayOf(i.string),subattachments:i.array,target:i.object,title:i.string,properties:i.object,uri:i.string}).isRequired;e.exports=j;},null);
__d("MNCommerceAttachmentUtils",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();'use strict';var g={shouldRenderMap:function(h,i){return (!!h&&h.latitude&&h.longitude&&!!i);},getDestinationAddressString:function(h){if(!h)return null;var i=h.street_1;if(!!h.city)i=i+' '+h.city+',';if(!!h.state)i=i+' '+h.state;return i;}};e.exports=g;},null);
__d("MercuryFallbackShareAttachmentSnippet.react",["Image.react","React","cx","fbt","ix"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l=h,m=l.PropTypes,n=h.createClass({displayName:"MercuryFallbackShareAttachmentSnippet",propTypes:{isViewerSender:m.bool,senderName:m.string},render:function(){var o;if(this.props.isViewerSender){o=(j._("You shared a link."));}else o=(j._("{sender name} shared a link.",[j.param("sender name",this.props.senderName)]));return (h.createElement("span",{className:"uiIconText _3l6h"},h.createElement(g,{src:k('/images/messaging/docs/generic.png')}),o));}});e.exports=n;},null);
__d("MercuryAttachmentSnippetRenderer",["MercuryAttachmentSnippetType","MercuryAttachmentType","MercuryAudioType","MercuryConstants","fbt"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l={getAttachmentSnippetType:function(m){if(this._hasOnlyPhotos(m))return g.PHOTO;if(this._hasOnlyAnimatedImages(m))return g.GIF;if(this._hasOnlyVideo(m))return g.VIDEO;if(this._hasAudioClip(m))return g.AUDIO_CLIP;if(this._hasSticker(m))return g.STICKER;if(this._hasOrion(m))return g.ORION;if(this._hasShare(m))return g.SHARE;if(this._hasError(m))return g.ERROR;return g.MIXED;},renderAttachmentSnippetText:function(m,n,o,p){switch(m){case g.PHOTO:return this._renderPhotoAttachmentSnippetText(n,o,this._getPhotoAttachments(p));case g.GIF:return this._renderAnimatedImagesAttachmentSnippetText(n,o,this._getAnimatedImageAttachments(p));case g.VIDEO:return n?k._("You sent a video."):k._("{sender name} sent a video.",[k.param("sender name",o)]);case g.AUDIO_CLIP:return n?k._("You sent a voice message."):k._("{name} sent a voice message.",[k.param("name",o)]);case g.STICKER:return n?k._("You sent a sticker."):k._("{name} sent a sticker.",[k.param("name",o)]);case g.ORION:if(p&&p[0]&&p[0].metadata)return this.renderOrionSnippetText(n,o,p[0].metadata);break;case g.SHARE:return n?k._("You shared a link."):k._("{sender name} shared a link.",[k.param("sender name",o)]);case g.ERROR:return n?k._("You sent an attachment."):k._("{sender name} sent an attachment.",[k.param("sender name",o)]);default:return '';}},_hasOnlyPhotos:function(m){return this._getPhotoAttachments(m).length===m.length;},_hasOnlyAnimatedImages:function(m){return this._getAnimatedImageAttachments(m).length===m.length;},_hasOnlyVideo:function(m){return (m.length===1&&m[0].attach_type===h.VIDEO);},_hasAudioClip:function(m){var n=m[0].metadata&&m[0].metadata.type;return (m.length===1&&(n===i.AudioClip||n===i.VoiceMessageWithTranscript));},_hasSticker:function(m){return (m.length===1&&m[0].attach_type===h.STICKER);},_hasOrion:function(m){return this._hasSingleAttachmentOfShareDataType(m,j.MercurySupportedShareType.FB_ORION);},_hasSingleAttachmentOfShareDataType:function(m,n){return (m.length===1&&m[0].share_data_type===n);},_hasShare:function(m){return (m.length===1&&m[0].attach_type===h.SHARE);},_hasError:function(m){return (m.length===1&&m[0].attach_type===h.ERROR);},_getPhotoAttachments:function(m){if(!m)return [];return m.filter(function(n){return n.attach_type===h.PHOTO;});},_getAnimatedImageAttachments:function(m){if(!m)return [];return m.filter(function(n){return n.attach_type===h.ANIMATED_IMAGE;});},_renderPhotoAttachmentSnippetText:function(m,n,o){if(o.length===1){if(m){return (k._("You sent a photo."));}else return (k._("{name} sent a photo.",[k.param("name",n)]));}else if(m){return (k._({"*":"You sent {num_photos} photos."},[k.param("num_photos",o.length,[0])]));}else return (k._({"*":"{name} sent {num_photos} photos."},[k.param("name",n),k.param("num_photos",o.length,[0])]));},_renderAnimatedImagesAttachmentSnippetText:function(m,n,o){if(o.length===1){if(m){return (k._("You sent a GIF."));}else return (k._("{name} sent a GIF.",[k.param("name",n)]));}else if(m){return (k._("You sent {num_animated_images} GIFs.",[k.param("num_animated_images",o.length)]));}else return (k._("{name} sent {num_animated_images} GIFs.",[k.param("name",n),k.param("num_animated_images",o.length)]));},renderOrionSnippetText:function(m,n,o,p){if(m){return (k._("You sent {currency}{amount}.",[k.param("currency",o),k.param("amount",p)]));}else return (k._("{name} sent you {currency}{amount}.",[k.param("name",n),k.param("currency",o),k.param("amount",p)]));}};e.exports=l;},null);
__d("P2PMercuryAttachmentSnippet.react",["CurrentUser","Image.react","MercuryAttachmentSnippetRenderer","React","cx","ix"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';var m=j,n=m.PropTypes,o=j.createClass({displayName:"P2PMercuryAttachment",propTypes:{sender:n.object,receiver:n.object,amount:n.string,currency:n.string},getDefaultProps:function(){return {sender:{},receiver:{}};},render:function(){var p=i.renderOrionSnippetText(g.getID()===this.props.sender.id,this.props.sender.name,this.props.currency,this.props.amount);return (j.createElement("span",{className:"uiIconText _3l6h _3_io"},j.createElement(h,{height:12,src:l('/images/p2p/attachment-snippet-icon.png'),width:12}),p));}});e.exports=o;},null);
__d("P2PMercuryShareAttachmentSnippet.react",["MercuryShareAttachmentReactShape","P2PMercuryAttachmentSnippet.react","React"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';var j=i.createClass({displayName:"P2PMercuryShareAttachmentSnippet",propTypes:{attachment:g},render:function(){var k=this.props.attachment?this.props.attachment.target:{};return (i.createElement(h,i.__spread({},k)));}});e.exports=j;},null);
__d("MessengerMomentsAppSnippet.react",["Image.react","MercuryShareAttachmentReactShape","React","cx","fbt","ix"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';var m=i,n=m.PropTypes,o=i.createClass({displayName:"MessengerMomentsAppSnippet",propTypes:{attachment:h,isSenderViewer:n.bool,senderName:n.string},render:function(){var p=this.props.attachment;if(!p||!p.target)return null;var q,r=p.target.photo_count;if(this.props.isViewerSender){if(r==1){q=(k._("You synced 1 photo."));}else q=(k._("You synced {photo_count} photos.",[k.param("photo_count",r)]));}else if(r==1){q=(k._("{sender name} synced 1 photo.",[k.param("sender name",this.props.senderName)]));}else q=(k._("{sender name} synced {photo_count} photos.",[k.param("sender name",this.props.senderName),k.param("photo_count",r)]));return (i.createElement("span",{className:"uiIconText _3l6h"},i.createElement(g,{src:l('/images/messaging/docs/generic.png')}),q));}});e.exports=o;},null);
__d("MercuryPhotoShareSnippet.react",["Image.react","React","cx","fbt","ix"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l=h,m=l.PropTypes,n=h.createClass({displayName:"MercuryPhotoShareSnippet",propTypes:{isViewerSender:m.bool,senderName:m.string},render:function(){var o=this.props.isViewerSender?j._("You sent a photo."):j._("{sender name} sent a photo.",[j.param("sender name",this.props.senderName)]);return (h.createElement("span",{className:"uiIconText _3l6h"},h.createElement(g,{src:k('/images/icons/photo.gif')}),o));}});e.exports=n;},null);
__d("MercuryVideoShareSnippet.react",["Image.react","React","cx","fbt","ix"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l=h,m=l.PropTypes,n=h.createClass({displayName:"MercuryVideoShareSnippet",propTypes:{isViewerSender:m.bool,senderName:m.string},render:function(){var o=this.props.isViewerSender?j._("You sent a video."):j._("{sender name} sent a video.",[j.param("sender name",this.props.senderName)]);return (h.createElement("span",{className:"uiIconText _3l6h"},h.createElement(g,{src:k('/images/icons/video.gif')}),o));}});e.exports=n;},null);
__d("MercuryMessageLocationShareAttachmentSnippet.react",["Image.react","React","cx","fbt","ix"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l=h,m=l.PropTypes,n=h.createClass({displayName:"MercuryMessageLocationShareAttachmentSnippet",propTypes:{isViewerSender:m.bool,senderName:m.string},render:function(){var o;if(this.props.isViewerSender){o=(j._("You sent a location."));}else o=(j._("{sender name} sent a location.",[j.param("sender name",this.props.senderName)]));return (h.createElement("span",{className:"uiIconText _3l6h"},h.createElement(g,{src:k('/images/messaging/location/location.png')}),o));}});e.exports=n;},null);
__d("MercuryAnimatedShareSnippet.react",["Image.react","React","cx","fbt","ix"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l=h,m=l.PropTypes,n=h.createClass({displayName:"MercuryAnimatedShareSnippet",propTypes:{isViewerSender:m.bool,senderName:m.string},render:function(){var o=this.props.isViewerSender?j._("You sent a GIF."):j._("{sender name} sent a GIF.",[j.param("sender name",this.props.senderName)]);return (h.createElement("span",{className:"uiIconText _3l6h"},h.createElement(g,{src:k('/images/icons/photo.gif')}),o));}});e.exports=n;},null);
__d("MercuryShareStyleMap",["JSResource","Map","MercuryConfig","MercuryShareAttachmentRenderLocations","MNCommerceAttachmentUtils","StoryAttachmentStyle","cx","emptyFunction","MercuryFallbackShareAttachmentSnippet.react","P2PMercuryShareAttachmentSnippet.react","MessengerMomentsAppSnippet.react","MercuryPhotoShareSnippet.react","MercuryVideoShareSnippet.react","MercuryMessageLocationShareAttachmentSnippet.react","MercuryAnimatedShareSnippet.react"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();'use strict';var o=new h();o.set(l.FALLBACK,{componentName:'MercuryFallbackShareAttachment.react',componentLoader:g('MercuryFallbackShareAttachment.react'),getSnippetComponent:function(){return b('MercuryFallbackShareAttachmentSnippet.react');},cx:new h([[j.MESSENGER,"_5i_d"]]),requiresNoBubbleTail:function(q,r){return q.share.media.image&&r;}});o.set(l.EVENT,{componentName:'MercuryEventShareAttachment.react',componentLoader:g('MercuryEventShareAttachment.react'),getSnippetComponent:function(){return b('MercuryFallbackShareAttachmentSnippet.react');}});o.set(l.ORION,{componentName:'P2PMercuryShareAttachment.react',componentLoader:g('P2PMercuryShareAttachment.react'),getSnippetComponent:function(){return b('P2PMercuryShareAttachmentSnippet.react');},cx:new h([[j.MESSENGER,"_5i_d _3djc"]])});if(i.WWWMessengerCommerceGK){o.set(l.RETAIL_RECEIPT,{componentName:'MNCommerceReceiptMercuryShareAttachment.react',componentLoader:g('MNCommerceReceiptMercuryShareAttachment.react'),cx:new h([[j.MESSENGER,"_5i_d _205d"]])});o.set(l.RETAIL_CANCELLATION,{componentName:'MNCommerceCancelationMercuryShareAttachment.react',componentLoader:g('MNCommerceCancelationMercuryShareAttachment.react'),cx:new h([[j.MESSENGER,"_5i_d _205d"]])});o.set(l.RETAIL_SHIPMENT,{componentName:'MNCommerceShippingMercuryShareAttachment.react',componentLoader:g('MNCommerceShippingMercuryShareAttachment.react'),cx:new h([[j.MESSENGER,"_5i_d _205d"]]),requiresNoBubbleTail:function(q){var r=q.share&&q.share.target&&q.share.target;return r&&k.shouldRenderMap(r.destination,r.estimated_delivery_display_time);}});o.set(l.RETAIL_SHIPMENT_TRACKING_EVENT,{componentName:'MNCommerceShippingMercuryShareAttachment.react',componentLoader:g('MNCommerceShippingMercuryShareAttachment.react'),cx:new h([[j.MESSENGER,"_5i_d _205d"]])});o.set(l.RETAIL_NOW_IN_STOCK,{componentName:'MNCommerceProductSubscriptionMercuryShareAttachment.react',componentLoader:g('MNCommerceProductSubscriptionMercuryShareAttachment.react'),cx:new h([[j.MESSENGER,"_5i_d _205d"]]),requiresNoBubbleTail:n.thatReturnsTrue});}if(i.WWWMessengerMoneyPennyGK)o.set(l.RETAIL_AGENT_ITEM_SUGGESTION,{componentName:'MNCommerceAgentItemSuggestionMercuryShareAttachment.react',componentLoader:g('MNCommerceAgentItemSuggestionMercuryShareAttachment.react'),cx:new h([[j.MESSENGER,"_5i_d _205d"]]),requiresNoBubbleTail:function(q){return q.share.target.thumb_url;}});if(i.MomentsMessengerWWWGK)o.set(l.MOMENTS_APP_INVITATION,{componentName:'MessengerMomentsAppShareAttachment.react',componentLoader:g('MessengerMomentsAppShareAttachment.react'),getSnippetComponent:function(){return b('MessengerMomentsAppSnippet.react');},cx:new h([[j.MESSENGER,"_5i_d"]]),requiresNoBubbleTail:n.thatReturnsTrue});o.set(l.PHOTO,{componentName:'MercuryPhotoShareAttachment.react',componentLoader:g('MercuryPhotoShareAttachment.react'),getSnippetComponent:function(){return b('MercuryPhotoShareSnippet.react');},cx:null,requiresNoBubbleTail:n.thatReturnsTrue,unwrapInStory:n.thatReturnsTrue});o.set(l.IMAGE_SHARE,{componentName:'MercuryImageShareAttachment.react',componentLoader:g('MercuryImageShareAttachment.react'),getSnippetComponent:function(){return b('MercuryPhotoShareSnippet.react');},cx:null,requiresNoBubbleTail:n.thatReturnsTrue,unwrapInStory:n.thatReturnsTrue});o.set(l.VIDEO,{componentName:'MercuryVideoShareAttachment.react',componentLoader:g('MercuryVideoShareAttachment.react'),getSnippetComponent:function(){return b('MercuryVideoShareSnippet.react');},cx:null,requiresNoBubbleTail:n.thatReturnsTrue,unwrapInStory:n.thatReturnsTrue});o.set(l.MESSAGE_LOCATION,{componentName:'MercuryMessageLocationShareAttachment.react',componentLoader:g('MercuryMessageLocationShareAttachment.react'),getSnippetComponent:function(){return b('MercuryMessageLocationShareAttachmentSnippet.react');},cx:new h([[j.MESSENGER,"_5i_d"]]),requiresNoBubbleTail:function(q,r){return q.share.media.image&&r;}});o.set(l.ANIMATED_IMAGE_SHARE,{componentName:'MercuryAnimatedShareAttachment.react',componentLoader:g('MercuryAnimatedShareAttachment.react'),getSnippetComponent:function(){return b('MercuryAnimatedShareSnippet.react');},cx:null,requiresNoBubbleTail:n.thatReturnsTrue,unwrapInStory:n.thatReturnsFalse});var p={getStyleFactory:function(q){if(!q||!q.style_list)return null;if(q.style_list[0]===l.ATTACHED_STORY){var r=q.subattachments,s=(r&&r.length)?r[0].style_list:[],t=this._getStyleMapEntry(s);if(t&&t.unwrapInStory&&t.unwrapInStory())return {attachment:r[0],factory:t};}var u=this._getStyleMapEntry(q.style_list);if(!u)return null;return {attachment:q,factory:u};},_getStyleMapEntry:function(q){for(var r=0;r<q.length;r++){var s=o.get(q[r]);if(s)return s;}return null;}};e.exports=p;},null);
__d("MercuryShareAttachment.react",["BootloadedComponent.react","MercuryShareAttachmentReactShape","MercuryShareAttachmentRenderLocations","MercuryShareStyleMap","React","cx","emptyFunction","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();'use strict';var o=k,p=o.PropTypes,q=k.createClass({displayName:"MercuryShareAttachment",propTypes:{attachment:h,location:p.oneOf(i.getValues()),onComponentLoaded:p.func.isRequired},getDefaultProps:function(){return {onComponentLoaded:m};},componentDidMount:function(){this._handleComponentLoad();},_renderComponent:function(r,s){if(this.props.location===i.MESSENGER)s=n("_52mr _2poz _ui9",s);return !!s?k.createElement("div",{className:s},r):r;},render:function(){var r=j.getStyleFactory(this.props.attachment);if(!r)return null;var s=r,t=s.attachment,u=s.factory;return (this._renderComponent(k.createElement(g,k.__spread({},this.props,{attachment:t,bootloadLoader:u.componentLoader,bootloadPlaceholder:k.createElement("div",null),module:u.componentName,onComponentLoad:this._handleComponentLoad})),u.cx&&u.cx.get(this.props.location)));},_handleComponentLoad:function(){var r=k.findDOMNode(this).children,s=0;for(var t=0;t<r.length;t++)s+=r[t].offsetHeight;this.props.onComponentLoaded(s);}});e.exports=q;},null);
__d("MessengerErrorAttachment.react",["React","cx"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';var i=g.Component;for(var j in i)if(i.hasOwnProperty(j))l[j]=i[j];var k=i===null?null:i.prototype;l.prototype=Object.create(k);l.prototype.constructor=l;l.__superConstructor__=i;function l(m){i.call(this,m);}l.prototype.render=function(){return (g.createElement("div",{className:"_1o12 _52mr"},g.createElement("div",{className:"_1o13"},this.props.attachment.error_msg)));};e.exports=l;},null);
__d("MessengerFileAttachment.react",["Link.react","ReactComponentWithPureRenderMixin","React","cx"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';var k=i,l=k.PropTypes,m=i.createClass({displayName:"MessengerFileAttachment",mixins:[h],propTypes:{attachment:l.object.isRequired},render:function(){return (i.createElement(g,{className:"_4pcn _2uf4",href:this.props.attachment.url},i.createElement("div",{className:"_2uf5"}),this.props.attachment.name));}});e.exports=m;},null);
__d("HotLikeSound",["MercuryConfig","SoundPlayer","StickerConstants"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';h.init(['audio/ogg','audio/mpeg']);var j=[g['sound.hot_like_grow_mp3_url'],g['sound.hot_like_grow_ogg_url']],k=[g['sound.hot_like_pop_mp3_url'],g['sound.hot_like_pop_ogg_url']],l=[g['sound.hot_like_outgoing_small_mp3_url'],g['sound.hot_like_outgoing_small_ogg_url']],m=[g['sound.hot_like_outgoing_medium_mp3_url'],g['sound.hot_like_outgoing_medium_ogg_url']],n=[g['sound.hot_like_outgoing_large_mp3_url'],g['sound.hot_like_outgoing_large_ogg_url']],o=function(){return false;},p={setCheckSoundEnabledFunc:function(q){o=q;},start:function(){this._play(j);},stop:function(){h.stop(j);},pop:function(){this.stop();this._play(k);},snap:function(q){this.stop();if(q===i.HOT_LIKE_SMALL_STICKER_ID)this._play(l);if(q===i.HOT_LIKE_MEDIUM_STICKER_ID)this._play(m);if(q===i.HOT_LIKE_LARGE_STICKER_ID)this._play(n);},_play:function(q){if(o())h.play(q);}};e.exports=p;},null);
__d("MessengerHotLikePreviewEvents",["mixInEventEmitter"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';var h={START:'start',STOP:'stop',POP:'pop',REMOVE:'remove',FINISH_ANIMATION:'finish_animation'};g(h,{start:true,stop:true,pop:true,remove:'remove',finish_animation:'finish_animation'});e.exports=h;},null);
__d("XStickerAssetController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/stickers\/asset\/",{sticker_id:{type:"Int",required:true},image_type:{type:"Enum",defaultValue:"BestEffortImage",enumType:1}});},null);
__d("MessengerHotLikeUtils",["StickerAssetType","StickerConstants","XStickerAssetController"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';var j={SizeTimes:{small:1000,medium:2000,large:3000},getStickerIDForTime:function(k){var l=null;switch(true){case k<this.SizeTimes.small:l=h.HOT_LIKE_SMALL_STICKER_ID;break;case k<this.SizeTimes.medium:l=h.HOT_LIKE_MEDIUM_STICKER_ID;break;case k<this.SizeTimes.large:l=h.HOT_LIKE_LARGE_STICKER_ID;break;}return l;},getGrowCoefficientForSince:function(k){return Math.min(1,(Date.now()-k)/this.SizeTimes.large);},getMetadataForHotLike:function(k){var l;switch(k){case h.HOT_LIKE_LARGE_STICKER_ID:l=120;break;case h.HOT_LIKE_MEDIUM_STICKER_ID:l=84;break;case h.HOT_LIKE_SMALL_STICKER_ID:l=35;break;}return l?{height:l,width:l}:(void 0);},getPreviewURI:function(){return i.getURIBuilder().setInt('sticker_id',h.HOT_LIKE_LARGE_STICKER_ID).setEnum('image_type',g.IMAGE).getURI().toString();},getURIWithID:function(k){return i.getURIBuilder().setInt('sticker_id',k).setEnum('image_type',g.IMAGE).getURI().toString();}};e.exports=j;},null);
__d("MessengerHotLikePreview.react",["Animation","HotLikeSound","MessengerHotLikePreviewEvents","MessengerHotLikeUtils","React","StickerConstants","SubscriptionsHandler","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();'use strict';var o=k,p=o.PropTypes,q=k.createClass({displayName:"MessengerHotLikePreview",propTypes:{since:p.number},componentDidMount:function(){this._subscriptions=new m();this._subscriptions.addSubscriptions(i.addListener(i.STOP,this._snapToStickerSize),i.addListener(i.POP,this._pop));h.start();this._growthAnimation=new g(k.findDOMNode(this)).to('width',80).to('height',80).duration(3000).go();this._setUpRotationAnimation();},componentWillUnmount:function(){this._subscriptions&&this._subscriptions.release();},render:function(){return (k.createElement("div",{className:"_4a9g _576q"}));},_setUpRotationAnimation:function(){this._rotateAnimation=new g(k.findDOMNode(this));this._rotateHotLike(-2,2,150,1000);this._rotateHotLike(-4,4,100,1000);this._rotateHotLike(-10,10,75,1000);this._rotateAnimation.go();},_rotateHotLike:function(r,s,t,u){var v=Math.floor(u/t),w=null;for(var x=0;x<v;x++){w=x%2?r:s;this._rotateAnimation.to('rotateZ',w).duration(t).checkpoint();}},_snapToStickerSize:function(r){if(this._snapped)return;this._snapped=true;var s=Date.now()-this.props.since,t=j.getStickerIDForTime(s);if(t){h.snap(t);var u=j.getMetadataForHotLike(t);this._rotateAnimation.stop();var v=30,w=-10;if(t===l.HOT_LIKE_SMALL_STICKER_ID){v=0;w=0;}this._growthAnimation.stop().to('width',u.width*1.2).to('height',u.height*1.2).to('rotateZ',v).duration(100).checkpoint().to('width',u.width*.9).to('height',u.height*.9).to('rotateZ',w).duration(100).checkpoint().to('width',u.width).to('height',u.height).to('rotateZ',0).duration(100).ondone(function(){i.emit(i.FINISH_ANIMATION,r,t);}).go();}},_pop:function(r){h.pop();this._growthAnimation.stop().to('width',0).to('height',0).duration(100).ondone(function(){i.emit(i.REMOVE,r);}).go();}});e.exports=q;},null);
__d("getMaxBubbleWidthPercent",["Map","cssVar","getViewportDimensions"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';var j=function(m){return parseInt(m.replace('px',''),10);},k=new g([[j("920px"),.7],[j("1211px"),.55],[j("1600px"),.6]]),l=function(){var m=.85,n=i().width;k.forEach(function(o,p){if(p<=n)m=o;});return m;};e.exports=l;},null);
__d("MessengerPhoto.react",["MercuryAttachmentType","React","Image.react","URI","cx","getMaxBubbleWidthPercent","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();'use strict';var n=h,o=n.PropTypes,p=206,q=450;function r(w){if(w.metadata){if(w.attach_type===g.VIDEO)return w.metadata.inbox_preview;return new j('/ajax/mercury/attachments/photo.php').addQueryData({fbid:w.metadata.fbid,height:p,mode:'cover',request_user_id:w.metadata.pageid,width:p}).toString();}return null;}function s(w){var x=r(w);if(x)return Object.assign({src:x},w.metadata.inbox_size);if(w.preview_url)return {height:w.preview_height,src:w.preview_url,width:w.preview_width};if(w.preview_uploading)return {height:p,src:null,width:p};if(w.media)return w.media.playable&&w.media.animated_image?Object.assign({},w.media.animated_image_size,{src:w.media.animated_image}):Object.assign({},w.media.image_size,{src:w.media.image});}function t(w){return (w&&w.width?l()*w.width:q);}function u(w,x){var y=w.media?s(w):{height:w.preview_height,width:w.preview_width};return w.preview_uploading?p:Math.min(y.height*Math.min(1,t(x)/y.width),q);}var v=h.createClass({displayName:"MessengerPhoto",contextTypes:{width:o.number},propTypes:{attachment:o.object.isRequired,isSingle:o.bool,onClick:o.func},render:function(){var w=s(this.props.attachment);if(!w)return;var x=this._getImageFromMetadata(w),y={};if(w.src)y.backgroundImage='url('+w.src+')';if(this.props.isSingle){var z=u(this.props.attachment,this.context);if(z)y.minHeight=z;}var aa=!!this.props.attachment.app_attribution;return (h.createElement("div",{className:m(this.props.className,(("_4tsk")+(aa?' '+"_mxz":'')+(this.props.isSingle&&!aa?' '+"_52mr":'')+(!w.src?' '+"_3etv":''))),style:y,onClick:this._onClick},x,h.createElement("a",{className:"_4tsl",href:w.src},this.props.children)));},_onClick:function(w){w.preventDefault();if(this.props.onClick)this.props.onClick(this.props.attachment);},_getImageFromMetadata:function(w){if(this.props.attachment.preview_uploading)return null;if(this.props.isSingle)return h.createElement(i,{src:w.src});return null;}});Object.assign(v,{PREVIEW_THUMBNAIL_SIZE:p,MAX_PHOTO_SIZE:q});e.exports=v;},null);
__d("MessengerVideo.react",["Image.react","MessengerPhoto.react","ReactComponentWithPureRenderMixin","React","cx","ix","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();'use strict';var n=j,o=n.PropTypes,p=j.createClass({displayName:"MessengerVideo",mixins:[i],propTypes:{attachment:o.object.isRequired,onClick:o.func},render:function(){return (j.createElement(h,j.__spread({},this.props,{className:m(this.props.className,"_ccq")}),j.createElement(g,{className:"_ccr",src:l('/images/chat/chat_play_icon.png')}),j.createElement("span",{className:"_ccs"},this._getDuration())));},_getDuration:function(){var q;if(!!this.props.attachment.metadata){q=this.props.attachment.metadata.duration;}else if(!!this.props.attachment.media)q=this.props.attachment.media.duration;return !!q?this._formatDuration(q):null;},_formatDuration:function(q){var r=q%60;return Math.floor(q/60)+':'+(r<10?'0':'')+r;}});e.exports=p;},null);
__d("PhotoStore",["Arbiter","PhotoStoreCore"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();g.subscribe('update-photos',function(i,j){h.updateData(j);});e.exports=h;},null);
__d("MessagesViewer",["AsyncRequest","Bootloader","DOM","MessagesViewerSetID","PhotoStore","React","Run","emptyFunction","ge"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();var p={bootstrapWithElem:function(s){p.bootstrapWithConfig({fbid:s.getAttribute('data-fbid'),dimensions:s.getAttribute('data-dimensions'),src:s.getAttribute('href'),endpoint:s.getAttribute('data-endpoint'),disablePaging:s.getAttribute('data-disablepaging')},s);},bootstrapWithConfig:function(s,t){var u=s.setID;if(!u)u=j.MESSAGES;r(function(v,w){q(l.createElement(v,{dimensions:[s.dimensions],disablepaging:s.disablePaging,disableForward:s.disableForward,open:true,photoid:s.fbid,reverse:false,rootClassName:s.rootClassName,setid:u,snapToPhoto:s.snapToPhoto,thumbsrc:s.src}));if(!k.hasBeenCreated(u)&&s.endpoint){var x=new g(s.endpoint);if(t)x.setRelativeTo(t);x.send();}});},renderVideo:function(s){r(function(t,u){q(l.createElement(u,l.__spread({},s)));});},preload:function(){m.onAfterLoad(function(){return r(n);});}};function q(s){var t=o('messages_viewer');if(!t){t=i.create('div',{id:'messages_viewer'});document.body.appendChild(t);}s=l.render(s,t);s.subscribeOnce('close',function(){l.unmountComponentAtNode(t);});}function r(s){h.loadModules(["SpotlightMessagesViewer","MessagingVideoViewer.react"],s);}e.exports=p;},null);
__d("MessengerPhotosGroup.react",["MercuryAttachmentType","MessengerPhoto.react","MessengerVideo.react","MessagesViewer","ReactComponentWithPureRenderMixin","React","Vector","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();'use strict';var p='empty-spacer',q=l,r=q.PropTypes,s=l.createClass({displayName:"MessengerPhotosGroup",mixins:[k],propTypes:{attachType:r.string,attachments:r.arrayOf(Object).isRequired,message:r.object},componentDidMount:function(){j.preload();},render:function(){var t=this.props.attachments;return (l.createElement("div",{className:this._getRootClassNameFor(t)},this._rowsFor(t)));},_onChildClicked:function(t){if(t.preview_uploading)return false;if(t.attach_type===g.VIDEO){j.renderVideo({disableForward:true,rootClassName:"_1j1h",videoID:t.metadata.fbid,videoSize:new m(t.metadata.dimensions.width,t.metadata.dimensions.height),videoURI:t.url});}else if(t.attach_type===g.PHOTO||t.attach_type===g.ANIMATED_IMAGE){j.bootstrapWithConfig({dimensions:t.metadata.dimensions,disablePaging:this.props.attachments.length===1,disableForward:true,endpoint:t.url,fbid:t.metadata.fbid,rootClassName:"_1j1h",snapToPhoto:true,src:t.preview_url});}else if(t.uri)window.open(t.uri);},_rowsFor:function(t){if(t.length===1)return [this._photo(t[0],true)];var u=3;if(t.length===2||t.length===4)u=2;var v=[];for(var w=0,x=t.length;w<x;w+=u){var y=t.slice(w,w+u),z=u-y.length;while(z>0){y.push({attach_type:p,key:'ghost'+z});z--;}v.push((l.createElement("div",{className:"_2n8g",key:w},y.map(function(aa){return this._photo(aa);}.bind(this)))));}return v;},_photo:function(t,u){var v;if(t.deduplication_key){v=t.deduplication_key;}else if(t.metadata){v=t.metadata.fbid;}else v=t.upload_id;var w={attachment:t,isSingle:u,key:v,onClick:this._onChildClicked},x=this.props.attachType||t.attach_type;switch(x){case g.PHOTO:case g.ANIMATED_IMAGE:return l.createElement(h,l.__spread({},w));case g.VIDEO:return l.createElement(i,l.__spread({},w));case p:return (l.createElement("div",{key:t.key,className:"_4tsk _4rf-"}));default:throw t.attachType+' is not handled by MessengerPhotoGroup';}},_getRootClassNameFor:function(t){var u=t.length===2||t.length===4;return o(this.props.className,(("_2n8h")+(t.length===1?' '+"_2n8i":'')+(u?' '+"_4ksk":'')+(t.length>1&&!u?' '+"_2n8k":'')));}});e.exports=s;},null);
__d("MessengerStickerUtils",["MercuryAttachmentType"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';function h(k){return !!(k&&k.attach_type===g.STICKER);}function i(k){var l=k.attachments;return !!(k.is_like_preview||k.sticker_id||(l&&l.length===1&&h(l[0])));}function j(k){return k.size===1&&i(k.first());}e.exports={isStickerMessageGroup:j,isStickerMessage:i,isStickerAttachment:h};},null);
__d("MessengerVoiceClipAttachment.react",["MercuryAttachmentAudioClip.react","MercuryShareAttachmentRenderLocations","ReactComponentWithPureRenderMixin","React","cx"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l=j,m=l.PropTypes,n=j.createClass({displayName:"MessengerVoiceClipAttachment",mixins:[i],propTypes:{attachment:m.object.isRequired,message:m.object.isRequired},render:function(){var o=this.props.attachment,p=o.metadata.duration/1000,q=200;return (j.createElement("div",{className:"_hh7 _s1- _52mr _1fz8 _1nqp"},j.createElement(g,{src:o.url,duration:p,key:'audio:'+this.props.message.message_id,showHelp:false,width:q,location:h.MESSENGER,rootClassName:"_3czg _2poz _ui9"})));}});e.exports=n;},null);
__d("Sticker.react",["Arbiter","React","StickerConfig","StickerConstants","cx","emptyFunction","getElementPosition","getObjectValues","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();'use strict';var p=h,q=p.PropTypes,r=83,s=5000,t=10,u={CLICK:'click',HOVER:'hover',LOAD_AND_HOVER:'load_and_hover'},v=h.createClass({displayName:"Sticker",propTypes:{animationTrigger:q.oneOf(n(u)),forceCursorPointer:q.bool,frameCount:q.number.isRequired,frameRate:q.number,framesPerCol:q.number.isRequired,framesPerRow:q.number.isRequired,onAttachmentLoad:q.func,onStickerClick:q.func,packID:q.string,sourceURI:q.string.isRequired,sourceWidth:q.number.isRequired,sourceHeight:q.number.isRequired,spriteURI:q.string,stickerID:q.string,subscribedThreadID:q.string,testID:q.string},getInitialState:function(){return {index:0,hasAnimated:false,unsubscribeID:null};},getDefaultProps:function(){return {forceCursorPointer:false,frameRate:r,onStickerClick:l,packID:null};},componentDidMount:function(){this.props.onAttachmentLoad&&this.props.onAttachmentLoad(this.props.sourceHeight);this._stopIntervalID=0;if(this.props.animationTrigger===u.LOAD_AND_HOVER&&this.props.frameCount>1&&this.props.spriteURI)this.startAnimation();if(this.props.subscribedThreadID&&this.props.frameCount>1){var w=g.subscribe(this.props.subscribedThreadID,function(x,y){this.isScrolledIntoView(y.scrollTop,y.viewHeight,y.top);}.bind(this));this.setState({unsubscribeID:w});}},componentWillUnmount:function(){if(this.state.unsubscribeID)g.unsubscribe(this.state.unsubscribeID);if(this.isAnimating())clearInterval(this._stopIntervalID);},isAnimating:function(){return !!this._stopIntervalID;},getWidth:function(){return Math.floor(this.props.sourceWidth);},getHeight:function(){return Math.floor(this.props.sourceHeight);},preloadSprite:function(){var w=new Image();w.onload=function(){if(this.isMounted()&&!this.state.hasAnimated){this.setState({hasAnimated:true});this._stopIntervalID=setInterval(this.incrementFrameIndex,this.props.frameRate);}}.bind(this);if(i.ChatPaddedAnimatedStickerGK&&this.props.paddedSpriteURI){w.src=this.props.paddedSpriteURI;}else w.src=this.props.spriteURI;},isScrolledIntoView:function(w,x,y){var z=m(h.findDOMNode(this)),aa=w+z.y-y,ba=w+x,ca=aa+z.height;if(this.props.frameCount>1&&!this.state.hasAnimated&&ca-t<=ba&&aa+t>=w)this.startAnimation();},startAnimation:function(){if(!this.state.hasAnimated&&this.props.spriteURI){this.preloadSprite();}else if(!this.isAnimating()){this.setState({hasAnimated:true});this._stopIntervalID=setInterval(this.incrementFrameIndex,this.props.frameRate);}},stopAnimation:function(){this.setState({index:0});clearInterval(this._stopIntervalID);this._stopIntervalID=0;},toggleAnimation:function(){if(this.isAnimating()){this.stopAnimation();}else this.startAnimation();},shouldStopAnimating:function(){var w=this.state.index%this.props.frameCount;if(!(w===0&&this.state.index*this.props.frameRate>s))return false;if(this.props.animationTrigger===u.CLICK)return true;return !this.state.isHovered;},incrementFrameIndex:function(){if(this.shouldStopAnimating()){this.stopAnimation();}else this.setState({index:this.state.index+1});},getStyle:function(){var w=0,x=this.props.spriteURI;if(i.ChatPaddedAnimatedStickerGK&&this.props.paddedSpriteURI){x=this.props.paddedSpriteURI;var y=240/Math.min(this.getHeight(),this.getWidth());w=Math.floor(j.SPRITE_PADDING/y);}var z=this.state.index%this.props.frameCount,aa=(z%this.props.framesPerRow)*(this.getWidth()+w*2)+w,ba=Math.floor(z/this.props.framesPerRow)*(this.getHeight()+w*2)+w,ca=(this.props.frameCount>1&&this.props.animationTrigger===u.CLICK)||this._isStickerClickable(this.props.packID),da=this.props.forceCursorPointer||ca?'pointer':'default';if(!this.state.hasAnimated||!this.props.spriteURI){return {backgroundImage:this._isHotLike()?null:'url('+this.props.sourceURI+')',backgroundRepeat:'no-repeat',backgroundSize:this.getWidth()+'px '+this.getHeight()+'px',cursor:da,height:this.getHeight(),width:this.getWidth()};}else return {backgroundImage:'url('+x+')',backgroundPosition:(-aa)+'px '+(-ba)+'px',backgroundSize:(this.getWidth()+w*2)*this.props.framesPerRow+'px '+(this.getHeight()+w*2)*this.props.framesPerCol+'px',cursor:da,height:this.getHeight(),width:this.getWidth()};},_isStickerClickable:function(w){return w&&w!=j.MOBILE_LIKE_STICKER_PACK_ID&&w!=j.GRAVEYARD_PACK_ID;},onStickerClick:function(){if(!this._isStickerClickable(this.props.packID))return;if(this.props.onStickerClick)this.props.onStickerClick(this.props.packID,this.props.stickerID);},mouseLeft:function(){this.setState({isHovered:false});},mouseEntered:function(){this.setState({isHovered:true});if(!this.isAnimating())this.startAnimation();},tabFocusSelected:function(){this.setState({isHovered:true});if(!this.isAnimating())this.startAnimation();},tabFocusUnselected:function(){this.setState({isHovered:false});},render:function(){var w,x;if(this.props.animationTrigger===u.CLICK&&this.props.frameCount>1&&this.props.spriteURI){w=true;}else if((this.props.animationTrigger===u.HOVER||this.props.animationTrigger===u.LOAD_AND_HOVER)&&this.props.frameCount>1&&this.props.spriteURI)x=true;var y=w?this.toggleAnimation:null;if(this.props.packID)y=this.onStickerClick;var z=this.props.className;if(this._isHotLike())z=o(z,"_576q");return (h.createElement("div",{className:z,"data-testid":this.props.testID,tabIndex:"0",style:this.getStyle(),onClick:y,onMouseEnter:x?this.mouseEntered:null,onMouseLeave:x?this.mouseLeft:null,onFocus:this.tabFocusSelected,onBlur:this.tabFocusUnselected}));},_isHotLike:function(){if(!!document.createElementNS&&!!document.createElementNS('http://www.w3.org/2000/svg','svg').createSVGRect)return (this.props.stickerID===j.HOT_LIKE_SMALL_STICKER_ID||this.props.stickerID===j.HOT_LIKE_MEDIUM_STICKER_ID||this.props.stickerID===j.HOT_LIKE_LARGE_STICKER_ID);return false;}});e.exports=v;},null);
__d("StickerUtils",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={getScaledDimensions:function(h,i,j){var k,l,m;if(i>h){m=j/i;k=h*m;l=i*m;}else{m=j/h;k=h*m;l=i*m;}return {height:Math.round(k),width:Math.round(l)};},capitalizeWords:function(h){var i=h.split(" ");for(var j=0;j<i.length;j++){var k=i[j].charAt(0).toUpperCase();i[j]=k+i[j].substr(1);}return i.join(" ");}};e.exports=g;},null);
__d("isRetina",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();'use strict';e.exports=function(){return (window.devicePixelRatio||1)>1;};},null);
__d("MessengerAttachmentRenderer",["MercuryAttachment","MercuryAttachmentType","MercuryAudioType","MercuryShareAttachment.react","MercuryShareAttachmentRenderLocations","MessengerErrorAttachment.react","MessengerFileAttachment.react","MessengerHotLikePreview.react","MessengerHotLikeUtils","MessengerPhotosGroup.react","MessengerStickerUtils","MessengerVoiceClipAttachment.react","React","Set","Sticker.react","StickerActions","StickerAssetType","StickerConstants","StickerImages","StickerUtils","StoryAttachmentStyle","XStickerAssetController","cx","isRetina"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da){b.__markCompiled&&b.__markCompiled();'use strict';var ea=new t([h.ANIMATED_IMAGE,h.PHOTO,h.VIDEO]),fa=700,ga=function(ia){return ia===Object(ia);},ha={getAttachmentsInsideBubble:function(ia){var ja=g.get(ia).filter(ga).filter(function(ka){return !this.attachmentShouldAppearOutsideBubble(ka);}.bind(this));return this._getAttachmentComponents(ja,ia);},getAttachmentsOutsideBubble:function(ia){var ja=g.get(ia).filter(ga).filter(function(ka){return this.attachmentShouldAppearOutsideBubble(ka);}.bind(this));return this._getAttachmentComponents(ja,ia);},_getAttachmentComponents:function(ia,ja){var ka=this._getPhotosGroup(ia.filter(this.isPhotoAttachment),ja),la=ia.filter(function(ma){return !this.isPhotoAttachment(ma);}.bind(this)).map(function(ma){return this._getAttachmentComponent(ma,ja);}.bind(this),this);if(ka)la.push(ka);return la;},_getAttachmentComponent:function(ia,ja){if(q.isStickerAttachment(ia))return this._getStickerComponent(ia,ja);if(this.isVoiceClip(ia))return this._getVoiceClip(ia,ja);if(this.isFileAttchment(ia))return this._getFileComponent(ia,ja);if(this.isP2P(ia)||this.isShareAttachment(ia))return this._getShareAttachment(ia,ja);if(this.isErrorAttachment(ia))return this._getErrorAttachment(ia,ja);},_getStickerComponent:function(ia,ja){if(ja.is_like_preview)return (s.createElement(n,{key:'hlp:'+ja.like_preview_since,since:ja.like_preview_since}));var ka=ia.metadata;if(!ka){ka=o.getMetadataForHotLike(ja.sticker_id);if(!ka){var la=y.getSticker(ja.sticker_id);ka=Object.assign({},la);var ma=z.getScaledDimensions(la.height,la.width,x.THREAD_SIZE),na=ma.height,oa=ma.width;ka.height=na;ka.width=oa;}ka.stickerID=ja.sticker_id;}var pa=ba.getURIBuilder().setInt('sticker_id',ka.stickerID),qa=null,ra=null;if(da()){qa=ka.paddedSpriteURI2x;ra=ka.spriteURI2x;}else{qa=ka.paddedSpriteURI;ra=ka.spriteURI;}return (s.createElement(u,{className:"_2poz _ui9",animationTrigger:"hover",frameCount:ka.frameCount||1,frameRate:ka.frameRate||x.DEFAULT_FRAME_RATE,framesPerCol:ka.framesPerCol||1,framesPerRow:ka.framesPerRow||1,key:'sticker:'+ja.message_id,onStickerClick:function(sa,ta){v.handleStickerClick(sa,ja.thread_id);},packID:ka.packID&&ka.packID.toString(),paddedSpriteURI:qa,sourceHeight:ka.height,sourceURI:pa.setEnum('image_type',w.IMAGE).getURI().toString(),sourceWidth:ka.width,spriteURI:ra,stickerID:ka.stickerID.toString()}));},_getShareAttachment:function(ia,ja){return s.createElement(j,{attachment:ia.share,location:k.MESSENGER,key:'share:'+ja.message_id,maxWidth:fa});},_getVoiceClip:function(ia,ja){return (s.createElement(r,{attachment:ia,key:'audio:'+ja.message_id,message:ja}));},_getErrorAttachment:function(ia,ja){return (s.createElement(l,{attachment:ia,key:'error:'+ja.message_id}));},_getPhotosGroup:function(ia,ja){return ia.length?s.createElement(p,{attachments:ia,className:"_2poz _52mr _ui9",key:'photos:'+ja.message_id,message:ja}):null;},_getFileComponent:function(ia,ja){return (s.createElement(m,{attachment:ia,className:"_2poz",key:'file:'+ia.url}));},attachmentShouldAppearOutsideBubble:function(ia){return q.isStickerAttachment(ia)||this.isPhotoAttachment(ia)||this.isShareAttachment(ia)||this.isP2P(ia)||this.isVoiceClip(ia)||this.isErrorAttachment(ia);},isPhotoAttachment:function(ia){return ea.has(ia.attach_type);},isFileAttchment:function(ia){return ia.attach_type===h.FILE;},isShareAttachment:function(ia){return !!(this._isStoryBased(ia)&&!this.isP2P(ia)&&(ia.share.style_list.indexOf(aa.SHARE)>-1||ia.share.style_list.indexOf(aa.FALLBACK)>-1));},isP2P:function(ia){return !!(this._isStoryBased(ia)&&ia.share.style_list.indexOf(aa.ORION)>-1);},_isStoryBased:function(ia){return !!(ia.attach_type===h.SHARE&&ia.share&&ia.share.style_list);},isVoiceClip:function(ia){return !!ia.metadata&&(ia.metadata.type===i.AudioClip||ia.metadata.type===i.VoiceMessageWithTranscript);},isVoiceClipAttachment:function(ia){var ja=g.get(ia).filter(ga).filter(function(ka){return this.isVoiceClip(ka);}.bind(this));return !!(ja.length);},isP2PAttachment:function(ia){var ja=g.get(ia).filter(function(ka){return ga(ka)&&this.isP2P(ka);}.bind(this));return !!(ja.length);},isErrorAttachment:function(ia){return ia.attach_type===h.ERROR;}};e.exports=ha;},null);
__d("MessengerInterstitialBanner.react",["CenteredContainer.react","Image.react","Link.react","ReactComponentWithPureRenderMixin","React","UserAgentData","cx","fbt","ix"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();'use strict';var p=k,q=p.PropTypes,r=o('/images/mercury/clients/messenger/banner/messengerPhone-2x.png'),s=k.createClass({displayName:"MessengerInterstitialBanner",mixins:[j],propTypes:{isBrowserUnsupported:q.bool,mobileAppInfo:q.objectOf(q.bool)},render:function(){if(!this.props.isBrowserUnsupported&&this.props.mobileAppInfo.hasMessenger&&this.props.mobileAppInfo.messengerPushable)return null;return (k.createElement(g,{className:"_s15",vertical:true},k.createElement("div",{className:"_s16"},k.createElement(h,{className:"_s17",src:r}),this._renderMessage(),this._renderLink())));},_renderMessage:function(){if(this.props.isBrowserUnsupported){return (n._("For a better experience on {Messenger}, update your {browser}.",[n.param("Messenger",'Messenger'),n.param("browser",l.browserName)]));}else if(!this.props.mobileAppInfo.hasMessenger){return (n._("Keep the conversation going from your phone."));}else if(!this.props.mobileAppInfo.messengerPushable)return (n._("See messages instantly on your phone\u2014open the app to learn more."));},_renderLink:function(){if(this.props.isBrowserUnsupported||this.props.mobileAppInfo.hasMessenger)return null;return (k.createElement(i,{target:"_blank",className:"_s18",href:"https://www.messenger.com/about"},n._("Get App")));}});e.exports=s;},null);
__d("MessengerDesktopNotificationPermissions",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={DEFAULT:'default',DENIED:'denied',GRANTED:'granted'};e.exports=g;},null);
__d("MessengerDesktopNotifications",["BanzaiLogger","Map","MessengerDesktopNotificationPermissions","MessengerDotComDesktopNotifsEvent","Run","UserAgent"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m=5000,n=new h();function o(){n.forEach(function(q,r,s){q.close&&q.close();});}var p={isSupported:function(){return !!window.Notification;},checkPermission:function(){if(window.Notification)return window.Notification.permission;},hasDefaultSound:function(){return l.isBrowser('FireFox')&&l.isPlatform('Mac OS X');},isDenied:function(){return this.checkPermission()===i.DENIED;},isGranted:function(){return this.checkPermission()===i.GRANTED;},requestPermission:function(q){if(window.Notification){window.Notification.requestPermission(q);g.log('MessengerDotComDesktopNotifsLoggerConfig',{event:j.PERMISSION_REQUESTED});}},showNotification:function(q){if(this.checkPermission()===i.GRANTED){var r;if(window.Notification)r=new window.Notification(q.title,{body:q.body,icon:q.icon,tag:q.tag});n.set(q.tag,r);r.onclick=q.onClick;r.onclose=function(){n["delete"](q.tag);};this._closeTimer=setTimeout(function(){r.close();},q.closeTime||m);}}};k.onUnload(o);e.exports=p;},null);
__d("XMessengerDotComSettingsEditController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/settings\/edit\/",{});},null);
__d("MessengerSettingsActions",["AsyncRequest","BanzaiLogger","MessengerDispatcher","MessengerDesktopNotifications","MessengerDesktopNotificationPermissions","MessengerDotComDesktopNotifsEvent","XMessengerDotComSettingsEditController","keyMirror"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();'use strict';var o=n({CHANGE_SETTINGS:null,CHANGE_DESKTOP_NOTIFS:null}),p={Types:o,changeSettings:function(q){new g().setData({settings:q}).setURI(m.getURIBuilder().getURI()).send();i.dispatch({type:o.CHANGE_SETTINGS,newSettings:q});},changeDesktopNotifs:function(q,r){if(q&&!j.isGranted()){j.requestPermission(function(s){if(s!==k.GRANTED){if(j.checkPermission()===k.DENIED){r&&r();h.log('MessengerDotComDesktopNotifsLoggerConfig',{event:l.PERMISSION_DENIED});}else h.log('MessengerDotComDesktopNotifsLoggerConfig',{event:l.PERMISSION_CANCELED});return;}h.log('MessengerDotComDesktopNotifsLoggerConfig',{event:l.PERMISSION_GRANTED});i.dispatch({type:o.CHANGE_DESKTOP_NOTIFS,desktopNotifsEnabled:q});});}else i.dispatch({type:o.CHANGE_DESKTOP_NOTIFS,desktopNotifsEnabled:q});}};e.exports=p;},null);
__d("MessengerSignals",["EventEmitter"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';var h=new g(),i='resize',j={resize:function(){h.emit(i);},onResize:function(k){return h.addListener(i,k);}};e.exports=j;},null);
__d("XMessengerDotComNUXLoggingController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/logging\/promotion\/",{promotion_id:{type:"Int",required:true},instance_log_data:{type:"StringToStringMap",defaultValue:{}}});},null);
__d("XQuickPromotionSimpleLoggingController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/qp\/action\/log\/",{qp_id:{type:"Int",required:true},qp_action:{type:"Enum",enumType:1},qp_instance_log_data:{type:"StringToStringMap",defaultValue:{}},qp_event:{type:"String"}});},null);
__d("MessengerNotificationBanner.react",["AsyncRequest","Image.react","MessengerButton.react","MessengerDesktopNotifications","MessengerSettingsActions","MessengerSignals","React","XMessengerDotComNUXLoggingController","XQuickPromotionSimpleLoggingController","cx","ix"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){b.__markCompiled&&b.__markCompiled();'use strict';var r=m,s=r.PropTypes,t=q('/images/mercury/clients/messenger/banner/closeBanner.png'),u=q('/images/mercury/clients/messenger/banner/desktopNotifications.png'),v=m.createClass({displayName:"MessengerNotificationBanner",propTypes:{promotionID:s.number,promotionContent:s.string,primaryActionTitle:s.string,instanceLogData:s.object},getInitialState:function(){return {bannerClosed:false};},componentDidMount:function(){if(this._shouldNotShowPromotion())return;new g().setURI(n.getURIBuilder().setInt('promotion_id',this.props.promotionID).setStringToStringMap('instance_log_data',this.props.instanceLogData).getURI()).send();},render:function(){if(this._shouldNotShowPromotion())return null;return (m.createElement("div",{className:"_2cij"},m.createElement(h,{className:"_2cik",onClick:this._handleClose,src:t}),m.createElement(h,{className:"_2cil",src:u}),this.props.promotionContent,this._renderNotification()));},_shouldNotShowPromotion:function(){return j.isGranted()||j.isDenied()||this.state.bannerClosed;},_renderNotification:function(){return (m.createElement(i,{className:"_2cim",label:this.props.primaryActionTitle,onClick:this._handleNotificationsChange,type:"primary"}));},_handleNotificationsChange:function(){this._closeBanner();new g().setURI(o.getURIBuilder().setInt('qp_id',this.props.promotionID).setEnum('qp_action','primary').setStringToStringMap('qp_instance_log_data',this.props.instanceLogData).getURI()).send();k.changeDesktopNotifs(true,this._handleDenied);},_handleClose:function(event){this._closeBanner();new g().setURI(o.getURIBuilder().setInt('qp_id',this.props.promotionID).setEnum('qp_action','dismiss').setStringToStringMap('qp_instance_log_data',this.props.instanceLogData).getURI()).send();},_closeBanner:function(){this.setState({bannerClosed:true},function(){l.resize();});}});e.exports=v;},null);
__d("MessengerBanner.react",["MessengerDotComPromotionActionURL","MessengerInterstitialBanner.react","MessengerNotificationBanner.react","ReactComponentWithPureRenderMixin","React"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l=k,m=l.PropTypes,n=k.createClass({displayName:"MessengerBanner",mixins:[j],propTypes:{isBrowserUnsupported:m.bool,mobileAppInfo:m.objectOf(m.bool),promotionData:m.object},render:function(){var o=this.props.promotionData;if(this.props.isBrowserUnsupported||!this.props.mobileAppInfo.hasMessenger||!this.props.mobileAppInfo.messengerPushable)return (k.createElement(h,{isBrowserUnsupported:this.props.isBrowserUnsupported,mobileAppInfo:this.props.mobileAppInfo}));if(o&&o.primaryActionURI===g.turn_on_notification)return (k.createElement(i,{promotionID:o.promotionID,promotionContent:o.promotionContent,primaryActionTitle:o.primaryActionTitle,instanceLogData:o.instanceLogData}));return null;}});e.exports=n;},null);
__d("DocumentTitle",["Arbiter"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h=document.title,i=null,j=1500,k=[],l=0,m=null,n=false;function o(){if(k.length>0){if(!n){p(k[l].title);l=++l%k.length;}else q();}else{clearInterval(m);m=null;q();}}function p(s){document.title=s;n=true;}function q(){r.set(i||h,true);n=false;}var r={get:function(){return h;},set:function(s,t){document.title=s;if(!t){h=s;i=null;g.inform('update_title',s);}else i=s;},blink:function(s){var t={title:s};k.push(t);if(m===null)m=setInterval(o,j);return {stop:function(){var u=k.indexOf(t);if(u>=0){k.splice(u,1);if(l>u){l--;}else if(l==u&&l==k.length)l=0;}}};}};e.exports=r;},null);
__d("MercuryFolders",["MercuryConfig","MessagingTag","arrayContains"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=[h.INBOX,h.OTHER,h.ACTION_ARCHIVED,h.SPAM],k=[h.INBOX,h.PENDING,h.OTHER,h.ACTION_ARCHIVED],l={getSupportedFolders:function(){return g.CoreGraphEnabled?k.concat():j.concat();},isSupportedFolder:function(m){return i(j,m);},getFromMeta:function(m){var n=m.folder;if(m.is_archived)n=h.ACTION_ARCHIVED;return n;}};e.exports=l;},null);
__d("MercuryUnseenState",["MercuryFolders","KeyedCallbackManager","LogHistory","MercuryActionType","MercuryDispatcher","MercurySingletonMixin","MercuryThreadInfo","MercuryThreadlistConstants","MercuryThreadIDMap","MessagingTag","MercuryServerRequests","MercuryThreadInformer","MercuryThreads","createObjectFrom","isEmpty"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){b.__markCompiled&&b.__markCompiled();var v=n.MAX_UNSEEN_COUNT,w='unseen_thread_hash',x='unseen_thread_list',y=i.getInstance('mercury_unseen_state');function z(oa){this._fbid=oa;this._serverRequests=q.getForFBID(this._fbid);this._threadIDMap=o.getForFBID(this._fbid);this._threads=s.getForFBID(this._fbid);this._threadInformer=r.getForFBID(this._fbid);this._dispatcher=k.getForFBID(this._fbid);this._initialUnseenCount=null;this._lastSeenTimestamp=0;this._maxCount=false;this._pendingServerUpdates=false;this._unseenResources=new h();this._dispatcher.subscribe('update-unseen',function(pa,qa){fa(this,qa);}.bind(this));this._dispatcher.subscribe('update-thread-ids',function(pa,qa){la(this,qa);}.bind(this));}Object.assign(z.prototype,{getUnseenCount:function(){if(this.exceedsMaxCount()){y.error('unguarded_unseen_count_fetch',{});return 0;}return ea(this)||0;},exceedsMaxCount:function(){return this._maxCount||(ea(this)>v);},markAsSeen:function(){var oa=ea(this);if(oa===null){this._pendingServerUpdates=true;}else if(oa>0||this._maxCount){this._serverRequests.markSeen();var pa=this._serverRequests.getLastActionTimestamp();ga(this,pa,[]);}}});Object.assign(z,l);function aa(oa,pa,qa){var ra={};ra[pa]=0;ia(oa,ra,qa);}function ba(oa,pa){oa._unseenResources.setResource(w,pa);oa._unseenResources.setResource(x,Object.keys(pa));}function ca(oa,pa){var qa=oa._unseenResources.executeOrEnqueue(w,pa),ra=oa._unseenResources.getUnavailableResources(qa);if(ra.length)oa._serverRequests.fetchUnseenThreadIDs();}function da(oa){return oa._unseenResources.getResource(w);}function ea(oa){var pa=oa._unseenResources.getResource(x);if(pa){return pa.length;}else return oa._initialUnseenCount;}function fa(oa,pa){var qa=na(pa);if(pa.unseen_thread_fbids){pa.unseen_thread_fbids.forEach(function(bb){if(bb.folder!=p.INBOX)return;var cb=bb.thread_fbids||[];cb=cb.concat(bb.other_user_fbids||[]);var db=ka(oa,cb),eb=oa._lastSeenTimestamp;if(qa&&qa.seen_timestamp)eb=qa.seen_timestamp;ga(oa,eb,db);if(qa&&qa.unseen_count>v)oa._maxCount=true;});}else if(qa&&qa.seen_timestamp){oa._lastSeenTimestamp=qa.seen_timestamp;if(qa.unseen_count>v){oa._maxCount=true;ba(oa,{});}else{oa._initialUnseenCount=qa.unseen_count;if(oa._initialUnseenCount===0)ba(oa,{});}}else{if(oa._maxCount)return;var ra=pa.actions;if(!ra||!(ra.length))return;var sa={},ta={};for(var ua=0;ua<ra.length;ua++){var va=ra[ua];if(va.is_forward)continue;var wa=va.action_type,xa=va.other_user_fbid?va.other_user_fbid:va.thread_fbid,ya=va.thread_id?va.thread_id:xa;if(wa==j.MARK_THREAD_SEEN){aa(oa,ya,va.persistent);continue;}if(!ma(oa,va))continue;if(wa==j.USER_GENERATED_MESSAGE||wa==j.LOG_MESSAGE){var za=sa[ya]?va.timestamp>sa[ya]:false,ab=za||!sa[ya];if(va.is_unread&&ab)oa._threads.getThreadMeta(ya,function(bb){var cb=false;if(bb&&bb.last_read_timestamp)if(bb.last_read_timestamp>=va.timestamp)cb=true;if(!m.isMuted(bb)&&!cb)sa[ya]=va.timestamp;});}else if(wa==j.CHANGE_READ_STATUS&&va.mark_as_read)ta[ya]=va.timestamp;}ha(oa,sa);ia(oa,ta);}if(oa._pendingServerUpdates){oa._pendingServerUpdates=false;oa.markAsSeen();}}function ga(oa,pa,qa){var ra=da(oa);if(ra===(void 0)||pa>oa._lastSeenTimestamp||oa._maxCount){oa._lastSeenTimestamp=pa;qa=qa||[];if(qa.length<=v)oa._maxCount=false;var sa={},ta=da(oa)||{};for(var ua in ta)if(ta[ua]!==true){var va=ta[ua];if(ja(oa,va))sa[ua]=va;}var wa=Object.assign(t(qa,true),sa);ba(oa,wa);oa._threadInformer.updatedUnseenState();}}function ha(oa,pa){if(oa._maxCount)return;var qa={},ra=false;for(var sa in pa){var ta=pa[sa];if(ja(oa,ta)){qa[sa]=ta;ra=true;}}if(!ra)return;ca(oa,function(ua){for(var va in qa){var wa=qa[va];if(!ua[va]&&ja(oa,wa))ua[va]=qa[va];}ba(oa,ua);oa._threadInformer.updatedUnseenState();});}function ia(oa,pa,qa){var ra=false;if(!u(pa))ra=true;if(ra)ca(oa,function(sa){var ta=false;for(var ua in pa){var va=pa[ua],wa=va>sa[ua];if(sa[ua]&&(!va||wa)){delete sa[ua];ta=true;}}if(ta){ba(oa,sa);oa._threadInformer.updatedUnseenState();if(qa&&ea(oa)===0)oa._serverRequests.markSeen();}});}function ja(oa,pa){return pa>oa._lastSeenTimestamp;}function ka(oa,pa){return pa.map(oa._threadIDMap.convertThreadIDIfAvailable,oa._threadIDMap);}function la(oa,pa){var qa=da(oa);if(!qa)return;for(var ra in pa){var sa=pa[ra];if(qa[ra]){qa[sa]=qa[ra];delete qa[ra];}}ba(oa,qa);}function ma(oa,pa){var qa=pa.thread_id?oa._threads.getThreadMetaNow(pa.thread_id):null,ra=qa?g.getFromMeta(qa):pa.folder;return ra===p.INBOX||ra===(void 0);}function na(oa){var pa=(oa.message_counts||[]);for(var qa=0;qa<pa.length;qa++)if(pa[qa].folder==p.INBOX)return pa[qa];return null;}e.exports=z;},null);
__d("MessengerStore",["MessengerDispatcher","mixInEventEmitter"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';function i(){this.$MessengerStore0=g.register(this.__onDispatch.bind(this));}i.prototype.getDispatchToken=function(){return this.$MessengerStore0;};i.prototype.emitChange=function(){this.emit('change');};i.prototype.destroy=function(){g.unregister(this.$MessengerStore0);};h(i,{change:true});e.exports=i;},null);
__d("MessengerSettingsStore",["BanzaiLogger","CacheStorage","MessengerDotComDesktopNotifsEvent","MessengerSettingsActions","MessengerStore","MessengerDotComSettingsInitialData"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m=new h('localstorage'),n="desktopNotifsEnabled";for(var o in k)if(k.hasOwnProperty(o))q[o]=k[o];var p=k===null?null:k.prototype;q.prototype=Object.create(p);q.prototype.constructor=q;q.__superConstructor__=k;function q(){"use strict";k.call(this);this.$MessengerSettingsStore0={};Object.assign(this.$MessengerSettingsStore0,l);this.$MessengerSettingsStore0.desktopNotifsEnabled=this.$MessengerSettingsStore1();}q.prototype.getSettings=function(){"use strict";return this.$MessengerSettingsStore0;};q.prototype.$MessengerSettingsStore1=function(){"use strict";return m.get(n,false);};q.prototype.$MessengerSettingsStore2=function(r){"use strict";return m.set(n,r);};q.prototype.__onDispatch=function(r){"use strict";switch(r.type){case j.Types.CHANGE_SETTINGS:Object.assign(this.$MessengerSettingsStore0,r.newSettings);this.emitChange();break;case j.Types.CHANGE_DESKTOP_NOTIFS:this.$MessengerSettingsStore0.desktopNotifsEnabled=r.desktopNotifsEnabled;this.$MessengerSettingsStore2(r.desktopNotifsEnabled);this.emitChange();g.log('MessengerDotComDesktopNotifsLoggerConfig',{event:r.desktopNotifsEnabled?i.TURNED_ON_NOTIFS:i.TURNED_OFF_NOTIFS});break;}};e.exports=new q();},null);
__d("MessengerStateStore",["MessagingTag","MessengerActions","MessengerStore"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';for(var j in i)if(i.hasOwnProperty(j))l[j]=i[j];var k=i===null?null:i.prototype;l.prototype=Object.create(k);l.prototype.constructor=l;l.__superConstructor__=i;function l(){i.call(this);this.$MessengerStateStore0={folder:g.INBOX};this.$MessengerStateStore1={};}l.prototype.getState=function(){return this.$MessengerStateStore0;};l.prototype.getPrevState=function(){return this.$MessengerStateStore1;};l.prototype.__onDispatch=function(m){switch(m.type){case h.Types.REPLACE_STATE:this.$MessengerStateStore1=this.$MessengerStateStore0;this.$MessengerStateStore0=Object.assign({activeThreadID:null,detailView:null,folder:this.$MessengerStateStore1.folder,masterView:null,serverThreadID:null,infoPanelVisibility:this.$MessengerStateStore1.infoPanelVisibility},m.nextState);this.emitChange();break;case h.Types.REPLACE_INFO_PANEL_VISIBILITY:this.$MessengerStateStore1=this.$MessengerStateStore0;this.$MessengerStateStore0=Object.assign({},this.$MessengerStateStore0,m.nextState);this.emitChange();break;case h.Types.CHANGE_FOLDER:this.$MessengerStateStore1=this.$MessengerStateStore0;this.$MessengerStateStore0=Object.assign({},this.$MessengerStateStore0,{folder:m.folder});this.emitChange();break;}};e.exports=new l();},null);
__d("MercuryMessages",["BanzaiODS","EventEmitter","ImmutableObject","LogHistory","Map","MercuryActionStatus","MercuryActionType","MercuryAssert","MercuryDispatcher","MercuryLogMessageType","MercuryMessageClientState","MercuryPayloadSource","MercurySingletonMixin","MercuryMessageActions","MercuryMessageIDs","RangedCallbackManager","MercurySendMessageFields","MercuryServerRequests","MercuryThreadActions","MercuryThreadInformer","MercuryThreads","URI","invariant","isMessengerDotComURI","mergeDeep"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea){b.__markCompiled&&b.__markCompiled();'use strict';var fa=new h(),ga=j.getInstance('mercury_messages');function ha(qa,ra){var sa=ra;if(qa._localIdsMap[ra])sa=qa._localIdsMap[ra];return qa._messages.get(sa);}function ia(qa){switch(qa){case r.UNKNOWN:case r.SERVER_INITIAL_DATA:case r.SERVER_FETCH_THREAD_INFO:case r.SERVER_THREAD_SYNC:return true;}return false;}function ja(qa,ra){if(!qa._threadsToMessages[ra])qa._threadsToMessages[ra]=new v(function(sa){return ha(qa,sa).timestamp;},function(sa,ta){return ta-sa;});return qa._threadsToMessages[ra];}function ka(qa,ra,sa){ra.forEach(function(ta){var ua=ja(qa,ta);ua.setReachedEndOfArray();qa._emitReorderedChange(ta,sa);});}function la(qa){this._fbid=qa;this._messageActions=t.getForFBID(this._fbid);this._serverRequests=x.getForFBID(this._fbid);this._threadInformer=z.getForFBID(this._fbid);this._threads=aa.getForFBID(this._fbid);this._threadActions=y.getForFBID(this._fbid);this._dispatcher=o.getForFBID(this._fbid);this._didChange=false;this._failedHistoryFetchThreads={};this._threadsToMessages={};this._localTitanMessagesCount={};this._messages=new k();this._localIdsMap={};this._dispatcher.subscribe('update-messages',function(ra,sa){var ta=(sa.actions||[]).filter(function(va){var wa=va.action_type,xa=((va.is_forward||va.thread_id)&&(wa==m.LOG_MESSAGE||wa==m.USER_GENERATED_MESSAGE||wa==m.SEND_MESSAGE||wa==m.DELETE_THREAD||wa==m.DELETE_MESSAGES||wa==m.MARK_MESSAGES_SPAM)),ya=((va.upload_id&&va.upload_data)&&(wa==m.CANCEL_ATTACHMENT_PLACEHOLDER||wa==m.CONFIRM_ATTACHMENT_PLACEHOLDER));return xa||ya;}),ua=ia(sa.payload_source);this.handleUpdates(ta,ua,sa.payload_source,sa.from_client);if(sa.end_of_history)ka(this,sa.end_of_history,sa.payload_source);if(this._didChange){this._didChange=false;fa.emit('change');}}.bind(this));ga.debug('constructed',{fbid:this._fbid});}Object.assign(la.prototype,{getMessagesFromIDs:function(qa){return (qa||[]).map(ha.bind(null,this)).filter(function(ra){return ra;});},hasLoadedNMessages:function(qa,ra){var sa=ja(this,qa);return sa.hasReachedEndOfArray()||sa.getCurrentArraySize()>=ra;},hasLoadedExactlyNMessages:function(qa,ra){var sa=ja(this,qa);return sa.getCurrentArraySize()==ra;},clearMercuryInternalState_DO_NOT_USE:function(){this._failedHistoryFetchThreads={};this._threadsToMessages={};this._localTitanMessagesCount={};this._messages=new k();this._localIdsMap={};},getThreadMessagesRange:function(qa,ra,sa,ta,ua,va){var wa=ja(this,qa),xa=function(hb){ta(ma(this,hb));}.bind(this),ya=wa.executeOrEnqueue(ra,sa,xa),za=wa.getUnavailableResources(ya),ab=this._failedHistoryFetchThreads[qa];if(za.length&&!ab){var bb=wa.getCurrentArraySize(),cb=this._localTitanMessagesCount[qa]||0,db=bb-cb,eb=za.length+cb,fb=this.getCurrentlyLoadedMessages(qa),gb=fb.length?fb[0].timestamp:null;ga.debug('fetch_missing_messages',{threadID:qa,offset:ra,limit:sa,timestamp:gb,missingIndices:za,messageCount:bb,localMessageCount:cb});this._serverRequests.fetchThreadMessages(qa,db,eb,gb,ua,va);}else this._failedHistoryFetchThreads[qa]=false;return ya;},getThreadMessagesRangeNow:function(qa,ra,sa){var ta=ja(this,qa),ua=[];for(var va=ra;va<ra+sa;va++){var wa=ta.getResourceAtIndex(va),xa=ha(this,wa);xa&&ua.push(xa);}return ua;},getThreadMessagesSinceTimestamp:function(qa,ra){var sa=ja(this,qa),ta=sa.getElementsUntil(ra);return ma(this,ta);},hasLoadedAllMessages:function(qa){return ja(this,qa).hasReachedEndOfArray();},getCurrentlyLoadedMessages:function(qa){var ra=ja(this,qa).getAllResources();return ma(this,ra);},unsubscribe:function(qa,ra){n.isThreadID(ra);var sa=ja(this,ra);sa.unsubscribe(qa);},_addNewMessage:function(qa,ra){pa(ra);this._messages.set(qa,new i(ra));},_updateMessage:function(qa,ra,sa){var ta=i.set(ra,sa);this._messages.set(qa,ta);return ta;},_shouldSortOutOfOrderMessages:function(qa,ra,sa){if(qa==r.CLIENT_CHANNEL_MESSAGE){var ta=this.getThreadMessagesSinceTimestamp(ra,sa);if(ta.length>0){g.bumpEntityKey('chat.web','channel.messages_reordered');return true;}}return false;},_preprocessIncomingAction:function(qa,ra){var sa=qa.action_type;if(ra==r.CLIENT_CHANNEL_MESSAGE&&sa==m.USER_GENERATED_MESSAGE&&qa.offline_threading_id&&this._localIdsMap[qa.offline_threading_id]===qa.offline_threading_id){qa.client_message_id=qa.offline_threading_id;qa.status=l.SUCCESS;qa.action_type=m.SEND_MESSAGE;sa=qa.action_type;}if(ra===r.CLIENT_CHANNEL_MESSAGE&&sa==m.USER_GENERATED_MESSAGE){var ta=this._threads.getThreadMetaNow(qa.thread_id);if(ta&&ta.folder)qa.folder=ta.folder;}return qa;},handleUpdates:function(qa,ra,sa,ta){var ua,va={};for(var wa=0;wa<qa.length;wa++){var xa=this._preprocessIncomingAction(qa[wa],sa),ya=xa.action_type,za=ha(this,xa.message_id);if(ya==m.LOG_MESSAGE)if(this._isLocalMessage(xa))continue;if(xa.is_forward||sa==r.SERVER_SEARCH){if(!this._messages.has(xa.message_id))this._addNewMessage(xa.message_id,xa);continue;}else if(xa.client_state===q.SEND_TO_SERVER){this._addNewMessage(xa.message_id,xa);continue;}else if(ya==m.SEND_MESSAGE){var ab=xa.client_message_id;if(ab&&this._localIdsMap[ab]&&xa.status){var bb=ha(this,ab),cb=bb.status;if(bb.status==l.SUCCESS)continue;if(!va[xa.thread_id])va[xa.thread_id]=[];this._updateLocalMessage(xa);if(typeof cb!==(void 0)||xa.status==l.FAILED_UNKNOWN_REASON||xa.status==l.UNABLE_TO_CONFIRM||xa.status==l.SUCCESS||xa.status==l.ERROR)this._emitUpdatedChange(xa.thread_id,ha(this,ab).message_id,sa);}continue;}else if(ya==m.DELETE_THREAD){ja(this,xa.thread_id).removeAllResources();continue;}else if(ya==m.DELETE_MESSAGES){this._deleteMessages(xa.thread_id,xa.message_ids,sa);continue;}else if((xa.offline_threading_id&&this._localIdsMap[xa.offline_threading_id])||(za&&!za.is_forward)){if(za&&xa.ranges&&xa.ranges.length>0){var db=za.message_id;this._updateMessage(this._localIdsMap[db]||db,za,{ranges:qa.ranges});this._emitUpdatedChange(za.thread_id,za.message_id,'link_shim');}continue;}else if(ya===m.CONFIRM_ATTACHMENT_PLACEHOLDER){this._confirmAttachmentPlaceholder(xa.upload_id,xa.upload_data);continue;}else if(ya===m.CANCEL_ATTACHMENT_PLACEHOLDER){this._cancelAttachmentPlaceholder(xa.upload_id,xa.upload_data);continue;}else{if(sa===r.CLIENT_SEND_MESSAGE){this._localIdsMap[xa.message_id]=xa.message_id;if(xa.thread_id=='root:'+xa.threading_id)ja(this,xa.thread_id).setReachedEndOfArray();}if(ya==m.LOG_MESSAGE&&xa.log_message_type==p.SERVER_ERROR)this._failedHistoryFetchThreads[xa.thread_id]=true;if(xa.client_state===q.DO_NOT_SEND_TO_SERVER&&xa.upload_id)this._uploadMessages[xa.upload_id]=xa;if(!va[xa.thread_id])va[xa.thread_id]=[];va[xa.thread_id].push(xa.message_id);this._addNewMessage(xa.message_id,xa);if(xa.offline_threading_id&&xa.offline_threading_id!=xa.message_id){this._localIdsMap[xa.offline_threading_id]=xa.message_id;u.addServerID(xa.offline_threading_id,xa.message_id);if(xa.threading_id)u.addServerID(xa.threading_id,xa.message_id);}if(xa[w.MANUAL_RETRY_CNT]>0){ua=ja(this,xa.thread_id);ua.resortResources([xa.message_id]);this._emitReorderedChange(xa.thread_id,r.CLIENT_SEND_MESSAGE);}ra=ra||this._shouldSortOutOfOrderMessages(sa,xa.thread_id,xa.timestamp);if(!ra)this._emitReceivedChange(ha(this,xa.message_id));continue;}}for(var eb in va){ua=ja(this,eb);var fb=ua.getAllResources(),gb=fb.filter(function(hb){var ib=this._messages.get(hb);return ib.action_type==m.LOG_MESSAGE&&ib.log_message_type==p.SERVER_ERROR;}.bind(this));ua.removeResources(gb);if(ta)na(this,eb,va[eb]);if(ra){ua.addResources(va[eb]);this._emitReorderedChange(eb,sa);}else ua.addResourcesWithoutSorting(va[eb].reverse(),0);this._threadInformer.updatedThread(eb);}this._didChange&&ga.debug('handle_updates',{localMessageCounts:ea(this._localTitanMessagesCount)});},isFirstMessage:function(qa){var ra=ja(this,qa.thread_id);if(ra.getCurrentArraySize()===0)return false;var sa=ra.getResourceAtIndex(ra.getCurrentArraySize()-1),ta=ha(this,sa).message_id,ua=ha(this,qa.message_id).message_id;return ra.hasReachedEndOfArray()&&ta==ua;},_isLocalMessage:function(qa){if(qa.offline_threading_id!==null&&qa.offline_threading_id===qa.message_id)return true;if(qa.threading_id!==null&&qa.threading_id===qa.message_id)return true;return false;},_deleteMessages:function(qa,ra,sa){if(!ra.length)return;this._deleteIndividualMessages(qa,ra,sa);if(sa!==r.CLIENT_CHANNEL_MESSAGE)this._serverRequests.deleteMessages(qa,ra);},_deleteIndividualMessages:function(qa,ra,sa){var ta=ra.map(function(va){return ha(this,va).message_id;},this),ua=ja(this,qa);ua.removeResources(ta);this._emitReorderedChange(qa,sa);},_updateLocalMessage:function(qa){var ra=ha(this,qa.client_message_id),sa={};sa.status=qa.status;if(qa.status===l.SUCCESS||qa.error_data)sa.error_data=qa.error_data;var ta=qa.message_id,ua=qa.client_message_id;if(this._messages.has(ta)){this._updateMessage(ta,ra,sa);return false;}if(qa.threading_id)sa.threading_id=qa.threading_id;if(qa.timestamp)sa.timestamp=qa.timestamp;if(qa.log_message_data)sa.log_message_data=qa.log_message_data;if(qa.ranges&&qa.ranges.length){pa(qa);sa.ranges=qa.ranges;}if(qa.attachments&&qa.attachments.length){sa.raw_attachments=null;sa.attachments=qa.attachments;}this._localIdsMap[ua]=ta;u.addServerID(ua,ta);var va=this._updateMessage(ta,ra,sa);this._messages.set(ua,new i());if(oa(va))this._localTitanMessagesCount[va.thread_id]--;return true;},getNumberLocalMessages:function(qa){return this._localTitanMessagesCount[qa]||0;},_uploadMessages:{},_confirmAttachmentPlaceholder:function(qa,ra){var sa=this._popPendingAttachmentMessage(qa,ra);this._serverRequests.sendNewMessage(sa);},_cancelAttachmentPlaceholder:function(qa,ra){var sa=this._popPendingAttachmentMessage(qa,ra);this._deleteIndividualMessages(sa.thread_id,[sa.message_id]);if(this._localTitanMessagesCount[sa.thread_id])this._localTitanMessagesCount[sa.thread_id]--;},_popPendingAttachmentMessage:function(qa,ra){var sa=this._uploadMessages[qa];ca(sa);sa.image_ids=ra.image_ids;sa.file_ids=ra.file_ids;sa.audio_ids=ra.audio_ids;sa.gif_ids=ra.gif_ids;sa.client_state=q.SEND_TO_SERVER;delete this._uploadMessages[qa];return sa;},_emitUpdatedChange:function(qa,ra,sa){this._didChange=true;this._threadInformer.updatedMessage(qa,ra,sa);},_emitReceivedChange:function(qa){this._didChange=true;this._threadInformer.receivedMessage(qa);},_emitReorderedChange:function(qa,ra){this._didChange=true;this._threadInformer.reorderedMessages(qa,ra);}});Object.assign(la,s,{addListener:function(qa,ra){return fa.addListener(qa,ra);}});function ma(qa,ra){var sa=ra.map(ha.bind(null,qa));return sa.reverse();}function na(qa,ra,sa){var ta=sa.filter(function(ua){return oa(ha(qa,ua));});if(!qa._localTitanMessagesCount[ra])qa._localTitanMessagesCount[ra]=0;qa._localTitanMessagesCount[ra]+=ta.length;}function oa(qa){var ra=qa.action_type;if(ra==m.USER_GENERATED_MESSAGE)return true;switch(qa.log_message_type){case p.SUBSCRIBE:case p.UNSUBSCRIBE:case p.SERVER_ERROR:case p.LIVE_LISTEN:return false;default:return true;}}function pa(qa){if(!qa.ranges)return;qa.ranges.forEach(function(ra){if(!ra.entity||ra.entity.external||!ra.entity.url)return;var sa=new ba(ra.entity.url);if(da(ba.getRequestURI())&&!sa.getDomain()){sa.setProtocol('https').setDomain('www.facebook.com');ra.entity.url=sa.toString();}});}e.exports=la;},null);
__d("MercuryNotificationRenderer",["MercuryAssert","MercuryParticipants","MercuryViewer","fbt","MercuryMessages","MercuryThreads"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=b('MercuryMessages').get(),l=b('MercuryThreads').get();function m(n,o){g.isThreadID(n);l.getThreadMeta(n,function(p){k.getThreadMessagesRange(n,0,1,function(q){var r=q.length&&q[q.length-1];if(r&&r.author!=i.getID()){h.get(r.author,function(s){if(p.name){o(j._("{senderName} messaged {groupName}",[j.param("senderName",s.short_name),j.param("groupName",p.name)]));}else o(j._("{name} messaged you",[j.param("name",s.short_name)]));});}else o(j._("New message!"));});});}e.exports={renderDocumentTitle:m};},null);
__d("MessengerBrowserAlerts",["DocumentTitle","Event","ImageSourceRequest","ImageSourceType","Map","MercuryAttachmentSnippetRenderer","MercuryIDs","MercuryParticipants","MercuryThreadInfo","MercuryThreadInformer","MercuryThreads","MercuryUnseenState","MessagingTag","MessengerActions","MessengerConfig","MessengerDesktopNotifications","MessengerSettingsStore","MessengerStateStore","MercuryNotificationRenderer","PhotoResizeModeConst","Sound","UserActivity","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca){b.__markCompiled&&b.__markCompiled();'use strict';var da=80,ea=null,fa='/images/messengerdotcom/favicon/favicon.ico',ga='/images/messengerdotcom/favicon/unread_favicon.ico';aa.init(['audio/ogg','audio/mpeg']);function ha(ka){if(w.getSettings().sound_enabled)aa.play([u['sound.notif_ogg_url'],u['sound.notif_mp3_url']],ka,false);}function ia(ka,la,ma){n.get(ka.snippet_sender,function(na){var oa=ka.snippet;if(!oa&&ka.snippet_has_attachment)oa=l.renderAttachmentSnippetText(l.getAttachmentSnippetType(ka.snippet_attachments),false,na.short_name,ka.snippet_attachments);var pa=na.name;if(!ka.is_canonical)pa=ka.name?ca._("{sender's name} to {group name}",[ca.param("sender's name",na.short_name),ca.param("group name",ka.name)]):ca._("{sender's name} to your group",[ca.param("sender's name",na.short_name)]);v.showNotification({title:pa,body:oa,icon:ka.image_src||la||na.big_image_src||na.image_src,closeTime:null,onClick:function(){window.focus();t.selectThread(ka.thread_id);},tag:ma.message_id});if(!v.hasDefaultSound())ha(ma.timestamp);});}var ja={init:function(ka){this._viewer=ka;this._threadInformer=p.getForFBID(this._viewer);this._threads=q.getForFBID(this._viewer);this._unseenState=r.getForFBID(this._viewer);this._highResImageMap=new k();this._threadInformer.subscribe('messages-received',function(la,ma){for(var na in ma)ma[na].forEach(function(oa){this.handleMessageReceived(oa);}.bind(this));}.bind(this));this._threadInformer.subscribe('unseen-updated',this._handleUnseenUpdated.bind(this));},handleMessageReceived:function(ka){if(ka.author===this._viewer||!ka.is_unread||(ka.thread_id===x.getState().activeThreadID&&ba.isOnTab())||(ka.folder!=s.INBOX&&ka.folder!=s.ARCHIVED))return;this._threads.getThreadMeta(ka.thread_id,function(la){if(o.isMuted(la))return;if(w.getSettings().desktopNotifsEnabled&&!ba.isOnTab()&&u.EnableDesktopNotifs){this._attemptDesktopNotification(la,ka);}else ha(ka.timestamp);if(!ba.isOnTab()&&this._unseenState.getUnseenCount()>0)y.renderDocumentTitle(ka.thread_id,function(ma){if(!ea)ea=g.blink(ma);});}.bind(this));},_updateFavicon:function(ka){var la=document.querySelector('link[rel*=icon][href*=".ico"]');if(ka===0){la.href=fa;return;}la.href=ga;},_handleUnseenUpdated:function(){var ka=this._unseenState.getUnseenCount();if(ba.isOnTab()&&ka>0){this._unseenState.markAsSeen();return;}var la=g.get(),ma=ka?'('+ka+') '+la:la;g.set(ma,true);if(u.UnreadFavicon)this._updateFavicon(ka);if(ea&&ka===0){ea.stop();ea=null;}if(!this._focusToken&&ka>0)this._focusToken=h.listen(window,'focus',function(){this._focusToken&&this._focusToken.remove();this._focusToken=null;this._unseenState.markAsSeen();}.bind(this));},_attemptDesktopNotification:function(ka,la){if(!this._highResImageMap.has(ka.snippet_sender)){var ma=function(na,oa){this._highResImageMap.set(ka.snippet_sender,oa.uri);ia(ka,oa.uri,la);}.bind(this);new i().setFBID(m.getUserIDFromParticipantID(ka.snippet_sender)).setType(j.PROFILE_PICTURE).setDimensions(da,da).setResizeMode(z.COVER).setCallback(ma.bind(null,ka.snippet_sender)).send();}else ia(ka,this._highResImageMap.get(ka.snippet_sender),la);}};e.exports=ja;},null);
__d("MessengerContactActions",["keyMirror"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';e.exports=g({MESSAGE:null,PROFILE:null,REMOVE:null,SELECT:null});},null);
__d("MessengerContactAdapters",["immutable","ImmutableObject","MercuryTypeaheadConstants"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j={fromSearchableEntry:function(k){var l=k.getType(),m={uid:k.getUniqueID(),photo:k.getPhoto(),title:k.getTitle(),subtitle:l===i.THREAD_TYPE?k.getSubtitle():'',type:l},n=k.getAuxiliaryData();if(n)if(l===i.THREAD_TYPE){m.thread=new h(n.thread);m.participants=g.Map().withMutations(function(o){n.participantsToRender.forEach(function(p){o.set(p.id,p);});});}else{m.isMessengerUser=n.isMessengerUser;m.alias=n.alias;}return new h(m);},fromMercuryParticipant:function(k){return new h({alias:k.alias,uid:k.id,photo:k.image_src,title:k.name,subtitle:'',type:k.type,isMessengerUser:k.is_messenger_user,href:k.href});}};e.exports=j;},null);
__d("MessengerDomIDs",["uniqueID"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';var h={CONVERSATION:g()};e.exports=h;},null);
__d("MessengerEditorStateManager",["CacheStorage","ComposedEntityMutability","DocumentEntityInstance","EditorState","SelectionState","createContentStateFromBlocks","createEmptyEditorState","createInitialEditorState","decodeBlocks","encodeBlocks","mapObject"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){b.__markCompiled&&b.__markCompiled();'use strict';var r=new g('localstorage'),s={get:function(t){if(!t)return this._getEmptyEditorState();var u=r.get(t,false);if(!u)return this._getEmptyEditorState();var v=u.encodedBlocks,w=q(v.entityMap,function(z,aa){return new i(z.type,h.IMMUTABLE,z.data);}),x=l(o(v.blocks,w)),y=n(x);return j.forceSelection(y,new k(u.selection));},set:function(t,u){var v=p(u.getCurrentContent()),w=u.getSelection().toJS();r.set(t,{encodedBlocks:v,selection:w});},_getEmptyEditorState:function(){var t=m();return j.forceSelection(t,t.getSelection());}};e.exports=s;},null);
__d("MessengerInfoPanelVisibility",["MessengerActions","throttle","cssVar"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';var j=parseInt("1211px".replace('px',''),10)+5,k={HIDDEN:0,VISIBLE:1,AUTO:2};function l(){this.currentState=k.AUTO;this.$MessengerInfoPanelVisibility0();window.addEventListener('resize',h(this.$MessengerInfoPanelVisibility0,200,this));}l.prototype.isOverBreakpoint=function(){return window.innerWidth>j;};l.prototype.toggle=function(){this.currentState=this.$MessengerInfoPanelVisibility1?k.HIDDEN:(this.isOverBreakpoint()?k.AUTO:k.VISIBLE);this.$MessengerInfoPanelVisibility0();};l.prototype.shouldBeVisible=function(){switch(this.currentState){case k.AUTO:return this.isOverBreakpoint();case k.HIDDEN:case k.VISIBLE:return !!this.currentState;}};l.prototype.$MessengerInfoPanelVisibility0=function(){var m=this.shouldBeVisible();if(this.$MessengerInfoPanelVisibility1!==m){this.$MessengerInfoPanelVisibility1=m;g.changeInfoPanelVisibility(this.$MessengerInfoPanelVisibility1);}};Object.assign(l,k);e.exports=l;},null);
__d("MercuryDelayedDispatcher",["MercuryDispatcher","MercuryServerPayloadPreprocessor","MercuryServerRequests","MercurySingletonMixin","MercuryThreadIDMap"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';function l(m){this.$MercuryDelayedDispatcher0=m;this.$MercuryDelayedDispatcher1=[];this.$MercuryDelayedDispatcher2=k.getForFBID(this.$MercuryDelayedDispatcher0);this.$MercuryDelayedDispatcher3=g.getForFBID(this.$MercuryDelayedDispatcher0);this.$MercuryDelayedDispatcher4=i.getForFBID(this.$MercuryDelayedDispatcher0);this.$MercuryDelayedDispatcher5=h.getForFBID(this.$MercuryDelayedDispatcher0);this.$MercuryDelayedDispatcher3.subscribe('model-update-completed',function(n,o){return this.$MercuryDelayedDispatcher7();}.bind(this));}l.prototype.handleUpdateWaitForThread=function(m,n){var o=this.$MercuryDelayedDispatcher2.getClientIDFromFBIDNow(n);if(o){this.$MercuryDelayedDispatcher8(m);return;}this.$MercuryDelayedDispatcher2.getClientIDFromFBID(n,function(){return this.$MercuryDelayedDispatcher1.push(m);}.bind(this));this.$MercuryDelayedDispatcher4.ensureThreadIsFetched(n);};l.prototype.$MercuryDelayedDispatcher7=function(){if(this.$MercuryDelayedDispatcher1&&this.$MercuryDelayedDispatcher1.length){var m=this.$MercuryDelayedDispatcher1[0];this.$MercuryDelayedDispatcher1=this.$MercuryDelayedDispatcher1.slice(1);this.$MercuryDelayedDispatcher8(m);}};l.prototype.$MercuryDelayedDispatcher8=function(m){if(m.from_client){this.$MercuryDelayedDispatcher3.handleUpdate(m);}else this.$MercuryDelayedDispatcher5.handleUpdate(m);};Object.assign(l,j);e.exports=l;},null);
__d("MessagingReliabilityLogger",["PresenceUtil","MercuryServerDispatcher","MessagingReliabilityLoggerInitialData","isEmpty","setTimeoutAcrossTransitions"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l='/ajax/mercury/client_reliability.php',m=60000;function n(t,u){var v={app:i.app,categories:JSON.stringify(t)};if(!j(u))v.extra=JSON.stringify(u);return v;}function o(t,u,v,w){if(t[u]===(void 0))t[u]={};if(t[u][v]===(void 0))t[u][v]=0;t[u][v]+=w;}function p(t,u,v,w){if(t[u]===(void 0))t[u]={};if(t[u][v]===(void 0))t[u][v]=[];for(var x=0;x<w.length;++x)t[u][v].push(w[x]);}function q(t,u){if((t&&!t.categories)||(u&&!u.categories))return;var v=t?JSON.parse(t.categories):{},w=t&&t.extra?JSON.parse(t.extra):{},x=JSON.parse(u.categories),y=u.extra?JSON.parse(u.extra):{};for(var z in x){var aa=x[z],ba=y[z];for(var ca in aa){o(v,z,ca,aa[ca]);if(ba!==(void 0)){var da=ba[ca];if(da!==(void 0))p(w,z,ca,da);}}}return n(v,w);}var r={};r[l]={mode:h.BATCH_SUCCESSIVE_PIGGYBACK_ON_ERROR,batch_function:q};h.registerEndpoints(r);var s={addEntry:function(t,u,v){if(!i.enabled)return;var w={};o(w,t,u,1);var x={};if(v!==(void 0))p(x,t,u,[v]);h.trySend(l,n(w,x));}};(function t(){s.addEntry('page_event','active',g.getSessionID());k(t,m);})();e.exports=s;},null);
__d("MercuryChannelHandler",["Arbiter","ChannelConstants","MercuryActionType","MercuryDelayedDispatcher","MercuryGlobalActionType","MercuryMessages","MercuryPayloadSource","MercuryServerPayloadPreprocessor","MercurySingletonMixin","MercuryThreadInformer","MercuryViewer","MessagingEvent","MessagingReliabilityLogger","MessagingTag","PresenceUtil","mixin"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){b.__markCompiled&&b.__markCompiled();var w=v(o);for(var x in w)if(w.hasOwnProperty(x))z[x]=w[x];var y=w===null?null:w.prototype;z.prototype=Object.create(y);z.prototype.constructor=z;z.__superConstructor__=w;function z(aa){"use strict";w.call(this);this.$MercuryChannelHandler0=aa;this.__payloadPreprocessor=n.getForFBID(this.$MercuryChannelHandler0);this.$MercuryChannelHandler1=p.getForFBID(this.$MercuryChannelHandler0);this.$MercuryChannelHandler2=l.getForFBID(this.$MercuryChannelHandler0);this.__delayedDispatcher=j.getForFBID(this.$MercuryChannelHandler0);this.$MercuryChannelHandler3=[];}z.prototype.getInstanceFBID=function(){"use strict";return this.$MercuryChannelHandler0;};z.prototype.$MercuryChannelHandler4=function(aa,ba){"use strict";if(!this.$MercuryChannelHandler5(aa)||!ba.obj||!ba.obj.message){s.addEntry('channel_receive','invalid_data');return;}var ca=ba.obj.message,da=ca.other_user_fbid?ca.other_user_fbid:ca.thread_fbid,ea={author:ca.mercury_author_id,author_email:ca.mercury_author_email,body:ca.body,subject:ca.subject,has_attachment:ca.has_attachment,attachments:ca.attachments,html_body:ca.html_body,thread_id:ca.tid,thread_fbid:ca.thread_fbid,other_user_fbid:ca.other_user_fbid,offline_threading_id:ca.offline_threading_id,message_id:ca.mid,is_spoof_warning:ca.is_spoof_warning,ranges:ca.ranges,source:ca.mercury_source,source_tags:ca.mercury_source_tags,threading_id:ca.threading_id,timestamp:ca.timestamp,timestamp_absolute:ca.timestamp_absolute,timestamp_relative:ca.timestamp_relative,timestamp_time_passed:ca.timestamp_time_passed,action_type:i.USER_GENERATED_MESSAGE,is_unread:ca.is_unread,is_forward:false,forward_count:ca.forward_count||ca.forward,forward_message_ids:ca.forward_msg_ids,folder:ba.obj.folder};if("sync_id" in ca){ea.sync_id=ca.sync_id;}else ea.action_id=ca.action_id;var fa=[Object.assign({},ea)];fa=fa.concat(ca.forward_actions||[]);var ga=m.CLIENT_CHANNEL_MESSAGE;this.__delayedDispatcher.handleUpdateWaitForThread({actions:fa,payload_source:ga},da);if(!ca.is_unread&&q.isViewer(ca.mercury_author_id)){var ha={};ha[da]=ba.obj.folder;this.$MercuryChannelHandler6(this.__getMessagingPayloadType(),{obj:{event:r.READ,thread_fbids:ca.thread_fbid?[ca.thread_fbid]:[],other_user_fbids:ca.other_user_fbid?[ca.other_user_fbid]:[],folder_info:ha,timestamp:ca.timestamp}});}s.addEntry('channel_receive','success',[da,ea.message_id,u.getSessionID()]);};z.prototype.$MercuryChannelHandler7=function(aa,ba){"use strict";if(!this.$MercuryChannelHandler5(aa)||(!ba.obj.other_user_fbid&&!ba.obj.thread_fbid))return;this.__payloadPreprocessor.handleUpdate({delivery_receipts:[{other_user_fbid:ba.obj.other_user_fbid||'',thread_fbid:ba.obj.thread_fbid||'',time:ba.obj.timestamp}]});};z.prototype.$MercuryChannelHandler6=function(aa,ba){"use strict";if(!this.$MercuryChannelHandler5(aa)||!ba.obj||(!ba.obj.thread_fbids&&!ba.obj.other_user_fbids))return;var ca=[],da=ba.obj.event==r.READ;(ba.obj.thread_fbids||[]).forEach(function(ea){ca.push({action_type:i.CHANGE_READ_STATUS,action_id:null,thread_fbid:ea,mark_as_read:da,timestamp:ba.obj.timestamp||0,folder:ba.obj.folder_info[ea]});});(ba.obj.other_user_fbids||[]).forEach(function(ea){ca.push({action_type:i.CHANGE_READ_STATUS,action_id:null,other_user_fbid:ea,mark_as_read:da,timestamp:ba.obj.timestamp||0,folder:ba.obj.folder_info[ea]});});this.__payloadPreprocessor.handleUpdate({actions:ca,payload_source:m.CLIENT_CHANNEL_MESSAGE});};z.prototype.$MercuryChannelHandler8=function(aa,ba){"use strict";if(!this.$MercuryChannelHandler5(aa)||!ba.obj||!(ba.obj.thread_fbids||ba.obj.other_user_fbids))return;var ca=[];(ba.obj.thread_fbids||[]).forEach(function(da){ca.push({action_type:i.DELETE_THREAD,action_id:null,thread_fbid:da});});(ba.obj.other_user_fbids||[]).forEach(function(da){ca.push({action_type:i.DELETE_THREAD,action_id:null,other_user_fbid:da});});this.__payloadPreprocessor.handleUpdate({actions:ca,payload_source:m.CLIENT_CHANNEL_MESSAGE});};z.prototype.$MercuryChannelHandler9=function(aa,ba){"use strict";if(!this.$MercuryChannelHandler5(aa)||!ba.obj||(!ba.obj.thread_fbids&&!ba.obj.other_user_fbids)||!ba.obj.mids)return;var ca=ba.obj.thread_fbids.length?ba.obj.thread_fbids[0]:null,da=ba.obj.other_user_fbids.length?ba.obj.other_user_fbids[0]:null,ea={action_type:i.DELETE_MESSAGES,action_id:null,thread_fbid:ca,other_user_fbid:da,message_ids:ba.obj.mids};this.__payloadPreprocessor.handleUpdate({actions:[ea],threads:[ba.obj.updated_thread],payload_source:m.CLIENT_CHANNEL_MESSAGE});};z.prototype.$MercuryChannelHandlera=function(aa,ba){"use strict";if(!this.$MercuryChannelHandler5(aa)||!ba.obj||!ba.obj.folder)return;var ca={action_type:k.MARK_ALL_READ,action_id:ba.obj.action_id,folder:ba.obj.folder};this.__payloadPreprocessor.handleUpdate({global_actions:[ca]});};z.prototype.$MercuryChannelHandlerb=function(aa,ba){"use strict";if(!this.$MercuryChannelHandler5(aa)||(!ba.obj.thread_fbids&&!ba.obj.other_user_fbids))return;var ca=m.CLIENT_CHANNEL_MESSAGE;(ba.obj.thread_fbids||[]).forEach(function(da){var ea={action_type:i.CHANGE_ARCHIVED_STATUS,action_id:null,thread_fbid:da,other_user_fbid:null,archived:ba.obj.state};this.__delayedDispatcher.handleUpdateWaitForThread({actions:[Object.assign({},ea)],payload_source:ca},da);},this);(ba.obj.other_user_fbids||[]).forEach(function(da){var ea={action_type:i.CHANGE_ARCHIVED_STATUS,action_id:null,thread_fbid:null,other_user_fbid:da,archived:ba.obj.state};this.__delayedDispatcher.handleUpdateWaitForThread({actions:[Object.assign({},ea)],payload_source:ca},da);},this);};z.prototype.$MercuryChannelHandlerc=function(aa,ba){"use strict";if(!this.$MercuryChannelHandler5(aa)||(!ba.obj.thread_fbids&&!ba.obj.other_user_fbids))return;var ca=m.CLIENT_CHANNEL_MESSAGE,da;(ba.obj.thread_fbids||[]).forEach(function(ea){if(ba.obj.event==r.TAG){da=ba.obj.tag;}else da=ba.obj.marked_as_spam?t.SPAM:t.INBOX;var fa={action_type:i.CHANGE_FOLDER,action_id:null,thread_fbid:ea,other_user_fbid:null,new_folder:da};this.__delayedDispatcher.handleUpdateWaitForThread({actions:[Object.assign({},fa)],payload_source:ca},ea);},this);(ba.obj.other_user_fbids||[]).forEach(function(ea){if(ba.obj.event==r.TAG){da=ba.obj.tag;}else da=ba.obj.marked_as_spam?t.SPAM:t.INBOX;var fa={action_type:i.CHANGE_FOLDER,action_id:null,other_user_fbid:ea,thread_fbid:null,new_folder:da};this.__delayedDispatcher.handleUpdateWaitForThread({actions:[Object.assign({},fa)],payload_source:ca},ea);},this);};z.prototype.$MercuryChannelHandlerd=function(aa,ba){"use strict";if(!this.$MercuryChannelHandler5(aa)||!ba.obj.tag)return;switch(ba.obj.tag){case t.ACTION_ARCHIVED:this.$MercuryChannelHandlerb(aa,ba);break;case t.INBOX:case t.OTHER:this.$MercuryChannelHandlerc(aa,ba);break;}};z.prototype.__markAsSeen=function(aa,ba){"use strict";if(!this.$MercuryChannelHandlere(aa)||!ba.obj||!ba.obj.seen_timestamp)return;this.__payloadPreprocessor.handleUpdate({message_counts:[{seen_timestamp:ba.obj.seen_timestamp,folder:t.INBOX}],unseen_thread_fbids:[{thread_fbids:[],other_user_fbids:[],folder:t.INBOX}],payload_source:m.CLIENT_CHANNEL_MESSAGE});};z.prototype.__updateModelsFromMercuryPayload=function(aa,ba){"use strict";if(!this.$MercuryChannelHandlerf(aa)||!ba.obj)return;this.$MercuryChannelHandler1.synchronizeInforms(function(){var ca=ba.obj,da=[];(ca.actions||[]).forEach(function(ea){var fa=i.USER_GENERATED_MESSAGE;if(ea.action_type==i.LOG_MESSAGE){var ga=m.CLIENT_CHANNEL_MESSAGE,ha;ha=ea.other_user_fbid||ea.thread_fbid;this.__delayedDispatcher.handleUpdateWaitForThread({actions:[Object.assign({},ea)],payload_source:ga},ha);}else if(ea.action_type!=fa)da.push(ea);},this);ca.actions=da;ca.payload_source=m.CLIENT_CHANNEL_MESSAGE;this.__payloadPreprocessor.handleUpdate(ca);}.bind(this));};z.prototype.$MercuryChannelHandlerg=function(aa,ba){"use strict";var ca,da,ea=ba.obj.time,fa=ba.obj.reader,ga=ba.obj.thread_fbid||'';this.__payloadPreprocessor.handleUpdate({roger:(ca={},ca[ga]=(da={},da[fa]=ea,da),ca)});};z.prototype.$MercuryChannelHandlerh=function(aa,ba){"use strict";if(!this.$MercuryChannelHandler5(aa)||!ba.obj||ba.obj.is_message_blocked===(void 0)||!ba.obj.thread_fbid)return;var ca=i.UPDATE_BLOCKER_STATUS,da=[{action_type:ca,action_id:null,thread_fbid:ba.obj.thread_fbid,is_message_blocked:ba.obj.is_message_blocked}];this.__payloadPreprocessor.handleUpdate({actions:da,payload_source:m.CLIENT_CHANNEL_MESSAGE});};z.prototype.$MercuryChannelHandleri=function(aa,ba){"use strict";if(!this.$MercuryChannelHandler5(aa)||!ba.obj||ba.obj.got_blocked===(void 0)||!ba.obj.thread_fbid)return;var ca=i.UPDATE_BLOCKEE_STATUS,da=[{action_type:ca,action_id:null,thread_fbid:ba.obj.thread_fbid,got_blocked:ba.obj.got_blocked}];this.__payloadPreprocessor.handleUpdate({actions:da,payload_source:m.CLIENT_CHANNEL_MESSAGE});};z.prototype.$MercuryChannelHandlerj=function(aa,ba){"use strict";if(!this.$MercuryChannelHandler5(aa)||!ba.obj||ba.obj.mute_settings===(void 0)||(!ba.obj.thread_fbid&&!ba.obj.other_user_fbid))return;var ca=i.CHANGE_MUTE_SETTINGS,da=[{action_type:ca,action_id:null,thread_fbid:ba.obj.thread_fbid,other_user_fbid:ba.obj.other_user_fbid,mute_settings:ba.obj.mute_settings}];this.__payloadPreprocessor.handleUpdate({actions:da,payload_source:m.CLIENT_CHANNEL_MESSAGE});};z.prototype.__handleMessagingPayload=function(aa,ba){"use strict";switch(ba.obj.event){case r.DELIVER:this.$MercuryChannelHandler4(aa,ba);break;case r.DELIVERY_RECEIPT:this.$MercuryChannelHandler7(aa,ba);break;case r.READ:case r.UNREAD:this.$MercuryChannelHandler6(aa,ba);break;case r.READ_ALL:this.$MercuryChannelHandlera(aa,ba);break;case r.DELETE:this.$MercuryChannelHandler8(aa,ba);break;case r.DELETE_MESSAGES:this.$MercuryChannelHandler9(aa,ba);break;case r.TAG:this.$MercuryChannelHandlerd(aa,ba);break;case r.REPORT_SPAM:this.$MercuryChannelHandlerc(aa,ba);break;case r.READ_RECEIPT:this.$MercuryChannelHandlerg(aa,ba);break;case r.CHANGE_MUTE_SETTINGS:this.$MercuryChannelHandlerj(aa,ba);break;case r.UPDATE_BLOCKER_STATUS:this.$MercuryChannelHandlerh(aa,ba);break;case r.UPDATE_BLOCKEE_STATUS:this.$MercuryChannelHandleri(aa,ba);break;}};z.prototype.getRouting=function(){"use strict";return {mercury:this.__updateModelsFromMercuryPayload,messaging:this.__handleMessagingPayload,inbox:this.__markAsSeen};};z.prototype.__getMessagingPayloadType=function(){"use strict";return h.getArbiterType('messaging');};z.prototype.__getMercuryPayloadType=function(){"use strict";return h.getArbiterType('mercury');};z.prototype.__getInboxPayloadType=function(){"use strict";return h.getArbiterType('inbox');};z.prototype.$MercuryChannelHandler5=function(aa){"use strict";return (aa==this.__getMessagingPayloadType());};z.prototype.$MercuryChannelHandlerf=function(aa){"use strict";return (aa==this.__getMercuryPayloadType());};z.prototype.$MercuryChannelHandlere=function(aa){"use strict";return (aa==this.__getInboxPayloadType());};z.prototype.turnOn=function(){"use strict";if(!this.$MercuryChannelHandler3.length){var aa=this.getRouting();for(var ba in aa)this.$MercuryChannelHandler3.push(g.subscribe(h.getArbiterType(ba),aa[ba].bind(this)));}return this;};z.prototype.turnOff=function(){"use strict";if(this.$MercuryChannelHandler3.length){this.$MercuryChannelHandler3.forEach(g.unsubscribe);this.$MercuryChannelHandler3=[];}return this;};Object.assign(z,o);e.exports=z;},null);
__d("LiveTimer",["CSS","DOM","ServerTime","fbt"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=1000,l=60,m=3600,n=43200,o=86400,p=60,q=20000,r={restart:function(s){i.update(s*1000);this.updateTimeStamps();},getApproximateServerTime:function(){return i.get();},getServerTimeOffset:function(){return -1*i.getSkew();},updateTimeStamps:function(){this.timestamps=h.scry(document.body,'abbr.livetimestamp');this.startLoop(q);},addTimeStamps:function(s){if(!s)return;this.timestamps=this.timestamps||[];if(h.isNodeOfType(s,'abbr')&&g.hasClass(s,'livetimestamp')){this.timestamps.push(s);}else{var t=h.scry(s,'abbr.livetimestamp');for(var u=0;u<t.length;++u)this.timestamps.push(t[u]);}this.startLoop(0);},startLoop:function(s){this.stop();this.timeout=setTimeout(function(){this.loop();}.bind(this),s);},stop:function(){clearTimeout(this.timeout);},loop:function(s){if(s)this.updateTimeStamps();var t=Math.floor(i.get()/k),u=-1;this.timestamps&&this.timestamps.forEach(function(w){var x=w.getAttribute('data-utime'),y=w.getAttribute('data-shorten'),z=w.getAttribute('data-minimize'),aa=this.renderRelativeTime(t,x,y,z);if(aa.text)h.setContent(w,aa.text);if(aa.next!=-1&&(aa.next<u||u==-1))u=aa.next;}.bind(this));if(u!=-1){var v=Math.max(q,u*k);this.timeout=setTimeout(function(){this.loop();}.bind(this),v);}},renderRelativeTime:function(s,t,u,v){var w={text:"",next:-1};if(s-t>(o))return w;var x=s-t,y=Math.floor(x/l),z=Math.floor(y/p);if(y<1){if(v){w.text=j._("1m");w.next=20-x%20;}else if(u){w.text=j._("Just now");w.next=20-x%20;}else{w.text=j._("a few seconds ago");w.next=l-x%l;}return w;}if(z<1){if(v){w.text=j._({"*":"{number}m"},[j.param("number",y,[0])]);}else if(u&&y==1){w.text=j._("1 min");}else if(u){w.text=j._({"*":"{number} mins"},[j.param("number",y,[0])]);}else w.text=y==1?j._("about a minute ago"):j._({"*":"{number} minutes ago"},[j.param("number",y,[0])]);w.next=l-x%l;return w;}if(z<11)w.next=m-x%m;if(v){w.text=j._({"*":"{number}h"},[j.param("number",z,[0])]);}else if(u&&z==1){w.text=j._("1 hr");}else if(u){w.text=j._({"*":"{number} hrs"},[j.param("number",z,[0])]);}else w.text=z==1?j._("about an hour ago"):j._({"*":"{number} hours ago"},[j.param("number",z,[0])]);return w;},renderRelativeTimeToServer:function(s,t,u){return this.renderRelativeTime(Math.floor(i.get()/k),s,t,u);}};e.exports=r;e.exports.CONSTS={MS_IN_SEC:k,SEC_IN_MIN:l,SEC_IN_HOUR:m,SEC_IN_12_HOUR:n,SEC_IN_24_HOUR:o,MIN_IN_HOUR:p,HEARTBEAT:q};},null);
__d("MercuryRoger",["Arbiter","ArbiterMixin","immutable","JSLogger","MercuryActionStatus","MercuryDispatcher","MercurySingletonMixin","MercuryThreads","mixin","mapObject"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){b.__markCompiled&&b.__markCompiled();var q=k.SUCCESS,r=o(h);for(var s in r)if(r.hasOwnProperty(s))u[s]=r[s];var t=r===null?null:r.prototype;u.prototype=Object.create(t);u.prototype.constructor=u;u.__superConstructor__=r;function u(x){"use strict";r.call(this);this.$MercuryRoger0={};this.$MercuryRoger1=[];this.$MercuryRoger2=x;this.$MercuryRoger3=l.getForFBID(this.$MercuryRoger2);this.$MercuryRoger4=n.getForFBID(this.$MercuryRoger2);this.$MercuryRoger3.subscribe('update-roger',function(y,z){for(var aa in z){var ba=this.$MercuryRoger0[aa]||i.OrderedMap();ba=ba.withMutations(function(ca){for(var da in z[aa]){var ea=this.$MercuryRoger4.getThreadMetaNow(aa);if(ea&&ea.participants)if(ea.participants.indexOf(da)==-1){this.$MercuryRoger1.push(w(this.$MercuryRoger0));continue;}var fa=ca.get(da),ga=z[aa][da];if(!fa||ga>fa)ca.set(da,ga);}}.bind(this));this.$MercuryRoger0[aa]=ba.sort();}z&&this.inform('change',z);}.bind(this));g.subscribe(j.DUMP_EVENT,function(y,z){z.bad_read_receipts={receipts:this.$MercuryRoger1};}.bind(this));}u.prototype.getSeenBy=function(x,y){"use strict";if(!x)return [];var z=[],aa=this.$MercuryRoger0[x.thread_id];if(!aa)return z;aa.forEach(function(ba,ca){if(v(x,ba,ca,y))z.push(ca);});return z;};u.prototype.wasSeenByAll=function(x){"use strict";if(!x)return false;var y=this.$MercuryRoger0[x.thread_id];if(!y)return false;return y.every(function(z,aa){return v(x,z,aa);});};u.prototype.getSeenTimestamps=function(x){"use strict";var y=this.$MercuryRoger0[x];if(!y){y=i.OrderedMap();this.$MercuryRoger0[x]=y;}return y;};u.prototype.getSeenTimestamp=function(x,y){"use strict";var z=this.$MercuryRoger0[x];return z?z.get(y):null;};Object.assign(u,m);function v(x,y,z,aa){return !!(y>x.timestamp&&(x.status===(void 0)||x.status===q)&&(!aa||z!=x.author));}function w(x){return p(x,function(y){return y.toJS();});}e.exports=u;},null);
__d("MercuryDelayedRoger",["ArbiterMixin","LiveTimer","MercuryActionStatus","MercuryConfig","setTimeoutAcrossTransitions","MercuryMessages","MercuryRoger","MercuryThreadInformer","MercuryThreads"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=b('MercuryMessages').get(),m=b('MercuryRoger').get(),n=b('MercuryThreadInformer').get(),o=b('MercuryThreads').get(),p={},q={},r=j['roger.seen_delay'],s={getSeenBy:function(y,z){if(q[y])return [];return m.getSeenBy(t(y),z);},wasSeenByAll:function(y){if(q[y])return false;return m.wasSeenByAll(t(y));}};Object.assign(s,g);function t(y){if(!p[y]){var z=o.getThreadMetaNow(y);if(z)p[y]={thread_id:y,author:z.participants[0],timestamp:z.timestamp};}return p[y];}function u(y){var z=false;l.getThreadMessagesRange(y,0,1,function(aa){var ba=aa[0];if(!ba)return;var ca=ba.timestamp;if(ba.action_id||ba.status==i.SUCCESS)ca-=h.getServerTimeOffset();var da=s.getSeenBy(y);if(q[y]){clearTimeout(q[y]);delete q[y];}var ea=ca+r,fa=ea-Date.now();if(fa>0)q[y]=k(function(){delete q[y];v(y);},fa);p[y]=ba;var ga=s.getSeenBy(y);if(da.length||ga.length)z=true;});return z;}function v(y){var z={};z[y]=true;w(z);}function w(y){s.inform('state-changed',y);s.inform('change');}function x(event,y){var z={};for(var aa in y)if(u(aa))z[aa]=true;for(var ba in z){w(z);break;}}m.subscribe('change',function(y,z){for(var aa in z)!q[aa]&&v(aa);});n.subscribe('messages-received',x);n.subscribe('messages-reordered',x);n.subscribe('messages-updated',x);e.exports=s;},null);
__d("MercuryDeliveryState",["MercuryConfig","MercuryIDs","MercuryServerRequests","MercurySingletonMixin","MercuryThreadInformer","PresencePrivacy","UserActivity","debounceAcrossTransitions"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();'use strict';var o=g.delivery_timeout||120000;function p(q){this.$MercuryDeliveryState0=q;this.$MercuryDeliveryState1=i.getForFBID(this.$MercuryDeliveryState0);this.$MercuryDeliveryState2=k.getForFBID(this.$MercuryDeliveryState0);this.$MercuryDeliveryState3=[];this.$MercuryDeliveryState2.subscribe('messages-received',this.$MercuryDeliveryState4.bind(this));m.subscribe(n(this.$MercuryDeliveryState5,300,this));}p.prototype.$MercuryDeliveryState4=function(q,r){for(var s in r){var t=r[s];t.forEach(function(u){if(this.$MercuryDeliveryState7(u))this.$MercuryDeliveryState3.push(u);}.bind(this));}if(m.isActive(o))this.$MercuryDeliveryState5();};p.prototype.$MercuryDeliveryState5=function(){if(this.$MercuryDeliveryState3.length===0)return;var q=this.$MercuryDeliveryState3.filter(this.$MercuryDeliveryState7,this).map(function(r){return r.message_id;});if(q)this.$MercuryDeliveryState1.sendDeliveryReceipts(q);this.$MercuryDeliveryState3=[];};p.prototype.$MercuryDeliveryState7=function(q){var r=q.author?h.getUserIDFromParticipantID(q.author):null;if(r===this.$MercuryDeliveryState0)return false;if(!q.is_unread)return false;if(!l.allows(r))return false;return true;};Object.assign(p,j);e.exports=p;},null);
__d("MercuryFilters",["MessagingTag","arrayContains"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i=[g.UNREAD],j={ALL:'all',UNREAD:g.UNREAD,getSupportedFilters:function(){return i.concat();},isSupportedFilter:function(k){return h(i,k);}};e.exports=j;},null);
__d("MercuryOrderedThreadlist",["LogHistory","MercuryActionType","MercuryDispatcher","MercuryConfig","MercuryFilters","MercuryFolders","MercuryGlobalActionType","MercuryPayloadSource","MercurySingletonMixin","MercuryThreadIDMap","MessagingTag","PageMessageEnumTag","RangedCallbackManager","MercuryServerRequests","MercuryThreadInformer","MercuryThreads","arrayContains"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){b.__markCompiled&&b.__markCompiled();'use strict';var x=g.getInstance('ordered_threadlist_model'),y=k.getSupportedFilters().concat([k.ALL,q.GROUPS]),z=l.getSupportedFolders();function aa(ka,la,ma,na){var oa=[],pa=false,qa=false,ra=(la||[]).filter(function(ya){var za=ya.filter||k.ALL;return (ya.folder==ma||(!ya.folder&&ma==q.INBOX))&&za==na;}),sa=ka._threadlistOrderMap[ma][na].getAllResources(),ta;ra.forEach(function(ya){oa=oa.concat(ya.thread_ids);if(ya.error){if(ya.end>sa.length)qa=ya.error;}else{var za=ya.end-ya.start;if(ya.thread_ids.length<za)pa=true;}if(!ta||ya.end>ta)ta=ya.end;});ea(ka,oa,ma,na);if(pa){ka._threadlistOrderMap[ma][na].setReachedEndOfArray();}else if(qa){ka._threadlistOrderMap[ma][na].setError(qa);}else{var ua=ka._threadlistOrderMap[ma][na].getCurrentArraySize();if(ta&&ua<ta){var va={},wa=sa.concat(oa),xa=wa.filter(function(ya){var za=va[ya];va[ya]=true;return za;});if(xa.length){x.warn('duplicate_threads',{folder:ma,expected_final_size:ta,actual_final_size:ua,duplicate_thread_ids:xa});ka._serverRequests.fetchThreadlistInfo(ta,xa.length,ma,na==k.ALL?null:na);}}}}function ba(ka,la){z.forEach(function(ma){y.forEach(function(na){aa(ka,la,ma,na);});});}function ca(ka,la){var ma={};z.forEach(function(na){ma[na]={};y.forEach(function(oa){ma[na][oa]={to_add:[],to_remove:[],to_remove_if_last_after_add:{}};});});la.forEach(function(na){if(na.is_forward)return;var oa=na.thread_id,pa=fa(ka,oa),qa=ga(ka,oa);function ra(){qa.forEach(function(ta){if(!w(y,ta))return;ma[pa][ta].to_add.push(oa);if(!ka._threadlistOrderMap[pa][ta].hasReachedEndOfArray()&&!ka._threadlistOrderMap[pa][ta].hasResource(oa))ma[pa][ta].to_remove_if_last_after_add[oa]=true;});}function sa(ta){if(w(y,ta))if(w(qa,ta)){ma[pa][ta].to_add.push(oa);}else ma[pa][ta].to_remove.push(oa);}if(!pa){if(na.action_type===h.CHANGE_FOLDER||na.action_type===h.CHANGE_ARCHIVED_STATUS)z.forEach(function(ta){if(ta!==pa)y.forEach(function(ua){ka._threadlistOrderMap[ta][ua].removeResources([oa]);});});return;}switch(na.action_type){case h.DELETE_THREAD:qa.forEach(function(ta){if(!w(y,ta))return;ma[pa][ta].to_remove.push(oa);});break;case h.CHANGE_ARCHIVED_STATUS:case h.CHANGE_FOLDER:ra();break;case h.CHANGE_READ_STATUS:sa(q.UNREAD);break;case h.USER_GENERATED_MESSAGE:case h.LOG_MESSAGE:qa.forEach(function(ta){if(!w(y,ta))return;if(ha(ka,oa,pa,ta))ma[pa][ta].to_add.push(oa);});break;case h.CHANGE_FLAG:sa(r.FLAG);break;}});z.forEach(function(na){y.forEach(function(oa){var pa=ka._threadlistOrderMap[na][oa];ea(ka,ma[na][oa].to_add,na,oa);for(var qa=pa.getCurrentArraySize()-1;qa>=0;qa--){var ra=pa.getResourceAtIndex(qa);if(!ma[na][oa].to_remove_if_last_after_add[ra])break;ma[na][oa].to_remove.push(ra);}pa.removeResources(ma[na][oa].to_remove);});});}function da(ka,la){var ma={};z.forEach(function(na){ma[na]={};y.forEach(function(oa){ma[na][oa]=[];});});la.forEach(function(na){var oa=fa(ka,na.thread_id),pa=ga(ka,na.thread_id);if(oa)pa.forEach(function(qa){if(ha(ka,na.thread_id,oa,qa))ma[oa][qa].push(na.thread_id);});});z.forEach(function(na){y.forEach(function(oa){if(ma[na][oa].length>0)ea(ka,ma[na][oa],na,oa);});});}function ea(ka,la,ma,na){na=na||k.ALL;ka._threadlistOrderMap[ma][na].addResources(la);z.forEach(function(oa){if(oa!=ma)ka._threadlistOrderMap[oa][na].removeResources(la);});}function fa(ka,la){var ma=ka._threads.getThreadMetaNow(la),na=null;if(!ma){na='No thread metadata';}else if(!ma.folder)na='No thread folder';if(na){var oa={error:na,tid:la};x.warn('no_thread_folder',oa);return null;}var pa=ma.folder;if(ma.is_archived)pa=q.ACTION_ARCHIVED;if(ka._threadlistOrderMap[pa]){return pa;}else return null;}function ga(ka,la){var ma=ka._threads.getThreadMetaNow(la),na=[k.ALL];if(!ma){var oa={error:'no_thread_metadata',tid:la};x.warn('no_thread_metadata',oa);return [];}if(ma.unread_count)na.push(q.UNREAD);if(!ma.is_canonical)na.push(q.GROUPS);var pa=ma.page_thread_info;if(pa&&pa.flagged)na.push(r.FLAG);return na;}function ha(ka,la,ma,na){var oa=ka._threads.getThreadMetaNow(la);return oa&&oa.timestamp&&fa(ka,la)==ma&&w(ga(ka,la),na);}function ia(ka){this._fbid=ka;this._serverRequests=t.getForFBID(this._fbid);this._threadIDMap=p.getForFBID(this._fbid);this._threadInformer=u.getForFBID(this._fbid);this._threads=v.getForFBID(this._fbid);this._dispatcher=i.getForFBID(this._fbid);this._threadlistOrderMap={};z.forEach(function(la){this._threadlistOrderMap[la]={};y.forEach(function(ma){this._threadlistOrderMap[la][ma]=new s(function(na){return this._threads.getThreadMetaNow(na).timestamp;}.bind(this),function(na,oa){return oa-na;},this._threadIDMap.canLinkExternally.bind(this._threadIDMap));}.bind(this));}.bind(this));this._dispatcher.subscribe('update-threadlist',function(la,ma){if(!ja(ma))return;if(j.MessengerJewelUnread!=='none')if(ma.global_actions)ma.global_actions.forEach(function(pa){if(pa.action_type==m.MARK_ALL_READ)this.getThreadlistOrderMap(pa.folder,k.UNREAD).removeAllResources();}.bind(this));var na=ma.ordered_threadlists;if(na&&na.length){ba(this,na);}else{var oa=(ma.actions||[]).filter(function(pa){return pa.thread_id;});da(this,ma.threads||[]);ca(this,oa);}this._threadInformer.updatedThreadlist();}.bind(this));}Object.assign(ia.prototype,{getThreadlistOrderMap:function(ka,la){if(!this._threadlistOrderMap[ka][la]){y=y.concat([la]);z.forEach(function(ma){this._threadlistOrderMap[ma][la]=new s(function(na){return this._threads.getThreadMetaNow(na).timestamp;}.bind(this),function(na,oa){return oa-na;},this._threadIDMap.canLinkExternally.bind(this._threadIDMap));}.bind(this));}return this._threadlistOrderMap[ka][la];},getThreadlist:function(ka,la,ma,na,oa,pa){return this.getFilteredThreadlist(ka,la,ma,k.ALL,na,oa,pa);},getFilteredThreadlist:function(ka,la,ma,na,oa,pa,qa){var ra=this.getThreadlistOrderMap(ma,na),sa=ra.executeOrEnqueue(ka,la,oa,pa),ta=ra.getUnavailableResources(sa),ua=ra.getError(ka,la,pa);if(ta.length||ua){if(ra.getCurrentArraySize()<ka){var va={start:ka,limit:la,filter:na,resources_size:ra.getCurrentArraySize()};x.warn('range_with_gap',va);}ra.setError(false);this._serverRequests.fetchThreadlistInfo(ra.getCurrentArraySize(),ta.length,ma,na==k.ALL?null:na,qa);}return sa;},getThreadlistUntilTimestamp:function(ka,la,ma){ma=ma||k.ALL;return this.getThreadlistOrderMap(la,ma).getElementsUntil(ka);},getAvailableThreadlistNow:function(ka,la){la=la||k.ALL;return this.getThreadlistOrderMap(ka,la).getAllResources();},getThreadCount:function(ka,la){la=la||k.ALL;return this.getThreadlistOrderMap(ka,la).getCurrentArraySize();},hasLoadedThreadlist:function(ka,la){la=la||k.ALL;return this.getThreadlistOrderMap(ka,la).hasReachedEndOfArray();},unsubscribe:function(ka,la,ma){ma=ma||k.ALL;this.getThreadlistOrderMap(la,ma).unsubscribe(ka);}});Object.assign(ia,o);function ja(ka){switch(ka.payload_source){case n.CLIENT_CHANGE_ARCHIVED_STATUS:case n.CLIENT_CHANGE_READ_STATUS:case n.CLIENT_CHANGE_FOLDER:case n.CLIENT_CHANNEL_MESSAGE:case n.CLIENT_DELETE_MESSAGES:case n.CLIENT_DELETE_THREAD:case n.CLIENT_SEND_MESSAGE:case n.SERVER_SEND_MESSAGE:case n.SERVER_FETCH_THREADLIST_INFO:case n.SERVER_THREAD_SYNC:return true;case n.SERVER_INITIAL_DATA:return ka.ordered_threadlists;default:return false;}}e.exports=ia;},null);
__d("MercuryStateCheck",["Arbiter","ChannelConstants","LogHistory","MercuryAPIArgsSource","MercuryFolders","MercuryOrderedThreadlist","MercuryServerRequests","MercurySingletonMixin","MessagingTag","URI"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){b.__markCompiled&&b.__markCompiled();var q=i.getInstance('mercury_state_check');function r(s){"use strict";this.$MercuryStateCheck0=s;this.$MercuryStateCheck1=m.getForFBID(this.$MercuryStateCheck0);this.$MercuryStateCheck2=l.getForFBID(this.$MercuryStateCheck0);g.subscribe(h.ON_INVALID_HISTORY,this.$MercuryStateCheck3.bind(this,h.ON_INVALID_HISTORY));d(['ChannelConnection'],function(t){t.subscribe(t.CONNECTED,function(u,v){if(!v.init)this.$MercuryStateCheck4(t.CONNECTED);}.bind(this));}.bind(this));}r.prototype.$MercuryStateCheck3=function(s){"use strict";var t;if(p.getRequestURI().getPath().search(/messages/)!==-1){t=k.getSupportedFolders();}else t=[o.INBOX];q.debug('check',{folders:t,source:s});this.$MercuryStateCheck1.fetchMissedMessages(t,j.MERCURYSYNC);};r.prototype.$MercuryStateCheck4=function(s){"use strict";var t=this.$MercuryStateCheck2.getAvailableThreadlistNow(o.INBOX)||[];t=t.slice(0,20);q.debug('full_check',{threads:t,source:s});this.$MercuryStateCheck1.fetchThreadData(t,j.MERCURYSYNC);this.$MercuryStateCheck3(s);};Object.assign(r,n);e.exports=r;},null);
__d("MercuryUnreadState",["MercuryFolders","LogHistory","KeyedCallbackManager","MercuryActionType","MercuryDispatcher","MercuryGlobalActionType","MercurySingletonMixin","MercuryThreadlistConstants","MercuryThreadIDMap","MessagingTag","MercuryServerRequests","MercuryThreadInformer","MercuryThreads","arrayContains","createObjectFrom"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){b.__markCompiled&&b.__markCompiled();var v=(g.getSupportedFolders()||[]).filter(function(na){return na!=p.ACTION_ARCHIVED;}),w='unread_thread_hash',x='unseen_thread_list',y=n.MAX_UNREAD_COUNT,z=h.getInstance('mercury_unread_state');function aa(na){this._fbid=na;this._serverRequests=q.getForFBID(this._fbid);this._threadIDMap=o.getForFBID(this._fbid);this._threadInformer=r.getForFBID(this._fbid);this._threads=s.getForFBID(this._fbid);this._dispatcher=k.getForFBID(this._fbid);this._allReadTimestamp={};this._threadReadTimestamp={};this._initialUnreadCount={};this._maxCount={};this._unreadResources={};v.forEach(function(oa){this._initialUnreadCount[oa]=0;this._maxCount[oa]=false;this._unreadResources[oa]=new i();}.bind(this));this._dispatcher.subscribe('update-unread',function(oa,pa){fa(this,pa);var qa=pa.global_actions||[];for(var ra=0;ra<qa.length;ra++){var sa=qa[ra];if(sa.action_type==l.MARK_ALL_READ)ia(this,sa.folder,sa.timestamp);}}.bind(this));this._dispatcher.subscribe('update-thread-ids',function(oa,pa){ka(this,pa);}.bind(this));}Object.assign(aa.prototype,{getUnreadCount:function(na){if(this.exceedsMaxCount(na)){z.error('unguarded_unread_count_fetch',{});return 0;}return ea(this,na);},exceedsMaxCount:function(na){return this._maxCount[na]||(ea(this,na)>y);},markFolderAsRead:function(na){if(this._maxCount[na]||ea(this,na)>0)this._serverRequests.markFolderAsRead(na);},getIsThreadUnread:function(na,oa){var pa=oa||p.INBOX,qa=da(this,pa);return qa&&qa[na];}});Object.assign(aa,m);function ba(na,oa,pa){na._unreadResources[oa].setResource(w,pa);na._unreadResources[oa].setResource(x,Object.keys(pa));}function ca(na,oa,pa){var qa=na._unreadResources[oa].executeOrEnqueue(w,pa),ra=na._unreadResources[oa].getUnavailableResources(qa);if(ra.length)na._serverRequests.fetchUnreadThreadIDs(oa);}function da(na,oa){return na._unreadResources[oa].getResource(w);}function ea(na,oa){var pa=na._unreadResources[oa].getResource(x);if(pa){return pa.length;}else return na._initialUnreadCount[oa];}function fa(na,oa){var pa;(oa.unread_thread_fbids||[]).forEach(function(qa){pa=qa.folder;if(!ma(pa))return;var ra=qa.thread_fbids||[];ra=ra.concat(qa.other_user_fbids||[]);var sa=ja(na,ra);ba(na,pa,u(sa,true));if(sa.length>y)na._maxCount[pa]=true;na._threadInformer.updatedUnreadState();});(oa.message_counts||[]).forEach(function(qa){if(qa.unread_count===(void 0))return;pa=qa.folder;if(qa.unread_count>y){na._maxCount[pa]=true;ba(na,pa,{});na._threadInformer.updatedUnreadState();}else{na._initialUnreadCount[pa]=qa.unread_count;if(na._initialUnreadCount[pa]===0)ba(na,pa,{});na._threadInformer.updatedUnreadState();}});(oa.actions||[]).forEach(function(qa){if(qa.is_forward)return;var ra=j,sa=qa.other_user_fbid?qa.other_user_fbid:qa.thread_fbid,ta=qa.thread_id?qa.thread_id:sa;if(qa.action_type==ra.DELETE_THREAD){v.forEach(function(va){ha(na,va,ta);});}else if(qa.action_type==ra.CHANGE_ARCHIVED_STATUS||qa.action_type==ra.CHANGE_FOLDER){var ua=na._threads.getThreadMetaNow(qa.thread_id);pa=g.getFromMeta(ua);if(ma(pa)&&ua.unread_count>0)ga(na,pa,ta);v.forEach(function(va){if(va!=pa)ha(na,va,ta);});}else{pa=la(na,qa);if(!ma(pa))return;if(qa.action_type==ra.CHANGE_READ_STATUS){if(qa.mark_as_read){ha(na,pa,ta,qa.timestamp);}else ga(na,pa,ta,qa.timestamp);}else if(qa.action_type==ra.USER_GENERATED_MESSAGE||qa.action_type==ra.LOG_MESSAGE)if(qa.is_unread)ga(na,pa,ta,qa.timestamp);}});}function ga(na,oa,pa,qa){if(na._maxCount[oa])return;ca(na,oa,function(ra){var sa=na._allReadTimestamp[oa]||0,ta=na._threadReadTimestamp[pa]||0,ua=qa||Number.POSITIVE_INFINITY;if(ua>=sa&&ua>=ta&&!ra[pa]){ra[pa]=qa||0;ba(na,oa,ra);na._threadInformer.updatedUnreadState();}});}function ha(na,oa,pa,qa){if(na._maxCount[oa])return;ca(na,oa,function(ra){if(qa){var sa=na._threadReadTimestamp[pa];if(!sa||sa<qa)na._threadReadTimestamp[pa]=qa;}var ta=ra[pa];if(qa&&typeof ta=='number'&&qa<ta)return;if(pa in ra){delete ra[pa];ba(na,oa,ra);na._threadInformer.updatedUnreadState();}});}function ia(na,oa,pa){na._maxCount[oa]=false;ba(na,oa,{});na._allReadTimestamp[oa]=Math.max(na._allReadTimestamp[oa]||0,pa||0);na._threadInformer.updatedUnreadState();}function ja(na,oa){return oa.map(na._threadIDMap.convertThreadIDIfAvailable,na._threadIDMap);}function ka(na,oa){v.forEach(function(pa){var qa=da(na,pa);if(!qa)return;for(var ra in oa){var sa=oa[ra];if(qa[ra]){qa[sa]=qa[ra];delete qa[ra];}}ba(na,pa,qa);});}function la(na,oa){var pa=oa.thread_id?na._threads.getThreadMetaNow(oa.thread_id):null;return pa?g.getFromMeta(pa):oa.folder;}function ma(na){return t(v,na);}e.exports=aa;},null);
__d("getInlineBoundingRect",["Rect"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();function h(i,j){var k=i.getClientRects();if(!j||k.length===0)return g.getElementBounds(i);var l,m=false;for(var n=0;n<k.length;n++){var o=new g(Math.round(k[n].top),Math.round(k[n].right),Math.round(k[n].bottom),Math.round(k[n].left),'viewport').convertTo('document'),p=o.getPositionVector(),q=p.add(o.getDimensionVector());if(!l||(p.x<=l.l&&p.y>l.t)){if(m)break;l=new g(p.y,q.x,q.y,p.x,'document');}else{l.t=Math.min(l.t,p.y);l.b=Math.max(l.b,q.y);l.r=q.x;}if(o.contains(j))m=true;}if(!l)l=g.getElementBounds(i);return l;}e.exports=h;},null);
__d("nl2br",["DOM"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h=/(\r\n|[\r\n])/;function i(j){return j.split(h).map(function(k){return h.test(k)?g.create('br'):k;});}e.exports=i;},null);
__d("Tooltip",["Event","AsyncRequest","ContextualLayer","ContextualLayerAutoFlip","CSS","DOM","Style","TooltipData","Vector","emptyFunction","getElementText","getInlineBoundingRect","nl2br","setImmediate","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){b.__markCompiled&&b.__markCompiled();var v=null,w=null,x=null,y=null,z=null,aa=[],ba=[];function ca(){if(!y){z=l.create('div',{className:'tooltipContent','data-testid':'tooltip_testid'});var ga=l.create('i',{className:'arrow'}),ha=l.create('div',{className:'uiTooltipX'},[z,ga]);y=new i({},ha);y.shouldSetARIAProperties(false);y.enableBehavior(j);}}function da(ga,ha){fa.set(ga,u._("Loading..."));new h(ha).setHandler(function(ia){fa.set(ga,ia.getPayload());}).setErrorHandler(p).send();}var ea;g.listen(document.documentElement,'mouseover',function(event){ea=event;t(function(){ea=null;});});var fa=Object.assign({},n,{isActive:function(ga){return ga===v;},process:function(ga,ha){if(!l.contains(ga,ha))return;if(ga!==v){fa.fetchIfNecessary(ga);var ia=ga.getAttribute('data-tooltip-delay');if(ia){ia=parseInt(ia,10)||1000;fa._showWithDelay(ga,ia);}else fa.show(ga);}},fetchIfNecessary:function(ga){var ha=ga.getAttribute('data-tooltip-uri');if(ha){ga.removeAttribute('data-tooltip-uri');da(ga,ha);}},hide:function(){if(v){y.hide();v=null;while(aa.length)aa.pop().remove();}},show:function(ga){ca();fa.hide();var ha=n._get(ga);if(ha.suppress)return;var ia=ha.content;if(ha.overflowDisplay){if(ga.offsetWidth>=ga.scrollWidth)return;if(!ia)ia=q(ga);}if(!ia)return;var ja=0,ka=0;if(ha.position==='left'||ha.position==='right'){ka=(ga.offsetHeight-28)/2;}else if(ha.alignH!=='center'){var la=ga.offsetWidth;if(la<32)ja=(la-32)/2*(ha.alignH==='right'?-1:1);}y.setContextWithBounds(ga,r(ga,ea&&o.getEventPosition(ea))).setOffsetX(ja).setOffsetY(ka).setPosition(ha.position).setAlignment(ha.alignH);if(typeof ia==='string'){k.addClass(y.getRoot(),'invisible_elem');var ma=l.create('span',{},s(ia));if(ha.textDirection)ma=l.create('bdo',{dir:ha.textDirection},ma);var na=l.create('div',{className:'tooltipText'},ma);l.setContent(z,na);y.show();var oa;if(na.getClientRects){var pa=na.getClientRects()[0];if(pa)oa=Math.ceil(pa.right-pa.left);}if(!oa)oa=na.offsetWidth;if(oa<ma.offsetWidth){k.addClass(na,'tooltipWrap');y.updatePosition();}k.removeClass(y.getRoot(),'invisible_elem');}else{l.setContent(z,ia);y.show();}var qa=function(sa){if(!l.contains(v,sa.getTarget()))fa.hide();};aa.push(g.listen(document.documentElement,'mouseover',qa),g.listen(document.documentElement,'focusin',qa));var ra=m.getScrollParent(ga);if(ra!==window)aa.push(g.listen(ra,'scroll',fa.hide));if(!ha.persistOnClick)aa.push(g.listen(ga,'click',fa.hide));v=ga;},_showWithDelay:function(ga,ha){if(ga!==w)fa._clearDelay();if(!x){var ia=function(ja){if(!l.contains(w,ja.getTarget()))fa._clearDelay();};ba.push(g.listen(document.documentElement,'mouseover',ia),g.listen(document.documentElement,'focusin',ia));w=ga;x=setTimeout(function(){fa._clearDelay();fa.show(ga);},ha);}},_clearDelay:function(){clearTimeout(x);w=null;x=null;while(ba.length)ba.pop().remove();}});g.listen(window,'scroll',fa.hide);e.exports=fa;},null);
__d("MessengerBugNub.react",["Image.react","Link.react","ReactComponentWithPureRenderMixin","React","Tooltip","cx","fbt","ix"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();'use strict';var o=n('/images/mercury/clients/messenger/bug_nub/bugNub.png'),p=n('/images/mercury/clients/messenger/bug_nub/betaNub.png'),q=j,r=q.PropTypes,s=j.createClass({displayName:"MessengerBugNub",mixins:[i],propTypes:{isBetaEnabled:r.bool},render:function(){return (j.createElement("div",{className:"_4_xe"},this._renderBetaIcon(),j.createElement(h,j.__spread({href:"#",ajaxify:"/ajax/bugs/employee_report",className:"_1fr8",rel:"dialog"},k.propsFor(m._("Report a bug"))),j.createElement(g,{src:o}))));},_renderBetaIcon:function(){if(!this.props.isBetaEnabled)return null;return (j.createElement("div",j.__spread({className:"_1fr8"},k.propsFor(m._("Beta"))),j.createElement(g,{src:p})));}});e.exports=s;},null);
__d("MessengerComposerActions",["MessengerDispatcher","keyMirror"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';var i=h({ADD_TOKEN:null,REMOVE_TOKEN:null,FOCUS_COMPOSER:null,FOCUS_TYPEAHEAD:null,EXIT_COMPOSE_STATE:null}),j={Types:i,addToken:function(k){g.dispatch({type:i.ADD_TOKEN,entry:k});},moveDraftToNextThread:function(k){g.dispatch({type:i.MOVE_DRAFT,threadID:k});},removeToken:function(k){g.dispatch({type:i.REMOVE_TOKEN,entry:k});},focusComposer:function(){g.dispatch({type:i.FOCUS_COMPOSER});},focusTypeahead:function(){g.dispatch({type:i.FOCUS_TYPEAHEAD});},exitComposeState:function(){g.dispatch({type:i.EXIT_COMPOSE_STATE});}};e.exports=j;},null);
__d("MessengerComposerState",["immutable"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';var h=g.Record({step:null,recipients:g.List()});e.exports=h;},null);
__d("MessengerComposerSteps",["keyMirror"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';var h=g({NULL:null,SELECT_RECIPIENTS:null,COMPOSE:null});e.exports=h;},null);
__d("MessengerConstants",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();'use strict';var g={NEW_THREAD_KEY:'new'};e.exports=g;},null);
__d("MessengerComposerStore",["EditorState","immutable","MessengerActions","MessengerComposerActions","MessengerComposerState","MessengerComposerSteps","MessengerConstants","MessengerDispatcher","MessengerEditorStateManager","MessengerStateStore","MessengerStore","MessengerView","createEmptyEditorState"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){b.__markCompiled&&b.__markCompiled();'use strict';var t=new k({step:l.NULL});for(var u in q)if(q.hasOwnProperty(u))w[u]=q[u];var v=q===null?null:q.prototype;w.prototype=Object.create(v);w.prototype.constructor=w;w.__superConstructor__=q;function w(){q.call(this);this.$MessengerComposerStore0=t;}w.prototype.getState=function(){return this.$MessengerComposerStore0;};w.prototype.__onDispatch=function(x){n.waitFor([p.getDispatchToken()]);var y=p.getState().detailView,z=this.$MessengerComposerStore0.recipients,aa=this.$MessengerComposerStore0.step,ba=null,ca=null;switch(x.type){case j.Types.ADD_TOKEN:if(z.some(function(ha){return ha.getUniqueID()===x.entry.getUniqueID();}))break;ba=z.push(x.entry);break;case j.Types.REMOVE_TOKEN:var da=x.entry.getUniqueID(),ea=z.findIndex(function(ha){return ha.getUniqueID()===da;});if(ea!==-1)ba=z["delete"](ea);break;case j.Types.FOCUS_COMPOSER:if(aa===l.SELECT_RECIPIENTS)ca=l.COMPOSE;break;case j.Types.FOCUS_TYPEAHEAD:if(aa===l.COMPOSE)ca=l.SELECT_RECIPIENTS;break;case i.Types.REPLACE_STATE:var fa=p.getPrevState().detailView;if(fa!==r.DETAIL.COMPOSE&&y===r.DETAIL.COMPOSE)ca=l.SELECT_RECIPIENTS;break;case j.Types.MOVE_DRAFT:o.set(x.threadID,o.get(m.NEW_THREAD_KEY));break;case j.Types.EXIT_COMPOSE_STATE:var ga=s();setTimeout(function(){o.set(m.NEW_THREAD_KEY,g.forceSelection(ga,ga.getSelection()));},0);ca=l.NULL;ba=h.List();break;}if(ba||ca){this.$MessengerComposerStore0=new k({step:ca||aa,recipients:ba||z});this.emitChange();}};e.exports=new w();},null);
__d("P2PAbstractSendMoneyButton.react",["React","TooltipLink.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';var k=g,l=k.PropTypes,m=g.createClass({displayName:"P2PAbstractSendMoneyButton",propTypes:{isDialogOpen:l.bool.isRequired,isDisabled:l.bool.isRequired,isMessenger:l.bool.isRequired,onClick:l.func.isRequired,onMouseOver:l.func,recipientName:l.string},_clickGuard:(false),render:function(){return (g.createElement(h,{alignH:"center",className:((this.props.isDialogOpen?"open":'')+(this.props.isDisabled?' '+"disabled":'')+(!this.props.isMessenger?' '+"_5uqy":'')+(this.props.isMessenger?' '+"_3ggc":'')),href:"#",onClick:this._handleClick,onMouseDown:this._prepareForClick,onMouseOver:this.props.onMouseOver,position:"above",title:this._getLinkTitle(),tooltip:this._getDisabledTitle()},g.createElement("i",{className:"_5s8l"})));},_getLinkTitle:function(){if(this.props.isDisabled)return null;return (j._("Send Money"));},_getDisabledTitle:function(){if(!this.props.isDisabled)return null;return (j._("{receiverName} isn't able to receive money right now.",[j.param("receiverName",this.props.recipientName)]));},_prepareForClick:function(){this._clickGuard=this.props.isDialogOpen;},_handleClick:function(n){n.stopPropagation();if(this._clickGuard){this._clickGuard=false;return;}this.props.onClick();}});e.exports=m;},null);
__d("P2PSendMoneyButton.react",["Bootloader","CurrentEnvironment","DeferredComponent.react","P2PAbstractSendMoneyButton.react","React","Run","emptyFunction"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();'use strict';var n=k,o=n.PropTypes,p=h.messengerdotcom,q=k.createClass({displayName:"P2PSendMoneyButton",propTypes:{isNewEmptyLocalThread:o.bool,isGroupChat:o.bool,onTrigger:o.func,participants:o.arrayOf(o.object),threadID:o.string,threadFBID:o.string},getDefaultProps:function(){return {participants:[]};},render:function(){return (k.createElement(i,k.__spread({deferredComponent:r,deferredPlaceholder:this._renderPlaceholder()},this.props)));},_renderPlaceholder:function(){return (k.createElement(j,{isDialogOpen:false,isDisabled:true,isMessenger:p,onClick:m,onMouseOver:s,recipientName:this._getRecipientName()}));},_getRecipientName:function(){var t=this.props.participants;if(!this.props.isGroupChat&&t&&t.length>0)return t[0].short_name;return null;}});function r(t){l.onAfterLoad(function(){g.loadModules(["P2PSendMoneyButtonImpl.react"],t);});}function s(){g.loadModules(["P2PSendMoneyButtonImpl.react"],m);}e.exports=q;},null);
__d("P2PSendMoneyDialogStore",["P2PActionConstants","EventEmitter","P2PDispatcher"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';var j,k;for(var l in h)if(h.hasOwnProperty(l))n[l]=h[l];var m=h===null?null:h.prototype;n.prototype=Object.create(m);n.prototype.constructor=n;n.__superConstructor__=h;function n(){h.call(this);k={};j=i.register(this.onEventDispatched.bind(this));}n.prototype.onEventDispatched=function(o){var p=o.data,q=o.type;switch(q){case g.CHAT_SEND_VIEW_OPENED:this.handleChatSendViewOpened(p);this.emit('change');break;case g.CHAT_SEND_VIEW_CLOSED:this.handleChatSendViewClosed(p);this.emit('change');break;}};n.prototype.getStateByThreadID=function(o){return k[o];};n.prototype.handleChatSendViewOpened=function(o){k[o.threadID]={amount:o.amount,groupSendReceiptDetails:o.groupSendReceiptDetails,groupThreadFBID:o.groupThreadFBID,platformItemID:o.platformItemID,sendMoneyDialogShown:true};};n.prototype.handleChatSendViewClosed=function(o){k[o.threadID]={amount:'',groupSendReceiptDetails:null,groupThreadFBID:'',platformItemID:null,sendMoneyDialogShown:false};};e.exports=new n();},null);
__d("MessengerTabIndices",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();'use strict';var g={NEW_MESSAGE_TOKENIZER:9998,COMPOSER_INPUT:9999};e.exports=g;},null);
__d("XShareScrapeAttachmentAsyncController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/message_share_attachment\/fromURI\/",{});},null);
__d("MessengerURLUploader",["AsyncRequest","Event","SubscriptionsHandler","URLMatcher","XShareScrapeAttachmentAsyncController"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l=k.getURIBuilder().getURI(),m=920,n=920;function o(p,q){this.$MessengerURLUploader0=p;this.$MessengerURLUploader1=new i();this.initInput(q);}o.prototype.getData=function(){return this.$MessengerURLUploader2;};o.prototype.initInput=function(p){this.$MessengerURLUploader1.addSubscriptions(h.listen(p,'keyup',this.handleInputValueChange.bind(this)),h.listen(p,'paste',this.handleInputValueChange.bind(this)));};o.prototype.handleInputValueChange=function(p){var q=this.$MessengerURLUploader0(),r=j.match(q);if(!!r){if(this.$MessengerURLUploader4!==r){this.$MessengerURLUploader4=r;this.$MessengerURLUploader2=null;this.loadShare();}}else{this.$MessengerURLUploader4=null;this.$MessengerURLUploader2=null;}};o.prototype.loadShare=function(){if(this.$MessengerURLUploader5&&this.$MessengerURLUploader5.abort)this.$MessengerURLUploader5.abort();if(this.$MessengerURLUploader4)this.$MessengerURLUploader5=new g().setMethod('POST').setURI(l).setData({uri:this.$MessengerURLUploader4,image_width:n,image_height:m,disallow_delayed:true}).setHandler(this.handleShareLoad.bind(this,this.$MessengerURLUploader4)).send();};o.prototype.handleShareLoad=function(p,q){if(p===this.$MessengerURLUploader4)this.$MessengerURLUploader2=(q.payload||0).share_data;};e.exports=o;},null);
__d("MessengerComposerInput.react",["AbstractTextEditor.react","ComposedEntityType","DocumentCompositeDecorator","DocumentDecorator","DOMDimensions","EditorState","EmoticonSpan.react","Event","MercuryIDs","MercurySourceType","MercuryThreadIDMap","MessengerConstants","MessengerDomIDs","MessengerEditorStateManager","MessengerTabIndices","MessengerURLUploader","ReactComponentWithPureRenderMixin","React","Run","TypingDetectorController","clearImmediate","createEmptyEditorState","cx","debounce","fbt","getEntityMatcher","getVisibleValueForContentState","handleBeforeInputForEmoticon","handleSoftNewlineForEmoticon","insertEmoticonIntoEditorState","isSoftNewlineEvent","setImmediate"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la){b.__markCompiled&&b.__markCompiled();'use strict';var ma=x,na=ma.PropTypes,oa=h.EMOTICON,pa=/^image\//,qa=x.createClass({displayName:"MessengerInput",mixins:[w],propTypes:{handleOnlyImageUploads:na.bool,isComposing:na.bool,onResize:na.func,onMessageSend:na.func,threadID:na.string,viewer:na.string,onFileUpload:na.func},getDefaultProps:function(){return {handleOnlyImageUploads:true};},getInitialState:function(){return {editorState:t.get(this.props.threadID)};},componentDidMount:function(){this._oldHeight=k.getElementDimensions(x.findDOMNode(this)).height;this._handleChangedThread();this._urlUploader=new v(this.getValue,x.findDOMNode(this.refs.input));y.onUnload(this._handleUnload);this._inputChangeCallback=n.listen(x.findDOMNode(this.refs.input),'input',da(function(){this._saveCurrentEditorState();}.bind(this),1000));},componentWillUpdate:function(ra){if(this.props.threadID!==ra.threadID)this._saveCurrentEditorState();},componentDidUpdate:function(ra){this._resizeHandle=la(function(){var sa=k.getElementDimensions(x.findDOMNode(this)).height;if(this._oldHeight!==sa)this.props.onResize();this._oldHeight=sa;}.bind(this));if(this.props.threadID!==ra.threadID)this._handleChangedThread();},componentWillUnmount:function(){this._typingDetector&&this._typingDetector.destroy();this.props.threadID&&this._saveCurrentEditorState();this._resizeHandle&&aa(this._resizeHandle);this._inputChangeCallback.remove();},insertEmoticon:function(ra){var sa=ja(ra,this.state.editorState);if(sa!==this.state.editorState)this._onChange(sa);},_onChange:function(ra){this.setState({editorState:ra});},_handleReturn:function(event){if(ka(event)){var ra=ia(this.state.editorState);if(ra===this.state.editorState)return false;this.setState({editorState:ra});return true;}if(this.getValue().trim().length>0)this._sendMessage();return true;},_handleChangedThread:function(){this._initializeTypingDetector();this.setState({editorState:this._initEditorState(t.get(this.props.threadID))});if(this.props.threadID!==r.NEW_THREAD_KEY)la(function(){this.focus();}.bind(this));},_saveCurrentEditorState:function(){if(!this.props.threadID)return;t.set(this.props.threadID,this.state.editorState);},_resetState:function(){this.setState({editorState:this._initEditorState(ba())});},_initializeTypingDetector:function(){this._typingDetector&&this._typingDetector.destroy();this._typingDetector=null;if(this.props.threadID!==r.NEW_THREAD_KEY)this._typingDetector=new z(o.getUserIDFromThreadID(this.props.threadID),x.findDOMNode(this.refs.input),p.MESSENGER_WEB,null,q.getForFBID(this.props.viewer).getFBIDFromClientIDNow(this.props.threadID),this.getValue);},_sendMessage:function(){if(this.props.onMessageSend&&this.props.onMessageSend(this.getValue(),{shareable_attachment:this.getShareData()})){this._typingDetector&&this._typingDetector.resetState();this._resetState();}},getValue:function(){return ga(this.state.editorState.getCurrentContent());},getInput:function(){return this.refs.input;},focus:function(){this.refs.input.focus();},render:function(){return (x.createElement("div",{className:"_kmc",onClick:this.focus},x.createElement(g,{"aria-controls":s.CONVERSATION,editorState:this.state.editorState,handleBeforeInput:this._handleBeforeInput,handlePastedFiles:this._handleFiles,handleReturn:this._handleReturn,onChange:this._onChange,placeholder:ea._("Type a message..."),ref:"input",spellCheck:true,tabIndex:this.props.threadID===r.NEW_THREAD_KEY?u.COMPOSER_INPUT:0,textAlignment:"left"})));},_initEditorState:function(ra){var sa=this._getDecorator();return l.moveFocusToEnd(l.set(ra,{decorator:sa}));},_getDecorator:function(){return new i([new j(fa(function(ra){return ra.getType()===oa;}),m)]);},_handleBeforeInput:function(ra){var sa=ha(this.state.editorState,ra);if(sa===this.state.editorState)return false;this.setState({editorState:sa});return true;},_handleFiles:function(ra){var sa=this.props.handleOnlyImageUploads?ra.filter(function(ta){return pa.test(ta.type);}):ra;if(sa.length){this.props.onFileUpload(sa);return true;}return false;},_handleUnload:function(){if(this.props.threadID!==r.NEW_THREAD_KEY)this._saveCurrentEditorState();t.set(r.NEW_THREAD_KEY,ba());},getShareData:function(){return this._urlUploader.getData();},exitCurrentMode:function(){this.refs.input.exitCurrentMode();}});e.exports=qa;},null);
__d("MessengerContextualDialog.react",["LayerHideOnEscape","ReactAbstractContextualDialog","ReactLayer","cx"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';var k=12,l=i.createClass(h.createSpec({displayName:'MessengerContextualDialog',theme:{wrapperClassName:"_1r_9",arrowDimensions:{offset:k,length:16}},addedBehaviors:[g]}));e.exports=l;},null);
__d("MessengerDialogButton.react",["MessengerButton.react","ReactComponentWithPureRenderMixin","React","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l=i,m=l.PropTypes,n=i.createClass({displayName:"MessengerDialogButton",mixins:[h],propTypes:{action:m.oneOf(['button','cancel','confirm'])},render:function(){var o=this.props,p=o.action,q=o.className,r=(function(s,t){var u={},v=Object.prototype.hasOwnProperty;if(s==null)throw new TypeError();for(var w in s)if(v.call(s,w)&&!v.call(t,w))u[w]=s[w];return u;})(o,{action:1,className:1});return (i.createElement(g,i.__spread({className:k(q,(("_5ixy")+(p==='button'?' '+"layerButton":'')+(p==='cancel'?' '+"layerCancel":'')+(p==='confirm'?' '+"layerConfirm":'')))},r)));}});e.exports=n;},null);
__d("MessengerFileSizeErrorDialog.react",["MessengerActions","MessengerDialog.react","MessengerDialogBody.react","MessengerDialogButton.react","MessengerDialogFooter.react","MessengerDialogHeader.react","React","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();'use strict';var o=m.createClass({displayName:"MessengerFileSizeErrorDialog",render:function(){return (m.createElement(h,{onToggle:this._handleToggle},m.createElement(l,null,n._("Failed to upload files")),m.createElement(i,null,this._renderDialogBody()),m.createElement(k,null,m.createElement(j,{action:"cancel",label:n._("OK"),type:"primary"}))));},_renderDialogBody:function(){return (m.createElement("div",null,n._("The file you have selected is too large. The maximum size is 25MB.")));},_handleToggle:function(p){if(!p)g.hideDialog();}});e.exports=o;},null);
__d("MessengerHotLikeButton.react",["ImmutableObject","Keys","KeyStatus","Link.react","MercurySourceType","MessengerHotLikePreviewEvents","MessengerHotLikeUtils","ReactComponentWithPureRenderMixin","React","StickerActions","StickerConstants","cx","fbt","MercuryMessageObject"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){b.__markCompiled&&b.__markCompiled();'use strict';var t=b('MercuryMessageObject').get(),u=o,v=u.PropTypes,w=o.createClass({displayName:"MessengerHotLikeButton",mixins:[n],componentDidMount:function(){this._subscription=l.addListener(l.FINISH_ANIMATION,function(x,y){if(x===this.props.threadID)this.props.sendSticker(y);}.bind(this));},componentWillUnmount:function(){this._subscription&&this._subscription.remove();},propTypes:{closeStickerTrayLegacy:v.func,sendSticker:v.func.isRequired,threadID:v.string,disabled:v.bool},render:function(){return (o.createElement(j,{"aria-label":s._("Send a Like"),className:this.props.className,disabled:this.props.disabled,onClick:this._handleClickEvent,onMouseDown:this._handleMouseDown,onMouseLeave:this._cancelSend,onMouseUp:this._handleMouseUp,title:s._("Send a Like")},o.createElement("i",{className:"_2y9i _30yy"})));},_handleMouseDown:function(x){if(this.props.disabled||this._pressedSince){x.preventDefault();x.stopPropagation();}if(this.props.disabled||x.button!==0)return;p.hideStickerTray();this.props.closeStickerTrayLegacy&&this.props.closeStickerTrayLegacy();this._pressedSince=Date.now();this._informPreviewStart();this._preparePop();},_handleMouseUp:function(){if(!this.props.threadID)return;if(!this._pressedSince)return;this._pressedSince=0;this._cancelPop();this._informPreviewStop();},_informPreviewStart:function(){l.emit(l.START,this._getFakeMessage(),this.props.threadID);},_informPreviewStop:function(){l.emit(l.STOP,this.props.threadID);},_informPreviewPop:function(){l.emit(l.POP,this.props.threadID);},_getFakeMessage:function(){var x=t.constructStickerMessageObject(q.HOT_LIKE_SMALL_STICKER_ID,k.MESSENGER_WEB,this.props.threadID);t.normalizeNewMessage(x);x.is_like_preview=true;x.like_preview_since=this._pressedSince;x.body='';return new g(x);},_preparePop:function(){this._cancelPop();this._popTimeout=setTimeout(this._informPreviewPop,m.SizeTimes.large);},_cancelSend:function(){if(this._pressedSince){this._pressedSince=0;this._cancelPop();this._informPreviewPop();}},_cancelPop:function(){clearTimeout(this._popTimeout);},_handleClickEvent:function(x){x.stopPropagation();if(this.props.disabled)return;if(i.getKeyDownCode()===h.RETURN)this.props.sendSticker(m.getStickerIDForTime(1));}});e.exports=w;},null);
__d("AsyncUploadBase",["ArbiterMixin","AsyncRequest","AsyncResponse","BrowserSupport","Form","forEachObject","mixin","removeFromArray"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();var o=m(g);for(var p in o)if(o.hasOwnProperty(p))r[p]=o[p];var q=o===null?null:o.prototype;r.prototype=Object.create(q);r.prototype.constructor=r;r.__superConstructor__=o;r.parseFiles=function(t){"use strict";var u={};l(t,function(v,w){if(Array.isArray(v)){u[w]=v;}else{u[w]=[];if(v instanceof window.FileList){for(var x=0;x<v.length;x++)u[w].push(v.item(x));}else if(v instanceof window.File||v instanceof window.Blob)u[w].push(v);}});return u;};function r(t){"use strict";o.call(this);this.setURI(t);this.setNetworkErrorRetryLimit(0);}r.prototype.setAllowCrossOrigin=function(t){"use strict";this._allowCrossOrigin=!!t;return this;};r.prototype.setAllowCrossPageTransition=function(t){"use strict";this._allowCrossPageTransition=!!t;return this;};r.prototype.setData=function(t){"use strict";this._data=t;return this;};r.prototype.setNetworkErrorRetryLimit=function(t){"use strict";this._retryLimit=t;return this;};r.prototype.setLimit=function(t){"use strict";this._limit=t;return this;};r.prototype.setPreprocessHandler=function(t){"use strict";this._preprocessHandler=t;return this;};r.prototype.setRelativeTo=function(t){"use strict";this._relativeTo=t;return this;};r.prototype.setStatusElement=function(t){"use strict";this._statusElement=t;return this;};r.prototype.setURI=function(t){"use strict";this._uri=t;return this;};r.prototype.suspend=function(){"use strict";this._suspended=true;return this;};r.prototype.resume=function(){"use strict";this._suspended=false;this._processQueue();return this;};r.prototype.isUploading=function(){"use strict";return this._inFlight;};r.prototype._createFileUpload=function(t,u,v){"use strict";return new s(t,u,v);};r.prototype._processQueue=function(){"use strict";if(this._suspended)return;while(this._pending.length<this._limit){if(!this._waiting.length)break;var t=this._waiting.shift();if(this._preprocessHandler){this._preprocessHandler(t,this._processUpload.bind(this));}else this._processUpload(t);this._pending.push(t);}};r.prototype._processUpload=function(t){"use strict";var u=k.createFormData(t.getData()||this._data);if(t.getFile()){u.append(t.getName(),t.getFile());var v=t.getFile().uploadID;if(v)u.append('upload_id',v);}var w=new h().setAllowCrossOrigin(this._allowCrossOrigin).setAllowCrossPageTransition(this._allowCrossPageTransition).setURI(this._uri).setRawData(u).setStatusElement(this._statusElement).setHandler(this._success.bind(this,t)).setErrorHandler(this._failure.bind(this,t)).setUploadProgressHandler(this._progress.bind(this,t)).setInitialHandler(this._initial.bind(this,t));if(this._relativeTo)w.setRelativeTo(this._relativeTo);w.send();t.setAsyncRequest(w);this._inFlight=true;if(!t.getRetryCount())this.inform('start',t);};r.prototype._abort=function(t){"use strict";if(this._pending.indexOf(t)!==-1){n(this._pending,t);this._processQueue();}n(this._waiting,t);t.abort();};r.prototype._initial=function(t){"use strict";if(t.isAborted())return;this.inform('initial',t);};r.prototype._success=function(t,u){"use strict";if(t.isAborted()){this.inform('success_after_abort',u);return;}this._complete(t);this.inform('success',t.handleSuccess(u));this._processQueue();};r.prototype._retryUpload=function(t){"use strict";t.increaseRetryCount();this._processUpload(t);};r.prototype._failure=function(t,u){"use strict";if(t.isAborted())return;if(u.error===1004&&t.getRetryCount()<this._retryLimit)return this._retryUpload(t);this._complete(t);if(this.inform('failure',t.handleFailure(u))!==false)i.defaultErrorHandler(u);this._processQueue();};r.prototype._progress=function(t,event){"use strict";if(t.isAborted())return;this.inform('progress',t.handleProgress(event));};r.prototype._complete=function(t){"use strict";n(this._pending,t);if(!this._pending.length)this._inFlight=false;};r.isSupported=function(){"use strict";return j.hasFileAPI();};Object.assign(r.prototype,{_limit:10});function s(t,u,v){"use strict";this._name=t;this._file=u;this._data=v;this._success=null;this._response=null;this._progressEvent=null;this._request=null;this._numRetries=0;this._aborted=false;}s.prototype.getName=function(){"use strict";return this._name;};s.prototype.getFile=function(){"use strict";return this._file;};s.prototype.setFile=function(t){"use strict";this._file=t;};s.prototype.getData=function(){"use strict";return this._data;};s.prototype.isComplete=function(){"use strict";return this._success!==null;};s.prototype.isSuccess=function(){"use strict";return this._success===true;};s.prototype.getResponse=function(){"use strict";return this._response;};s.prototype.getProgressEvent=function(){"use strict";return this._progressEvent;};s.prototype.setAsyncRequest=function(t){"use strict";this._request=t;return this;};s.prototype.increaseRetryCount=function(){"use strict";this._numRetries++;return this;};s.prototype.getRetryCount=function(){"use strict";return this._numRetries;};s.prototype.isWaiting=function(){"use strict";return !this._request;};s.prototype.isAborted=function(){"use strict";return this._aborted;};s.prototype.abort=function(){"use strict";this._request=null;this._aborted=true;};s.prototype.handleSuccess=function(t){"use strict";this._success=true;this._response=t;this._progressEvent=null;return this;};s.prototype.handleFailure=function(t){"use strict";this._success=false;this._response=t;this._progressEvent=null;return this;};s.prototype.handleProgress=function(event){"use strict";this._progressEvent=event;return this;};e.exports=r;},null);
__d("AsyncUploadRequest",["AsyncUploadBase"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();for(var h in g)if(g.hasOwnProperty(h))j[h]=g[h];var i=g===null?null:g.prototype;j.prototype=Object.create(i);j.prototype.constructor=j;j.__superConstructor__=g;function j(){"use strict";if(g!==null)g.apply(this,arguments);}j.prototype.setFiles=function(k){"use strict";this._files=g.parseFiles(k);return this;};j.prototype.abort=function(){"use strict";this._uploads.forEach(function(k){return this._abort(k);}.bind(this),this);};j.prototype.send=function(){"use strict";if(this._inFlight)return;this._inFlight=true;this._uploads=[];for(var k in this._files)this._files[k].forEach(function(l){this._uploads.push(this._createFileUpload(k,l));}.bind(this));this._waiting=this._uploads.slice(0);this._pending=[];if(this._uploads.length){this._processQueue();}else this._processUpload(this._createFileUpload(null,null));};j.prototype._processQueue=function(){"use strict";i._processQueue.call(this);if(!this._pending.length&&!this._waiting.length)this.inform('complete',this._uploads);};j.isSupported=function(){"use strict";return g.isSupported();};e.exports=j;},null);
__d("MessengerRecorderCommandType",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();'use strict';var g={INIT:'init',RECORD:'record',EXPORT_WAV:'export_wav',GET_BUFFER:'get_buffer',CLEAR:'clear'};e.exports=g;},null);
__d("MessengerRecorder",["MessengerRecorderCommandType","MessengerRecorderWorkerResource","WebWorker"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=window.AudioContext||window.webkitAudioContext;function k(l){"use strict";var m=new j(),n=m.createMediaStreamSource(l),o=4096,p=n.context;this.$MessengerRecorder0=(p.createScriptProcessor||p.createJavaScriptNode).call(p,o,2,2);this.$MessengerRecorder1=new i(h).setMessageHandler(function(q){this.$MessengerRecorder2(q);}.bind(this)).execute().postMessage({command:g.INIT,config:{sampleRate:p.sampleRate}});this.$MessengerRecorder3=false,this.$MessengerRecorder0.onaudioprocess=this.$MessengerRecorder4.bind(this);n.connect(this.$MessengerRecorder0);this.$MessengerRecorder0.connect(p.destination);}k.prototype.$MessengerRecorder4=function(l){"use strict";if(!this.$MessengerRecorder3)return;this.$MessengerRecorder1.postMessage({command:g.RECORD,buffer:[l.inputBuffer.getChannelData(0),l.inputBuffer.getChannelData(1)]});};k.prototype.record=function(){"use strict";this.$MessengerRecorder3=true;};k.prototype.stop=function(){"use strict";this.$MessengerRecorder3=false;};k.prototype.clear=function(){"use strict";this.$MessengerRecorder1.postMessage({command:g.CLEAR});};k.prototype.getBuffer=function(){"use strict";this.$MessengerRecorder1.postMessage({command:g.GET_BUFFER});};k.prototype.exportWAV=function(l){"use strict";this.$MessengerRecorder2=l;if(!this.$MessengerRecorder2)throw new Error('Callback not set');this.$MessengerRecorder1.postMessage({command:g.EXPORT_WAV,type:'audio/wav'});};e.exports=k;},null);
__d("PhotosUploadID",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g=1024,h={getNewID:function(){return (g++).toString();}};e.exports=h;},null);
__d("MessengerVoiceClipButton.react",["AsyncUploadRequest","FBRTCUserMedia","Link.react","MercuryAttachmentType","MercuryConfig","MercurySendMessageHandler","MercurySourceType","MercuryMessageActions","MessengerRecorder","PhotosUploadID","React","SubscriptionsHandler","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){b.__markCompiled&&b.__markCompiled();'use strict';var t=q.createClass({displayName:"MessengerVoiceClipButton",getInitialState:function(){return {recording:false};},componentDidMount:function(){this._sendMessageHandler=l.getForFBID(this.props.viewer);this._messageActions=n.getForFBID(this.props.viewer);this._subscriptionsHandler=new r();},componentWillUnmount:function(){this._subscriptionsHandler.release();},render:function(){return (q.createElement(i,{className:(("_4rv7")+(this.state.recording?' '+"_5jhb":'')),onClick:this._toggleRecording}));},_initializeRecorder:function(u){h.addListener('streamReady',function(v){this._onSuccess(v,u);}.bind(this));h.addListener('accessDenied',function(){});h.addListener('accessFailed',function(){});h.requestUserMedia(h.STREAM_TYPE.NO_VIDEO);},_onSuccess:function(u,v){this._recorder=new o(u);this._initialized=true;v();},_record:function(){this._recorder.record();this.setState({recording:true});},_toggleRecording:function(){if(!this.state.recording){if(!this._initialized){this._initializeRecorder(this._record.bind(this));}else this._record();}else{this._recorder.stop();this._recorder&&this._recorder.exportWAV(function(u){return this._sendVoiceClip(u);}.bind(this));this._recorder.clear();this.setState({recording:false});}},_sendVoiceClip:function(u){var v='upload_'+p.getNewID();this._sendMessageHandler.sendAttachment(this.props.threadID,this._getServerRequestObject(v),m.MESSENGER_WEB);var w={};w[v]=u;var x=new g(k.upload_url).setAllowCrossOrigin(true).setRelativeTo(q.findDOMNode(this)).setData({voice_clip:true}).setFiles(w);this._subscriptionsHandler.addSubscriptions(x.subscribe('success',function(y,z){return this._onFileUploadSuccess(z);}.bind(this)));x.send();},_getServerRequestObject:function(u){return {upload_id:u,preview_attachments:[{upload_id:u,attach_type:j.PHOTO,preview_uploading:true}]};},_onFileUploadSuccess:function(u){var v=u.getName(),w=u.getResponse().payload.metadata[0].audio_id;this._messageActions.confirmAttachmentPlaceholder(v,{upload_id:v,audio_ids:[w]});}});e.exports=t;},null);
__d("MessengerComposer.react",["BootloadedComponent.react","Bootloader","ChatStickerButton.react","ChatPhotoUploader.react","CurrentUser","DOMDimensions","EmoticonsList","immutable","ImmutableObject","Link.react","JSResource","Locale","P2PGKValues","P2PSendMoneyButton.react","P2PSendMoneyDialogStore","ReactComponentWithPureRenderMixin","MercuryIDs","MercuryThreadActions","MessagingTag","MessengerActions","MessengerConfig","MessengerComposerInput.react","MessengerConstants","MessengerContextualDialog.react","MessengerFileSizeErrorDialog.react","MessengerView","MessengerHotLikeButton.react","MessengerVoiceClipButton.react","React","Style","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la){b.__markCompiled&&b.__markCompiled();'use strict';var ma=ia,na=ma.PropTypes,oa=ia.createClass({displayName:"MessengerComposer",mixins:[v],propTypes:{canReply:na.bool,onMessageSend:na.func,onPhotoUploadComplete:na.func,onPhotoUploadCancel:na.func,onPhotoUploadFail:na.func,onPhotoUploadSubmit:na.func,onResize:na.func,onStickerSelect:na.func,participants:na.instanceOf(n.Map),threadID:na.string,threadFBID:na.string,thread:na.object,view:na.string,viewer:na.string},getInitialState:function(){return {participants:[],pendingActionsBypassed:false};},componentDidMount:function(){this._actions=x.getForFBID(this.props.viewer);this._adjustRightColumnDimensions();this._sendMoneyDialogStoreSub=u.addListener('change',this._onP2PSendMoneyDialogStoreChange);},componentWillUnmount:function(){if(this._sendMoneyDialogStoreSub){this._sendMoneyDialogStoreSub.remove();this._sendMoneyDialogStoreSub=null;}},componentDidUpdate:function(pa){this._adjustRightColumnDimensions();},_onP2PSendMoneyDialogStoreChange:function(){this.setState({sendMoneyDialogStoreState:new o(u.getStateByThreadID(this.props.threadID))});},render:function(){if(!this.props.canReply){return this.props.view===fa.DETAIL.COMPOSE?null:(ia.createElement("div",{className:"_4rv3"},ia.createElement("div",{className:"_2wy4"},la._("You cannot reply to this conversation."))));}else if(aa.CoreGraphEnabled&&this.props.thread&&this.props.thread.folder===y.PENDING&&!this.state.pendingActionsBypassed)return (ia.createElement(g,{bootloadPlaceholder:ia.createElement("div",{style:{height:51}}),bootloadLoader:q('MessengerPendingActions.react'),onDeleteClick:function(){h.loadModules(["MessengerDeleteDialog.react"],function(qa){z.showDialog(qa,{onArchive:this._handleDeleteDialogArchiveClick,onDelete:this._handleDeleteDialogDeleteClick,onToggle:this._handleDeleteDialogToggle.bind(this,qa)});}.bind(this));}.bind(this),onReplyClick:function(){this.setState({pendingActionsBypassed:true});}.bind(this)}));var pa=this.props.view===fa.DETAIL.COMPOSE;return (ia.createElement("div",{className:"_4rv3"},ia.createElement("div",{className:"_5irm"},ia.createElement(ba,{handleOnlyImageUploads:false,isComposing:pa,ref:"input",onResize:this.props.onResize,onMessageSend:this.props.onMessageSend,threadID:pa?ca.NEW_THREAD_KEY:this.props.threadID,viewer:this.props.viewer,onFileUpload:this.handleFileUpload}),ia.createElement("ul",{ref:"buttonsContainer",className:"_4rv4"},this._renderQuickCamTrigger(),ia.createElement("li",null,ia.createElement(j,{allowCrossPage:true,disabled:!this.props.threadID,ref:"uploader",imageClassName:"_5vn8",imagesOnly:false,linkClassName:(("_30yy")),onAllUploadsComplete:this.props.onPhotoUploadComplete,onLastUploadFail:this.props.onPhotoUploadFail,onLastUploadCancel:this.props.onPhotoUploadCancel,onSubmit:this.props.onPhotoUploadSubmit,onUploadError:this._showFileSizeErrorDialog})),ia.createElement("li",null,ia.createElement(i,{className:((this.props.threadID?"_30yy":'')+(' '+"_4rv6")),ContextualDialogClass:da,disabled:!this.props.threadID,flyoutAlignment:"right",flyoutClassName:"_293j",flyoutWidth:285,onStickerSelect:this.props.onStickerSelect,onEmoticonSelect:this._handleEmoticonSelect,threadID:this.props.threadID})),this._renderAudioClipTrigger(),this._renderP2PSendMoneyButton(),ia.createElement("li",null,ia.createElement(ga,{className:(("_4rv9")+(this.props.threadID?' '+"_30yy":'')),disabled:!this.props.threadID,sendSticker:this.props.onStickerSelect,threadID:this.props.threadID}))))));},_showFileSizeErrorDialog:function(){z.showDialog(ea,{});},handleFileUpload:function(pa){var qa,ra,sa,ta;for(qa=pa,ra=Array.isArray(qa),sa=0,qa=ra?qa:qa[typeof Symbol=="function"?Symbol.iterator:"@@iterator"]();;){if(ra){if(sa>=qa.length)break;ta=qa[sa++];}else{sa=qa.next();if(sa.done)break;ta=sa.value;}this.refs.uploader.uploadFile(ta);}this.exitCurrentMode();},_handleEmoticonSelect:function(pa){var qa=m.symbols[pa];if(!qa)return;this.refs.input.insertEmoticon(qa);},focusInput:function(){this.refs.input&&this.refs.input.focus();},_renderP2PSendMoneyButton:function(){var pa,qa,ra=this.props.participants,sa=[],ta=w.isGroupChat(this.props.threadID);if(!s.P2PEnabled)return;if(ta&&!s.P2PGroupSendMessengerDotCom)return;if(ra){ra=ra.toArray();for(var ua=0,va=ra.length;ua<va;ua++){pa=ra[ua];if(pa){qa=w.getUserIDFromParticipantID(pa.id);if(qa!==k.getID())sa.push(o.set(pa,{userID:qa}));}}if(sa.length)return (ia.createElement("li",{className:"_25pc _30yy"},ia.createElement(t,ia.__spread({participants:sa,isGroupChat:ta,threadID:this.props.threadID,threadFBID:this.props.threadFBID},this.state.sendMoneyDialogStoreState))));}return null;},_renderQuickCamTrigger:function(){if(aa.ComposerShowQuickCam)return (ia.createElement("li",null,ia.createElement(p,{className:"_4rv5"})));return null;},_renderAudioClipTrigger:function(){if(aa.ComposerShowAudioClip)return (ia.createElement("li",null,ia.createElement(ha,{threadID:this.props.threadID,viewer:this.props.viewer})));return null;},_adjustRightColumnDimensions:function(){if(!this.refs.buttonsContainer)return;var pa=l.getElementDimensions(ia.findDOMNode(this.refs.buttonsContainer)).width;ja.set(ia.findDOMNode(this.refs.input),r.isRTL()?'margin-left':'margin-right',pa+'px');},_handleDeleteDialogDeleteClick:function(){this._actions["delete"](this.props.threadID);z.selectThread(null);},_handleDeleteDialogArchiveClick:function(){this._actions.archive(this.props.threadID);z.selectThread(null);},_handleDeleteDialogToggle:function(pa,qa){if(!qa)z.hideDialog(pa);},exitCurrentMode:function(){this.refs.input.exitCurrentMode();}});e.exports=oa;},null);
__d("MessengerComposerContainer.react",["immutable","MercuryAttachment","MercuryIDs","MercuryLocalIDs","MercuryMessageActions","MercuryMessageObject","MercurySourceType","MercuryThreads","MercuryThreadActions","MessagingTag","MessengerActions","MessengerComposer.react","MessengerComposerActions","MessengerConfig","MessengerView","ReactComponentWithPureRenderMixin","React","StickerActions"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){b.__markCompiled&&b.__markCompiled();'use strict';var y=w,z=y.PropTypes,aa=w.createClass({displayName:"MessengerComposerContainer",mixins:[v],propTypes:{canReply:z.bool,onResize:z.func,participants:z.instanceOf(g.Map),recipients:z.instanceOf(g.List),threadID:z.string,threadFBID:z.string,thread:z.object,view:z.string,viewer:z.string},componentWillMount:function(){this._messageActions=k.getForFBID(this.props.viewer);this._threads=n.getForFBID(this.props.viewer);this._messageBuilder=l.getForFBID(this.props.viewer);},focusInput:function(){this.refs.composer.focusInput();},render:function(){return (w.createElement(r,{canReply:this.props.canReply,onMessageSend:this._handleMessageSend,onPhotoUploadComplete:this._handlePhotoUploadComplete,onPhotoUploadCancel:this._handlePhotoUploadCancel,onPhotoUploadFail:this._handlePhotoUploadFail,onPhotoUploadSubmit:this._handlePhotoUploadSubmit,onResize:this.props.onResize,onStickerSelect:this._handleStickerSelect,participants:this.props.participants,ref:"composer",threadID:this.props.threadID,threadFBID:this.props.threadFBID,thread:this.props.thread,view:this.props.view,viewer:this.props.viewer}));},_handleMessageSend:function(ba,ca){if(!this.props.canReply)return false;return this._sendMessage(function(da){var ea=this._messageBuilder.constructUserGeneratedMessageObject(ba,m.MESSENGER_WEB,da);if(ca)if(ca.shareable_attachment)ea.shareable_attachment=ca.shareable_attachment;return ea;}.bind(this));},_handlePhotoUploadCancel:function(ba,ca){this._messageActions.cancelAttachmentPlaceholder(ca.upload_id,ca);},_handlePhotoUploadComplete:function(ba,ca){this._messageActions.confirmAttachmentPlaceholder(ca.upload_id,ca);},_handlePhotoUploadFail:function(ba,ca){this._messageActions.cancelAttachmentPlaceholder(ca.upload_id,ca);},_handlePhotoUploadSubmit:function(ba,ca){return this._sendMessage(function(da){return this._messageBuilder.constructAttachmentMessageObject(m.MESSENGER_WEB,da);}.bind(this),function(da){this._messageActions.addAttachmentPlaceholder(da,ca.upload_id,ca);this._handleMessageSentToPendingThread();}.bind(this));},handleFileUpload:function(ba){this.refs.composer.handleFileUpload(ba);},_handleStickerSelect:function(ba){return this._sendMessage(function(ca){return this._messageBuilder.constructStickerMessageObject(ba,m.MESSENGER_WEB,ca);}.bind(this));},_sendMessage:function(ba,ca){var da=this.props.threadID,ea=this.props.recipients,fa=false;if(!da&&ea&&ea.size>1){da=j.generateThreadID();fa=true;}if(!da)return false;var ga=ba(da);if(fa){var ha=ea.map(function(ia){return i.getParticipantIDFromUserID(ia.getUniqueID());}).toArray();this._threads.createNewLocalThread(da,ha);ga.threading_id=i.tokenize(da).value;ga.specific_to_list=ha;}if(ca){ca(ga);}else this._messageActions.send(ga,this._handleMessageSentToPendingThread);if(this.props.view===u.DETAIL.COMPOSE){x.hideStickerTray();if(h.get(ga).length>0)s.moveDraftToNextThread(da);s.exitComposeState();q.selectThread(da);}return true;},_handleMessageSentToPendingThread:function(){if(t.CoreGraphEnabled&&this.props.thread&&this.props.thread.folder===p.PENDING)o.getForFBID(this.props.viewer).movePendingToInbox(this.props.threadID);},resetDrag:function(){this.refs.composer.exitCurrentMode();}});e.exports=aa;},null);
__d("MercuryMessageList",["immutable","LogHistory","Map","setTimeoutAcrossTransitions"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';var k=h.getInstance('mercury_message_list');function l(n){this.$MercuryMessageList0=g.List(n||[]);this.$MercuryMessageList1();}l.prototype.append=function(n){var o;this.$MercuryMessageList0=(o=this.$MercuryMessageList0).push.apply(o,n);this.$MercuryMessageList1();m('append',n);};l.prototype.prepend=function(n){var o;this.$MercuryMessageList0=(o=this.$MercuryMessageList0).unshift.apply(o,n);this.$MercuryMessageList1();m('prepend',n);};l.prototype.update=function(n){var o=n.filter(function(p){return this.contains(p);}.bind(this));if(o.length===0)return;this.$MercuryMessageList0=this.$MercuryMessageList0.withMutations(function(p){o.forEach(function(q){var r=this.$MercuryMessageList2.get(q.message_id);if(r!==(void 0))p.set(r,q);}.bind(this));}.bind(this));m('update',o);};l.prototype.reorder=function(n){this.$MercuryMessageList0=g.List(n);this.$MercuryMessageList1();m('reorder',n);};l.prototype.at=function(n){return this.$MercuryMessageList0.get(n);};l.prototype.contains=function(n){return this.$MercuryMessageList2.has(n.message_id);};l.prototype.toArray=function(){return this.$MercuryMessageList0.toArray();};l.prototype.toMap=function(){return new i(g.Seq(this.$MercuryMessageList0).map(function(n){return [n.message_id,n];}));};l.prototype.$MercuryMessageList1=function(){this.$MercuryMessageList2=new i(g.Seq(this.$MercuryMessageList0).map(function(n,o){return [n.message_id,o];}));};function m(event,n){j(function(){k.debug(event,{messageIDs:n.map(function(o){return o.message_id;})});},0);}e.exports=l;},null);
__d("MercuryMessageStore",["MercuryAPIArgsSource","LogHistory","MercuryViewer","MercuryMessageList","SubscriptionsHandler","MercuryThreadlistConstants","mixInEventEmitter","setImmediate","setTimeoutAcrossTransitions","MercuryMessages","MercuryThreadInformer","MercuryThreads"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();'use strict';var p=b('MercuryMessages').get(),q=b('MercuryThreadInformer').get(),r=b('MercuryThreads').get(),s=h.getInstance('mercury_message_store');function t(v,w){this.$MercuryMessageStore0=v;this.$MercuryMessageStore1=new j();this.$MercuryMessageStore2=1;this.$MercuryMessageStore3=null;this.$MercuryMessageStore4=0;this.$MercuryMessageStore5=w||l.RECENT_MESSAGES_LIMIT;this.$MercuryMessageStore6=new k();this.$MercuryMessageStore6.addSubscriptions(q.subscribe('messages-received',function(x,y){return this.$MercuryMessageStore8(y);}.bind(this)),q.subscribe('messages-updated',function(x,y){return y[this.$MercuryMessageStore0]&&this.$MercuryMessageStore9(y[this.$MercuryMessageStore0]);}.bind(this)),q.subscribe('messages-reordered',function(x,y){return y[this.$MercuryMessageStore0]&&this.$MercuryMessageStorea();}.bind(this)));s.debug('constructed',{threadID:this.$MercuryMessageStore0});this.$MercuryMessageStoreb();}t.prototype.setNewThreadID=function(v){this.$MercuryMessageStorec=v;};t.prototype.destroy=function(){this.$MercuryMessageStore6&&this.$MercuryMessageStore6.release();s.debug('destroyed',{threadID:this.$MercuryMessageStore0});};t.prototype.subscribe=function(v){return this.addRetroactiveListener('updated',v);};t.prototype.fetchMoreMessages=function(){if(this.hasFetchedAll())return false;this.$MercuryMessageStoreb();return true;};t.prototype.hasFetchedAll=function(){if(p.hasLoadedExactlyNMessages(this.$MercuryMessageStore0,this.$MercuryMessageStore4)&&p.hasLoadedAllMessages(this.$MercuryMessageStore0))return true;return r.isNewEmptyLocalThread(this.$MercuryMessageStore0);};t.prototype.$MercuryMessageStoreb=function(){var v=this.$MercuryMessageStore4+this.$MercuryMessageStore5*this.$MercuryMessageStore2;s.debug('fetching',{threadID:this.$MercuryMessageStore0,limit:v});p.getThreadMessagesRange(this.$MercuryMessageStore0,0,v,this.$MercuryMessageStored.bind(this),null,g.MERCURY);if(this.$MercuryMessageStore2<10)this.$MercuryMessageStore2+=1;if(p.hasLoadedNMessages(this.$MercuryMessageStore0,v))n(function(){this.$MercuryMessageStorea();}.bind(this));};t.prototype.$MercuryMessageStored=function(v){if(v&&v.length){this.$MercuryMessageStore3=v[0].timestamp;this.$MercuryMessageStore4=v.length;s.debug('fetched',{threadID:this.$MercuryMessageStore0,earliestMessageTimestamp:this.$MercuryMessageStore3,count:this.$MercuryMessageStore4});}else if(v&&!v.length&&!this.$MercuryMessageStore4)this.$MercuryMessageStoree(t.THREAD_IS_EMPTY);};t.prototype.$MercuryMessageStore8=function(v){var w=[],x=v[this.$MercuryMessageStore0];if(x&&x.length)w=w.concat(x);if(this.$MercuryMessageStorec){var y=v[this.$MercuryMessageStorec];if(y&&y.length){w=w.concat(y);this.$MercuryMessageStorec=null;}}if(w.length){this.$MercuryMessageStore1.append(w);this.$MercuryMessageStore4+=w.length;var z=w.every(function(aa){return aa.author!=i.getID();});this.$MercuryMessageStoree(t.MESSAGES_RECEIVED,{allFromOthers:z});}};t.prototype.$MercuryMessageStore9=function(v){this.$MercuryMessageStore1.update(p.getMessagesFromIDs(Object.keys(v)));this.$MercuryMessageStoref();this.$MercuryMessageStoree(t.MESSAGES_CHANGED);};t.prototype.$MercuryMessageStorea=function(){if(!this.$MercuryMessageStore3)return;this.$MercuryMessageStore1.reorder(p.getThreadMessagesSinceTimestamp(this.$MercuryMessageStore0,this.$MercuryMessageStore3));this.$MercuryMessageStoref();this.$MercuryMessageStoree(t.MESSAGES_REORDERED);};t.prototype.$MercuryMessageStoree=function(v,w){var x=this.$MercuryMessageStore1.toArray();this.releaseHeldEventType('updated');this.emitAndHold('updated',Object.assign({messages:x,eventType:v},w));u(this.$MercuryMessageStore0,v,x);};t.prototype.$MercuryMessageStoref=function(){var v=this.$MercuryMessageStore1.at(0);if(v)this.$MercuryMessageStore3=v.timestamp;};function u(v,w,x){o(function(){s.debug('update:'+w,{threadID:v,messageIDs:x.map(function(y){return y.message_id;})});},0);}Object.assign(t,{MESSAGES_FETCHED:'fetched',MESSAGES_CHANGED:'changed',MESSAGES_RECEIVED:'received',MESSAGES_REORDERED:'reordered',THREAD_IS_EMPTY:'thread-is-empty'});m(t,{updated:true});e.exports=t;},null);
__d("MercuryMessageGroup",["MercuryActionType","MercuryAttachmentType","MercuryShareAttachmentRenderLocations","MercuryThreadlistConstants","toIterator"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l={calculateMessageGroups:function(o,p){var q=[],r=null,s={value:null},t=k(o),u;while(!(u=t.next()).done){var v=l.canAppendMessageToLastGroup(s.value,u.value,p);if(!v){r=[];q.push(r);}r.push(u.value);s=u;}return q;},canAppendMessageToLastGroup:function(o,p,q){var r=j.GROUPING_THRESHOLD;if(!o||m(o,q)||m(p,q)||o.author!=p.author||o.timestamp<p.timestamp-r||o.is_spoof_warning!==p.is_spoof_warning)return false;return true;}};function m(o,p){var q=o.has_attachment;if(q&&(p===i.MESSENGER||p===i.CHAT))q=n(o);return !!(o.action_type==g.LOG_MESSAGE||q||o.forward_count||o.page_admin_notes||o.html_body||(o.body&&o.body.length>j.MAX_CHARS_BEFORE_BREAK));}function n(o){var p=o.attachments[0];return (!p||p.attach_type===h.STICKER||p.attach_type===h.ANIMATED_IMAGE);}e.exports=l;},null);
__d("MessageList.react",["immutable","MercuryActionType","MercuryIDs","MercuryMessageGroup","MercuryShareAttachmentRenderLocations","MessengerDomIDs","ReactComponentWithPureRenderMixin","React","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();'use strict';var p=n,q=p.PropTypes,r=1000*60*60,s=n.createClass({displayName:"MessageList",mixins:[m],propTypes:{DateBreak:q.func.isRequired,isCanonical:q.bool,isPageMessage:q.bool,location:q.string.isRequired,LogMessage:q.func.isRequired,MessageGroup:q.func.isRequired,messages:q.instanceOf(g.List).isRequired,readReceipts:q.instanceOf(g.OrderedMap).isRequired,viewer:q.string.isRequired},getInitialState:function(){return {activeMessageID:null,messageGroups:j.calculateMessageGroups(this.props.messages,this.props.location)};},componentWillReceiveProps:function(x){if(x.messages!==this.props.messages)this.setState({messageGroups:j.calculateMessageGroups(x.messages,x.location)});},render:function(){var x=this.props,y=x.DateBreak,z=x.location,aa=x.LogMessage,ba=x.MessageGroup,ca=[],da=this.state.activeMessageID,ea=this.state.messageGroups,fa=ea.length,ga=this.props.readReceipts,ha=ga.last()||0,ia=i.getParticipantIDFromUserID(this.props.viewer);for(var ja=0;ja<fa;ja++){var ka=(ja>0)?ea[ja-1]:null,la=(ka&&ka.length>0)?ka[ka.length-1]:null,ma=ea[ja],na=ma[0],oa=false;if(!la||na.timestamp-la.timestamp>r){oa=true;ca.push(n.createElement(y,{date:new Date(na.timestamp),key:'db:'+na.message_id}));}if(na.action_type==h.LOG_MESSAGE){ca.push(n.createElement(aa,{className:z===k.CHAT?"_5w0o":null,key:na.message_id,message:na,viewer:this.props.viewer}));continue;}ma=g.List(ma);var pa=u(ea,fa,ja),qa=!w(ga,ma,pa),ra=v(ha,na);ca.push(n.createElement(ba,{activeMessageID:t(da,ma),author:ma.first().author,hasDateBreak:oa,isCanonical:this.props.isCanonical,isFromViewer:ia===na.author,isPageMessage:this.props.isPageMessage,key:'mg:'+na.message_id,lastReadTimestamp:ra,maxBubbleWidth:this.props.maxBubbleWidth,messages:ma,nextTimestamp:pa,onMessageDeselect:this._handleMessageDeselect,onMessageSelect:this._handleMessageSelect,readReceipts:qa?ga:g.OrderedMap()}));}return (n.createElement("div",{id:z===k.MESSENGER?l.CONVERSATION:null},ca));},_handleMessageDeselect:function(x){this.setState(function(y){return {activeMessageID:y.activeMessageID===x?null:y.activeMessageID};});},_handleMessageSelect:function(x){this.setState({activeMessageID:x});}});function t(x,y){return y.find(function(z){return z.message_id===x;})?x:null;}function u(x,y,z){return (z<y-1)?x[z+1][0].timestamp:Infinity;}function v(x,y){return y.timestamp>x?x:Infinity;}function w(x,y,z){return (y.isEmpty()||x.last()<y.first().timestamp||x.first()>=z);}e.exports=s;},null);
__d("MercuryParticipantsImage.react",["MercuryParticipants","React","SplitImage.react","areEqual"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';var k=h,l=k.PropTypes,m=h.createClass({displayName:"MercuryParticipantsImage",_bigImageToken:(null),propTypes:{participants:l.array.isRequired,size:l.number},getInitialState:function(){return {participantImages:[]};},componentDidMount:function(){this._getParticipantImages(this.props);},componentWillReceiveProps:function(n){this._getParticipantImages(n);},componentWillUnmount:function(){this._bigImageToken&&this._bigImageToken.remove();},shouldComponentUpdate:function(n,o){return (n.size!==this.props.size||!o||!j(o.participantImages,this.state.participantImages));},render:function(){if(this.state.participantImages.length>0)return (h.createElement(i,{border:true,className:this.props.className,srcs:this.state.participantImages,size:this.props.size}));return null;},_getParticipantImages:function(n){this._bigImageToken&&this._bigImageToken.remove();(this)._bigImageToken=g.getOrderedBigImageMulti(n.participants,function(o){this.isMounted()&&this.setState({participantImages:o});}.bind(this));}});e.exports=m;},null);
__d("MercuryThreadImage.react",["ImmutableObject","MercuryIDs","MercuryParticipantsImage.react","MercuryParticipantsConstants","Pixelz.react","React","areEqual"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();'use strict';var n=l,o=n.PropTypes,p=l.createClass({displayName:"MercuryThreadImage",propTypes:{thread:o.instanceOf(g).isRequired,viewer:o.string.isRequired,size:o.number,useBackground:o.bool},shouldComponentUpdate:function(q,r){return (q.thread.image_src!==this.props.thread.image_src||!m(q.thread.participants,this.props.thread.participants)||q.size!==this.props.size||q.viewer!==this.props.viewer||q.useBackground!==this.props.useBackground);},render:function(){var q=this.props.size||j.BIG_IMAGE_SIZE,r=this.props.thread.image_src;if(r){if(this.props.useBackground)return (l.createElement("div",{style:{height:q,backgroundImage:("url("+r+")"),backgroundPosition:'50% 50%',backgroundRepeat:'no-repeat',backgroundSize:'cover',width:q}}));return (l.createElement(k,{height:q,resizeMode:'cover',src:r,width:q}));}var s=h.getParticipantIDFromUserID(this.props.viewer),t=this.props.thread.participants.filter(function(v){return v!==s;}),u=[];if(!t.length){u=[s];}else if(t.length==1){u=t;}else u=t.slice(0,3);return (l.createElement(i,{participants:u,size:q}));}});e.exports=p;},null);
__d("MessengerContextBanner.react",["ImageBlock.react","immutable","MercuryParticipantsConstants","MercuryParticipantsImage.react","MercuryThreadImage.react","ReactComponentWithPureRenderMixin","React","MercuryShareAttachmentRenderLocations","cx","requireWeak"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){b.__markCompiled&&b.__markCompiled();'use strict';var q=m,r=q.PropTypes,s;p('MessengerThreadImage.react',function(u){s=u;});var t=m.createClass({displayName:"MessengerContextBanner",mixins:[l],propTypes:{contactName:r.string,connectionContext:r.string,contextItems:r.arrayOf(r.string).isRequired,location:r.string.isRequired,participantIDs:r.array,participants:r.instanceOf(h.Map),thread:r.object,viewer:r.string.isRequired},render:function(){return (m.createElement(g,{className:(("_llj")+(this.props.location===n.MESSENGER?' '+"_2eu-":'')+(this.props.location===n.CHAT?' '+"_2eu_":'')+(this.props.location===n.WEB_INBOX?' '+"_2ev0":'')),spacing:"medium",style:this.props.style},this._renderImage(),m.createElement("div",{className:"_lll"},this._renderName(),this._renderConnectionContext(),this._renderContextItems())));},_renderImage:function(){var u=this.props.location===n.MESSENGER,v=null;if(this.props.thread){var w=s&&u?s:k;v=(m.createElement(w,{showBadge:false,participants:this.props.participants,size:u?60:null,thread:this.props.thread,viewer:this.props.viewer}));}else if(this.props.participantIDs)v=(m.createElement(j,{participants:this.props.participantIDs,size:i.BIG_IMAGE_SIZE}));return (m.createElement("div",{className:"_llk"},v));},_renderName:function(){if(this.props.location!==n.MESSENGER)return null;return (m.createElement("div",{className:"_llq"},m.createElement("span",{className:"_3oh-"},this.props.contactName)));},_renderConnectionContext:function(){return (m.createElement("div",{className:"_1n-e _36zg"},this.props.connectionContext));},_renderContextItems:function(){if(!this.props.contextItems.length)return null;return (m.createElement("div",null,this.props.contextItems.map(function(u,v){return m.createElement("div",{className:"_1n-e",key:'item:'+v},u);})));}});e.exports=t;},null);
__d("XMessengerContextBannerController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/ajax\/messenger\/context_banner\/",{profile_id:{type:"Int",required:true},max_context_items:{type:"Int",defaultValue:3}});},null);
__d("MessengerContextBannerContainer.react",["AsyncRequest","DOMDimensions","immutable","MercuryParticipants","MessengerContextBanner.react","ReactComponentWithPureRenderMixin","React","StoreAndPropBasedStateMixin","XMessengerContextBannerController"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();'use strict';var p=m,q=p.PropTypes,r=m.createClass({displayName:"MessengerContextBannerContainer",mixins:[l,n(j)],propTypes:{contact:q.object,location:q.string.isRequired,onResize:q.func,otherUserID:q.string,participants:q.instanceOf(i.Map),thread:q.object,viewer:q.string.isRequired},statics:{calculateState:function(s){var t=null;if(s.contact||!s.otherUserID){t=s.contact;}else{var u=j.getIDFromVanityOrFBID(s.otherUserID);t=j.getOrFetch(u);}return {contact:t};}},getInitialState:function(){return {connectionContext:'',contextItems:[]};},componentDidMount:function(){var s=this.state.contact?this.state.contact.fbid:this.props.otherUserID;if(s){var t=o.getURIBuilder().setInt('profile_id',s).getURI();new g().setAllowCrossPageTransition(true).setURI(t).setHandler(this._handleReceivedContextData).send();}},render:function(){if(!this.state.contact||this.state.contact.type==='page')return null;return (m.createElement(k,{contactName:this.state.contact.name,connectionContext:this.state.connectionContext,contextItems:this.state.contextItems,location:this.props.location,participantIDs:[this.state.contact.id],participants:this.props.participants,style:this.props.style,thread:this.props.thread,viewer:this.props.viewer}));},_handleReceivedContextData:function(s){if(s&&s.payload)this.setState({connectionContext:s.payload.connection_context||'',contextItems:s.payload.context_items||[]},function(){var t=h.getElementDimensions(m.findDOMNode(this)).height;if(this.props.onResize)this.props.onResize(t);}.bind(this));}});e.exports=r;},null);
__d("MessengerDateBreak.react",["React","cx","formatDate","joinClasses"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=g,l=k.PropTypes,m=g.createClass({displayName:"MessengerDateBreak",propTypes:{date:l.instanceOf(Date).isRequired},shouldComponentUpdate:function(n){return this.props.date.getTime()!==n.date.getTime();},render:function(){var n=i(this.props.date,{today:'g:ia',withinWeek:'D g:ia',thisYear:'M jS, g:ia',older:'m/d/Y g:ia'});return (g.createElement("time",{className:j(this.props.className,"_497p _2lpt")},g.createElement("span",{className:"_3oh-"},n)));}});e.exports=m;},null);
__d("MessengerFlexArea.react",["Event","MessengerSignals","React","ResponsiveBlock.react","Style","SubscriptionsHandler","Vector","getScrollPosition","throttle"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();'use strict';var p=i,q=p.PropTypes,r=i.createClass({displayName:"MessengerFlexArea",propTypes:{beforeResize:q.func,onResize:q.func},getInitialState:function(){return {height:0};},componentDidMount:function(){this._subscriptions=new l();this._subscriptions.addSubscriptions(g.listen(window,'resize',o(this.recalculateHeight,51)),h.onResize(function(){this.recalculateHeight();}.bind(this)));this.recalculateHeight();},componentWillUnmount:function(){this._subscriptions&&this._subscriptions.release();clearTimeout(this._onResizeTimeout);},render:function(){return (i.createElement(j,{className:this.props.className,onResize:o(this._handleResponsiveBlockResize,51),style:{height:this.state.height+'px'}},this.props.children));},recalculateHeight:function(){if(!this.isMounted())return;var s=i.findDOMNode(this),t=s.parentNode,u=this.state.height,v=m.getViewportDimensions().y;v-=m.getElementPosition(t||s).y;var w=n(window);v+=w.y;if(t){Array.from(t.childNodes).forEach(function(x){if(k.get(x,'position')==='absolute')return;v-=m.getElementDimensions(x).y;});v+=m.getElementDimensions(s).y;}if(isNaN(v)||v<0)v=0;if(v!==u){this.props.beforeResize&&this.props.beforeResize();this.setState({height:v},this.props.onResize);}},_handleResponsiveBlockResize:function(s,t){if(!this.isMounted())return;if(t===this.state.height){this.props.beforeResize&&this.props.beforeResize();clearTimeout(this._onResizeTimeout);if(this.props.onResize)this._onResizeTimeout=setTimeout(this.props.onResize,0);}}});e.exports=r;},null);
__d("MessengerScrollableArea.react",["React","ScrollableArea.react","Style","UserAgent","clearImmediate","setImmediate","throttle"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();'use strict';var n=g,o=n.PropTypes,p=20,q=g.createClass({displayName:"MessengerScrollableArea",propTypes:{onScroll:o.func,width:o.number},render:function(){return (g.createElement(h,{className:this.props.className,onScroll:this.props.onScroll?m(this.props.onScroll,50):null,ref:"scrollable",shadow:false,style:this.props.style,width:this.props.width},this.props.children));},componentDidMount:function(){this._resizeCallback=l(this._resize);},componentWillUnmount:function(){k(this._resizeCallback);},_resize:function(){if(!j.isBrowser('IE'))return;var r=this.refs.scrollable.refs.wrap,s=this.refs.scrollable.refs.body;if(!s||!r)return;s=g.findDOMNode(s);r=g.findDOMNode(r);var t=r.offsetWidth-r.clientWidth;if(t>0)i.set(s,'margin-right',(-t)+'px');},getArea:function(){return this.refs.scrollable.getArea();},scrollToBottom:function(){var r=this.getArea();if(r)this.scrollToPosition(r.getScrollHeight());},scrollToTop:function(){var r=this.getArea();if(r)this.scrollToPosition(0);},scrollToPosition:function(r){var s=this.getArea();if(!s)return;s.setScrollTop(r,false);},isScrolledToBottom:function(){var r=this.getArea();if(!r)return false;return r.getScrollTop()+r.getClientHeight()>=r.getScrollHeight()-p;},isScrolledToTop:function(){var r=this.getArea();if(!r)return true;return r.getScrollTop()<=p;},getScrollTop:function(){var r=this.getArea();if(!r)return 0;return r.getScrollTop();}});e.exports=q;},null);
__d("MessengerFlexScrollableArea.react",["MessengerFlexArea.react","MessengerScrollableArea.react","React"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';var j=i,k=j.PropTypes,l=i.createClass({displayName:"MessengerFlexScrollableArea",propTypes:{onScroll:k.func,shouldStickToBottom:k.bool},render:function(){return (i.createElement(g,{beforeResize:this._prepareForResize,className:this.props.className,onResize:this._handleResize,ref:"flexArea"},i.createElement(h,{height:"100%",onScroll:this.props.onScroll,ref:"scrollable"},this.props.children)));},getArea:function(){return this.refs.scrollable.getArea();},_prepareForResize:function(){this._wasScrolledToBottom=this.refs.scrollable.isScrolledToBottom();},_handleResize:function(){if(this._wasScrolledToBottom&&this.props.shouldStickToBottom)this.refs.scrollable.scrollToBottom();},handleResize:function(){this.refs.flexArea&&this.refs.flexArea.recalculateHeight();},scrollToBottom:function(){this.refs.scrollable.scrollToBottom();},scrollToTop:function(){this.refs.scrollable.scrollToTop();},scrollToPosition:function(m){this.refs.scrollable.scrollToPosition(m);},isScrolledToBottom:function(){return this.refs.scrollable.isScrolledToBottom();},isScrolledToTop:function(){return this.refs.scrollable.isScrolledToTop();},getScrollTop:function(){return this.refs.scrollable.getScrollTop();}});e.exports=l;},null);
__d("MercuryMessageInfo",["MercuryActionStatus","MercuryViewer"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';var i={isOutbound:function(j){return j.author===h.getID();},isInbound:function(j){return !i.isOutbound(j);},isSending:function(j){return (j.status===g.UNSENT||j.status===g.UNCONFIRMED||j.status===g.UNABLE_TO_CONFIRM||j.status===g.RESENDING);},hasError:function(j){return (j.status===g.FAILED_UNKNOWN_REASON||j.status===g.UNABLE_TO_CONFIRM||j.status===g.ERROR);}};e.exports=i;},null);
__d("P2PButton.react",["CurrentEnvironment","MessengerDialogButton.react","React","XUIButton.react"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';var k=i.createClass({displayName:"P2PButton",render:function(){var l=g.messengerdotcom,m=l?h:j,n=this.props.type;if(!n)n=this.props.use==='confirm'?'primary':'secondary';var o=l?'default':this.props.use,p=Object.assign({},this.props,{type:n,use:o});return (i.createElement(m,i.__spread({},p),this.props.children));}});e.exports=k;},null);
__d("P2PBigAmount.react",["CurrentEnvironment","Image.react","React","cx","ix"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l=i,m=l.PropTypes,n=i.createClass({displayName:"P2PBigAmount",propTypes:{amount:m.string.isRequired,isPending:m.bool},getImage:function(){if(this.isMessengerDotCom()){if(this.props.isPending){return k('/images/p2p/message-icon-dark-gray.png');}else return k('/images/p2p/message-icon-blue.png');}else if(this.props.isPending){return k('/images/p2p/message-icon-gray.png');}else return k('/images/p2p/message-icon-www-blue.png');},isMessengerDotCom:function(){return g.messengerdotcom;},render:function(){return (i.createElement("div",{className:(("_8j6")+(this.isMessengerDotCom()?' '+"_8j7":''))},i.createElement("div",{className:"_8j8"},i.createElement(h,{height:16,src:this.getImage(),width:16})),i.createElement("div",{className:(("_8jc")+(this.props.isPending?' '+"_8jd":'')+(this.props.amount.length>=8?' '+"_8je":'')+(' '+"_3oh-"))},this.props.amount)));}});e.exports=n;},null);
__d("P2PDialog.react",["CurrentEnvironment","LayerFadeOnHide","MessengerDialog.react","React","XUIDialog.react","emptyFunction"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';var m=j,n=m.PropTypes,o=j.createClass({displayName:"P2PDialog",propTypes:{onToggle:n.func,shown:n.bool,width:n.number},getDefaultProps:function(){return {onToggle:l,repositionOnUpdate:false,shown:true,width:400};},componentDidUpdate:function(){if(this.props.repositionOnUpdate)setTimeout(function(){if(this.isMounted()&&this.refs.dialog&&this.refs.dialog.layer)this.refs.dialog.layer.updatePosition();}.bind(this),0);},render:function(){var p=g.messengerdotcom,q=p?i:k;return (j.createElement(q,j.__spread({behaviors:{LayerFadeOnHide:h}},this.props,{ref:"dialog"}),this.props.children));}});e.exports=o;},null);
__d("P2PDialogBody.react",["CurrentEnvironment","MessengerDialogBody.react","React","XUIDialogBody.react"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';var k=i.createClass({displayName:"P2PDialogBody",render:function(){var l=g.messengerdotcom,m=l?h:j;return (i.createElement(m,i.__spread({},this.props),this.props.children));}});e.exports=k;},null);
__d("P2PDialogFooter.react",["CurrentEnvironment","MessengerDialogFooter.react","React","XUIDialogFooter.react","cloneWithProps","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';var m=i.createClass({displayName:"P2PDialogFooter",render:function(){var n=g.messengerdotcom,o=n?h:j,p,q=this.props.children;if(n){p=i.Children.count(this.props.children);q=i.Children.map(this.props.children,function(r,s){if(!r)return null;return k(r,{className:"_4ec0",type:s===0&&p===2?'secondary':'primary'});});}return (i.createElement(o,i.__spread({},this.props),q));}});e.exports=m;},null);
__d("P2PLogger",["BanzaiLogger"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';var h='P2PPaymentLoggerConfig',i={log:function(j,k){k=Object.assign({event:j},k);g.log(h,k);}};e.exports=i;},null);
__d("MessengerText.react",["ReactComponentWithPureRenderMixin","React","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';var k=h,l=k.PropTypes,m=h.createClass({displayName:"MessengerText",mixins:[g],propTypes:{type:l.oneOf(['primary','secondary']).isRequired,size:l.oneOf(['small'])},render:function(){return (h.createElement("div",h.__spread({},this.props,{className:j((("_39r5")+(this.props.type==='primary'?' '+"_39r6":'')+(this.props.type==='secondary'?' '+"_39r7":'')+(this.props.size==='small'?' '+"_39r8":'')),this.props.className)}),this.props.children));}});e.exports=m;},null);
__d("P2PText.react",["CurrentEnvironment","MessengerText.react","React","XUIGrayText.react"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';var k=i,l=k.PropTypes,m=i.createClass({displayName:"P2PText",propTypes:{type:l.oneOf(['primary','secondary']).isRequired},render:function(){var n=g.messengerdotcom,o=n?h:j,p=this.props,q=p.type,r=this.props;if(!n){r=Object.assign({},this.props,{display:this.props.display||'block',shade:q==='primary'?'dark':'light',size:this.props.size||'small'});}else{r=Object.assign({},this.props,{size:'small'});delete r.size;}return (i.createElement(o,i.__spread({},r),this.props.children));}});e.exports=m;},null);
__d("P2PNonEnabledGroupReceiptDialog.react",["CurrentEnvironment","LeftRight.react","P2PAmountUtils","P2PButton.react","P2PBigAmount.react","P2PDialog.react","P2PDialogBody.react","P2PDialogFooter.react","XUICloseButton.react","P2PLogger","P2PPaymentLoggerEvent","P2PPaymentLoggerEventFlow","P2PText.react","React","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){b.__markCompiled&&b.__markCompiled();'use strict';var w=t,x=w.PropTypes,y=t.createClass({displayName:"P2PNonEnabledGroupSendReceiptDialog",propTypes:{amount:x.string.isRequired,onClose:x.func.isRequired,receiverName:x.string.isRequired,senderName:x.string.isRequired},componentDidMount:function(){this.log(q.UI_ACTN_3RD_PARTY_NON_ENABLED_LOG_MESSAGE_CLICKED,{raw_amount:this.props.amount});},log:function(z,aa){p.log(z,Object.assign({www_event_flow:r.UI_FLOW_P2P_GROUP_SEND},aa));},_handleToggle:function(z){if(!z){this.props.onClose();this.log(q.UI_ACTN_3RD_PARTY_NON_ENABLED_LOG_MESSAGE_CANCELLED);}},_handleOKClick:function(){this._handleToggle(false);},_handleCloseClick:function(){this._handleToggle(false);},render:function(){var z=g.messengerdotcom,aa=z?270:250,ba=t.createElement(h,null,t.createElement("div",null),t.createElement(o,{onClick:this._handleCloseClick}));return (t.createElement(l,{className:(("_45c8")+(z?' '+"_45c9":'')),layerHideOnBlur:false,onToggle:this._handleToggle,shown:true,width:aa},t.createElement(m,null,!z?ba:null,t.createElement("div",{className:"_45ca"},t.createElement(k,{amount:i.sanitizeAmount(this.props.amount)})),t.createElement(s,{className:"_45cc",size:"small",type:"secondary"},v._("{sender name} sent {amount} to {receiver name}",[v.param("sender name",this.props.senderName),v.param("amount",this.props.amount),v.param("receiver name",this.props.receiverName)]),".")),t.createElement(n,null,t.createElement(j,{use:"confirm",size:"medium",label:v._("OK"),type:"primary",onClick:this._handleOKClick}))));}});e.exports=y;},null);
__d("XP2PTransactionDetailController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/p2p\/transaction\/",{id:{type:"String",required:true}});},null);
__d("P2PMercuryLogMessage.react",["CurrentEnvironment","CurrentUser","Link.react","MercuryIDs","P2PActions","P2PGKValues","P2PNonEnabledGroupReceiptDialog.react","P2PPaymentLogMessageSubtype","React","ReactLayeredComponentMixin","XP2PTransactionDetailController","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){b.__markCompiled&&b.__markCompiled();'use strict';var t=o,u=t.PropTypes,v=o.createClass({displayName:"P2PMercuryLogMessage",mixins:[p],propTypes:{amount:u.string,receiver:u.object.isRequired,sender:u.object.isRequired,subtype:u.oneOf(Object.keys(n).map(function(w){return n[w];})),transferID:u.string.isRequired,threadFBID:u.string,threadID:u.string},getDefaultProps:function(){return {amount:'',sender:null,receiver:null,subtype:null};},getInitialState:function(){return {nonEnabledGroupReceiptDialogShown:false};},handleGroupDetailsLinkClicked:function(){k.chatSendViewOpened({threadID:this.props.threadID,groupThreadFBID:this.props.threadFBID,groupSendReceiptDetails:{amount:this.props.amount,receiverName:this.props.receiver.short_name,senderName:this.props.sender.short_name}});},handleNonEnabledGroupDetailsLinkClicked:function(){this.setState({nonEnabledGroupReceiptDialogShown:true});},_handleNonEnabledGroupDetailsDialogClosed:function(){this.setState({nonEnabledGroupReceiptDialogShown:false});},isViewerSender:function(){return (j.getUserIDFromParticipantID(this.props.sender.id)===h.getID());},isViewerReceiver:function(){return (j.getUserIDFromParticipantID(this.props.receiver.id)===h.getID());},renderTransferDetailsLink:function(){var w=(q.getURIBuilder()).setString('id',this.props.transferID).getURI();return (o.createElement(i,{className:"_kiq",href:w,target:"_blank"},s._("See details")));},renderGroupDetailsLink:function(){return (o.createElement(i,{className:"_kiq",href:"#",onClick:this.handleGroupDetailsLinkClicked},s._("See details")));},renderNonEnabledGroupDetailsLink:function(){return (o.createElement(i,{className:"_kiq",href:"#",onClick:this.handleNonEnabledGroupDetailsLinkClicked},s._("See details")));},renderLayers:function(){var w={};if(this.state.nonEnabledGroupReceiptDialogShown)w.nonEnabledGroupReceiptDialog=o.createElement(m,{amount:this.props.amount,onClose:this._handleNonEnabledGroupDetailsDialogClosed,receiverName:this.props.receiver.short_name,senderName:this.props.sender.short_name});return w;},render:function(){var w=null,x=this.props.amount,y=this.props.subtype,z=this.isViewerSender(),aa=this.isViewerReceiver(),ba,ca=g.messengerdotcom?l.P2PGroupSendMessengerDotCom:l.P2PGroupSendWWW;if(!z&&!aa){if(ca){ba=this.renderGroupDetailsLink();}else ba=this.renderNonEnabledGroupDetailsLink();}else ba=this.renderTransferDetailsLink();switch(y){case n.SENT_IN_GROUP:w=(s._("{sendername} sent {amount} to {receivername}. {details}",[s.param("sendername",this.props.sender.short_name),s.param("amount",x),s.param("receivername",this.props.receiver.short_name),s.param("details",ba)]));break;case n.CANCELED_EXPIRED:case n.CANCELED_SAME_CARD:case n.CANCELED_SENDER_RISK:case n.CANCELED_RECIPIENT_RISK:case n.CANCELED_CUSTOMER_SERVICE:if(z){w=(s._("Your {amount} payment was canceled. {details}",[s.param("amount",x),s.param("details",this.renderTransferDetailsLink())]));}else w=(s._("{firstname}'s {amount} payment was canceled. {details}",[s.param("firstname",this.props.sender.short_name),s.param("amount",x),s.param("details",this.renderTransferDetailsLink())]));w=o.createElement("span",{className:"_5rdx"},w);break;case n.CANCELED_DECLINED:if(z){w=(s._("{firstname} didn't accept your {amount} payment. {details}",[s.param("firstname",this.props.receiver.short_name),s.param("amount",x),s.param("details",this.renderTransferDetailsLink())]));}else w=(s._("You didn't accept {firstname}'s {amount} payment. {details}",[s.param("firstname",this.props.sender.short_name),s.param("amount",x),s.param("details",this.renderTransferDetailsLink())]));w=o.createElement("span",{className:"_5rdx"},w);break;}return (o.createElement("div",{className:((g.messengerdotcom?"_5rdy":''))},w));}});e.exports=v;},null);
__d("MessengerLogMessageBody.react",["immutable","ImmutableObject","MercuryIDs","MercuryParticipants","MercuryLogMessageType","P2PMercuryLogMessage.react","ReactComponentWithPureRenderMixin","React","StoreAndPropBasedStateMixin","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){b.__markCompiled&&b.__markCompiled();var q=n,r=q.PropTypes,s=n.createClass({displayName:"MessengerLogMessageBody",_viewer:(''),mixins:[m,o(j)],propTypes:{message:r.instanceOf(h).isRequired,viewer:r.string.isRequired},statics:{calculateState:function(t){var u=[],v=t.message,w=v.log_message_data,x=v.log_message_type;switch(x){case k.SUBSCRIBE:u=w.added_participants;break;case k.UNSUBSCRIBE:u=w.removed_participants;break;case k.ORION:u.push(w.senderId,w.receiverId);break;}if(!u||!u.length)return {};var y=g.Map().withMutations(function(z){u.forEach(function(aa){z.set(aa,j.getOrFetch(aa)||{});});});return {extraParticipants:y};}},render:function(){var t=this.props.message.log_message_type;this._viewer=i.getParticipantIDFromUserID(this.props.viewer);if(this._viewer!==this.props.message.author&&t!==k.ORION)return null;switch(t){case k.SUBSCRIBE:return (n.createElement("span",null,this._renderSubscribeMessage(this.props.message)));case k.UNSUBSCRIBE:return (n.createElement("span",null,this._renderUnsubscribeMessage(this.props.message)));case k.THREAD_NAME:var u=this.props.message.log_message_data;if(!u.name)return (n.createElement("span",null,p._("You removed the group name.")));return (n.createElement("span",null,p._("You named the group {the new name of the group}.",[p.param("the new name of the group",u.name)])));case k.THREAD_IMAGE:return (n.createElement("span",null,p._("You changed the group photo.")));case k.ORION:return this._renderP2PLogMessage(this.props.message);default:return null;}},_renderP2PLogMessage:function(t){var u=t.log_message_data,v=u.senderId,w=u.receiverId,x=this.state.extraParticipants,y=x.get(v),z=x.get(w);return (n.createElement(l,{amount:u.formattedAmount,receiver:z,sender:y,subtype:u.subtype,threadFBID:t.thread_fbid,threadID:t.thread_id,transferID:u.transfer_id}));},_renderSubscribeMessage:function(t){var u=this._moveCurrentUserToFront(t.log_message_data.added_participants),v=this.state.extraParticipants;switch(u.length){case 1:return (p._("You added {subscriber1}.",[p.param("subscriber1",v.get(u[0]).name)]));case 2:return (p._("You added {subscriber1} and {subscriber2}.",[p.param("subscriber1",v.get(u[0]).name),p.param("subscriber2",v.get(u[1]).name)]));case 3:return (p._("You added {subscriber1}, {subscriber2} and {subscriber3}.",[p.param("subscriber1",v.get(u[0]).name),p.param("subscriber2",v.get(u[1]).name),p.param("subscriber3",v.get(u[2]).name)]));default:var w=u.map(function(x){return v.get(x);});return (p._("You added {subscriber1}, {subscriber2} and {num} other people.",[p.param("subscriber1",w[0].name),p.param("subscriber2",w[1].name),p.param("num",w.slice(2).length)]));}},_renderUnsubscribeMessage:function(t){var u=this.state.extraParticipants,v=t.log_message_data.removed_participants[0],w=u.get(v);if(!v||v===t.author){return (p._("You left the conversation."));}else return (p._("You removed {name} from the conversation.",[p.param("name",w.name)]));},_moveCurrentUserToFront:function(t){var u=this._viewer,v=t.indexOf(u);if(v>0){var w=t.filter(function(x){return x!==u;});return [u].concat(w);}return t;}});e.exports=s;},null);
__d("MNCommerceLoggingConstants",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={DIALOG_SURFACE:{SHIPMENT:'shipment',RECEIPT:'receipt',UNLINK:'unlink',UNLINK_ERROR:'unlink_error'}};e.exports=g;},null);
__d("MNCommerceActionTypes",["keyMirrorRecursive"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';var h=g({RECEIPT:{LOADED:null,LOAD_ERROR:null,RELOAD:null},SHIPMENT:{LOADED:null,LOAD_ERROR:null,RELOAD:null},DIALOG:{SHOW:null,HIDE:null}});e.exports=h;},null);
__d("MNCommerceDialogStateActions",["MessengerDispatcher","MNCommerceActionTypes"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';var i={showDialog:function(j,k){g.dispatch({type:h.DIALOG.SHOW,dialogContainer:j,state:k});},hideDialog:function(){g.dispatch({type:h.DIALOG.HIDE});}};e.exports=i;},null);
__d("MNCommerceDialogStateStore",["FluxStore","MessengerDispatcher","MNCommerceActionTypes"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';for(var j in g)if(g.hasOwnProperty(j))l[j]=g[j];var k=g===null?null:g.prototype;l.prototype=Object.create(k);l.prototype.constructor=l;l.__superConstructor__=g;function l(){g.call(this,h);this.$MNCommerceDialogStateStore0=null;this.$MNCommerceDialogStateStore1=null;}l.prototype.__onDispatch=function(m){var n=m.type;switch(n){case i.DIALOG.SHOW:this.$MNCommerceDialogStateStore0=m.dialogContainer;this.$MNCommerceDialogStateStore1=m.state;this.__emitChange();break;case i.DIALOG.HIDE:this.$MNCommerceDialogStateStore0=null;this.$MNCommerceDialogStateStore1=null;this.__emitChange();break;}};l.prototype.getDialogContainer=function(){return this.$MNCommerceDialogStateStore0;};l.prototype.getState=function(){return this.$MNCommerceDialogStateStore1;};e.exports=new l();},null);
__d("MNCommerceButton.react",["CurrentEnvironment","MessengerDialogButton.react","React","XUIButton.react"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';var k=i.createClass({displayName:"MNCommerceButton",render:function(){var l=g.messengerdotcom,m=l?h:j,n=this.props.type;if(!n)n=this.props.type==='confirm'?'primary':'secondary';var o=l?'default':this.props.use,p=Object.assign({},this.props,{type:n,use:o});return (i.createElement(m,i.__spread({},p),this.props.children));}});e.exports=k;},null);
__d("MNCommerceAttachmentConstants",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={XLARGE_IMAGE_DIMENSION:72,LARGE_IMAGE_DIMENSION:60,SMALL_IMAGE_DIMENSION:32,SINGLE_IMAGE_HEIGHT:108,BUBBLE_PADDING:6,IMAGE_HEIGHT:{CHAT:108,WEB_INBOX:130},UNLINK_ERROR_DIALOG:{WIDTH:300},DIALOG:{WIDTH:445,PADDING:12},MDOTCOMDIALOG:{WIDTH:495},ORDER_DETAIL:{SUB_TOTAL:'subTotal',SHIPPING:'shippingCost',TAX:'tax',TOTAL:'totalCost'}};e.exports=g;},null);
__d("MNCommerceDialog.react",["CurrentEnvironment","LayerFadeOnHide","LayerHideOnEscape","MNCommerceAttachmentConstants","MessengerDialog.react","React","XUIDialog.react","cx","emptyFunction","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){b.__markCompiled&&b.__markCompiled();'use strict';var q=l,r=q.PropTypes,s=l.createClass({displayName:"MNCommerceDialog",propTypes:{onToggle:r.func,shown:r.bool,width:r.number.isRequired},getDefaultProps:function(){return {onToggle:o,repositionOnUpdate:true,shown:true,width:g.messengerdotcom?j.MDOTCOMDIALOG.WIDTH:j.DIALOG.WIDTH};},componentDidUpdate:function(){if(this.props.repositionOnUpdate)setTimeout(function(){if(this.isMounted()&&this.refs.dialog&&this.refs.dialog.layer)this.refs.dialog.layer.updatePosition();}.bind(this),0);},render:function(){var t=g.messengerdotcom,u=t?k:m;return (l.createElement(u,l.__spread({behaviors:{LayerFadeOnHide:h,LayerHideOnEscape:i}},this.props,{className:p(this.props.className,((t?"_3rx0":''))),ref:"dialog"}),this.props.children));}});e.exports=s;},null);
__d("MNCommerceDialogBody.react",["CurrentEnvironment","MessengerDialogBody.react","React","XUIDialogBody.react"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';var k=i.createClass({displayName:"MNCommerceDialogBody",render:function(){var l=g.messengerdotcom,m=l?h:j;return (i.createElement(m,i.__spread({},this.props),this.props.children));}});e.exports=k;},null);
__d("MNCommerceDialogFooter.react",["CurrentEnvironment","MessengerDialogFooter.react","React","XUIDialogFooter.react","cloneWithProps","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';var m=i.createClass({displayName:"MNCommerceDialogFooter",render:function(){var n=g.messengerdotcom,o=n?h:j,p,q=this.props.children;if(n){p=i.Children.count(this.props.children);q=i.Children.map(this.props.children,function(r,s){if(!r)return null;return k(r,{className:"_4ec0",type:s===0&&p===2?'secondary':'primary'});});}return (i.createElement(o,i.__spread({},this.props),q));}});e.exports=m;},null);
__d("MNCommerceDialogTitle.react",["CurrentEnvironment","MessengerDialogHeader.react","React","XUIDialogTitle.react"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';var k=i.createClass({displayName:"MNCommerceDialogTitle",render:function(){var l=g.messengerdotcom,m=l?h:j;return (i.createElement(m,i.__spread({},this.props),this.props.children));}});e.exports=k;},null);
__d("MNCommerceUnlinkDialog.react",["MNCommerceButton.react","MNCommerceDialog.react","MNCommerceDialogBody.react","MNCommerceDialogFooter.react","MNCommerceDialogTitle.react","React","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();'use strict';var n=l,o=n.PropTypes,p=l.createClass({displayName:"MNCommerceUnlinkDialog",propTypes:{onCancelButtonClick:o.func,onTurnOffButtonClick:o.func},render:function(){var q=m._("Cancel"),r=m._("Turn Off");return (l.createElement(h,{onToggle:this.props.onToggle,shown:this.props.shown},l.createElement(k,{showCloseButton:false},m._("Unlink account?")),l.createElement(i,null,l.createElement("div",null,m._("You can turn off updates if you didn't sign up or just don't want to get them anymore."))),l.createElement(j,null,l.createElement(g,{label:q,onClick:this.props.onCancelButtonClick,use:"default"}),l.createElement(g,{label:r,onClick:this.props.onTurnOffButtonClick,use:"confirm"}))));}});e.exports=p;},null);
__d("MNCommerceUnlinkErrorDialog.react",["MNCommerceAttachmentConstants","MNCommerceErrors","React","MNCommerceButton.react","MNCommerceDialog.react","MNCommerceDialogBody.react","MNCommerceDialogFooter.react","MNCommerceDialogTitle.react","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();'use strict';var p=i,q=p.PropTypes,r=i.createClass({displayName:"MNCommerceUnlinkErrorDialog",propTypes:{errorType:q.number,onOkayButtonClick:q.func},render:function(){var s=o._("OK"),t=null,u=null;switch(this.props.errorType){case h.ALREADY_UNLINKED:u=i.createElement("div",null,o._("Updates Are Already Off"));t=i.createElement("div",null,o._("You aren't getting updates in Messenger."));break;default:u=i.createElement("div",null,o._("Couldn't Turn Off Updates"));t=i.createElement("div",null,o._("Sorry, something went wrong. Please try again."));break;}return (i.createElement(k,{onToggle:this.props.onToggle,shown:this.props.shown,width:g.UNLINK_ERROR_DIALOG.WIDTH},i.createElement(n,null,u),i.createElement(l,null,t),i.createElement(m,null,i.createElement(j,{label:s,onClick:this.props.onOkayButtonClick,use:"confirm"}))));}});e.exports=r;},null);
__d("MNCommerceUnlinkDialogContainer.react",["BanzaiLogger","MNCommerceDialogStateActions","MNCommerceDialogStateStore","MNCommerceLoggingConstants","MNCommerceLoggerEvents","MNCommerceUnlinkDialog.react","MNCommerceUnlinkErrorDialog.react","React"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();'use strict';var o=n.createClass({displayName:"MNCommerceUnlinkDialogContainer",render:function(){var p=i.getState();if(p&&p.errorType){g.log('MessengerCommerceLoggerConfig',{event:k.DIALOG_LOAD_SUCCESS,debug_data:JSON.stringify({dialog_surface:j.DIALOG_SURFACE.UNLINK_ERROR})});return (n.createElement(m,{onToggle:this._onToggle,shown:!!p,errorType:p.errorType,onOkayButtonClick:this._hideDialog}));}else{g.log('MessengerCommerceLoggerConfig',{event:k.DIALOG_LOAD_SUCCESS,debug_data:JSON.stringify({dialog_surface:j.DIALOG_SURFACE.UNLINK})});return (n.createElement(l,{onToggle:this._onToggle,shown:!!p,onCancelButtonClick:this._hideDialog,onTurnOffButtonClick:p&&p.onTurnOffButtonClick}));}},_onToggle:function(p){if(!p)this._hideDialog();},_hideDialog:function(){h.hideDialog();}});e.exports=o;},null);
__d("XMNCommerceUnlinkController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/messages\/commerce\/unlink\/",{page_id:{type:"String",required:true},user_id:{type:"String",required:true}});},null);
__d("MNCommerceUnlinkDataManager",["AsyncRequest","MNCommerceDialogStateActions","MNCommerceUnlinkDialogContainer.react","XMNCommerceUnlinkController"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';function k(){}k.prototype.unlink=function(l,m){var n=j.getURIBuilder().setString('page_id',l).setString('user_id',m).getURI();new g().setURI(n).setErrorHandler(this.$MNCommerceUnlinkDataManager0).send();};k.prototype.$MNCommerceUnlinkDataManager0=function(l){h.showDialog(i,{errorType:l.error});};e.exports=new k();},null);
__d("MNCommerceLogMessageUtils",["BanzaiLogger","Link.react","MercuryIDs","MNCommerceLoggingConstants","MNCommerceLoggerEvents","MNCommerceUnlinkDataManager","MNCommerceDialogStateActions","MNCommerceReplyTypes","MNCommerceUnlinkDialogContainer.react","React","cx","fbt","MercuryThreads"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){b.__markCompiled&&b.__markCompiled();'use strict';var s=b('MercuryThreads').get();function t(){}t.prototype.isCommercePageAdminMessage=function(u){return !!(u&&u.log_message_data&&u.log_message_data.replyType===n.COMMERCE_LINK);};t.prototype.getCommercePageUnlink=function(u,v){var w=function(){var x=i.getUserIDFromParticipantID(u.author),y=s.getThreadMetaNow(u.thread_id),z=null;y.participants.every(function(ba){if(ba!==u.author){z=i.getUserIDFromParticipantID(ba);return false;}return true;});var aa=function(){m.hideDialog();l.unlink(x,z);};m.showDialog(o,{onTurnOffButtonClick:aa});g.log('MessengerCommerceLoggerConfig',{event:k.DIALOG_OPENED,debug_data:JSON.stringify({dialog_surface:j.DIALOG_SURFACE.UNLINK})});};return (p.createElement("span",null,u.log_message_body,' ',p.createElement(h,{className:((!v?"_2w2m":'')+(v?' '+"_1jvn":'')),onClick:w},r._("Turn Off"))));};e.exports=new t();},null);
__d("MessengerLogMessage.react",["Image.react","ImmutableObject","MercuryLogMessageType","MercuryMessageInfo","MessengerLogMessageBody.react","MNCommerceLogMessageUtils","React","ReactComponentWithPureRenderMixin","cx","ix","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){b.__markCompiled&&b.__markCompiled();'use strict';var r=m,s=r.PropTypes,t=p('/images/mercury/clients/messenger/message/messageStateFailed.png'),u=m.createClass({displayName:"MessengerLogMessage",mixins:[n],propTypes:{message:s.instanceOf(h).isRequired,viewer:s.string.isRequired},render:function(){return (m.createElement("div",{className:this._computeClass()},this._renderErrorState(),m.createElement("i",{className:"_uwa"}),m.createElement("span",{className:"_3oh-"},this._renderLogMessageBody())));},_renderLogMessageBody:function(){var v;if(this.props.message.log_message_type!==i.ORION)v=this.props.message.log_message_body;return (this._renderMNCommerceUnlink()||(v)||m.createElement(k,{message:this.props.message,viewer:this.props.viewer}));},_renderMNCommerceUnlink:function(){var v=this.props.message;if(l.isCommercePageAdminMessage(v))return l.getCommercePageUnlink(v,true);},_renderErrorState:function(){if(!j.hasError(this.props.message))return null;return (m.createElement(g,{className:"_41-9",src:t}));},_computeClass:function(){var v,w=this.props.message,x=w.log_message_type===i.UNSUBSCRIBE&&w.log_message_data.removed_participants.indexOf(w.author)!==-1,y=this.props.viewer;switch(w.log_message_type){case i.SUBSCRIBE:v="_uwb";break;case i.UNSUBSCRIBE:v=x?"_uwc":"_uwe";break;case i.PHONE_CALL:v=w.log_message_data.caller.indexOf(y)!==-1?"_uwf":"_uwg";break;case i.VIDEO_CALL:v=w.log_message_data.caller.indexOf(y)!==-1?"_uwh":"_uwi";break;case i.THREAD_NAME:v="_uwj";break;case i.THREAD_IMAGE:v="_uwk";break;case i.SERVER_ERROR:v="_uwl";break;case i.LIVE_LISTEN:v="_uwm";break;case i.WALLPAPER:v="_uwn";break;case i.ORION:v="_uwo";break;case i.SWITCH_TO_WORK:v="_uwp";break;case i.PAGE_REPLY:v="_uwq";break;}return q((("_497p")+((w.log_message_type===i.PHONE_CALL||w.log_message_type===i.VIDEO_CALL)&&!w.log_message_data.answered?' '+"_3no3":'')),v);}});e.exports=u;},null);
__d("MercuryErrorInfo",["MercuryErrorType","MercuryMessageInfo","fbt"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j={getMessage:function(k){var l='';if(j.isConnectionError(k)){l=i._("This message didn't send.");if(j.isTransient(k))l=i._("{message} Check your internet connection and click to try again.",[i.param("message",l)]);}else{if(k&&k.description){l=k.description;}else l=i._("This message failed to send.");if(j.isTransient(k))l=i._("{message} Click to send again.",[i.param("message",l)]);}return l;},isConnectionError:function(k){if(k&&k.type==g.TRANSPORT)return k.code===1001||k.code===1004||k.code===1006;return false;},isTransient:function(k){return k&&k.is_transient;},isPermanent:function(k){return k?!this.isTransient(k):false;},hasErrorStatus:function(k){return h.hasError(k);}};e.exports=j;},null);
__d("MercuryAttachmentAttribution.react",["Image.react","ImmutableObject","ReactComponentWithPureRenderMixin","React","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';var m=j,n=m.PropTypes,o=j.createClass({displayName:"MercuryAttachmentAttribution",mixins:[i],propTypes:{attachment:n.instanceOf(h)},render:function(){var p=this._getAttribution();if(!p)return null;return (j.createElement("div",{className:l(this.props.className,"_29ew")},j.createElement(g,{src:p.icon_url,className:"_29ex"}),j.createElement("span",{className:"_29ey"},p.name)));},_getAttribution:function(){return this.props.attachment&&this.props.attachment.app_attribution;}});e.exports=o;},null);
__d("MessengerAttachmentAttribution.react",["ImmutableObject","MercuryAttachmentAttribution.react","React","cx"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';var k=i,l=k.PropTypes,m=i.createClass({displayName:"MessengerAttachmentAttribution",propTypes:{attachment:l.instanceOf(g)},render:function(){return (i.createElement(h,{attachment:this.props.attachment,className:"_2f5n _4br2"}));}});e.exports=m;},null);
__d("MessengerBubble.react",["immutable","MercuryMessageBody.react","ReactComponentWithPureRenderMixin","React","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';var m=j,n=m.PropTypes,o=j.createClass({displayName:"MessengerBubble",mixins:[i],propTypes:{attachments:n.instanceOf(g.List),body:n.string,isP2PAttachment:n.bool,ranges:n.array,threadID:n.string},render:function(){return (j.createElement("div",{className:l(this.props.className,(("_hh7")+(' '+"_s1-")+(' '+"_52mr")+(this.props.isP2PAttachment?' '+"_4z55":'')))},j.createElement(h,{className:"_3oh-",body:this.props.body,ranges:this.props.ranges,threadID:this.props.threadID}),this.props.attachments));}});e.exports=o;},null);
__d("MessengerBubbleBlock.react",["React","cx"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';var i=g.createClass({displayName:"MessengerBubbleBlock",render:function(){return (g.createElement("div",{className:"_3if_ _52mr _3058"},this.props.children));}});e.exports=i;},null);
__d("ContextualLayerUpdateOnScroll",["Event"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();function h(i){"use strict";this._layer=i;}h.prototype.enable=function(){"use strict";this._subscriptions=[this._layer.subscribe('show',this._attachScrollListener.bind(this)),this._layer.subscribe('hide',this._removeScrollListener.bind(this))];};h.prototype.disable=function(){"use strict";while(this._subscriptions.length)this._subscriptions.pop().unsubscribe();};h.prototype._attachScrollListener=function(){"use strict";if(this._listener)return;var i=this._layer.getContextScrollParent();this._listener=g.listen(i,'scroll',this._layer.updatePosition.bind(this._layer));};h.prototype._removeScrollListener=function(){"use strict";this._listener&&this._listener.remove();this._listener=null;};Object.assign(h.prototype,{_subscriptions:[]});e.exports=h;},null);
__d("MessengerContextualActions.react",["ContextualLayerUpdateOnScroll","LayerHideOnBlur","Link.react","React","ReactAbstractContextualDialog","ReactLayer","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();'use strict';var n=j,o=n.PropTypes,p=l.createClass(k.createSpec({displayName:'MessengerContextualActionsDialog',theme:{wrapperClassName:"_hw2",arrowDimensions:{offset:12,length:12}}})),q=j.createClass({displayName:"MessengerContextualActions",propTypes:{onToggle:o.func},render:function(){var s=this.props,t=s.children,u=(function(v,w){var x={},y=Object.prototype.hasOwnProperty;if(v==null)throw new TypeError();for(var z in v)if(y.call(v,z)&&!y.call(w,z))x[z]=v[z];return x;})(s,{children:1});return (j.createElement(p,j.__spread({},u,{alignment:"center",behaviors:{ContextualLayerUpdateOnScroll:g,LayerHideOnBlur:h},onToggle:this.props.onToggle}),j.createElement("ul",{className:"_hw3"},t)));}}),r=j.createClass({displayName:"MessengerContextualActionsItem",propTypes:{onClick:o.func},render:function(){return (j.createElement("li",{className:"_hw4"},j.createElement(i,{className:"_hw5",onClick:this.props.onClick},this.props.children)));}});q.Item=r;e.exports=q;},null);
__d("MessengerDeleteMessageDialog.react",["MessengerConfig","MessengerDialog.react","MessengerDialogBody.react","MessengerDialogButton.react","MessengerDialogFooter.react","MessengerDialogHeader.react","ReactComponentWithPureRenderMixin","React","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();'use strict';var p=n,q=p.PropTypes,r=n.createClass({displayName:"MessengerDeleteMessageDialog",mixins:[m],propTypes:{isFromViewer:q.bool,onDelete:q.func,onToggle:q.func},render:function(){return (n.createElement(h,{onToggle:this.props.onToggle},n.createElement(l,null,this._renderDialogHeaderMsg()),n.createElement(i,null,this._renderDialogBodyMsg()),n.createElement(k,null,n.createElement(j,{action:"cancel",onClick:this._handleCancel,label:o._("Cancel"),type:"secondary"}),n.createElement(j,{label:this._renderDialogButtonMsg(),onClick:this._handleDelete,type:"primary",use:"danger"}))));},_renderDialogHeaderMsg:function(){if(g.GlobalDelete)if(this.props.isFromViewer){return o._("Delete Message?");}else return o._("Hide Message?");return o._("Delete Message");},_renderDialogBodyMsg:function(){if(g.GlobalDelete)if(this.props.isFromViewer){return o._("If you delete this message, no one in this conversation can see it anymore and it can't be undone.");}else return o._("If you hide your copy of this message, you can't get it back. The other person in the conversation may still be able to see it.");return o._("Are you sure you want to delete this message?");},_renderDialogButtonMsg:function(){if(!this.props.isFromViewer&&g.GlobalDelete)return o._("Hide");return o._("Delete");},_handleDelete:function(){this.props.onToggle&&this.props.onToggle(false);this.props.onDelete&&this.props.onDelete();},_handleCancel:function(){this.props.onCancel&&this.props.onCancel();}});e.exports=r;},null);
__d("MessengerMessageActionsWrapper.react",["MessengerConfig","DOMQuery","ImmutableObject","ReactLayeredComponentMixin","MercuryMessageActions","MercuryMessageInfo","MessengerActions","MessengerContextualActions.react","MessengerDeleteMessageDialog.react","Parent","React","csx","cx","fbt","setImmediate"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){b.__markCompiled&&b.__markCompiled();'use strict';var v=n.Item,w=q,x=w.PropTypes,y="_ui9",z="._ui9",aa=q.createClass({displayName:"MessengerMessageActionsWrapper",mixins:[j],propTypes:{isActive:x.bool,isDeletable:x.bool,isFromViewer:x.bool,message:x.instanceOf(i).isRequired,onDeselect:x.func.isRequired,onSelect:x.func.isRequired},_messageActions:(null),getDefaultProps:function(){return {isDeletable:true};},componentWillMount:function(){this._messageActions=k.get();},render:function(){return (q.createElement("div",q.__spread({onContextMenu:this._handleContextMenu},this.props),this.props.children));},renderLayers:function(){var ba=q.findDOMNode(this),ca=ba&&h.scry(ba,z)[0];if(!ca||!this.props.isDeletable)return {};return {contextualDialog:q.createElement(n,{context:ca,onToggle:this._handleActionsToggle,shown:this.props.isActive},this._renderRetry(),q.createElement(v,{onClick:this._handleDelete},this._renderActionItemMsg()))};},_renderActionItemMsg:function(){if(!this.props.isFromViewer&&g.GlobalDelete)return t._("Hide");return t._("Delete");},_renderRetry:function(){if(!l.hasError(this.props.message))return null;return (q.createElement(v,{onClick:this._handleRetry},t._("Try Again")));},_handleActionsToggle:function(ba){!ba&&this._handleDeselect();},_handleDeselect:function(){this.props.onDeselect(this.props.message.message_id);},_handleDelete:function(){var ba=this.props.message;m.showDialog(o,{onDelete:function(){this._messageActions&&this._messageActions["delete"](ba.thread_id,[ba.message_id]);}.bind(this),onToggle:this._handleDialogToggle,onCancel:this._handleDeselect,isFromViewer:this.props.isFromViewer});},_handleDialogToggle:function(ba){if(!ba)m.hideDialog();},_handleRetry:function(){this._handleDeselect();this._messageActions&&this._messageActions.resend(this.props.message);},_handleContextMenu:function(ba){if(!this._shouldAllowNativeContextMenu(ba))ba.preventDefault();u(function(){this.props.onSelect(this.props.message.message_id);}.bind(this));},_shouldAllowNativeContextMenu:function(ba){return (ba.target.nodeName.toLowerCase()==='a'||window.getSelection().toString()!==''||!p.byClass(ba.target,y));}});e.exports=aa;},null);
__d("MessengerMessageSeenHeads.react",["Image.react","immutable","ImmutableObject","MercuryMessageInfo","MessengerConfig","ReactComponentWithPureRenderMixin","React","cssVar","cx","getViewportDimensions","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){b.__markCompiled&&b.__markCompiled();'use strict';var r=m,s=r.PropTypes,t=k.MaxSeenHeadCount||8,u=m.createClass({displayName:"MessengerMessageSeenHeads",mixins:[l],propTypes:{isFromViewer:s.bool,message:s.instanceOf(i).isRequired,nextTimestamp:s.number.isRequired,participants:s.instanceOf(h.Map).isRequired,readReceipts:s.instanceOf(h.OrderedMap).isRequired},render:function(){var w=this.props,x=w.message,y=w.nextTimestamp,z=w.participants,aa=w.readReceipts;if(j.isSending(x)||aa.isEmpty())return null;var ba=h.Seq(aa).filter(function(ja,ka){return ja>=x.timestamp&&ja<y;});if(ba.isEmpty())return null;var ca=this.props.isFromViewer?t:v(),da=ba.count()>ca+1,ea=da?ba.slice(0,ca):ba,fa=ea.map(function(ja,ka){var la=z.get(ka);if(!la)return null;return (m.createElement(g,{className:"_jf2",key:ka,src:la.image_src,title:la.name}));}).toArray(),ga=fa.length;if(!ga)return null;var ha=da?ba.slice(ca).count():0;if(ha>0){var ia=ba.slice(ca).map(function(ja,ka){var la=z.get(ka);return la?la.name:null;}).filter(function(ja){return !!ja;}).join('\n');fa.unshift(m.createElement("span",{className:"_jf3",key:"overflow",title:ia},("+"+ha)));}return (m.createElement("span",{className:q(this.props.className,(("_jf4")+(ga+ha===1?' '+"_jf5":'')))},fa));}});function v(){var w=p().width;if(w<parseInt("920px".replace('px',''),10))return Math.min(t,1);if(w<parseInt("1211px".replace('px',''),10))return Math.min(t,3);return t;}e.exports=u;},null);
__d("messengerRTLClasses",["cx","isRTL"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';function i(j,k){var l=h(j||'');return k?((l?"_4pv0":'')):((!l?"direction_ltr":'')+(l?' '+"direction_rtl":'')+(!l?' '+"text_align_ltr":'')+(l?' '+"text_align_rtl":'')+(l?' '+"_4pv0":''));}e.exports=i;},null);
__d("MessengerMessage.react",["immutable","ImmutableObject","MercuryAttachment","MercuryErrorInfo","MercuryMessageInfo","MessengerAttachmentRenderer","MessengerAttachmentAttribution.react","MessengerBubble.react","MessengerBubbleBlock.react","MessengerConfig","MessengerMessageActionsWrapper.react","MessengerMessageSeenHeads.react","MercuryDisplayTimeFilterMessageRenderer","React","cx","fbt","joinClasses","messengerRTLClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){b.__markCompiled&&b.__markCompiled();'use strict';var y=t,z=y.PropTypes,aa=t.createClass({displayName:"MessengerMessage",propTypes:{isActive:z.bool,isFromViewer:z.bool,message:z.instanceOf(h).isRequired,nextTimestamp:z.number.isRequired,onDeselect:z.func.isRequired,onSelect:z.func.isRequired,participants:z.instanceOf(g.Map).isRequired,readReceipts:z.instanceOf(g.OrderedMap).isRequired,showDeliveryState:z.bool},shouldComponentUpdate:function(ba,ca){return (ba.isActive!==this.props.isActive||ba.isFromViewer!==this.props.isFromViewer||ba.message!==this.props.message||ba.nextTimestamp!==this.props.nextTimestamp||ba.showDeliveryState!==this.props.showDeliveryState||!g.is(ba.readReceipts,this.props.readReceipts)||!g.is(ba.participants,this.props.participants));},render:function(){return (t.createElement(q,{className:w((("_o46")+(' '+"_3erg")+(this.props.isActive?' '+"_-5k":'')+(this.props.isFromViewer?' '+"_3i_m":'')+(this.props.isFromViewer?' '+"_nd_":'')+(!this.props.isFromViewer?' '+"_29_7":'')),x(this.props.message.body)),isActive:this.props.isActive,isDeletable:!this._isP2PAttachment(),isFromViewer:this.props.isFromViewer,message:this.props.message,onDeselect:this.props.onDeselect,onSelect:this.props.onSelect},t.createElement("div",{className:"clearfix"},this._renderBubble(),this._renderAttachmentsOutsideBubble()),this._renderErrorState(),this._renderDeliveryState(),t.createElement(r,{className:"_4jzq",isFromViewer:this.props.isFromViewer,message:this.props.message,nextTimestamp:this.props.nextTimestamp,participants:this.props.participants,readReceipts:this.props.readReceipts})));},_renderAttachmentsOutsideBubble:function(){var ba=l.getAttachmentsOutsideBubble(this.props.message);if(!ba||!ba.length)return null;var ca=(t.createElement("div",{className:"_3058 _15gf"},ba));if(this.props.message.attachments.length===1&&i.hasAttribution(this.props.message.attachments[0])&&!i.isVoiceAttachment(this.props.message.attachments[0]))return (t.createElement(o,null,ca,t.createElement(m,{attachment:new h(this.props.message.attachments[0])})));return ca;},_isP2PAttachment:function(){return (l.isP2PAttachment(this.props.message));},_renderBubble:function(){var ba=this.props.message,ca=g.List(l.getAttachmentsInsideBubble(ba));if(ba.is_filtered_content)return (t.createElement("div",{className:"_3058 _wiu _52mr uiBoxYellow clearfix"},s.renderFilteredContent(ba)));if(ba.body||!ca.isEmpty())return (t.createElement(n,{attachments:ca,body:ba.body,className:"_3058 _ui9",isP2PAttachment:this._isP2PAttachment(),ranges:ba.ranges,threadID:ba.thread_id}));return null;},_renderDeliveryState:function(){if(!this.props.isFromViewer||!this.props.showDeliveryState||this.props.message.is_like_preview)return null;var ba=k.isSending(this.props.message),ca=j.hasErrorStatus(this.props.message);if(!ba&&!ca&&!p.DeliveryStateGK)return null;return (t.createElement("span",{className:(("_2her")+(ba?' '+"_4jzp":'')+(ba?' '+"_3qh2":'')+(!ba&&!ca?' '+"_3zzf":'')+(ca?' '+"_5ei9":'')),onClick:ca?this._handleSelect:null}));},_renderErrorState:function(){var ba=this.props,ca=ba.message;if(!k.hasError(ca))return null;return (t.createElement("span",{className:"_3058 _2ygi",onClick:this._handleSelect},v._("Message couldn't be sent.")));},_handleSelect:function(ba){ba.stopPropagation();this.props.onSelect(this.props.message.message_id);}});e.exports=aa;},null);
__d("MessengerPageAdminNoteList.react",["MessengerBubble.react","PagesMessengerCreatorInfo.react","ReactComponentWithPureRenderMixin","React","toIterator","classWithMixins","cx","mixin"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();'use strict';var o=j,p=o.PropTypes,q=l(j.Component,n(i));for(var r in q)if(q.hasOwnProperty(r))t[r]=q[r];var s=q===null?null:q.prototype;t.prototype=Object.create(s);t.prototype.constructor=t;t.__superConstructor__=q;function t(){if(q!==null)q.apply(this,arguments);}t.prototype.render=function(){var u=[],v=this.calculateGroups(this.props.notes);v.forEach(function(w,x){u.push(j.createElement("li",{className:"_4kd2",key:("group:"+x)},this.$MessengerPageAdminNoteList0(w)));}.bind(this));return (j.createElement("ul",{className:"_4kd3"},u));};t.prototype.$MessengerPageAdminNoteList0=function(u){var v=[];u.forEach(function(w,x){v.push(j.createElement("div",{className:"_4kd4",key:("note:"+x)},this.$MessengerPageAdminNoteList1(w)));}.bind(this));v.push(j.createElement(h,{key:("creator_info"),creator_info:u[0].creator_info}));return v;};t.prototype.$MessengerPageAdminNoteList1=function(u){return (j.createElement("div",{className:"_o46 _3i_m _nd_"},j.createElement("div",{className:"clearfix"},j.createElement(g,{body:u.body,className:"_3058 _4kd5"}))));};t.prototype.calculateGroups=function(u){var v=[],w=null,x=null,y=k(u),z;while(!(z=y.next()).done){var aa=(x&&x.value.creator_info.creatorID===z.value.creator_info.creatorID);if(!aa){w=[];v.push(w);}if(w)w.push(z.value);x=z;}return v;};t.propTypes={notes:p.arrayOf(p.shape({body:p.string.isRequired,creator_info:p.shape({creatorID:p.string.isRequired,creatorType:p.string.isRequired,labelType:p.string.isRequired,pageID:p.string.isRequired,profileURI:p.string}).isRequired,timestamp:p.number.isRequired})).isRequired};e.exports=t;},null);
__d("MessengerMessageGroup.react",["immutable","ImmutableObject","Image.react","MercuryParticipants","MessengerDateBreak.react","MessengerMessage.react","MessengerPageAdminNoteList.react","MessengerProfileImageWrapper.react","MessengerStickerUtils","PagesMessengerCreatorInfo.react","React","StoreAndPropBasedStateMixin","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){b.__markCompiled&&b.__markCompiled();'use strict';var t=q,u=t.PropTypes,v=32,w=new h({image_src:'',is_messenger_user:true}),x=q.createClass({displayName:"MessengerMessageGroup",mixins:[r(j)],propTypes:{activeMessageID:u.string,hasDateBreak:u.bool,isCanonical:u.bool,isFromViewer:u.bool,isPageMessage:u.bool,lastReadTimestamp:u.number.isRequired,messages:u.instanceOf(g.List).isRequired,nextTimestamp:u.number.isRequired,onMessageDeselect:u.func.isRequired,onMessageSelect:u.func.isRequired,readReceipts:u.instanceOf(g.OrderedMap).isRequired},statics:{calculateState:function(aa){return {participants:y(aa)};}},shouldComponentUpdate:function(aa,ba){return (this.props.activeMessageID!==aa.activeMessageID||this.props.isFromViewer!==aa.isFromViewer||!g.is(this.props.messages,aa.messages)||!g.is(this.props.readReceipts,aa.readReceipts)||!g.is(this.state.participants,ba.participants));},render:function(){return (q.createElement("div",{className:(("_1t_p")+(' '+"clearfix")+(o.isStickerMessageGroup(this.props.messages)?' '+"_5tx1":''))},this._renderProfileColumn(),this._renderName(),q.createElement("div",{className:"_1t_s"},this._renderMessages())));},_renderProfileColumn:function(){if(this.props.isFromViewer)return null;var aa=this.props.messages.first().author,ba=this.state.participants.get(aa)||w;return (q.createElement("div",{className:"_1t_q"},q.createElement(n,{className:"_1t_r",isMessengerUser:ba.is_messenger_user,size:v,showBadge:true},q.createElement(i,{src:ba.image_src,height:v,width:v}))));},_renderMessages:function(){var aa=this.props.messages.size,ba=[];this.props.messages.forEach(function(ca,da,ea){var fa=ca.message_id===this.props.activeMessageID;if(fa&&!(da===0&&this.props.hasDateBreak))ba.push(q.createElement(k,{className:"_5r8z",date:new Date(ca.timestamp),key:'db:'+ca.message_id}));ba.push(q.createElement(l,{isActive:fa,isFromViewer:this.props.isFromViewer,key:ca.message_id,message:ca,participants:this.state.participants,nextTimestamp:this._getNextTimestamp(ea,aa,da),onDeselect:this.props.onMessageDeselect,onSelect:this.props.onMessageSelect,readReceipts:this.props.readReceipts,showDeliveryState:ca.timestamp>this.props.lastReadTimestamp}));if(z(this.props.isPageMessage,ea,da,ca))ba.push(q.createElement(p,{key:("creator_info:"+da),creator_info:ca.creator_info}));if(this.props.isPageMessage&&ca.page_admin_notes)ba.push(q.createElement(m,{key:("notes:"+ca.message_id),notes:ca.page_admin_notes}));}.bind(this));return ba;},_renderName:function(){var aa=this.state.participants.get(this.props.messages.first().author);if(!aa)return null;return (q.createElement("div",{className:(("_ih3")+(this.props.isCanonical||this.props.isFromViewer?' '+"_-ne":''))},q.createElement("span",{className:"_3oh-"},aa.short_name)));},_getNextTimestamp:function(aa,ba,ca){return (ca<ba-1)?aa.get(ca+1).timestamp:this.props.nextTimestamp;}});function y(aa){var ba=aa.messages.first().author;return g.Map().withMutations(function(ca){aa.readReceipts.forEach(function(da,ea){ca.set(ea,j.getOrFetch(ea));});ca.set(ba,j.getOrFetch(ba));});}function z(aa,ba,ca,da){if(!aa||!da.creator_info)return false;if(ca===ba.size-1)return true;var ea=ba.get(ca+1).creator_info;if(!ea)return true;return da.creator_info.creatorID!==ea.creatorID;}e.exports=x;},null);
__d("MessengerTypingIndicator.react",["Image.react","immutable","MercuryParticipants","MercuryTypingAnimation.react","MessengerProfileImageWrapper.react","MessengerBubble.react","ReactComponentWithPureRenderMixin","React","StoreAndPropBasedStateMixin","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){b.__markCompiled&&b.__markCompiled();var q=n,r=q.PropTypes,s=32,t=n.createClass({displayName:"MessengerTypingIndicator",mixins:[m,o(i)],propTypes:{userID:r.string,showName:r.bool},statics:{calculateState:function(u){return {author:i.getOrFetch(u.userID)};}},render:function(){if(!this.state.author)return null;var u=this.state.author;return (n.createElement("div",{className:"_1t_p _1hbw"},n.createElement("div",{className:"_1t_q"},n.createElement(k,{className:"_1t_r",isMessengerUser:u.is_messenger_user,size:s,showBadge:true},n.createElement(g,{src:u.image_src,height:s,width:s}))),n.createElement("div",{className:"_1t_s"},n.createElement("div",{className:"_o46 _3erg _29_7"},n.createElement("div",{className:"clearfix"},n.createElement(l,{attachments:h.List([n.createElement(j,{key:"animation"})]),body:"",className:"_3058",ref:"bubble"}))))));},getBubble:function(){return this.refs.bubble;}});e.exports=t;},null);
__d("MessengerConversation.react",["ChatTypingIndicators.react","DOMDimensions","Event","immutable","ImmutableObject","MercuryIDs","MercuryShareAttachmentRenderLocations","MessageList.react","MessengerConfig","MessengerContextBannerContainer.react","MessengerDateBreak.react","MessengerFlexArea.react","MessengerFlexScrollableArea.react","MessengerLogMessage.react","MessengerMessageGroup.react","MessengerSpinner.react","MessengerTypingIndicator.react","ReactComponentWithPureRenderMixin","React","Set","SubscriptionsHandler","UserActivity","cx","throttle","MercuryRoger"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da){b.__markCompiled&&b.__markCompiled();'use strict';var ea=b('MercuryRoger').get(),fa=y,ga=fa.PropTypes,ha=60000,ia=20,ja=y.createClass({displayName:"MessengerConversation",mixins:[x],propTypes:{contact:ga.instanceOf(k),fetchMessages:ga.func.isRequired,isCanonical:ga.bool,isLoaded:ga.bool,isLoading:ga.bool,messages:ga.instanceOf(j.List).isRequired,participants:ga.instanceOf(j.Map),thread:ga.object,threadID:ga.string,viewer:ga.string.isRequired},getInitialState:function(){return {readReceipts:ka(this.props),width:0};},componentDidMount:function(){this._subscriptions=new aa();this._subscriptions.addSubscriptions(i.listen(window,'resize',da(this.handleResize,50)),ea.subscribe('change',function(ma,na){na[this.props.threadID]&&this.setState({readReceipts:ka(this.props)});}.bind(this)));this.handleResize();this._tryMarkAsRead();},componentWillReceiveProps:function(ma){if(ma.threadID!==this.props.threadID||ma.messages!==this.props.messages)this.setState({readReceipts:ka(ma)});},componentWillUnmount:function(){this._activeToken&&this._activeToken.unsubscribe();this._subscriptions&&this._subscriptions.release();this._removeFocusToken();},componentWillUpdate:function(){var ma=this._getScrollableArea();if(ma){this._wasScrolledToBottomBeforeUpdate=this.refs.scrollable.isScrolledToBottom();this._originalScrollHeight=ma.getScrollHeight();this._originalScrollTop=ma.getScrollTop();}else this._wasScrolledToBottomBeforeUpdate=true;},componentDidUpdate:function(ma){if(!this.refs.scrollable)return;if(this._wasScrolledToBottomBeforeUpdate||this.props.threadID!==ma.threadID||la(ma,this.props)){this.scrollToBottom();this._removeFocusToken();}else{var na=this._getScrollableArea().getScrollHeight()-this._originalScrollHeight+this._originalScrollTop;this.refs.scrollable.scrollToPosition(na);}if(this.props.messages!==ma.messages)this._tryMarkAsRead();},render:function(){if(this.props.isLoading&&this.props.messages.isEmpty())return this._renderFullPageLoadingIndicator();var ma;return (y.createElement(s,{className:this.props.className,onScroll:this._handleScroll,ref:"scrollable",shouldStickToBottom:true},y.createElement("div",{className:"__i_"},this._renderContextBanner(),this._renderLoadingIndicator(),y.createElement(n,{DateBreak:q,isCanonical:this.props.isCanonical,LogMessage:t,MessageGroup:u,messages:this.props.messages,readReceipts:this.state.readReceipts,location:m.MESSENGER,viewer:this.props.viewer}),y.createElement(g,{indicatorClass:w,indicatorsWillShow:function(){ma=this._wasScrolledToBottomBeforeUpdate;}.bind(this),indicatorsDidShow:function(){ma&&this.scrollToBottom();}.bind(this),rootClassName:"clearfix _17pz",threadID:this.props.threadID,viewer:this.props.viewer}))));},_renderContextBanner:function(){if(!this.props.isLoaded||!o.ShowContextBanner)return null;return (y.createElement(p,{contact:this.props.contact,participants:this.props.participants,location:m.MESSENGER,thread:this.props.thread,viewer:this.props.viewer}));},_renderLoadingIndicator:function(){if(this.props.isLoaded)return null;return (y.createElement("div",{className:"_2k8v"},this.props.isLoading?y.createElement(v,null):null));},_renderFullPageLoadingIndicator:function(){return (y.createElement(r,{className:"_4xu0"},y.createElement(v,{className:"_4xu1",size:v.Sizes.LARGE})));},scrollToBottom:function(){return this.refs.scrollable&&this.refs.scrollable.scrollToBottom();},_handleScroll:function(){if(!this.refs.scrollable)return;if(this._getScrollableArea().getScrollTop()<ia)this.props.fetchMessages();this._tryMarkAsRead();this._wasScrolledToBottomBeforeUpdate=this.refs.scrollable.isScrolledToBottom();},_tryMarkAsRead:function(){if(!this.refs.scrollable||!this.refs.scrollable.isScrolledToBottom()||this.props.messages.size===0)return;if(ba.isOnTab()){if(ba.isActive(ha)){this.props.onRead(this.props.threadID);}else if(!this._activeToken)this._activeToken=ba.subscribeOnce(function(){this._activeToken=null;this.props.onRead(this.props.threadID);}.bind(this));}else if(!this._focusToken){var ma=this.props.threadID;this._focusToken=i.listen(window,'focus',function(){this._removeFocusToken();if(ma==this.props.threadID&&this._getScrollableArea().isScrolledToBottom())this.props.onRead(this.props.threadID);}.bind(this));}},handleResize:function(){if(this.refs.scrollable){this.refs.scrollable.handleResize();var ma=h.getElementDimensions(y.findDOMNode(this.refs.scrollable)).width;if(ma!==this.state.width)this.setState({width:ma});}if(this._wasScrolledToBottomBeforeUpdate)this.scrollToBottom();},_getScrollableArea:function(){return this.refs.scrollable&&this.refs.scrollable.getArea();},_removeFocusToken:function(){this._focusToken&&this._focusToken.remove();this._focusToken=null;},getChildContext:function(){return {width:this.state.width};},childContextTypes:{width:ga.number}});function ka(ma){var na=ea.getSeenTimestamps(ma.threadID),oa=new z(na.keys());return na.withMutations(function(pa){j.Seq(ma.messages).reverse().forEach(function(qa){if(oa.size===0)return false;if(!oa.has(qa.author))return;pa.update(qa.author,function(ra){return Math.max(ra,qa.timestamp);});oa["delete"](qa.author);});});}function la(ma,na){var oa=l.getParticipantIDFromUserID(na.viewer);return (na.threadID===ma.threadID&&na.messages!==ma.messages&&!na.messages.isEmpty()&&na.messages.last()!==ma.messages.last()&&na.messages.last().author===oa);}e.exports=ja;},null);
__d("MessengerConversationContainer.react",["immutable","ImmutableObject","MercuryIDs","MercuryMessageStore","MercuryThreadActions","MessengerConfig","MessengerConversation.react","MessengerHotLikePreviewEvents","ReactComponentWithPureRenderMixin","React","SubscriptionsHandler"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){b.__markCompiled&&b.__markCompiled();'use strict';var r=p,s=r.PropTypes,t=p.createClass({displayName:"MessengerConversationContainer",mixins:[o],propTypes:{contact:s.instanceOf(h),onRead:s.func,participants:s.instanceOf(g.Map),thread:s.object,threadID:s.string,viewer:s.string.isRequired},getInitialState:function(){return {isLoaded:false,isLoading:true,messages:g.List()};},componentWillUnmount:function(){this._subscriptions&&this._subscriptions.release();},componentDidMount:function(){this._threadActions=k.getForFBID(this.props.viewer);this._updateStore(this.props.threadID);},componentWillReceiveProps:function(u){if(this.props.threadID!==u.threadID){this.setState({isLoading:true,messages:g.List()});this._updateStore(u.threadID);}},render:function(){return (p.createElement(m,{className:this.props.className,contact:this.props.contact,fetchMessages:this._fetchMoreMessages,isCanonical:i.isCanonical(this.props.threadID),isLoading:this.state.isLoading,isLoaded:this.state.isLoaded,messages:this.state.messages,onRead:this._handleRead,participants:this.props.participants,ref:"conversation",thread:this.props.thread,threadID:this.props.threadID,viewer:this.props.viewer}));},handleResize:function(){this.refs.conversation.handleResize();},_handleRead:function(u){this._threadActions.markRead(u);},_fetchMoreMessages:function(){if(this.state.isLoading||this.state.isLoaded)return;this.setState({isLoading:true});if(!this._store.fetchMoreMessages())this.setState({isLoading:false,isLoaded:true});},_updateStore:function(u){if(!u)return;this.setState({isLoaded:false});this._store&&this._store.destroy();this._store=new j(u,l.MessageLoadCount);this._subscriptions&&this._subscriptions.release();this._subscriptions=new q();this._subscriptions.addSubscriptions(this._store.subscribe(function(v){this.setState({messages:this._normalizeMessages(g.List(v.messages)),isLoading:false});}.bind(this)),n.addListener(n.START,function(v){this._keepLikePreview=true;this._likePreview=v;this.setState({messages:this._normalizeMessages(this.state.messages)});clearInterval(this._scrollToBottomInterval);this._scrollToBottomInterval=setInterval(this.refs.conversation.scrollToBottom,50);}.bind(this)),n.addListener(n.FINISH_ANIMATION,function(v){clearInterval(this._scrollToBottomInterval);}.bind(this)),n.addListener(n.STOP,function(){this._keepLikePreview=false;this._likePreview=null;}.bind(this)),n.addListener(n.REMOVE,function(){clearInterval(this._scrollToBottomInterval);this._keepLikePreview=false;this.setState({messages:this._normalizeMessages(this.state.messages)});}.bind(this)));},_normalizeMessages:function(u){if(this._keepLikePreview){u=u.set(u.size,this._likePreview);}else{u=u.filterNot(function(v){return v.is_like_preview;});this._likePreview=null;}return u;}});e.exports=t;},null);
__d("MessengerSearchSource",["ChatSearchSource","MercuryIDs","MercuryParticipants","MercuryParticipantTypes","MercurySingletonMixin","MessengerConfig","OrderedFriendsList","SearchableEntry","emptyFunction"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();'use strict';var p=50;for(var q in g)if(g.hasOwnProperty(q))s[q]=g[q];var r=g===null?null:g.prototype;s.prototype=Object.create(r);s.prototype.constructor=s;s.__superConstructor__=g;function s(t){g.call(this,{queryRequests:[{uri:'/ajax/mercury/composer_query.php'}]});m.getSearchableEntries(p,function(v){this.$MessengerSearchSource0=v;r.addLocalEntries.call(this,v);}.bind(this));var u=h.getParticipantIDFromUserID(t);i.get(u,function(v){r.addLocalEntries.call(this,[new n({uniqueID:v.fbid.toString(),title:v.name,type:j.FRIEND,photo:v.big_image_src||v.image_src,uri:v.href,auxiliaryData:{isMessengerUser:v.is_messenger_user}})]);}.bind(this));}s.prototype.bootstrapImpl=function(t){r.bootstrapImpl.call(this,o);t();};s.prototype.searchImpl=function(t,u,v){if(t===''&&v.showDefaultEntries){u(this.$MessengerSearchSource0,t);var w=v&&v.onQueryFinished;w&&w(t);return;}v.threadLimit=l.MaxThreadResults;r.searchImpl.call(this,t,u,v);};Object.assign(s,k);e.exports=s;},null);
__d("MessengerTypeaheadUtils",["immutable","MercuryTypeaheadConstants","React","fbt"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';var k={sortEntries:function(l){var m=[],n=[],o=[],p=[],q=[];l.forEach(function(r){switch(r.getType()){case h.FRIEND_TYPE:m.push(r);break;case h.FB4C_TYPE:n.push(r);break;case h.THREAD_TYPE:o.push(r);break;case h.PAGE_TYPE:q.push(r);break;case h.NON_FRIEND_TYPE:p.push(r);break;}});return m.concat(n,o,q,p);},sortEntriesWithoutPages:function(l){var m=[],n=[],o=[],p=[];l.forEach(function(q){switch(q.getType()){case h.FRIEND_TYPE:m.push(q);break;case h.FB4C_TYPE:n.push(q);break;case h.THREAD_TYPE:o.push(q);break;case h.NON_FRIEND_TYPE:p.push(q);break;}});return m.concat(n,o,p);},sortEntriesWithoutGroupsOrViewer:function(l,m){var n=[],o=[],p=[];l.forEach(function(q){if(q.getUniqueID()===m)return;switch(q.getType()){case h.FRIEND_TYPE:n.push(q);break;case h.FB4C_TYPE:o.push(q);break;case h.NON_FRIEND_TYPE:p.push(q);break;}});return n.concat(o,p);},buildListSections:function(l){if(!l.length)return g.OrderedMap();var m=[],n=[],o=[],p=[],q=[],r=[];l.forEach(function(s){switch(s.getType()){case h.FRIEND_TYPE:n.push(s);break;case h.FB4C_TYPE:o.push(s);break;case h.THREAD_TYPE:p.push(s);break;case h.PAGE_TYPE:r.push(s);break;case h.NON_FRIEND_TYPE:q.push(s);break;}});if(n.length)m.push(['',n]);if(o.length)m.push([j._("Co-workers"),o]);if(p.length)m.push([j._("Group Conversations"),p]);if(r.length)m.push([j._("Businesses"),r]);if(q.length)m.push([j._("More People"),q]);return g.OrderedMap(m);},scrollEntryIntoView:function(l,m){var n=i.findDOMNode(m),o=m.getScrollTop(),p=l.offsetTop-o,q=n.offsetHeight-l.offsetHeight;if(p>=q){m.scrollToPosition(o+p-q);}else if(p<0)m.scrollToPosition(o+p);}};e.exports=k;},null);
__d("MessengerThreadImage.react",["immutable","ImmutableObject","MercuryIDs","MercuryThreadImage.react","MessengerProfileImageWrapper.react","ReactComponentWithPureRenderMixin","React"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();'use strict';var n=m,o=n.PropTypes,p=m.createClass({displayName:"MessengerThreadImage",mixins:[l],propTypes:{participants:o.instanceOf(g.Map).isRequired,showBadge:o.bool,size:o.number,thread:o.instanceOf(h).isRequired,viewer:o.string.isRequired},getDefaultProps:function(){return {showBadge:true};},render:function(){return (m.createElement(k,{className:this.props.className,isMessengerUser:this._getIsMessengerUser(),size:this.props.size,showBadge:this.props.showBadge&&i.isCanonical(this.props.thread.thread_id)},m.createElement(j,{size:this.props.size,thread:this.props.thread,viewer:this.props.viewer,useBackground:true})));},_getIsMessengerUser:function(){if(!i.isCanonical(this.props.thread.thread_id)||this.props.participants.size===0)return null;var q=this.props.thread.canonical_fbid,r=i.getParticipantIDFromUserID(q),s=this.props.participants.get(r);return s&&s.is_messenger_user;}});e.exports=p;},null);
__d("MessengerContactListRow.react",["Image.react","ImageBlock.react","ImmutableObject","Link.react","MercuryTypeaheadConstants","MessengerContactActions","MessengerContactImage.react","MessengerThreadImage.react","ReactComponentWithPureRenderMixin","React","cx","fbt","ix"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){b.__markCompiled&&b.__markCompiled();'use strict';var t=p,u=t.PropTypes,v=s('/images/mercury/clients/messenger/core/Checkmark.png'),w=32,x=p.createClass({displayName:"MessengerContactListRow",mixins:[o],propTypes:{actionsClass:u.func,contact:u.instanceOf(i).isRequired,isHighlighted:u.bool,isOriginal:u.bool,isSelected:u.bool,onMouseEnter:u.func,onScrollIntoView:u.func,onAction:u.func,presenceStatus:u.string,viewer:u.string.isRequired},getInitialState:function(){return {isActionsOpen:false};},componentDidMount:function(){if(this.props.isHighlighted&&this.props.onScrollIntoView){var y=p.findDOMNode(this);this.props.onScrollIntoView&&this.props.onScrollIntoView(y);this.props.onRenderHighlight&&this.props.onRenderHighlight(y);}},componentDidUpdate:function(y){if(this.props.isHighlighted&&!y.isHighlighted){var z=p.findDOMNode(this);this.props.onScrollIntoView&&this.props.onScrollIntoView(z);this.props.onRenderHighlight&&this.props.onRenderHighlight(z);}},render:function(){return (p.createElement("li",{"aria-selected":this.props.isHighlighted,className:(("_5l37")+(this.props.isHighlighted?' '+"_1k1p":'')+(this.state.isActionsOpen?' '+"_rwn":'')),role:"option"},p.createElement(j,{className:"_5f0v",onClick:this._handleClick,onMouseDown:this._handleMouseDown,onMouseEnter:this.props.onMouseEnter,tabIndex:this.props.actionsClass?0:-1},p.createElement(h,{contentClassName:"_5l38",spacing:"medium"},this._renderContactImage(),this._renderContactText(),this._renderActions()))));},_handleMouseDown:function(y){if(this.props.actionsClass)return;y.stopPropagation();y.preventDefault();},_handleClick:function(y){y.stopPropagation();this._handleContactAction(l.SELECT,y);},_renderContactImage:function(){if(this.props.contact.photo){return (p.createElement(m,{className:"_5l39 _5rmm",isMessengerUser:this.props.contact.isMessengerUser,size:w,src:this.props.contact.photo}));}else if(this.props.contact.type===k.THREAD_TYPE)return (p.createElement(n,{className:"_5l39",participants:this.props.contact.participants,size:w,thread:this.props.contact.thread,viewer:this.props.viewer}));},_renderContactText:function(){if(this.props.contact.subtitle){return (p.createElement("div",null,p.createElement("div",{className:"_3q34"},this.props.contact.title),p.createElement("div",{className:"_3q35"},this.props.contact.subtitle)));}else return (p.createElement("div",{className:"_364g"},this.props.contact.title));},_renderActions:function(){if(this.props.isOriginal)return (p.createElement("span",{className:"_5rh4"},r._("Added")));if(this.props.isSelected)return (p.createElement(g,{className:"_1kqm",src:v}));if(!!this.props.presenceStatus)return (p.createElement("div",null,p.createElement("div",{className:"_jg2"}),p.createElement("div",{className:"_jg3"},this.props.presenceStatus)));if(this.props.actionsClass){var y=this.props.actionsClass;return (p.createElement(y,{className:"_rwo",contact:this.props.contact,isOpen:this.state.isActionsOpen,onAction:this._handleContactAction,onToggle:this._handleActionsToggle,viewer:this.props.viewer}));}return null;},_handleContactAction:function(y,event){this.props.onAction&&this.props.onAction(y,event);},_handleActionsToggle:function(y){this.setState({isActionsOpen:y});}});e.exports=x;},null);
__d("MessengerContactListRowContainer.react",["immutable","MercuryIDs","MercuryParticipantTypes","MessengerContactActions","MessengerContactListRow.react","PresenceStatus","ReactComponentWithPureRenderMixin","React"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();'use strict';var o=n,p=o.PropTypes,q=n.createClass({displayName:"MessengerContactListRowContainer",mixins:[m],propTypes:{actionsClass:p.func,contactAdapter:p.func.isRequired,hasHoverState:p.bool,isHighlighted:p.bool,onAction:p.func,onHighlight:p.func,onScrollIntoView:p.func,onSelect:p.func.isRequired,rawContact:p.object.isRequired,originalEntryIDs:p.instanceOf(g.Set),selectedEntryIDs:p.instanceOf(g.Set),showPresence:p.bool,viewer:p.string.isRequired},getInitialState:function(){return {contact:this.props.contactAdapter(this.props.rawContact)};},componentWillReceiveProps:function(r){if(r.rawContact!==this.props.rawContact)this.setState({contact:r.contactAdapter(r.rawContact)});},render:function(){return (n.createElement(k,{actionsClass:this.props.actionsClass,contact:this.state.contact,isHighlighted:this.props.isHighlighted,isOriginal:this.props.originalEntryIDs&&this.props.originalEntryIDs.contains(this.state.contact.uid),isSelected:this.props.selectedEntryIDs&&this.props.selectedEntryIDs.contains(this.state.contact.uid),onAction:this._handleAction,onRenderHighlight:this.props.onRenderHighlight,onScrollIntoView:this.props.onScrollIntoView,onMouseEnter:this._handleMouseEnter,onSelect:this._handleSelect,presenceStatus:this._getPresenceStatus(),viewer:this.props.viewer}));},_handleMouseEnter:function(){if(!this.props.hasHoverState)return;this.props.onHighlight&&this.props.onHighlight(this.props.rawContact);},_handleAction:function(r,event){switch(r){case j.SELECT:this.props.onSelect(this.props.rawContact,event);break;default:this.props.onAction&&this.props.onAction(r,this.props.rawContact);break;}},_getPresenceStatus:function(){if(!this.props.showPresence||this.state.contact.type!==i.FRIEND)return null;var r=h.getUserIDFromParticipantID(this.state.contact.uid);return l.getDetailedActivePresence(r);}});e.exports=q;},null);
__d("MessengerContactList.react",["MessengerContactListRowContainer.react","ImageBlock.react","immutable","MessengerSpinner.react","ReactComponentWithPureRenderMixin","React","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();'use strict';var o=l,p=o.PropTypes,q=l.createClass({displayName:"MessengerContactList",mixins:[k],propTypes:{actionsClass:p.func,ariaOwneeID:p.string,contactAdapter:p.func.isRequired,hasHoverState:p.bool,highlightedEntry:p.object,isLoading:p.bool,listSections:p.instanceOf(i.OrderedMap).isRequired,onHighlight:p.func,onRenderHighlight:p.func,onScrollIntoView:p.func,onSelect:p.func.isRequired,onAction:p.func,originalEntryIDs:p.instanceOf(i.Set),selectedEntryIDs:p.instanceOf(i.Set),showPresence:p.bool,viewer:p.string.isRequired},render:function(){return (l.createElement("div",{className:this.props.className},this.props.listSections.map(this._renderListSection).toArray(),this._renderSpinner(),this._renderEmptyResult()));},_renderListSection:function(r,s){return (l.createElement("div",{key:s},l.createElement("ul",{id:this.props.ariaOwneeID,role:"listbox"},this._renderHeader(s),r.map(function(t){return l.createElement(g,{actionsClass:this.props.actionsClass,contactAdapter:this.props.contactAdapter,hasHoverState:this.props.hasHoverState,isHighlighted:this.props.highlightedEntry===t,key:t.id||t.getUniqueID(),onHighlight:this.props.onHighlight,onAction:this.props.onAction,onRenderHighlight:this.props.onRenderHighlight,onSelect:this.props.onSelect,onScrollIntoView:this.props.onScrollIntoView,rawContact:t,originalEntryIDs:this.props.originalEntryIDs,selectedEntryIDs:this.props.selectedEntryIDs,showPresence:this.props.showPresence,viewer:this.props.viewer});}.bind(this)))));},_renderHeader:function(r){if(!r)return null;return (l.createElement("div",{className:"_225b"},r));},_renderSpinner:function(){if(!this.props.isLoading)return null;return (l.createElement(h,{className:"_225c",spacing:"medium"},l.createElement(j,{className:"_2i59",color:"grey"}),l.createElement("div",{className:"_4g0h"},n._("Searching..."))));},_renderEmptyResult:function(){if(this.props.isLoading||this.props.listSections.size>0)return null;return (l.createElement("div",{className:"_3xcx"},n._("No results found")));}});e.exports=q;},null);
__d("MessengerTypeaheadView.react",["immutable","MessengerContactAdapters","MessengerContactList.react","MessengerTypeaheadUtils","ReactComponentWithPureRenderMixin","React","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();'use strict';var o=l,p=o.PropTypes,q=l.createClass({displayName:"MessengerTypeaheadView",mixins:[k],propTypes:{ariaOwneeID:p.string,entries:p.array.isRequired,hasHoverState:p.bool,highlightedEntry:p.object,isLoading:p.bool,onHighlight:p.func,onRenderHighlight:p.func,onScrollIntoView:p.func,onSelect:p.func,originalEntryIDs:p.instanceOf(g.Set),selectedEntryIDs:p.instanceOf(g.Set),viewer:p.string.isRequired},render:function(){return (l.createElement(i,{ariaOwneeID:this.props.ariaOwneeID,className:n(this.props.className,"_5t4c"),contactAdapter:h.fromSearchableEntry,hasHoverState:this.props.hasHoverState,highlightedEntry:this.props.highlightedEntry,isLoading:this.props.isLoading,listSections:j.buildListSections(this.props.entries),onHighlight:this.props.onHighlight,onRenderHighlight:this.props.onRenderHighlight,onScrollIntoView:this.props.onScrollIntoView,onSelect:this.props.onSelect,originalEntryIDs:this.props.originalEntryIDs,selectedEntryIDs:this.props.selectedEntryIDs,showPresence:false,viewer:this.props.viewer}));}});e.exports=q;},null);
__d("MessengerScrollableTypeaheadView.react",["MessengerScrollableArea.react","MessengerTypeaheadUtils","MessengerTypeaheadView.react","ReactComponentWithPureRenderMixin","React"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l=k.createClass({displayName:"MessengerScrollableTypeaheadView",mixins:[j],render:function(){var m=this.props,n=m.className,o=m.width,p=(function(q,r){var s={},t=Object.prototype.hasOwnProperty;if(q==null)throw new TypeError();for(var u in q)if(t.call(q,u)&&!t.call(r,u))s[u]=q[u];return s;})(m,{className:1,width:1});return (k.createElement(g,{className:n,ref:"scrollable",width:o},k.createElement(i,k.__spread({},p,{onScrollIntoView:this._handleScrollIntoView}))));},_handleScrollIntoView:function(m){h.scrollEntryIntoView(m,this.refs.scrollable);}});e.exports=l;},null);
__d("MessengerTokenizer.react",["AbstractTokenizer.react","immutable","Keys","React","SearchableEntry","MessengerScrollableTypeaheadView.react","MessengerTypeaheadUtils","ReactComponentWithPureRenderMixin","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){b.__markCompiled&&b.__markCompiled();'use strict';var q=j,r=q.PropTypes,s=30,t=100,u=j.createClass({displayName:"MessengerTokenizer",mixins:[n],propTypes:{className:r.string,context:r.object,entries:r.instanceOf(h.List).isRequired,excludeGroups:r.bool,extraRendererProps:r.object,hasHoverState:r.bool,hideViewWithEntries:r.bool,onAddEntryAttempt:r.func.isRequired,onEntriesFound:r.func,onRemoveEntryAttempt:r.func.isRequired,onReorderEntryAttempt:r.func,originalEntryIDs:r.instanceOf(h.Set),placeholder:r.string,searchSource:r.object.isRequired,tabIndex:r.number,useLayer:r.bool,viewer:r.string.isRequired},getDefaultProps:function(){return {excludeGroups:false,hideViewWithEntries:true};},getInitialState:function(){return {isLoading:false,isLoaded:false,queryString:''};},render:function(){return (j.createElement("div",{className:p(this.props.className,"_14-7")},j.createElement(g,{autoHighlight:this.props.hasHoverState,context:this.props.context,entries:this.props.entries.toArray(),excludeTokenEntries:!!this.state.queryString,hideViewWithEntries:this.props.hideViewWithEntries,onAddEntryAttempt:this._handleAddEntryAttempt,onEntriesFound:this.props.onEntriesFound,onQueryStringChange:this._handleQueryStringChange,onRemoveEntryAttempt:this.props.onRemoveEntryAttempt,onReorderEntryAttempt:this.props.onReorderEntryAttempt,placeholder:this.props.placeholder,presenter:{ViewRenderer:l,TokenRenderer:v,alwaysVisibleOnFocus:(this.state.isLoading||this.state.isLoaded)&&!!this.state.queryString,useLayer:this.props.useLayer,extraRendererProps:Object.assign({hasHoverState:this.props.hasHoverState,isLoading:this.state.isLoading,originalEntryIDs:this.props.originalEntryIDs,selectedEntryIDs:h.Seq(this.props.entries).map(function(w){return w.getUniqueID();}).toSet(),viewer:this.props.viewer},this.props.extraRendererProps),maxEntries:s,sortEntries:this._sortEntries},queryString:this.state.queryString,ref:"tokenizer",searchSource:this.props.searchSource,searchSourceOptions:{onQueryFinished:this._handleQueryFinished,onQueryStarted:this._handleQueryStarted,showDefaultEntries:this.props.showDefaultEntries},showEntriesOnFocus:true,tabIndex:this.props.tabIndex&&this.props.tabIndex.toString()})));},_handleAddEntryAttempt:function(w){this.setState({isLoaded:false,queryString:''});var x=w.getUniqueID();if(this.props.entries.some(function(y){return y.getUniqueID()===x;})){this.props.onRemoveEntryAttempt(w);return;}if(this.props.originalEntryIDs&&this.props.originalEntryIDs.contains(x))return;this.props.onAddEntryAttempt(w);},_sortEntries:function(w){if(this.props.entries.size||this.props.excludeGroups)return m.sortEntriesWithoutGroupsOrViewer(w,this.props.viewer);return m.sortEntries(w);},focusInput:function(){this.refs.tokenizer&&this.refs.tokenizer.focusInput();},_handleQueryStarted:function(w){if(w===this.state.queryString)this.setState({isLoading:true});},_handleQueryFinished:function(w){if(w===this.state.queryString)this.setState({isLoaded:true,isLoading:false});},_handleQueryStringChange:function(event){this.setState({isLoaded:false,queryString:event.target.value});}}),v=j.createClass({displayName:"MessengerTokenizerToken",propTypes:{className:r.string,entry:r.instanceOf(k),index:r.number,label:r.string.isRequired,onRemove:r.func},render:function(){return (j.createElement("span",{className:p(this.props.className,(("_14-8"))),label:null,onClick:this._handleClick,onKeyDown:this._handleKeyDown,tabIndex:this.props.index+t},j.createElement("span",{"aria-label":this.props.label,title:this.props.label,className:"_14-9"},this.props.label)));},_handleClick:function(event){event.stopPropagation();},_handleKeyDown:function(event){if(event.keyCode===i.BACKSPACE){event.preventDefault();this.props.onRemove&&this.props.onRemove(this.props.entry);}}});e.exports=u;},null);
__d("MessengerComposeViewHeader.react",["immutable","MessengerSearchSource","MessengerTabIndices","MessengerTokenizer.react","ReactComponentWithPureRenderMixin","React","clearImmediate","cx","fbt","setImmediate"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){b.__markCompiled&&b.__markCompiled();'use strict';var q=l,r=q.PropTypes,s=320,t=l.createClass({displayName:"MessengerComposeViewHeader",mixins:[k],propTypes:{onAddRecipient:r.func.isRequired,onRemoveRecipient:r.func.isRequired,onResize:r.func.isRequired,recipients:r.instanceOf(g.List).isRequired,viewer:r.string.isRequired},getInitialState:function(){return {tokenizerContext:null};},componentDidMount:function(){this._focusTokenizer();this.setState({tokenizerContext:this.refs.tokenizerContext});},componentDidUpdate:function(u){if(this.props.recipients!==u.recipients)this.props.onResize();},componentWillUnmount:function(){this._timer&&m(this._timer);},render:function(){return (l.createElement("div",{className:"_2y8y"},l.createElement("div",{className:"_2y8z"},o._("To:")),l.createElement("div",null,l.createElement(j,{className:"_2y8-",context:this.state.tokenizerContext,entries:this.props.recipients,extraRendererProps:{className:"_2y8_",width:s},hasHoverState:true,onAddEntryAttempt:this.props.onAddRecipient,onRemoveEntryAttempt:this.props.onRemoveRecipient,placeholder:o._("Type the name of a person or group"),ref:"tokenizer",searchSource:h.getForFBID(this.props.viewer),tabIndex:i.NEW_MESSAGE_TOKENIZER,useLayer:true,viewer:this.props.viewer}),l.createElement("div",{ref:"tokenizerContext"}))));},_focusTokenizer:function(){this._timer=p(function(){this.refs.tokenizer&&this.refs.tokenizer.focusInput();}.bind(this));}});e.exports=t;},null);
__d("MercuryParticipantListRenderer",["fbt"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';function h(){this.$MercuryParticipantListRenderer0=false;this.$MercuryParticipantListRenderer1=false;this.$MercuryParticipantListRenderer2=false;this.$MercuryParticipantListRenderer3=function(r){return this.$MercuryParticipantListRenderer1?r.short_name:r.name;}.bind(this);}h.prototype.renderParticipantList=function(r){var s=r.map(this.$MercuryParticipantListRenderer3);switch(s.length){case 0:return i(this.$MercuryParticipantListRenderer0);case 1:return j(s);case 2:return this.$MercuryParticipantListRenderer2?l(s):k(s);case 3:return this.$MercuryParticipantListRenderer2?n(s):m(s);default:return this.$MercuryParticipantListRenderer2?p(s):o(s);}};h.prototype.setIsNewThread=function(r){this.$MercuryParticipantListRenderer0=r;return this;};h.prototype.setNameRenderer=function(r){this.$MercuryParticipantListRenderer3=r;return this;};h.prototype.setUseShortName=function(r){this.$MercuryParticipantListRenderer1=r;return this;};h.prototype.setUseAndSeparator=function(r){this.$MercuryParticipantListRenderer2=r;return this;};function i(r){if(r){return (g._("New Message"));}else return (g._("No Participants"));}function j(r){return r[0];}function k(r){return (g._("{participant1}, {participant2}",[g.param("participant1",r[0]),g.param("participant2",r[1])]));}function l(r){return (g._("{participant1} and {participant2}",[g.param("participant1",r[0]),g.param("participant2",r[1])]));}function m(r){return (g._("{participant1}, {participant2}, {participant3}",[g.param("participant1",r[0]),g.param("participant2",r[1]),g.param("participant3",r[2])]));}function n(r){return (g._("{participant1}, {participant2} and {participant3}",[g.param("participant1",r[0]),g.param("participant2",r[1]),g.param("participant3",r[2])]));}function o(r){return (g._("{participant1}, {participant2}, {participant3}, {others_link}",[g.param("participant1",r[0]),g.param("participant2",r[1]),g.param("participant3",r[2]),g.param("others_link",q(r.length-3))]));}function p(r){return (g._("{participant1}, {participant2} and {others_link}",[g.param("participant1",r[0]),g.param("participant2",r[1]),g.param("others_link",q(r.length-2))]));}function q(r){if(r>1){return (g._({"*":"{others_count} others"},[g.param("others_count",r,[0])]));}else return (g._("1 other"));}e.exports=h;},null);
__d("MercuryThreadTitle.react",["MercuryIDs","MercuryParticipantListRenderer","MercuryParticipants","React","TextWithEmoticons.react","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';var m=j,n=m.PropTypes,o=j.createClass({displayName:"MercuryThreadTitle",propTypes:{isNewThread:n.bool,thread:n.object.isRequired,viewer:n.string.isRequired,showUnreadCount:n.bool,useShortName:n.bool,useAndSeparator:n.bool},getDefaultProps:function(){return {isNewThread:false,showUnreadCount:false,useShortName:false,useAndSeparator:false};},getInitialState:function(){return {participantNames:''};},componentDidMount:function(){this._renderParticipantsList(this.props);},componentWillReceiveProps:function(p){this._renderParticipantsList(p);},render:function(){return (j.createElement("span",{className:this.props.className},this.props.thread.name?this._renderThreadTitle():this.state.participantNames,this.props.children));},getTitle:function(){return this.state.participantNames;},_renderThreadTitle:function(){var p=this.props.thread,q=j.createElement(k,{renderEmoticons:true,renderEmoji:true,text:p.name});if(!p.unread_count||!this.props.showUnreadCount)return q;return this._renderTitleWithUnreadCount(q,p.unread_count);},_renderParticipantsList:function(p){if(p.thread.name)return;var q=g.getParticipantIDFromUserID(p.viewer),r=p.thread.participants;if(r.length>1)r=r.filter(function(s){return s!=q;});i.getMulti(r,function(s){if(!this.isMounted())return;var t=r.map(function(w){return s[w];}),u=new h().setUseShortName(this.props.useShortName).setUseAndSeparator(this.props.useAndSeparator).setIsNewThread(this.props.isNewThread).renderParticipantList(t),v=(p.showUnreadCount&&p.thread.unread_count)?this._renderTitleWithUnreadCount(u,p.thread.unread_count):u;this.setState({participantNames:v});}.bind(this));},_renderTitleWithUnreadCount:function(p,q){return (l._("{conversation-title} ({unread-count})",[l.param("conversation-title",p),l.param("unread-count",q)]));}});e.exports=o;},null);
__d("MessengerPresenceStatus.react",["React","ReactComponentWithPureRenderMixin","fbt"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';var j=g,k=j.PropTypes,l=g.createClass({displayName:"MessengerPresenceStatus",mixins:[h],propTypes:{isUserActive:k.bool.isRequired,lastActive:k.string,platform:k.string},render:function(){var m;if(this.props.isUserActive){m=(i._("Active on {platform}",[i.param("platform",this.props.platform)]));}else if(this.props.lastActive){m=(i._("Active {time} ago",[i.param("time",this.props.lastActive)]));}else m=this.props.platform;return (g.createElement("span",{className:this.props.className},m));}});e.exports=l;},null);
__d("MessengerRTCUnavailableDialog.react",["MessengerActions","MessengerDialog.react","MessengerDialogBody.react","MessengerDialogButton.react","MessengerDialogFooter.react","MessengerDialogHeader.react","React","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();'use strict';var o=m,p=o.PropTypes,q=m.createClass({displayName:"MessengerRTCUnavailableDialog",propTypes:{name:p.string.isRequired},render:function(){return (m.createElement(h,{onToggle:this._handleToggle},m.createElement(l,null,n._("Can't Make Call")),m.createElement(i,null,this._renderDialogBody()),m.createElement(k,null,m.createElement(j,{action:"cancel",label:n._("OK"),type:"primary"}))));},_renderDialogBody:function(){return (m.createElement("div",null,n._("{name} is not available right now.",[n.param("name",this.props.name)])));},_handleToggle:function(r){if(!r)g.hideDialog();}});e.exports=q;},null);
__d("MNRTCCallabilityStore",["MessengerDispatcher","RTCCallabilityStore"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';e.exports=new h(g);},null);
__d("MessengerRTCCallButton.react",["Link.react","MessengerActions","MessengerRTCUnavailableDialog.react","MNRTCCallabilityStore","React","StoreAndPropBasedStateMixin","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();'use strict';var o=k,p=o.PropTypes,q=k.createClass({displayName:"MessengerRTCCallButton",mixins:[l(j)],statics:{calculateState:function(r){var s=r.calleeID.toString();return {isCallable:j.isCallable(s)};}},propTypes:{isVideo:p.bool.isRequired,calleeID:p.oneOfType([p.number,p.string]).isRequired,calleeName:p.string.isRequired},render:function(){return (k.createElement(g,{className:this._className(),onClick:this._handleStartCall}));},_className:function(){var r=this.props.isVideo,s=this.state.isCallable;return n((("_31tl")+(!r&&s?' '+"_31tm":'')+(!r&&!s?' '+"_31tn":'')+(r&&s?' '+"_31to":'')+(r&&!s?' '+"_31tp":'')),this.props.className);},_handleStartCall:function(r){r.preventDefault();if(this.state.isCallable){d(['FBRTCCore'],function(s){s.startOutgoingCall(this.props.calleeID,'messenger_dot_com',!this.props.isVideo);}.bind(this));}else h.showDialog(i,{name:this.props.calleeName});}});e.exports=q;},null);
__d("MessengerDetailViewHeader.react",["Event","immutable","ImmutableObject","Link.react","MercuryParticipantTypes","MercuryThreadTitle.react","MessengerConfig","MessengerPresenceStatus.react","MessengerRTCCallButton.react","ReactComponentWithPureRenderMixin","VideoCallSupport","React","Style","cx","fbt","debounce"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){b.__markCompiled&&b.__markCompiled();'use strict';var w=r,x=w.PropTypes,y=r.createClass({displayName:"MessengerDetailViewHeader",mixins:[p],propTypes:{contactData:x.object,onThreadInfoToggle:x.func,participants:x.instanceOf(h.Map).isRequired,thread:x.instanceOf(i),viewer:x.string.isRequired},componentDidMount:function(){this._resizeCallback=g.listen(window,'resize',v(this._calculateTruncationState,20,this));},componentWillUnmount:function(){this._resizeCallback.remove();},componentDidUpdate:function(){this._calculateTruncationState();},render:function(){if(!this.props.thread)return null;var z=this._renderPresenceStatus();return (r.createElement("div",{className:(("_5742")+(z===null?' '+"_1_fz":'')),ref:"root"},r.createElement("div",{className:"_5743",key:"threadTitle",ref:"title"},r.createElement(l,{className:"_3oh-",ref:"mercuryTitle",thread:this.props.thread,viewer:this.props.viewer}),z),r.createElement("ul",{className:"_fl2",key:"buttonsContainer",ref:"buttons"},this._renderAudioCallButton(),this._renderVideoCallButton(),r.createElement("li",null,r.createElement(j,{"aria-label":u._("Thread Information"),className:(("_fl3")+(this.props.isInfoPanelVisible?' '+"_gxi":'')+(' '+"_30yy")),onClick:this._handleThreadInfoToggle})))));},_renderAudioCallButton:function(){if(this._shouldShowCallButton())return (r.createElement("li",null,r.createElement(o,{className:"_30yy",isVideo:false,calleeID:this.props.thread.canonical_fbid,calleeName:this.props.contactData.contact.name})));},_renderVideoCallButton:function(){if(this._shouldShowCallButton())return (r.createElement("li",null,r.createElement(o,{className:"_30yy",isVideo:true,calleeID:this.props.thread.canonical_fbid,calleeName:this.props.contactData.contact.name})));},_shouldShowCallButton:function(){var z=this.props.thread;return !!(q.isWebrtcSupported()&&q.isOSSupported()&&this.props.contactData&&this.props.contactData.contact.type!==k.PAGE&&m.EnableRtcGK&&z&&z.is_canonical&&z.participants.length>1);},_renderPresenceStatus:function(){if(!this.props.contactData)return null;return (r.createElement(n,{className:"_2v6o",isUserActive:this.props.contactData.isUserActive,lastActive:this.props.contactData.lastActive,platform:this.props.contactData.platform}));},_handleThreadInfoToggle:function(z){z.preventDefault();this.props.onThreadInfoToggle&&this.props.onThreadInfoToggle();},_calculateTruncationState:function(){var z=r.findDOMNode(this.refs.root),aa=r.findDOMNode(this.refs.title),ba=r.findDOMNode(this.refs.buttons),ca=r.findDOMNode(this.refs.mercuryTitle);if(!ca||!aa)return;var da=Math.ceil(.5*(z.offsetWidth+ca.offsetWidth)),ea=z.offsetWidth-ba.offsetWidth-12;if(da<=ea){s.set(z,'text-align','center');s.set(aa,'width','auto');}else{s.set(z,'text-align','left');var fa=Math.max(z.offsetWidth-ba.offsetWidth-11,0);s.set(aa,'width',fa+'px');}}});e.exports=y;},null);
__d("MessengerPresenceStatusUtils",["AvailableListConstants","LastMobileActiveTimes","MercuryIDs","PresenceStatus","fbt"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l={getStatusFromCanonicalThread:function(m,n){var o=null;if(n&&n.is_canonical){var p=m.get(i.getParticipantIDFromFromThreadID(n.thread_id));if(p){var q=j.get(p.fbid),r,s,t=p.is_messenger_user?k._("Messenger"):k._("Facebook");if(q!==g.ACTIVE){r=h.get(p.fbid);s=h.getShortDisplay(p.fbid);}o={contact:p,platform:t,isUserActive:q===g.ACTIVE,lastActiveTS:r,lastActive:s};}}return o;}};e.exports=l;},null);
__d("MessengerDetailViewHeaderContainer.react",["immutable","ImmutableObject","MercuryIDs","MercuryThreadIDMap","MercuryTypeaheadConstants","MessengerActions","MessengerComposerActions","MessengerComposeViewHeader.react","MessengerDetailViewHeader.react","MessengerPresenceStatusUtils","MessengerView","PresenceStatus","React","StoreAndPropBasedStateMixin","shallowEqual"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){b.__markCompiled&&b.__markCompiled();'use strict';var v=s,w=v.PropTypes,x=s.createClass({displayName:"MessengerDetailViewHeaderContainer",mixins:[t(r)],propTypes:{isInfoPanelVisible:w.bool,onResize:w.func.isRequired,onThreadInfoToggle:w.func,participants:w.instanceOf(g.Map).isRequired,recipients:w.instanceOf(g.List).isRequired,thread:w.instanceOf(h),view:w.string,viewer:w.string.isRequired},statics:{calculateState:function(y){if(!y.thread)return {contactData:null};return {contactData:p.getStatusFromCanonicalThread(y.participants,y.thread)};}},shouldComponentUpdate:function(y,z){return !!(!u(y,this.props)||(z&&!u(z.contactData,this.state.contactData)));},render:function(){return (this.props.view===q.DETAIL.COMPOSE?s.createElement(n,{onAddRecipient:this._handleAddRecipient,onRemoveRecipient:this._handleRemoveRecipient,onResize:this.props.onResize,recipients:this.props.recipients,viewer:this.props.viewer}):s.createElement(o,{contactData:this.state.contactData,isInfoPanelVisible:this.props.isInfoPanelVisible,onThreadInfoToggle:this.props.onThreadInfoToggle,participants:this.props.participants,thread:this.props.thread,viewer:this.props.viewer}));},_handleAddRecipient:function(y){var z=y.getUniqueID(),aa=y.getType();if(aa===k.THREAD_TYPE){var ba=j.getForFBID(this.props.viewer);ba.getClientIDFromFBID(z,function(ca){m.moveDraftToNextThread(ca);l.selectThread(ca);});m.exitComposeState();}else if(z===this.props.viewer||aa===k.PAGE_TYPE){m.moveDraftToNextThread(i.getThreadIDFromUserID(z));m.exitComposeState();l.selectThread(i.getThreadIDFromUserID(z));}else m.addToken(y);},_handleRemoveRecipient:function(y){m.removeToken(y);}});e.exports=x;},null);
__d("MessengerAddToConversationDialog.react",["immutable","ImmutableObject","MercuryIDs","MercuryLogMessageType","MercurySourceType","MercuryMessageActions","MercuryMessageObject","MessengerActions","MessengerDialog.react","MessengerDialogButton.react","MessengerDialogHeader.react","MessengerDialogTitle.react","MessengerSearchSource","MessengerTokenizer.react","ReactComponentWithPureRenderMixin","React","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){b.__markCompiled&&b.__markCompiled();'use strict';var y=v,z=y.PropTypes,aa=460,ba=v.createClass({displayName:"MessengerAddToConversationDialog",mixins:[u],propTypes:{thread:z.instanceOf(h),viewer:z.string.isRequired},getInitialState:function(){return {selectedEntries:g.List()};},componentWillMount:function(){this._messageActions=l.getForFBID(this.props.viewer);this._messageObject=m.getForFBID(this.props.viewer);},render:function(){return (v.createElement(o,{shown:true,onToggle:this._handleToggle,ref:"dialog",type:"default",width:aa},v.createElement("div",{className:"_4jgp"},v.createElement(q,null,v.createElement(p,{action:"cancel",label:x._("Cancel"),type:"secondary"}),v.createElement(r,null,x._("Add More People")),v.createElement(p,{label:x._("Done"),onClick:this._handleSave,type:"primary"})),v.createElement(t,{className:"_4jgt",entries:this.state.selectedEntries,excludeGroups:true,extraRendererProps:{className:"_4jgu",width:aa},hasHoverState:false,hideViewWithEntries:false,onAddEntryAttempt:this._handleAddEntryAttempt,onRemoveEntryAttempt:this._handleRemoveEntryAttempt,originalEntryIDs:g.Set(this.props.thread.participants.map(function(ca){return i.getUserIDFromParticipantID(ca);})),placeholder:x._("To:"),searchSource:s.getForFBID(this.props.viewer),showDefaultEntries:true,useLayer:false,viewer:this.props.viewer}))));},_handleAddEntryAttempt:function(ca){this.setState({selectedEntries:this.state.selectedEntries.push(ca)});},_handleRemoveEntryAttempt:function(ca){var da=ca.getUniqueID(),ea=this.state.selectedEntries,fa=ea.findIndex(function(ga){return ga.getUniqueID()===da;});if(fa!==-1)this.setState({selectedEntries:ea["delete"](fa)});},_handleToggle:function(ca){if(!ca)n.hideDialog();},_handleSave:function(event){if(this.state.selectedEntries.size)this._messageActions.send(this._messageObject.constructLogMessageObject(k.MESSENGER_WEB,this.props.thread.thread_id,j.SUBSCRIBE,{added_participants:this.state.selectedEntries.map(function(ca){return i.getParticipantIDFromUserID(ca.getUniqueID());}).toArray()}));event.preventDefault();n.hideDialog();}});e.exports=ba;},null);
__d("MessengerConfirmLeaveGroupDialog.react",["MessengerActions","MessengerDialog.react","MessengerDialogBody.react","MessengerDialogButton.react","MessengerDialogFooter.react","MessengerDialogHeader.react","React","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();'use strict';var o=m,p=o.PropTypes,q=m.createClass({displayName:"MessengerConfirmLeaveGroupDialog",propTypes:{onCancel:p.func,onLeave:p.func.isRequired},render:function(){return (m.createElement(h,{onToggle:this._handleToggle},m.createElement(l,null,n._("Leave Conversation?")),m.createElement(i,null,n._("You will stop receiving messages from this conversation and people will see that you left.")),m.createElement(k,null,m.createElement(j,{action:"cancel",label:n._("Cancel"),type:"secondary"}),m.createElement(j,{label:n._("Leave"),onClick:this._handleLeaveClick,type:"primary",use:"danger"}))));},_handleLeaveClick:function(r){r.stopPropagation();this.props.onLeave();g.hideDialog();},_handleToggle:function(r){if(!r)g.hideDialog();}});e.exports=q;},null);
__d("MessengerMenu.react",["MenuSeparator.react","ReactXUIMenu","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';function k(o){o.isReactLegacyFactory={};o.type=o;}for(var l in h)if(h.hasOwnProperty(l))n[l]=h[l];var m=h===null?null:h.prototype;n.prototype=Object.create(m);n.prototype.constructor=n;n.__superConstructor__=h;function n(o){var p=o,q=p.className,r=(function(s,t){var u={},v=Object.prototype.hasOwnProperty;if(s==null)throw new TypeError();for(var w in s)if(v.call(s,w)&&!v.call(t,w))u[w]=s[w];return u;})(p,{className:1});h.call(this,Object.assign({className:j(q,"_2i-c _150g")},r));}k(n);n.Item=h.Item;n.Separator=g;e.exports=n;},null);
__d("MessengerPopoverMenu.react",["ContextualDialogArrow","ContextualLayerAutoFlip","ContextualLayerUpdateOnScroll","PopoverMenu.react","ReactComponentWithPureRenderMixin","React","cloneWithProps","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();'use strict';var o=l.createClass({displayName:"MessengerPopoverMenu",mixins:[k],render:function(){var p=this.props,q=p.children,r=(function(t,u){var v={},w=Object.prototype.hasOwnProperty;if(t==null)throw new TypeError();for(var x in t)if(w.call(t,x)&&!w.call(u,x))v[x]=t[x];return v;})(p,{children:1}),s=l.Children.only(q);return (l.createElement(j,l.__spread({layerBehaviors:[h,i,g]},r),m(s,{className:"_150g"})));}});e.exports=o;},null);
__d("MessengerRemoveFromGroupDialog.react",["MessengerDialog.react","MessengerDialogBody.react","MessengerDialogButton.react","MessengerDialogFooter.react","MessengerDialogHeader.react","ReactComponentWithPureRenderMixin","React","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();'use strict';var o=m,p=o.PropTypes,q=m.createClass({displayName:"MessengerRemoveFromGroupDialog",mixins:[l],propTypes:{onRemove:p.func,onToggle:p.func},render:function(){return (m.createElement(g,{onToggle:this.props.onToggle},m.createElement(k,null,n._("Remove from Group")),m.createElement(h,null,n._("Are you sure you want to remove this person from the group?")),m.createElement(j,null,m.createElement(i,{action:"cancel",label:n._("Cancel"),type:"secondary"}),m.createElement(i,{label:n._("Remove"),onClick:this._handleDelete,type:"primary",use:"danger"}))));},_handleDelete:function(r){this.props.onToggle&&this.props.onToggle(false);this.props.onRemove&&this.props.onRemove(r);}});e.exports=q;},null);
__d("MessengerInfoPanelContactActions.react",["ImmutableObject","MercuryIDs","MessengerActions","MessengerContactActions","MessengerMenu.react","MessengerPopoverMenu.react","MessengerRemoveFromGroupDialog.react","ReactComponentWithPureRenderMixin","React","cx","fbt","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){b.__markCompiled&&b.__markCompiled();'use strict';var s=k.Item,t=k.Separator,u=o,v=u.PropTypes,w=o.createClass({displayName:"MessengerInfoPanelContactActions",mixins:[n],propTypes:{contact:v.instanceOf(g).isRequired,isOpen:v.bool,onAction:v.func.isRequired,onToggle:v.func.isRequired,viewer:v.string.isRequired},render:function(){if(h.getUserIDFromParticipantID(this.props.contact.uid)===this.props.viewer)return null;var x=(o.createElement(k,null,o.createElement(s,{label:q._("Message"),onclick:this._makeActionHandler(j.MESSAGE)}),this.props.contact.href?o.createElement(s,{label:q._("View Profile"),onclick:this._makeActionHandler(j.PROFILE)}):null,o.createElement(t,null),o.createElement(s,{label:q._("Remove from Group"),onclick:this._handleRemoveClick})));return (o.createElement(l,{menu:x,onHide:function(){return this.props.onToggle(false);}.bind(this),onShow:function(){return this.props.onToggle(true);}.bind(this)},o.createElement("div",{className:r(this.props.className,(("_57gs")+(this.props.isOpen?' '+"_57gt":''))),onClick:this._handleClick,tabIndex:0})));},_handleClick:function(x){x.stopPropagation();x.preventDefault();},_makeActionHandler:function(x){return function(y){this._handleClick(y);this.props.onAction(x,y);}.bind(this);},_handleRemoveClick:function(x){this._handleClick(x);i.showDialog(m,{onToggle:this._handleDialogToggle,onRemove:this._handleDialogRemoveClick});},_handleDialogRemoveClick:function(x){this.props.onAction(j.REMOVE,x);},_handleDialogToggle:function(x){if(!x)i.hideDialog();}});e.exports=w;},null);
__d("MessengerCheckboxInput.react",["AbstractCheckboxInput.react","ReactComponentWithPureRenderMixin","React","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=i.createClass({displayName:"MessengerCheckboxInput",mixins:[h],render:function(){return (i.createElement(g,i.__spread({},this.props,{className:k(this.props.className,"_55sg _4ng2")})));}});e.exports=l;},null);
__d("MercuryThreadMuter",["AsyncDialog","AsyncRequest","DOM","MercuryThreadInfo"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k={showMuteChangeDialog:function(l,m){g.send(new h('/ajax/mercury/mute_thread_dialog.php').setRelativeTo(m),function(n){n.subscribe('confirm',function(){this.hide();var o;i.scry(this.getRoot(),'input[type="radio"]').forEach(function(p){if(p.checked)o=p.value;});o=k.convertRawMuteSetting(o);d(['MercuryThreadActions'],function(p){p.get().updateMuteSetting(l,o);});}.bind(n));});},convertRawMuteSetting:function(l){switch(l){case 'always':return -1;case '30minutes':return 1800;case '1hour':return 3600;case '8hours':return 8*3600;case '24hours':return 24*3600;case '8am':var m,n=new Date(),o=new Date();o.setHours(8);o.setMinutes(0);o.setSeconds(0);if(o>n){m=o-n;}else m=o-n+(24*3600*1000);return m/1000;default:return 0;}}};e.exports=k;},null);
__d("MessengerRadioButton.react",["ReactComponentWithPureRenderMixin","React","XUIRadioInput.react","cx"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';var k=h.createClass({displayName:"MessengerRadioButton",mixins:[g],render:function(){return (h.createElement(i,h.__spread({},this.props,{className:"__rm"})));}});e.exports=k;},null);
__d("MessengerRadioList.react",["InputLabel.react","MessengerRadioButton.react","React","ReactChildren","cloneWithProps"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l=i,m=l.PropTypes,n=i.createClass({displayName:"MessengerRadioList",propTypes:{name:m.string,onValueChange:m.func,selectedValue:m.any},render:function(){var o=j.map(this.props.children,function(p){return k(p,{name:this.props.name,onSelect:this.props.onValueChange,selectedValue:this.props.selectedValue});},this);return i.createElement("ul",i.__spread({},this.props,{name:null}),o);}});n.Item=i.createClass({displayName:"MessengerRadioList.Item",propTypes:{disabled:m.bool,name:m.string,onSelect:m.func,selectedValue:m.any,value:m.any},render:function(){return (i.createElement("li",{className:this.props.className},i.createElement(g,{display:"inline"},i.createElement(h,{checked:this.props.selectedValue===this.props.value,disabled:!!this.props.disabled,name:this.props.name,onChange:this._handleChange,value:this.props.value}),i.createElement("label",null,this.props.children))));},_handleChange:function(event){this.props.onSelect&&this.props.onSelect(event.target.value);}});e.exports=n;},null);
__d("MessengerMuteDialog.react",["MercuryThreadMuter","MessengerDialog.react","MessengerDialogBody.react","MessengerDialogButton.react","MessengerDialogFooter.react","MessengerDialogHeader.react","MessengerRadioList.react","React","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();'use strict';var p=m.Item,q=n,r=q.PropTypes,s=n.createClass({displayName:"MessengerMuteDialog",propTypes:{onMute:r.func.isRequired,onToggle:r.func},getInitialState:function(){return {muteSetting:'30minutes'};},render:function(){return (n.createElement(h,{onToggle:this.props.onToggle},n.createElement(l,null,o._("Mute Conversation")),n.createElement(i,null,n.createElement(m,{selectedValue:this.state.muteSetting,onValueChange:this._handleMuteSettingChange},n.createElement(p,{value:"30minutes"},o._("For 30 minutes")),n.createElement(p,{value:"1hour"},o._("For 1 hour")),n.createElement(p,{value:"8hours"},o._("For 8 hours")),n.createElement(p,{value:"24hours"},o._("For 24 hours")),n.createElement(p,{value:"always"},o._("Indefinitely")))),n.createElement(k,null,n.createElement(j,{action:"cancel",label:o._("Cancel"),type:"secondary"}),n.createElement(j,{label:o._("Mute"),onClick:this._handleMute,type:"primary"}))));},_handleMute:function(){this.props.onMute(g.convertRawMuteSetting(this.state.muteSetting));this.props.onToggle&&this.props.onToggle(false);},_handleMuteSettingChange:function(t){this.setState({muteSetting:t});}});e.exports=s;},null);
__d("MessengerInfoPanelMuteSettings.react",["LeftRight.react","MessengerActions","MessengerCheckboxInput.react","MessengerMuteDialog.react","ReactComponentWithPureRenderMixin","React","cx","fbt","formatDate"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();'use strict';var p=l,q=p.PropTypes,r=l.createClass({displayName:"MessengerInfoPanelMuteSettings",mixins:[k],propTypes:{isMuted:q.bool.isRequired,mutedUntil:q.number,onMuteChange:q.func.isRequired},render:function(){return (l.createElement("div",{className:"_3x6s",ref:"dialogContext"},l.createElement(g,null,this._renderLink(),this._renderMutedUntil())));},_handleClick:function(s){s.preventDefault();s.stopPropagation();if(this.props.isMuted){this.props.onMuteChange(0);}else h.showDialog(j,{onMute:this.props.onMuteChange,onToggle:this._handleDialogToggle});},_renderLink:function(){return (l.createElement("div",{className:"_3x6t"},l.createElement(i,{checked:this.props.isMuted,onChange:this._handleClick}),l.createElement("span",{onClick:this._handleClick,className:"_3x6u"},n._("Mute Notifications"))));},_renderMutedUntil:function(){var s=this.props.mutedUntil,t;if(!s)return null;if(s>0){if(s<86401)return null;var u=(new Date(s*1000)).getDay()===(new Date()).getDay();if(!u){t=(n._("Off until {time} tomorrow",[n.param("time",o(s,'g:ia'))]));}else t=(n._("Off until {time}",[n.param("time",o(s,'g:ia'))]));}else if(s===-1)t=(n._("Off indefinitely"));return t?l.createElement("span",{className:"_3x6v"},t):null;},_handleDialogToggle:function(s){if(!s)h.hideDialog();}});e.exports=r;},null);
__d("MessengerInfoPanelMuteSettingsContainer.react",["MercuryThreadInfo","ImmutableObject","MessengerInfoPanelMuteSettings.react","React"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=j,l=k.PropTypes,m=j.createClass({displayName:"MessengerInfoPanelMuteSettingsContainer",propTypes:{thread:l.instanceOf(h).isRequired,onChange:l.func.isRequired},render:function(){return (j.createElement(i,{isMuted:g.isMuted(this.props.thread),mutedUntil:g.getMuteSetting(this.props.thread),onMuteChange:this._handleMuteChange}));},_handleMuteChange:function(n){this.props.onChange(n);}});e.exports=m;},null);
__d("MessengerInfoPanelContactNameSection.react",["ImageBlock.react","MessengerPresenceStatus.react","React","cx"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';var k=i,l=k.PropTypes,m=i.createClass({displayName:"MessengerInfoPanelContactNameSection",propTypes:{contact:l.object.isRequired,isUserActive:l.bool,lastActive:l.string,platform:l.string,renderedImage:l.element.isRequired},render:function(){return (i.createElement(g,{className:"_1wnf",spacing:"medium"},this.props.renderedImage,i.createElement("div",{className:"_3tkw"},i.createElement("div",{className:"_3tkx"},i.createElement("span",{className:"_3oh-"},this.props.contact.name)),i.createElement("div",{className:"_3tky"},i.createElement(h,{isUserActive:this.props.isUserActive,lastActive:this.props.lastActive,platform:this.props.platform})))));}});e.exports=m;},null);
__d("DOMClone",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={shallowClone:function(i){return h(i,false);},deepClone:function(i){return h(i,true);}};function h(i,j){var k=i.cloneNode(j);if(typeof k.__FB_TOKEN!=='undefined')delete k.__FB_TOKEN;return k;}e.exports=g;},null);
__d("FileInput",["ArbiterMixin","DOM","DOMClone","Event","Focus","Keys","UserAgent_DEPRECATED","cx","mixin"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();var p=m.ie(),q=o(g);for(var r in q)if(q.hasOwnProperty(r))t[r]=q[r];var s=q===null?null:q.prototype;t.prototype=Object.create(s);t.prototype.constructor=t;t.__superConstructor__=q;function t(u,v,w){"use strict";q.call(this);this.container=u;this.control=v;var x=h.scry(this.container,'a')[0];x&&x.removeAttribute('href');var y=h.create('div',{className:"_3jk"},w);h.appendContent(this.control,y);this._boundHandleChange=this._handleChange.bind(this);if(p)this._boundHandleIEKeyDown=this._handleIEKeyDown.bind(this);this._setInputElement(w);}t.prototype.getValue=function(){"use strict";return this.input.value;};t.prototype.getInput=function(){"use strict";return this.input;};t.prototype.getContainer=function(){"use strict";return this.container;};t.prototype.getControl=function(){"use strict";return this.control;};t.prototype.clear=function(){"use strict";if(p){var u=i.deepClone(this.input);h.replace(this.input,u);this._setInputElement(u);}else this.input.value='';};t.prototype.destroy=function(){"use strict";this._focus.remove();this._focus=null;this._listener.remove();this._listener=null;if(p){this._IEKeyDownListener.remove();this._IEKeyDownListener=null;}this.container=null;this.control=null;this.input=null;};t.prototype._setInputElement=function(u){"use strict";this.input=u;this._focus&&this._focus.remove();this._focus=k.relocate(u,this.control);this._listener&&this._listener.remove();this._listener=j.listen(u,'change',this._boundHandleChange);if(p){this._IEKeyDownListener&&this._IEKeyDownListener.remove();this._IEKeyDownListener=j.listen(u,'keydown',this._boundHandleIEKeyDown);}};t.prototype._handleChange=function(event){"use strict";this.inform('change',event);var u=this.input.form;if(u&&p<9)j.fire(u,'change',event);};t.prototype._handleIEKeyDown=function(event){"use strict";if(event.keyCode===l.RETURN){event.preventDefault();var u=document.createEvent('MouseEvents');u.initEvent('click',true,true);this.input.dispatchEvent(u);}};e.exports=t;},null);
__d("FileForm",["ArbiterMixin","AsyncRequest","AsyncResponse","AsyncUploadRequest","BehaviorsMixin","CurrentUser","DataStore","DOMQuery","Event","Form","JSONPTransport","Parent","URI","mixin","shield"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){b.__markCompiled&&b.__markCompiled();function v(ba){var ca={},da=n.scry(ba,'input[type="file"]');da.forEach(function(ea){ca[ea.name]=ea.files;});return ca;}function w(ba){var ca=n.scry(ba,'input[type="file"]');ca.forEach(function(da){da.files=null;});}var x=t(g,k);for(var y in x)if(x.hasOwnProperty(y))aa[y]=x[y];var z=x===null?null:x.prototype;aa.prototype=Object.create(z);aa.prototype.constructor=aa;aa.__superConstructor__=x;function aa(ba,ca,da){"use strict";x.call(this);if(ba.getAttribute('rel')==='async')throw new Error('FileForm cannot be used with Primer forms.');if(ba.getAttribute('method').toUpperCase()!=='POST')throw new Error('FileForm must be used with POST forms.');this._form=ba;this._previousEncoding=this._form.enctype;this._form.enctype=this._form.encoding='multipart/form-data';this._files=null;ca&&this.enableBehaviors(ca);this._options=da||{};this.setAllowCrossOrigin(this._options.allowCrossOrigin);this.setAllowCrossPageTransition(this._options.allowCrossPageTransition);this.setUploadInParallel(this._options.uploadInParallel);this.setConcurrentLimit(this._options.concurrentLimit);this.setPreprocessHandler(this._options.preprocessHandler);this.setNetworkErrorRetryLimit(this._options.networkErrorRetryLimit);this._listeners=[o.listen(document.documentElement,'submit',this._submit.bind(this)),o.listen(this._form,'click',this._click.bind(this))];m.set(this._form,'FileForm',this);}aa.prototype.getRoot=function(){"use strict";return this._form;};aa.prototype.setAllowCrossOrigin=function(ba){"use strict";this._allowCrossOrigin=!!ba;return this;};aa.prototype.setAllowCrossPageTransition=function(ba){"use strict";this._allowCrossPageTransition=!!ba;return this;};aa.prototype.setUploadInParallel=function(ba){"use strict";this._uploadInParallel=!!ba;return this;};aa.prototype.setConcurrentLimit=function(ba){"use strict";this._concurrentLimit=ba;return this;};aa.prototype.setPreprocessHandler=function(ba){"use strict";this._preprocessHandler=ba;return this;};aa.prototype.setNetworkErrorRetryLimit=function(ba){"use strict";this._retryLimit=ba;return this;};aa.prototype.setFiles=function(ba){"use strict";this._files=ba;return this;};aa.prototype.canUseXHR=function(){"use strict";var ba='FormData' in window;if(ba)if(!new s(this._form.action).isSameOrigin()&&!this._allowCrossOrigin)ba=false;return ba;};aa.prototype._submit=function(event){"use strict";if(event.isDefaultPrevented()||event.getTarget()!==this._form)return;if(this.inform('submit')===false){event.prevent();return;}return this.canUseXHR()?this._sendViaXHR(event):this._sendViaFrame(event);};aa.prototype._click=function(event){"use strict";var ba=event.getTarget();while(n.isElementNode(ba)){if(ba.type==='submit'){this._clickTarget=ba;setTimeout(this._unclick.bind(this),0);break;}ba=ba.parentNode;}};aa.prototype._unclick=function(){"use strict";this._clickTarget=null;};aa.prototype._sendViaFrame=function(event){"use strict";var ba=this._request=new h();ba.setStatusElement(this._getStatusElement());ba.addStatusIndicator();ba.setOption('useIframeTransport',true);var ca=ba.handleResponse.bind(ba),da=new q('iframe',this._form.action,ca),ea=da.getTransportFrame(),fa=da.getRequestURI().addQueryData({__iframe:true,__user:l.getID()});this._form.setAttribute('action',fa.toString());this._form.setAttribute('target',ea.name);ba.setJSONPTransport(da);ba.setURI(fa);ba.setHandler(this.success.bind(this,null));ba.setErrorHandler(this.failure.bind(this,null));ba.setInitialHandler(u(this.initial,this,null));};aa.prototype._sendViaXHR=function(event){"use strict";var ba;if(this._uploadInParallel&&j.isSupported()){ba=new j().setPreprocessHandler(this._preprocessHandler).setData(p.serialize(this._form,this._clickTarget)).setNetworkErrorRetryLimit(this._retryLimit);if(this._concurrentLimit)ba.setLimit(this._concurrentLimit);if(this._files){ba.setFiles(this._files);}else ba.setFiles(v(this._form));var ca=[ba.subscribe('progress',function(ha,ia){this.progress(ia,ia.getProgressEvent());}.bind(this)),ba.subscribe('initial',function(ha,ia){this.initial(ia,ia.getResponse());}.bind(this)),ba.subscribe('success',function(ha,ia){this.success(ia,ia.getResponse());}.bind(this)),ba.subscribe('start',function(ha,ia){this.inform('start',{upload:ia});}.bind(this)),ba.subscribe('failure',function(ha,ia){this.failure(ia,ia.getResponse());return false;}.bind(this)),ba.subscribe('complete',function(){while(ca.length)ca.pop().unsubscribe();})];}else{var da;if(this._files){da=p.createFormData(p.serialize(this._form,this._clickTarget));var ea=j.parseFiles(this._files);for(var fa in ea){var ga=ea[fa];if(ga.length===1){da.append(fa,ga[0]);}else{fa=fa+'[]';ga.forEach(function(ha){da.append(fa,ha);});}}}else da=p.createFormData(this._form,this._clickTarget);ba=new h().setRawData(da).setHandler(this.success.bind(this,null)).setErrorHandler(this.failure.bind(this,null)).setUploadProgressHandler(this.progress.bind(this,null)).setInitialHandler(u(this.initial,this,null));}ba.setAllowCrossOrigin(this._allowCrossOrigin).setAllowCrossPageTransition(this._allowCrossPageTransition).setRelativeTo(this._form).setStatusElement(this._getStatusElement()).setURI(this._form.action).send();this._request=ba;event&&event.prevent();};aa.prototype.forceSendViaXHR=function(){"use strict";return this._sendViaXHR(null);};aa.prototype.initial=function(ba){"use strict";return this.inform('initial',{upload:ba});};aa.prototype.success=function(ba,ca){"use strict";var da={response:ca,upload:ba};if(this.inform('success',da)!==false)o.fire(this._form,'success',da);this._cleanup();};aa.prototype.failure=function(ba,ca){"use strict";var da={response:ca,upload:ba};if(this.inform('failure',da)!==false)if(o.fire(this._form,'error',da)!==false)i.defaultErrorHandler(ca);this._cleanup();};aa.prototype.progress=function(ba,event){"use strict";this.inform('progress',{event:event,upload:ba});};aa.prototype.abort=function(){"use strict";if(this._request){this._request.abort();this._cleanup();}};aa.prototype.clear=function(){"use strict";w(this._form);};aa.prototype.destroy=function(){"use strict";this._cleanup();while(this._listeners.length)this._listeners.pop().remove();this._listeners=null;this._form.enctype=this._form.encoding=this._previousEncoding;m.remove(this._form,'FileForm');};aa.prototype._cleanup=function(){"use strict";this._request=null;};aa.prototype._getStatusElement=function(){"use strict";return r.byClass(this._form,'stat_elem')||this._form;};aa.getInstance=function(ba){"use strict";return m.get(ba,'FileForm');};Object.assign(aa,{EVENTS:['start','submit','initial','progress','success','failure']});e.exports=aa;},null);
__d("submitForm",["DOM"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h=function(i){var j=g.scry(i,'input[type="submit"]')[0];if(j){j.click();}else{j=g.create('input',{type:'submit',className:'hidden_elem'});g.appendContent(i,j);j.click();g.remove(j);}};e.exports=h;},null);
__d("FileInputUploader",["ArbiterMixin","DOM","DTSG","FileForm","Form","mixin","submitForm"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();var n=l(g);for(var o in n)if(n.hasOwnProperty(o))q[o]=n[o];var p=n===null?null:n.prototype;q.prototype=Object.create(p);q.prototype.constructor=q;q.__superConstructor__=n;function q(r){"use strict";n.call(this);this._inputElem=r;this._data={};}q.prototype.setInput=function(r){"use strict";this._inputElem=r;return this;};q.prototype.setURI=function(r){"use strict";this._uri=r;return this;};q.prototype.setData=function(r){"use strict";this._data=r;return this;};q.prototype.setPreprocessHandler=function(r){"use strict";this._preprocessHandler=r;return this;};q.prototype.setNetworkErrorRetryLimit=function(r){"use strict";this._retryLimit=r;return this;};q.prototype.setFiles=function(r){"use strict";this._files=r;return this;};q.prototype.setAllowCrossOrigin=function(r){"use strict";this._allowCrossOrigin=!!r;return this;};q.prototype.setAllowCrossPageTransition=function(r){"use strict";this._allowCrossPageTransition=!!r;return this;};q.prototype.setUploadInParallel=function(r){"use strict";this._uploadInParallel=!!r;return this;};q.prototype.setConcurrentLimit=function(r){"use strict";this._concurrentLimit=r;return this;};q.prototype.abort=function(){"use strict";if(this._fileForm){this._fileForm.abort();this._destroyFileForm();}};q.prototype.send=function(){"use strict";this._createForm();var r=this._inputElem.cloneNode(false);h.replace(this._inputElem,r);h.appendContent(this._formElem,this._inputElem);h.appendContent(document.body,this._formElem);m(this._formElem);h.replace(r,this._inputElem);this._removeFormEl();};q.prototype._onFileFormEvent=function(r,s){"use strict";if(r==='success'||r==='failure')this._destroyFileForm();this.inform(r,s);};q.prototype._createForm=function(){"use strict";this._destroyFileForm();this._formElem=h.create('form',{action:this._uri,method:'post'});this._fileForm=new j(this._formElem,null,{allowCrossOrigin:this._allowCrossOrigin,allowCrossPageTransition:this._allowCrossPageTransition,uploadInParallel:this._uploadInParallel,concurrentLimit:this._concurrentLimit,preprocessHandler:this._preprocessHandler,networkErrorRetryLimit:this._retryLimit});if(this._files)this._fileForm.setFiles(this._files);this._fileForm.subscribe(j.EVENTS,this._onFileFormEvent.bind(this));k.createHiddenInputs(Object.assign({fb_dtsg:i.getToken()},this._data),this._formElem);};q.prototype._removeFormEl=function(){"use strict";h.remove(this._formElem);this._formElem=null;};q.prototype._destroyFileForm=function(){"use strict";if(this._fileForm){this._fileForm.destroy();this._fileForm=null;}};e.exports=q;},null);
__d("MessengerThreadPhotoUploader.react",["FileInput","FileInputUploader","Link.react","MercuryConfig","React","SubscriptionsHandler","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();'use strict';var o=k,p=o.PropTypes,q=k.createClass({displayName:"MessengerThreadPhotoUploader",_fileInput:(null),_subscriptions:(null),_uploader:(null),propTypes:{onComplete:p.func.isRequired,onFail:p.func,onStart:p.func,uri:p.string},getDefaultProps:function(){return {uri:j.upload_url};},componentDidMount:function(){var r=k.findDOMNode(this.refs.input),s=new g(k.findDOMNode(this.refs.form),k.findDOMNode(this.refs.uploadButton),r),t=new h(r).setURI(this.props.uri).setAllowCrossOrigin(true).setData({images_only:true}),u=new l();u.addSubscriptions(t.subscribe('success',this._handleAllUploadsCompleted),t.subscribe('failure',this._handleLastUploadFailed));(this)._subscriptions=u;(this)._uploader=t;(this)._fileInput=s;},componentWillUnmount:function(){this._subscriptions&&this._subscriptions.release();this._fileInput&&this._fileInput.destroy();delete this._subscriptions;delete this._uploader;},render:function(){return (k.createElement("form",{action:this.props.uri,method:"post",ref:"form"},k.createElement("input",{type:"hidden",name:"attach_id",ref:"attachID"}),k.createElement("input",{type:"hidden",name:"images_only",value:"true"}),k.createElement("div",{className:"_m _4q60 _2bkv"},k.createElement(i,{className:"_4q61 _2bkw",ref:"uploadButton"},n._("edit")),k.createElement("input",{type:"file",className:"_n",name:"attachment[]",accept:"image/*",ref:"input",onChange:this._handleFileInputChange}))));},_handleAllUploadsCompleted:function(r,s){this.props.onComplete&&this.props.onComplete(r,s.response.payload);},_handleLastUploadFailed:function(r,s){this.props.onFail&&this.props.onFail(r,s);},_handleFileInputChange:function(r){if(r.target.value&&this._uploader){this._uploader.send();this.props.onStart&&this.props.onStart();}}});e.exports=q;},null);
__d("MessengerInfoPanelThreadNameSection.react",["AbstractTextInput.react","immutable","ImmutableObject","ImageBlock.react","LeftRight.react","MercuryThreadTitle.react","MessengerButton.react","MessengerSpinner.react","MessengerThreadPhotoUploader.react","React","cx","fbt","setImmediate"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){b.__markCompiled&&b.__markCompiled();'use strict';var t=h.Map,u=p,v=u.PropTypes,w=p.createClass({displayName:"MessengerInfoPanelThreadNameSection",propTypes:{onThreadNameChange:v.func.isRequired,onThreadPhotoChange:v.func.isRequired,participants:v.instanceOf(t).isRequired,renderedImage:v.element.isRequired,thread:v.instanceOf(i).isRequired,viewer:v.string.isRequired},_clickGuard:(false),getInitialState:function(){return {isEditingName:false,isUploadingPhoto:false,nameValue:''};},componentWillReceiveProps:function(x){if(this.props.thread!==x.thread){var y=this.getInitialState();if(this.state.isEditingName){y.nameValue=this.state.nameValue;y.isEditingName=this.state.isEditingName;}this.setState(y);}},componentDidUpdate:function(x,y){if(y&&this.state.isEditingName&&!y.isEditingName)s(function(){return this.refs.threadNameInput.focusInput();}.bind(this));},render:function(){return (p.createElement(j,{className:"_1wnf",spacing:"medium"},p.createElement("div",{className:(("_uks")+(this.state.isUploadingPhoto?' '+"_ukt":''))},this.props.renderedImage,this.state.isUploadingPhoto?this._renderSpinner():null,p.createElement(o,{onComplete:this._handleThreadPhotoUploadComplete,onFail:this._handleThreadPhotoUploadFail,onStart:this._handleThreadPhotoUploadStart})),p.createElement("div",{className:"_3tkw",onClick:this._handleThreadTitleClick},this.state.isEditingName?this._renderNameInput():(p.createElement(l,{className:"_3tkz",showUnreadCount:false,thread:this.props.thread,useShortName:false,viewer:this.props.viewer})))));},_renderSpinner:function(){return (p.createElement("div",{className:"_ukr"},p.createElement(n,null)));},_handleThreadPhotoUploadComplete:function(x,y){this.setState({isUploadingPhoto:false});this.props.onThreadPhotoChange(y);},_handleThreadPhotoUploadFail:function(x,y){this.setState({isUploadingPhoto:false});},_handleThreadPhotoUploadStart:function(){this.setState({isUploadingPhoto:true});},_handleNameInputChange:function(x){this.setState({nameValue:x.target.value});},_handleNameEdited:function(x){x.stopPropagation();var y=this.state.nameValue;if(y.trim().length===0)return;if(y!==this.props.thread.name)this.props.onThreadNameChange(y);this.setState({isEditingName:false});},_handleThreadTitleClick:function(x){x.stopPropagation();if(!this.state.isEditingName)this.setState({isEditingName:true,nameValue:this.props.thread.name});},_handleEditAbandoned:function(x){if(this._clickGuard){x.preventDefault();x.stopPropagation();this._clickGuard=false;return;}this.setState({isEditingName:false});},_handleMouseDown:function(x){this._clickGuard=true;},_renderNameInput:function(){return (p.createElement(k,{className:"_kck",direction:k.DIRECTION.right},p.createElement("div",{className:"_42ef"},p.createElement(g,{className:"_kcm",onEnter:this._handleNameEdited,onBlur:this._handleEditAbandoned,placeholder:r._("Name This Conversation"),ref:"threadNameInput",onChange:this._handleNameInputChange,value:this.state.nameValue})),p.createElement(m,{className:"_kcl",disabled:this.state.nameValue.trim().length===0,label:r._("Done"),onClick:this._handleNameEdited,onMouseDown:this._handleMouseDown,type:"primary"})));}});e.exports=w;},null);
__d("MessengerInfoPanelNameSection.react",["immutable","ImmutableObject","MessengerInfoPanelContactNameSection.react","MessengerInfoPanelThreadNameSection.react","MessengerThreadImage.react","React"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';var m=g.Map,n=l,o=n.PropTypes,p=50,q=l.createClass({displayName:"MessengerInfoPanelNameSection",propTypes:{contact:o.object,isUserActive:o.bool,lastActive:o.string,onThreadNameChange:o.func.isRequired,onThreadPhotoChange:o.func.isRequired,participants:o.instanceOf(m).isRequired,platform:o.string,thread:o.instanceOf(h).isRequired,viewer:o.string.isRequired},render:function(){return this.props.contact?this._renderContactImageBlock():this._renderThreadImageBlock();},_renderContactImageBlock:function(){return (l.createElement(i,{contact:this.props.contact,isUserActive:this.props.isUserActive,lastActive:this.props.lastActive,platform:this.props.platform,renderedImage:this._renderImage()}));},_renderThreadImageBlock:function(){return (l.createElement(j,{onThreadNameChange:this.props.onThreadNameChange,onThreadPhotoChange:this.props.onThreadPhotoChange,participants:this.props.participants,renderedImage:this._renderImage(),thread:this.props.thread,viewer:this.props.viewer}));},_renderImage:function(){return (l.createElement(k,{participants:this.props.participants,size:p,thread:this.props.thread,viewer:this.props.viewer}));}});e.exports=q;},null);
__d("MessengerSharedPhoto.react",["ReactComponentWithPureRenderMixin","React","cx"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';var j=h,k=j.PropTypes,l=h.createClass({displayName:"MessengerSharedPhoto",mixins:[g],propTypes:{fbid:k.string.isRequired,onClick:k.func.isRequired,uri:k.string.isRequired},render:function(){return (h.createElement("a",{className:"_3m31",href:"#",onClick:this._handleClick,style:{backgroundImage:("url("+this.props.uri+")")}}));},_handleClick:function(){this.props.onClick(this.props.fbid);}});e.exports=l;},null);
__d("MessengerSharedPhotos.react",["ImmutableObject","MessengerSharedPhoto.react","MessengerSpinner.react","MessagesViewer","MessagesViewerSetID","React","URI","cancelAnimationFrame","cx","requestAnimationFrame"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){b.__markCompiled&&b.__markCompiled();'use strict';var q=l,r=q.PropTypes,s=10,t=l.createClass({displayName:"MessengerSharedPhotos",propTypes:{imagesData:r.object.isRequired,isLoadingImages:r.bool.isRequired,thread:r.instanceOf(g).isRequired},_rafID:(null),getInitialState:function(){return {imagesLoaded:s};},componentWillReceiveProps:function(u){if(Object.keys(u.imagesData).length===0)this.setState({imagesLoaded:s});},componentDidUpdate:function(){n(this._rafID);if(this.state.imagesLoaded<Object.keys(this.props.imagesData).length)this._rafID=p(function(){this.setState({imagesLoaded:Math.min(Object.keys(this.props.imagesData).length,this.state.imagesLoaded+s)});}.bind(this));},componentWillUnmount:function(){n(this._rafID);},_viewFullImage:function(u){var v=this.props,w=v.thread,x=v.imagesData,y=new m('/ajax/messaging/attachments/sharedphotos.php').setQueryData({thread_id:w.thread_fbid,image_id:u});j.bootstrapWithConfig({dimensions:x[u].dim,disablePaging:Object.keys(x).length===1,fbid:u,src:x[u].URI,endpoint:y,setID:k.MESSAGES_VIEW_ALL_IN_THREAD});},render:function(){var u=this.props,v=u.isLoadingImages,w=u.imagesData,x=this.state,y=x.imagesLoaded,z;if(v)z=l.createElement("div",{className:"_2n20"},l.createElement(i,null));return (l.createElement("div",null,l.createElement("div",{className:"_40jj"},Object.keys(w).slice(0,y).map(function(aa){return l.createElement(h,{fbid:aa,key:aa,onClick:this._viewFullImage,uri:w[aa].URI});}.bind(this))),z));}});e.exports=t;},null);
__d("MessengerThreadInfoPanel.react",["ImageBlock.react","immutable","ImmutableObject","Link.react","MercuryThreadInfo","MessengerActions","MessengerAddToConversationDialog.react","MessengerConfirmLeaveGroupDialog.react","MessengerContactAdapters","MessengerConfig","MessengerContactList.react","MessengerInfoPanelContactActions.react","MessengerInfoPanelMuteSettingsContainer.react","MessengerInfoPanelNameSection.react","MessengerSharedPhotos.react","ReactComponentWithPureRenderMixin","React","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){b.__markCompiled&&b.__markCompiled();'use strict';var z=h.Map,aa=w,ba=aa.PropTypes,ca=w.createClass({displayName:"MessengerThreadInfoPanel",mixins:[v],propTypes:{contact:ba.instanceOf(i),imagesData:ba.object.isRequired,isUserActive:ba.bool,isLoadingImages:ba.bool.isRequired,lastActive:ba.string,onContactSelect:ba.func,onReportContact:ba.func,onMuteChange:ba.func,onLeaveGroup:ba.func,onThreadNameChange:ba.func.isRequired,onThreadPhotoChange:ba.func.isRequired,participants:ba.instanceOf(z).isRequired,platform:ba.string,thread:ba.instanceOf(i).isRequired,viewer:ba.string.isRequired},getInitialState:function(){return {muteSetting:'1hour'};},componentWillReceiveProps:function(da){if(this.props.thread!==da.thread)this.setState(this.getInitialState());},render:function(){var da;if(p.SharedPhotos)da=w.createElement("div",{className:"_3tk_"},w.createElement("h4",{className:"_3tl0"},y._("Shared Photos")),w.createElement("div",{className:"_3tl1"},w.createElement(u,{imagesData:this.props.imagesData,isLoadingImages:this.props.isLoadingImages,thread:this.props.thread})));return (w.createElement("div",{className:"_3tkv"},w.createElement(t,{contact:this.props.contact,isUserActive:this.props.isUserActive,lastActive:this.props.lastActive,onThreadNameChange:this.props.onThreadNameChange,onThreadPhotoChange:this.props.onThreadPhotoChange,participants:this.props.participants,platform:this.props.platform,thread:this.props.thread,viewer:this.props.viewer}),this._renderOptions(),this.props.thread.is_canonical?this._renderFacebookProfile():this._renderMembers(),this._renderActions(),da));},_renderOptions:function(){if(!this.props.thread.is_subscribed)return null;return (w.createElement("div",{className:"_3tk_"},w.createElement("div",{className:"_3tl1"},w.createElement(s,{thread:this.props.thread,onChange:this.props.onMuteChange}))));},_renderMembers:function(){return (w.createElement("div",{className:"_3tk_"},w.createElement("h4",{className:"_3tl0"},y._("People")),w.createElement("div",{className:"_3tl1"},w.createElement(q,{actionsClass:r,className:"_4wc-",contactAdapter:o.fromMercuryParticipant,listSections:h.OrderedMap([[null,this.props.participants.filter(function(da){return !!da;}).toArray()]]),onSelect:this._handleContactSelect,onAction:this._handleContactAction,viewer:this.props.viewer}),this._renderAddPeopleLink())));},_renderAddPeopleLink:function(){if(!k.canReply(this.props.thread))return null;return (w.createElement(j,{className:"_4rph",onClick:this._handleAddPeopleClick},w.createElement(g,null,w.createElement("div",{className:"_4rpi"}),w.createElement("div",{className:"_4rpj"},y._("Add People")))));},_renderFacebookProfile:function(){if(!this.props.contact||!this.props.contact.href)return null;var da=this.props.contact.type==='page'?y._("Facebook Page"):y._("Facebook Profile");return (w.createElement("div",{className:"_3tk_"},w.createElement("h4",{className:"_3tl0"},da),w.createElement("div",{className:"_3tl1"},w.createElement(j,{className:"_3oh-",href:this.props.contact.href,target:"_blank"},this.props.contact.href.replace('www.','')))));},_renderActions:function(){if(!this.props.thread.is_subscribed||this.props.thread.is_canonical)return null;return (w.createElement("div",{className:"_3tk_"},w.createElement("div",{className:"_3tl1"},w.createElement(j,{className:"_10w4",onClick:this._handleLeaveGroup},y._("Leave Group")))));},_handleMute:function(){this.props.onMuteChange&&this.props.onMuteChange(this.state.muteSetting);},_handleUnmute:function(){this.props.onMuteChange&&this.props.onMuteChange('0');},_handleMuteSettingChange:function(da){this.setState({muteSetting:da});},_handleContactSelect:function(da){this.props.onContactSelect&&this.props.onContactSelect(o.fromMercuryParticipant(da));},_handleLeaveGroup:function(){l.showDialog(n,{onLeave:this.props.onLeaveGroup});},_handleContactAction:function(da,ea){this.props.onContactAction&&this.props.onContactAction(da,o.fromMercuryParticipant(ea));},_handleAddPeopleClick:function(event){event.preventDefault();l.showDialog(m,{thread:this.props.thread,viewer:this.props.viewer});}});e.exports=ca;},null);
__d("MessengerThreadInfoPanelContainer.react",["AsyncDialog","AsyncRequest","immutable","ImmutableObject","MercuryAPIArgsSource","MercuryIDs","MercuryLogMessageType","MercuryMessageActions","MercuryMessageObject","MercurySourceType","MercuryThreadActions","MercuryThreadInfo","MessengerActions","MessengerConfig","MessengerContactActions","MessengerFlexScrollableArea.react","MessengerThreadInfoPanel.react","React","URI"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){b.__markCompiled&&b.__markCompiled();'use strict';var z=x,aa=z.PropTypes,ba=x.createClass({displayName:"MessengerThreadInfoPanelContainer",propTypes:{contactData:aa.object,isVisible:aa.bool,participants:aa.instanceOf(i.Map).isRequired,thread:aa.instanceOf(j).isRequired,viewer:aa.string.isRequired},getInitialState:function(){return {imagesData:{},hasMoreImages:true,isLoadingImages:false};},componentWillMount:function(){this._actions=q.getForFBID(this.props.viewer);this._messageActions=n.getForFBID(this.props.viewer);this._messageObject=o.getForFBID(this.props.viewer);},componentDidMount:function(){this._maybeRequestImages();},componentWillReceiveProps:function(ca){var da=ca.thread,ea=da.thread_fbid;if(this.props.thread.thread_fbid!==ea)this.setState(this.getInitialState(),this._maybeRequestImages);},shouldComponentUpdate:function(ca,da){return true;},componentDidUpdate:function(){this._maybeRequestImages();},render:function(){if(!this.props.isVisible)return null;var ca=this.props.contactData||{},da=this.state,ea=da.imagesData,fa=da.hasMoreImages,ga=da.isLoadingImages;return (x.createElement(v,{className:this.props.className,onScroll:this._maybeRequestImages,ref:"scrollable"},x.createElement(w,{contact:ca.contact,hasMoreImages:fa,imagesData:ea,isLoadingImages:ga,isUserActive:ca.isUserActive,lastActive:ca.lastActive,onContactAction:this._handleContactAction,onContactSelect:this._handleContactSelect,onLeaveGroup:this._handleLeaveGroup,onMuteChange:this._handleMuteChange,onReportContact:this._handleReportContact,onThreadNameChange:this._handleThreadNameChange,onThreadPhotoChange:this._handleThreadPhotoChange,participants:this.props.participants,platform:ca.platform,thread:this.props.thread,viewer:this.props.viewer})));},_maybeRequestImages:function(){if(!t.SharedPhotos)return;var ca=this.state,da=ca.hasMoreImages,ea=ca.isLoadingImages,fa=this.refs,ga=fa.scrollable;if(!da||ea||!ga||(ga&&!ga.isScrolledToBottom()))return;this.setState({isLoadingImages:true},function(){new h().setURI('/ajax/messaging/attachments/sharedphotos.php').setMethod('POST').setData({thread_id:this.props.thread.thread_fbid,offset:Object.keys(this.state.imagesData).length,limit:30}).setHandler(function(ha){var ia=ha.getPayload();this.setState({isLoadingImages:false,hasMoreImages:ia.moreImagesToLoad,imagesData:Object.assign({},this.state.imagesData,ia.imagesData)});}.bind(this)).send();}.bind(this));},_handleMuteChange:function(ca){this._actions.updateMuteSetting(this.props.thread.thread_id,ca);},_handleContactSelect:function(ca){if(l.getUserIDFromParticipantID(ca.uid)!==this.props.viewer){var da=l.getThreadIDFromParticipantID(ca.uid);da&&s.selectThread(da);}},_handleContactAction:function(ca,da){if(l.getUserIDFromParticipantID(da.uid)!==this.props.viewer)switch(ca){case u.MESSAGE:this._handleContactSelect(da);break;case u.PROFILE:var ea=this.props.participants.get(da.uid);if(ea&&ea.href){window.open(ea.href);}else this._handleContactSelect(da);break;case u.REMOVE:if(!r.isEmptyLocalThread(this.props.thread)){var fa=new y('/chat/remove_participants/');fa.addQueryData({uid:l.getUserIDFromParticipantID(da.uid),tid:this.props.thread.thread_fbid});var ga=new h(fa);ga.send();}break;}},_handleReportContact:function(){var ca=new y('/ajax/chat/report.php').addQueryData({id:this.props.contactData.contact.id,src:'messenger.com'});g.send(new h(ca));},_handleLeaveGroup:function(){if(!r.isEmptyLocalThread(this.props.thread)){var ca=this._messageObject.constructLogMessageObject(p.MESSENGER_WEB,this.props.thread.thread_id,m.UNSUBSCRIBE,{removed_participants:[l.getParticipantIDFromUserID(this.props.viewer)]});this._messageActions.send(ca);}},_handleThreadNameChange:function(ca){this._messageActions.send(this._messageObject.constructLogMessageObject(p.MESSENGER_WEB,this.props.thread.thread_id,m.THREAD_NAME,{name:ca}),null,k.MESSENGER);},_handleThreadPhotoChange:function(ca){this._messageActions.send(this._messageObject.constructLogMessageObject(p.MESSENGER_WEB,this.props.thread.thread_id,m.THREAD_IMAGE,{image:ca.metadata[0]}));}});e.exports=ba;},null);
__d("MessengerDetailView.react",["DataTransfer","immutable","MercuryIDs","MercuryParticipants","MercuryThreadInfo","MercuryThreads","MessengerComposerStore","MessengerComposerContainer.react","MessengerConversationContainer.react","MessengerDetailViewHeaderContainer.react","MessengerFlexArea.react","MessengerInfoPanelVisibility","MessengerPresenceStatusUtils","MessengerStateStore","MessengerThreadInfoPanelContainer.react","MessengerView","PresenceStatus","ReactComponentWithPureRenderMixin","React","StoreAndPropBasedStateMixin","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa){b.__markCompiled&&b.__markCompiled();'use strict';var ba=y,ca=ba.PropTypes,da=y.createClass({displayName:"MessengerDetailView",mixins:[x,z(m,t,l,j,w)],propTypes:{activeThreadID:ca.string,view:ca.string,viewer:ca.string.isRequired},statics:{calculateState:function(ea){var fa=ea.activeThreadID,ga=l.getForFBID(ea.viewer),ha=fa?ga.getOrFetch(fa):null,ia=h.Map();if(ha)ia=ia.withMutations(function(ja){ha.participants.forEach(function(ka){ja.set(ka,j.getOrFetch(ka));});});return {composerState:m.getState(),messengerState:t.getState(),contactData:s.getStatusFromCanonicalThread(ia,ha),activeThread:ha,participants:ia};}},getInitialState:function(){return {dropTargetOverlayVisible:false};},componentDidMount:function(){this._infoPanelVisibility=new r();},componentDidUpdate:function(ea,fa){if(fa&&fa.messengerState&&fa.messengerState.infoPanelVisibility!==this.state.messengerState.infoPanelVisibility)this._handleResize();},render:function(){var ea=this._getThreadID();return (y.createElement("div",{className:"_1q5-"},y.createElement(p,{isInfoPanelVisible:this.state.messengerState.infoPanelVisibility,recipients:this.state.composerState.recipients,participants:this.state.participants,thread:this.state.activeThread,view:this.props.view,viewer:this.props.viewer,onResize:this._handleResize,onThreadInfoToggle:this._handleThreadInfoToggle}),y.createElement("div",{className:"_20bp"},y.createElement("div",{className:"_4_j4",onClick:this._handleConversationClick,onDragEnter:this._showDropTargetOverlay,onDragLeave:this._hideDropTargetOverlay,onDragOver:this._showDropTargetOverlay,onDrop:this._handleDrop},this._renderMainView(ea),this._renderFooterView(ea),y.createElement("div",{className:((!this.state.dropTargetOverlayVisible?"hidden_elem":'')+(' '+"_2fg6"))})),this._renderInfoPanel())));},_renderMainView:function(ea){if(!ea)return y.createElement(q,{ref:"emptyContainer"});return (y.createElement(o,{className:"_1wfr",contact:this.state.contactData?this.state.contactData.contact:null,participants:this.state.participants,ref:"conversationContainer",thread:this.state.activeThread,threadID:ea,viewer:this.props.viewer}));},_renderFooterView:function(ea){return (y.createElement(n,{canReply:!!(this.props.view===v.DETAIL.COMPOSE||(this.state.activeThread&&k.canReply(this.state.activeThread))),onResize:this._handleResize,participants:this.state.participants,recipients:this.state.composerState.recipients,ref:"composer",threadID:ea,threadFBID:this.state.activeThread?this.state.activeThread.thread_fbid:null,thread:this.state.activeThread,view:this.props.view,viewer:this.props.viewer}));},_renderInfoPanel:function(){if(!this.state.activeThread||!this.state.participants)return null;return (y.createElement("div",{className:(("_4_j5")+(!this.state.messengerState.infoPanelVisibility?' '+"hidden_elem":''))},y.createElement(u,{className:"_4_j9",contactData:this.state.contactData,isVisible:this.state.messengerState.infoPanelVisibility,participants:this.state.participants,thread:this.state.activeThread,viewer:this.props.viewer})));},_handleConversationClick:function(){if(window.getSelection().toString()==='')this.refs.composer.focusInput();},_showDropTargetOverlay:function(ea){ea&&ea.preventDefault();this.setState({dropTargetOverlayVisible:true});},_hideDropTargetOverlay:function(ea){ea&&ea.preventDefault();this.setState({dropTargetOverlayVisible:false});this.refs.composer.resetDrag();},_handleDrop:function(ea){this._hideDropTargetOverlay(ea);var fa=new g(ea.nativeEvent.dataTransfer),ga=fa.getFiles();if(ga.length)this.refs.composer.handleFileUpload(ga);},_handleResize:function(){var ea=this.refs.conversationContainer,fa=this.refs.emptyContainer;if(ea){ea.handleResize();}else if(fa)fa.recalculateHeight();},_getThreadID:function(){var ea=this.state.composerState.recipients;if(this.props.view===v.DETAIL.COMPOSE&&ea.size===1)return i.getThreadIDFromUserID(ea.first().getUniqueID());if(this.props.view===v.DETAIL.THREAD)return this.props.activeThreadID;return null;},_handleThreadInfoToggle:function(){this._infoPanelVisibility.toggle();}});e.exports=da;},null);
__d("MessengerDialogStore",["MessengerActions","MessengerStore"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();for(var i in h)if(h.hasOwnProperty(i))k[i]=h[i];var j=h===null?null:h.prototype;k.prototype=Object.create(j);k.prototype.constructor=k;k.__superConstructor__=h;function k(){"use strict";h.call(this);this.$MessengerDialogStore0={dialogClass:null,dialogProps:null};}k.prototype.getState=function(){"use strict";return this.$MessengerDialogStore0;};k.prototype.__onDispatch=function(l){"use strict";switch(l.type){case g.Types.SHOW_DIALOG:this.$MessengerDialogStore0.dialogClass=l.dialogClass;this.$MessengerDialogStore0.dialogProps=l.dialogProps;this.emitChange();break;case g.Types.HIDE_DIALOG:if(l.dialogClass&&this.$MessengerDialogStore0.dialogClass!=l.dialogClass)break;this.$MessengerDialogStore0.dialogClass=null;this.$MessengerDialogStore0.dialogProps=null;this.emitChange();break;}};e.exports=new k();},null);
__d("MessengerDialogContainer.react",["MessengerDialogStore","PureStoreBasedStateMixin","React","ReactLayeredComponentMixin"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';var k=i.createClass({displayName:"MessengerDialogContainer",mixins:[h(g),j],statics:{calculateState:function(){return g.getState();}},renderLayers:function(){if(!this.state.dialogClass)return {};var l=this.state.dialogClass;return {dialog:i.createElement(l,i.__spread({},this.state.dialogProps))};},render:function(){return null;}});e.exports=k;},null);
__d("MessengerSettingsDialog.react",["ImageBlock.react","Link.react","MercuryIDs","MercuryParticipants","MessengerActions","MessengerButton.react","MessengerCheckboxInput.react","MessengerConfig","MessengerContactImage.react","MessengerDesktopNotifications","MessengerDialog.react","MessengerDialogButton.react","MessengerDialogHeader.react","MessengerDialogTitle.react","MessengerSettingsActions","MessengerSettingsStore","MessengerSpinner.react","React","StoreAndPropBasedStateMixin","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa){b.__markCompiled&&b.__markCompiled();'use strict';var ba=x,ca=ba.PropTypes,da=50,ea=x.createClass({displayName:"MessengerSettingsDialog",mixins:[y(j,v)],propTypes:{viewer:ca.string.isRequired},statics:{calculateState:function(fa){return {viewerParticipant:j.getOrFetch(i.getParticipantIDFromUserID(fa.viewer)),settings:v.getSettings()};}},getInitialState:function(){return {desktopNotifsDenied:p.isDenied(),desktopNotifsGranted:p.isGranted()};},render:function(){return (x.createElement(q,{onToggle:this._handleToggle,ref:"dialog",type:"default",width:544},x.createElement(s,null,x.createElement(t,null,aa._("Settings")),x.createElement(r,{label:aa._("Done"),onClick:this._handleDone,type:"primary"})),x.createElement("div",{className:"_374b"},x.createElement("div",{className:"_374c"},aa._("Account")),x.createElement("div",{className:"_374d"},this._renderAccountSection())),x.createElement("div",{className:"_374b"},x.createElement("div",{className:"_374c"},aa._("Sounds")),x.createElement("div",{className:"_374d"},x.createElement(m,{checked:this.state.settings.sound_enabled,onChange:this._handleSoundChange}),x.createElement("span",{className:"_1pr_"},this.state.settings.sound_enabled?aa._("On"):aa._("Off")))),this._renderNotificationsSection(),x.createElement("div",{className:"_374b"},x.createElement("div",{className:"_374c"},aa._("Blocking")),x.createElement("div",{className:"_374d"},x.createElement(h,{href:"https://www.facebook.com/settings?tab=blocking",target:"_blank"},aa._("Manage on Facebook"))))));},_renderAccountSection:function(){if(!this.state.viewerParticipant)return x.createElement(w,null);var fa=this.state.viewerParticipant;return (x.createElement(g,null,x.createElement(o,{isMessengerUser:fa.is_messenger_user,size:da,src:fa.big_image_src||fa.image_src}),x.createElement("div",{className:"_1ps0"},fa.name)));},_renderNotificationsSection:function(){if(!p.isSupported()||!n.EnableDesktopNotifs)return null;return (x.createElement("div",{className:(("_374b")+(this.state.desktopNotifsDenied?' '+"_2bd0":''))},x.createElement("div",{className:"_374c"},aa._("Notifications")),x.createElement("div",{className:"_374d"},this._renderNotificationsContent())));},_renderNotificationsContent:function(){if(this.state.desktopNotifsDenied){return (aa._("You can allow Messenger to send you desktop notifications from your browser preferences."));}else return (x.createElement(l,{label:this.state.settings.desktopNotifsEnabled&&this.state.desktopNotifsGranted?aa._("Turn off desktop notifications"):aa._("Turn on desktop notifications"),onClick:this._handleNotificationsChange,type:"secondary"}));},_handleSoundChange:function(event){u.changeSettings({sound_enabled:event.target.checked});},_handleNotificationsChange:function(){u.changeDesktopNotifs(!this.state.settings.desktopNotifsEnabled,this._handleDenied);},_handleDenied:function(){this.setState({desktopNotifsDenied:true});},_handleDone:function(event){event.preventDefault();k.hideDialog();},_handleToggle:function(fa){if(!fa)k.hideDialog();}});e.exports=ea;},null);
__d("XMessengerDotComLogoutController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/logout\/",{});},null);
__d("MessengerSettingsMenu.react",["AsyncDialog","AsyncRequest","CacheStorage","Form","Link.react","MessagingTag","MessengerActions","MessengerConfig","MessengerMenu.react","MessengerPopoverMenu.react","MessengerSettingsDialog.react","ReactComponentWithPureRenderMixin","React","Run","XMessengerDotComLogoutController","fbt","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){b.__markCompiled&&b.__markCompiled();'use strict';var x=o.Item,y=o.Separator,z=s,aa=z.PropTypes,ba=s.createClass({displayName:"MessengerSettingsMenu",mixins:[r],propTypes:{folder:aa.string.isRequired,viewer:aa.string.isRequired},render:function(){var ca=(s.createElement(o,null,s.createElement(x,{label:v._("Settings"),onclick:this._handleSettingsClick}),this._renderFolderChange(),s.createElement(y,null),s.createElement(x,{href:"https://www.messenger.com/about",label:v._("About"),target:"_blank"}),s.createElement(x,{href:"https://www.facebook.com/policies",label:v._("Terms"),target:"_blank"}),s.createElement(x,{href:"https://www.facebook.com/privacy/explanation",label:v._("Privacy Policy"),target:"_blank"}),s.createElement(x,{href:"https://www.facebook.com/help/cookies",label:v._("Cookie Policy"),target:"_blank"}),s.createElement(y,null),s.createElement(x,{href:"https://www.facebook.com/help/735006619902401",label:v._("Help"),target:"_blank"}),s.createElement(x,{label:v._("Report a Problem"),onclick:this._handleReportBugClick}),s.createElement(y,null),s.createElement(x,{label:v._("Log Out"),onclick:this._handleLogOut})));return (s.createElement(p,{menu:ca},s.createElement(k,{className:"_30yy _2fug",title:v._("Settings, privacy policy, help and more")})));},_renderFolderChange:function(){if(!n.CoreGraphEnabled)return null;return (s.createElement(x,{label:this.props.folder===l.INBOX?v._("Show Message Requests"):v._("Show Recent Messages"),onclick:this._handleChangeFolderClick}));},_handleSettingsClick:function(ca){ca.preventDefault();m.showDialog(q,{viewer:this.props.viewer});},_handleReportBugClick:function(ca){ca.preventDefault();g.send(new h('/ajax/bugs/report'));},_handleLogOut:function(){var ca=new i('localstorage');t.onUnload(function(){ca.clear();});j.post(u.getURIBuilder().getURI(),{});},_handleChangeFolderClick:function(ca){m.changeFolder(this.props.folder===l.INBOX?l.PENDING:l.INBOX);}});e.exports=ba;},null);
__d("MessengerMasterViewHeader.react",["Image.react","Link.react","MessengerActions","MessengerSettingsMenu.react","MessengerURIConstants","MessengerView","ReactComponentWithPureRenderMixin","React","cx","fbt","ix"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){b.__markCompiled&&b.__markCompiled();'use strict';var r=n,s=r.PropTypes,t=q('/images/mercury/clients/messenger/header/NewMessage.png'),u=n.createClass({displayName:"MessengerMasterViewHeader",mixins:[m],propTypes:{folder:s.string.isRequired,viewer:s.string.isRequired},render:function(){return (n.createElement("div",{className:"_36ic"},n.createElement("div",{className:"_4kzu"},n.createElement(j,{folder:this.props.folder,viewer:this.props.viewer})),n.createElement("div",{className:"_1tqi"},p._("Messenger")),n.createElement(h,{"aria-label":p._("New Message"),className:"_30yy _4kzv",href:k.COMPOSE_SUBPATH,onClick:this._handleAddClick},n.createElement(g,{src:t}))));},_handleAddClick:function(v){v.preventDefault();i.changeDetailView(l.DETAIL.COMPOSE);}});e.exports=u;},null);
__d("P2PJewelBanner.react",["Image.react","Layout.react","Link.react","React","TooltipLink.react","XUIGrayText.react","cx","emptyFunction","fbt","ix"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){b.__markCompiled&&b.__markCompiled();'use strict';var q=h.FillColumn,r=h.Column,s=j,t=s.PropTypes,u=j.createClass({displayName:"P2PJewelBanner",propTypes:{actionURI:t.oneOfType([t.string,t.object]).isRequired,actionText:t.string.isRequired,bodyText:t.oneOfType([t.string,t.object]).isRequired,icon:t.oneOf(['warning','coin']),isDismissable:t.bool,onClick:t.func.isRequired,onClose:t.func,titleText:t.string.isRequired},getDefaultProps:function(){return {actionURI:'#',isDismissable:false,onClick:n,onClose:n};},getImagePath:function(){var v=this.props.icon;if(v==="warning"){return p("/images/p2p/receiver-risk-notification.png");}else return p("/images/p2p/receiver-nux-notification.png");},handleCloseClick:function(v){v.stopPropagation();if(this.props.onClose)this.props.onClose();},renderCloseButton:function(){return (j.createElement(k,{alignH:"center",className:"_47d8",href:"#",onClick:this.handleCloseClick,position:"above",tooltip:o._("Dismiss")},j.createElement(g,{className:"_47dg",height:7,src:p('/images/p2p/jewel-banner-close.png'),width:7})));},render:function(){var v;if(this.props.isDismissable)v=this.renderCloseButton();return (j.createElement("div",{className:"_5d0n",onClick:this.props.onClick},v,j.createElement(h,null,j.createElement(r,{className:"_5d0o"},j.createElement(g,{className:"_5d0q",height:28,src:this.getImagePath(),width:28})),j.createElement(q,{className:"_47di"},j.createElement(l,{display:"block",shade:"medium",weight:"bold"},this.props.titleText),j.createElement(l,{display:"block",shade:"medium"},this.props.bodyText),j.createElement(i,{className:"_5d0t",href:this.props.actionURI,target:"_blank"},this.props.actionText)))));}});e.exports=u;},null);
__d("P2PPendingPushFailJewelBanner.react",["P2PJewelBanner.react","P2PTransferParam","XP2PTransactionDetailController","React","fbt"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l=j,m=l.PropTypes,n=j.createClass({displayName:"P2PPendingPushFailJewelBanner",propTypes:{transfer:m.object.isRequired},getActionText:function(){return k._("Update Card");},render:function(){var o=this.props.transfer;return (j.createElement(g,{actionText:k._("Update Card"),bodyText:k._("It looks like your card is expired or invalid. Please update it to get {currency}{amount} from {sender_name}.",[k.param("currency",o.currency),k.param("amount",o.amount),k.param("sender_name",o.sender.name)]),icon:"warning",actionURI:(i.getURIBuilder()).setString('id',o[h.TRANSFER_ID]).getURI(),titleText:k._("Update Your Card")}));}});e.exports=n;},null);
__d("P2PLoadingMask.react",["React","XUISpinner.react","cx"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';var j=g,k=j.PropTypes,l=g.createClass({displayName:"P2PLoadingMask",propTypes:{visible:k.bool},getDefaultProps:function(){return {visible:false};},render:function(){if(!this.props.visible)return null;return (g.createElement("div",{className:"_3de"},g.createElement(h,{background:"dark",size:"large",className:"_3df"}),g.createElement("div",{className:"_3dg"})));}});e.exports=l;},null);
__d("P2PAcceptMoneyDialog.react",["BootloadedComponent.react","Bootloader","CurrentEnvironment","P2PDialog.react","P2PLoadingMask.react","JSResource","React","Run","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();'use strict';var p=m,q=p.PropTypes,r=i.messengerdotcom,s=m.createClass({displayName:"P2PAcceptMoneyDialog",propTypes:{creditCards:q.array.isRequired,useRedesignForm:q.bool,onClose:q.func,transfer:q.object},statics:{preload:function(){n.onAfterLoad(function(){h.loadModules(["P2PAcceptMoneyDialogImpl.react"],function(){});});}},render:function(){return (m.createElement(g,m.__spread({bootloadLoader:l('P2PAcceptMoneyDialogImpl.react'),bootloadPlaceholder:this._renderPlaceholder()},this.props)));},_renderPlaceholder:function(){return (m.createElement(j,{className:(("_309")+(r?' '+"_5ktw":'')),layerHideOnBlur:false,repositionOnUpdate:true,shown:true,width:r?350:300},m.createElement("div",{className:"_3w2b"},m.createElement(k,{visible:true}))));}});e.exports=s;},null);
__d("P2PCreditCard",["CreditCardFormParam","CreditCardTypeEnum","PaymentMethodUtils","fbt","ix"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l={visa:{image:k('/images/payments/icons/visa.png'),imageLarge:k('/images/payments/icons/visa-lg.png'),name:'Visa'},mc:{image:k('/images/payments/icons/mc.png'),imageLarge:k('/images/payments/icons/mc-lg.png'),name:'MasterCard'},disc:{image:k('/images/payments/icons/disc.png'),imageLarge:k('/images/payments/icons/disc-lg.png'),name:'Discover'},jcb:{image:k('/images/payments/icons/jcb.png'),imageLarge:k('/images/payments/icons/jcb-lg.png'),name:'JCB'},amex:{image:k('/images/payments/icons/amex.png'),imageLarge:k('/images/payments/icons/amex-lg.png'),name:'American Express'},unknown:{image:k('/images/brands/credit_card/credit_32.png'),imageLarge:k('/images/brands/credit_card/credit_32.png'),name:j._("Unknown Card Type")}};function m(n){this.setCredentialId(n[g.CREDENTIAL_ID]);this.setCardType(n[g.CARD_TYPE]);this.setCreditCardNumber(n[g.CARD_NUMBER]);this.setSelected(n.selected);this.setZipCode(n[g.ZIP]);this.setCSC(n[g.CSC]);this.setExp(n[g.CARD_EXPIRATION]);this.setIsPreset(n.isPreset);this.setIsVerified(n.isVerified);this.setIsMobileVerified(n.isMobileVerified);}m.prototype.getCreditCardNumber=function(){return this[g.CARD_NUMBER];};m.prototype.setCreditCardNumber=function(n){n=n.replace(/ /g,'');this.setCardProviderProps(this[g.CARD_TYPE],n);n=n.substr(n.length-4);this[g.CARD_NUMBER]=n;};m.prototype.setCardProviderProps=function(n,o){var p=this.$P2PCreditCard0(n,o);if(l[p]){this.setImage(l[p].image);this.setImageLarge(l[p].imageLarge);this.setName(l[p].name);}};m.prototype.getExp=function(){return this[g.CARD_EXPIRATION];};m.prototype.getExpFormatted=function(){var n=this[g.CARD_EXPIRATION];return n?n[g.MONTH]+'/'+n[g.YEAR]:'';};m.prototype.getExpFormattedShort=function(){var n=this[g.CARD_EXPIRATION],o='';if(n&&n[g.MONTH]&&n[g.YEAR]){o=n[g.MONTH]+'/';if(n[g.YEAR].length===4){o+=n[g.YEAR].substr(2);}else o+=n[g.YEAR];}return o;};m.prototype.setExp=function(n){if(!n)return;var o,p,q={};q[g.MONTH]=n[g.MONTH];q[g.YEAR]=n[g.YEAR];if(q[g.MONTH]&&q[g.MONTH].length===1)q[g.MONTH]='0'+q[g.MONTH];if(q[g.YEAR]&&q[g.YEAR].length===2){o=(new Date()).getFullYear()+'';p=o.substr(0,2);q[g.YEAR]=p+q[g.YEAR];}this[g.CARD_EXPIRATION]=q;};m.prototype.getCSC=function(){return this[g.CSC];};m.prototype.setCSC=function(n){this[g.CSC]=n;};m.prototype.getZipCode=function(){return this[g.ZIP];};m.prototype.setZipCode=function(n){this[g.ZIP]=n;};m.prototype.getSelected=function(){return this.$P2PCreditCard1;};m.prototype.setSelected=function(n){this.$P2PCreditCard1=n;};m.prototype.getCardType=function(){return this[g.CARD_TYPE];};m.prototype.setCardType=function(n){this[g.CARD_TYPE]=n;this.setCardProviderProps(n,this[g.CARD_NUMBER]);};m.prototype.getCredentialId=function(){return this[g.CREDENTIAL_ID];};m.prototype.setCredentialId=function(n){this[g.CREDENTIAL_ID]=n;};m.prototype.$P2PCreditCard0=function(n,o){var p='default',q,r;if(n){q=Object.keys(h).filter(function(s){return h[s]===n;})[0];p=this.$P2PCreditCard2(q);}else if(o){r=i.getCardType(o);if(r)p=r.name;}return p;};m.prototype.getImage=function(){return this.$P2PCreditCard3||l.unknown.image;};m.prototype.setImage=function(n){this.$P2PCreditCard3=n;};m.prototype.getImageLarge=function(){return this.$P2PCreditCard4||l.unknown.imageLarge;};m.prototype.setImageLarge=function(n){this.$P2PCreditCard4=n;};m.prototype.getName=function(){return this.$P2PCreditCard5||l.unknown.name;};m.prototype.setName=function(n){this.$P2PCreditCard5=n;};m.prototype.getIsPreset=function(){return this.$P2PCreditCard6;};m.prototype.setIsPreset=function(n){this.$P2PCreditCard6=n||false;};m.prototype.$P2PCreditCard2=function(n){switch(n){case 'VISA':n='visa';break;case 'AMERICANEXPRESS':n='amex';break;case 'MASTERCARD':n='mc';break;case 'DISCOVER':n='disc';break;case 'JCB':n='jcb';break;default:n='unknown';break;}return n;};m.prototype.getCreditCardNumberFormatted=function(){return '*'+this[g.CARD_NUMBER];};m.prototype.getDetailsFormatted=function(){return (this.getName()+' '+this.getCreditCardNumberFormatted());};m.prototype.getCreditCardNumberMask=function(){return '**** **** **** '+this[g.CARD_NUMBER];};m.prototype.getMaxCSCLength=function(){var n=this.$P2PCreditCard0(this[g.CARD_TYPE],this[g.CARD_NUMBER]);return n==='amex'?4:3;};m.prototype.getIsVerified=function(){return this.$P2PCreditCard7||false;};m.prototype.setIsVerified=function(n){this.$P2PCreditCard7=n;};m.prototype.getIsMobileVerified=function(){return this.$P2PCreditCard8||false;};m.prototype.setIsMobileVerified=function(n){this.$P2PCreditCard8=n;};m.prototype.isExpired=function(){var n=this.getExp();if(!n)return false;var o=n,p=o.month,q=o.year,r=new Date(),s=r.getFullYear()+'',t=(r.getMonth()+1)+'';t=t.length===1?'0'+t:t;return q<s||(s===q&&p<t);};e.exports=m;},null);
__d("P2PCreditCardStore",["P2PActionConstants","Arbiter","CreditCardFormParam","ChannelConstants","EventEmitter","ImmutableObject","P2PActions","P2PAPI","P2PChannelType","P2PCreditCard","P2PDispatcher"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){b.__markCompiled&&b.__markCompiled();'use strict';var r,s,t,u,v,w,x,y;function z(ea,fa){if(ea)y[ea]=new l(fa);}function aa(ea,fa){if(ea)y[ea]={error:fa};}for(var ba in k)if(k.hasOwnProperty(ba))da[ba]=k[ba];var ca=k===null?null:k.prototype;da.prototype=Object.create(ca);da.prototype.constructor=da;da.__superConstructor__=k;function da(){k.call(this);v=false;w=false;t=[];x=true;y={};u=q.register(this.onEventDispatched.bind(this));r=h.subscribe(j.getArbiterType(o.CREDIT_CARD_CHANGED),this.handleChannelCreditCardChanged.bind(this));s=h.subscribe(j.getArbiterType(o.CREDIT_CARD_DELETED),this.handleChannelCreditCardDeleted.bind(this));}da.prototype.onEventDispatched=function(ea){var fa=ea.data,ga=ea.type;switch(ga){case g.CREDIT_CARDS_UPDATED:this.handleCreditCardsUpdated(fa);this.emit('change');break;case g.CHANNEL_EVENTS_ALLOWED:this.handleChannelEventsAllowed();break;case g.CHANNEL_EVENTS_IGNORED:this.handleChannelEventsIgnored();break;case g.CREDIT_CARD_ADDED:this.handleCreditCardAdded(fa);this.emit('change');break;case g.CREDIT_CARD_ADDED_ERROR:this.handleCreditCardAddedError(fa);this.emit('change');break;case g.CREDIT_CARD_DELETED:this.handleCreditCardDeleted(fa);this.emit('change');break;case g.CREDIT_CARD_DELETED_ERROR:this.handleCreditCardDeletedError(fa);this.emit('change');break;case g.CREDIT_CARD_UPDATED:this.handleCreditCardUpdated(fa);this.emit('change');break;case g.CREDIT_CARD_UPDATED_ERROR:this.handleCreditCardUpdatedError(fa);this.emit('change');break;case g.PRESET_CREDIT_CARD_UPDATED:this.handlePresetCreditCardUpdated(fa);this.emit('change');break;case g.PRESET_CREDIT_CARD_UPDATED_ERROR:this.handlePresetCreditCardUpdatedError(fa);this.emit('change');break;case g.CREDIT_CARD_VERIFIED:this.handleCreditCardVerified(fa);this.emit('change');break;case g.CREDIT_CARD_VERIFIED_ERROR:this.handleCreditCardVerifiedError(fa);this.emit('change');break;case g.BIN_NUMBER_VALIDATED:this.handleBINNumberValidated(fa);this.emit('change');break;case g.BIN_NUMBER_VALIDATED_ERROR:this.handleBINNumberValidatedError(fa);this.emit('change');break;}};da.prototype.getAsyncRequestState=function(){return y;};da.prototype.isCreditCardsFetchComplete=function(){return v;};da.prototype.handleCreditCardsUpdated=function(ea){v=true;t=ea.map(function(fa){return new p(fa);});};da.prototype.handleCreditCardAdded=function(ea){z(ea.requestID,ea);if(!this.getCreditCardByCredentialID(ea[i.CREDENTIAL_ID]))t.push(new p(ea));};da.prototype.handleChannelEventsIgnored=function(){x=false;};da.prototype.handleChannelEventsAllowed=function(){x=true;};da.prototype.handleChannelCreditCardChanged=function(ea,fa){if(x&&!this.getCreditCardByCredentialID(fa[i.CREDENTIAL_ID]))n.getAllCreditCards();};da.prototype.handleCreditCardAddedError=function(ea){aa(ea.requestID,ea.errors);};da.prototype.handleCreditCardDeleted=function(ea){var fa=ea[i.CREDENTIAL_ID];z(ea.requestID,ea);t=t.filter(function(ga){return ga.getCredentialId()!==fa;});};da.prototype.handleChannelCreditCardDeleted=function(ea,fa){fa=fa.obj;m.deleteCreditCard(fa);};da.prototype.handleCreditCardDeletedError=function(ea){aa(ea.requestID,ea.error);};da.prototype.handleCreditCardUpdated=function(ea){z(ea.requestID,ea);var fa=this.getCreditCardByCredentialID(ea[i.CREDENTIAL_ID]);if(fa){fa.setExp(ea[i.CARD_EXPIRATION]);fa.setZipCode(ea[i.ZIP]);}};da.prototype.handleCreditCardUpdatedError=function(ea){aa(ea.requestID,ea.errors);};da.prototype.handlePresetCreditCardUpdated=function(ea){var fa=ea[i.CREDENTIAL_ID];z(ea.requestID,ea);var ga=t.filter(function(ia){return ia.getIsPreset();})[0];if(ga)ga.setIsPreset(false);var ha=this.getCreditCardByCredentialID(fa);if(ha)ha.setIsPreset(true);};da.prototype.handlePresetCreditCardUpdatedError=function(ea){aa(ea.requestID,ea.error);};da.prototype.handleCreditCardVerified=function(ea){z(ea.requestID,ea);var fa=this.getCreditCardByCredentialID(ea[i.CREDENTIAL_ID]);if(fa)fa.setIsVerified(true);};da.prototype.handleCreditCardVerifiedError=function(ea){aa(ea.requestID,ea.error);};da.prototype.handleBINNumberValidated=function(ea){z(ea.requestID,ea);};da.prototype.handleBINNumberValidatedError=function(ea){aa(ea.requestID,ea.error);};da.prototype.getAll=function(){if(!w){w=true;n.getAllCreditCards();}return t;};da.prototype.getAllSettingsEligible=function(){var ea=this.getAll();return ea.filter(function(fa){return fa.getIsVerified()||fa.getIsMobileVerified();});};da.prototype.getPresetCard=function(){var ea=this.getAll();return ea.filter(function(fa){return fa.getIsPreset();})[0];};da.prototype.getCreditCardByCredentialID=function(ea){return t.filter(function(fa){return fa.getCredentialId()===ea;})[0];};e.exports=new da();},null);
__d("P2PTimeBasedAcceptMessage.react",["React","fbt"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';var i=g,j=i.PropTypes,k=g.createClass({displayName:"P2PTimeBasedAcceptMessage",propTypes:{transfer:j.object.isRequired},render:function(){var l=this.props.transfer,m=l.creationTime*1000,n=(1000*60*60*24),o=Date.now(),p=(o-m)/n,q=Math.max(14-Math.floor(p),1),r;if(p<=5){r=h._("Add a debit card and it'll go straight to your bank.");}else if(p<=11){r=h._("This money will be sent back in {days left} days. Add a debit card to accept it.",[h.param("days left",q)]);}else r=h._({"day":"You have {days left} day to add a debit card before the money is sent back to {sender_name}.","days":"You have {days left} days to add a debit card before the money is sent back to {sender_name}."},[h.param("days left",q),h['enum'](q===1?'day':'days',{day:"day",days:"days"}),h.param("sender_name",l.sender.name)]);return g.createElement("div",null,r);}});e.exports=k;},null);
__d("P2PPendingRecipientNUXJewelBanner.react",["P2PAcceptMoneyDialog.react","P2PActions","P2PCreditCardStore","P2PJewelBanner.react","P2PTimeBasedAcceptMessage.react","React","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();'use strict';var n=l,o=n.PropTypes,p=l.createClass({displayName:"P2PPendingRecipientNUXJewelBanner",propTypes:{transfer:o.object.isRequired},getInitialState:function(){return {creditCards:i.getAll()};},creditCardStoreSub:(null),componentDidMount:function(){this.creditCardStoreSub=i.addListener('change',this.onCreditCardStoreChange);},componentWillUnmount:function(){if(this.creditCardStoreSub){this.creditCardStoreSub.remove();this.creditCardStoreSub=null;}},onCreditCardStoreChange:function(){var q={creditCards:i.getAll()};if(this.isMounted())this.setState(q);},handleClick:function(){this.showAcceptMoneyDialog();},showAcceptMoneyDialog:function(){h.showDialog(g,{creditCards:this.state.creditCards,onClose:h.hideDialog,transfer:this.props.transfer});},renderTimeBasedMessage:function(){return (l.createElement(k,{transfer:this.props.transfer}));},render:function(){var q=this.props.transfer;if(!i.isCreditCardsFetchComplete())return null;return (l.createElement(j,{actionText:m._("Add Debit Card"),bodyText:this.renderTimeBasedMessage(),icon:"coin",onClick:this.handleClick,titleText:m._("Accept {currency}{amount} from {sender_name}.",[m.param("currency",q.currency),m.param("amount",q.amount),m.param("sender_name",q.sender.name)])}));}});e.exports=p;},null);
__d("P2PVerificationFlowHelper",["AsyncDialog","AsyncRequest","P2PAPI","P2PTransferParam","emptyFunction"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=null,m=null,n=null,o={startVerificationFlow:function(p,q,r){l=p;m=q;n=r||k;g.send(new h('/p2p/verify/dialog/?id='+p));},setupFlowExitHandler:function(p,q,r,s){var t=function(w){n(w);l=null;m=null;n=null;p.destroy();q.destroy();};if(r){p.subscribe('hide',function(){t(s);});}else{var u=false,v=false;p.subscribe('confirm',function(){u=true;});p.subscribe('hide',function(){if(u){p.destroy();q.destroy();}else if(m){q.show();}else t(false);});q.subscribe('confirm',function(){v=true;var w={};w[j.TRANSFER_ID]=l;i.cancelTransaction({formData:w});t(false);});q.subscribe('hide',function(){if(!v)p.show();});}}};e.exports=o;},null);
__d("P2PPendingRecipientVerificationJewelBanner.react",["P2PJewelBanner.react","P2PTransferParam","P2PVerificationFlowHelper","React","fbt"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l=j,m=l.PropTypes,n=j.createClass({displayName:"P2PPendingRecipientVerificationJewelBanner",propTypes:{transfer:m.object.isRequired},handleClick:function(){i.startVerificationFlow(this.props.transfer[h.TRANSFER_ID],false);},render:function(){return (j.createElement(g,{actionText:k._("Confirm Info"),bodyText:k._("To accept the money {sender_name} sent you, please confirm your information.",[k.param("sender_name",this.props.transfer.sender.name)]),icon:"warning",onClick:this.handleClick,titleText:k._("Please Confirm Your Info")}));}});e.exports=n;},null);
__d("P2PNUXRendererUtils",["MercuryConstants","CurrentUser","ImmutableObject","MercuryAttachmentType","P2PTransferParam","P2PTransferStatus","StoryAttachmentStyle"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();'use strict';var n=g.MercurySupportedShareType,o={getTransferFromMessage:function(p){var q,r;if(!p||!p.attachments||!p.attachments.length)return;r=p.attachments[0];if(this.isShareAttachment(r)){q=r.share.target;}else if(r.share_data_type===n.FB_ORION)q=r.metadata;if(q)q=new i(q);return q;},isShareAttachment:function(p){return !!(typeof p!=='string'&&p.attach_type==j.SHARE&&p.share&&p.share.style_list&&p.share.style_list.indexOf(m.ORION)>=0);},doesNUXNeedCreditCards:function(p){var q=h.getID()===p.sender.id;return (!q&&p[k.STATUS]===l.PENDING_RECIPIENT_NUX);},isRecipientActionableStatus:function(p){var q=p[k.STATUS],r=h.getID()===p.sender.id;return (!r&&(q===l.PENDING_RECIPIENT_NUX||q===l.PENDING_RECIPIENT_VERIFICATION||q===l.PENDING_PUSH_FAIL));}};e.exports=o;},null);
__d("P2PTransferStore",["Arbiter","P2PActionConstants","ChannelConstants","CurrentUser","CreditCardFormParam","EventEmitter","ImmutableObject","P2PActions","P2PAPI","P2PChannelType","P2PCreditCard","P2PDispatcher","P2PNUXRendererUtils","P2PTransferParam","P2PTransferStatus","Set","MercuryThreadInformer"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){b.__markCompiled&&b.__markCompiled();'use strict';var w=b('MercuryThreadInformer').get(),x,y,z,aa,ba,ca,da,ea,fa=false,ga=false,ha=new v();function ia(na,oa){if(na)ea[na]=new m(oa);}function ja(na,oa){if(na)ea[na]={error:oa};}for(var ka in l)if(l.hasOwnProperty(ka))ma[ka]=l[ka];var la=l===null?null:l.prototype;ma.prototype=Object.create(la);ma.prototype.constructor=ma;ma.__superConstructor__=l;function ma(){l.call(this);x=false;z=[];ea={};ba=g.subscribe(i.getArbiterType(p.TRANSFER_STATUS_CHANGED),this.handleChannelTransferStatusChanged.bind(this));ca=w.subscribe('messages-received',this.handleMessageReceived.bind(this));aa=r.register(this.onEventDispatched.bind(this));}ma.prototype.onEventDispatched=function(na){var oa=na.data,pa=na.type;switch(pa){case h.TRANSFERS_UPDATED:this.handleTransfersUpdated(oa);this.emit('change');break;case h.TRANSFERS_UPDATED_ERROR:this.handleTransfersUpdatedError(oa);this.emit('change');break;case h.NUX_TRANSFERS_UPDATED:this.handleNUXTransfersUpdated(oa);this.emit('change');break;case h.TRANSFER_ADDED:this.handleTransferAdded(oa);this.emit('change');break;case h.TRANSFER_UPDATED:this.handleTransferUpdated(oa);this.emit('change');break;case h.TRANSFER_ACCEPTED:this.handleTransferAccepted();this.emit('change');break;case h.TRANSFER_DECLINED:this.handleTransferDeclined(oa);this.emit('change');break;case h.EXTENSIVE_TRANSFER_DETAILS_UPDATED:this.handleTransferWithExtensiveDetails(oa);this.emit('change');break;}};ma.prototype.getAsyncRequestState=function(){return ea;};ma.prototype.handleTransfersUpdated=function(na){da=null;fa=true;z=na.map(function(oa){var pa={};if(oa.creditCard){pa[k.CREDENTIAL_ID]=oa.creditCard[k.CREDENTIAL_ID];pa[k.CARD_NUMBER]=oa.creditCard[k.CARD_NUMBER];pa[k.CARD_TYPE]=oa.creditCard[k.CARD_TYPE];oa.creditCard=new q(pa);}return new m(oa);});};ma.prototype.handleTransfersUpdatedError=function(na){da=na.error;ja(na.requestID,na.error);};ma.prototype.handleNUXTransfersUpdated=function(na){if(!fa)this.handleTransfersUpdated(na);};ma.prototype.handleTransferAdded=function(na){var oa=null;ia(na.requestID,na);oa=z.filter(function(pa){return (pa[t.TRANSFER_ID]===na[t.TRANSFER_ID]);})[0];if(oa)return;z.push(new m(na));z=z.sort(function(pa,qa){return qa.creationTime-pa.creationTime;});};ma.prototype.handleTransferAddedError=function(na){ja(na.requestID,na.errors);};ma.prototype.handleChannelTransferStatusChanged=function(na,oa){oa=oa.obj;n.transferUpdated(oa);};ma.prototype.handleMessageReceived=function(na,oa){for(var pa in oa)if(oa.hasOwnProperty(pa)){var qa=oa[pa];for(var ra=0;ra<qa.length;ra++)if(qa[ra].attachments&&qa[ra].attachments.length){var sa=s.getTransferFromMessage(qa[ra]);if(sa){if(!this.hasReceived()&&sa.receiver.id===j.getID())o.getBannerStates();n.transferAdded(sa);return;}}}};ma.prototype.handleTransferUpdated=function(na){for(var oa=0,pa=z.length;oa<pa;oa++)if(z[oa][t.TRANSFER_ID]===na[t.TRANSFER_ID])z[oa]=m.set(z[oa],na);};ma.prototype.handleTransferAccepted=function(){var na;for(var oa=0,pa=z.length;oa<pa;oa++)if(z[oa][t.STATUS]===u.PENDING_RECIPIENT_NUX){na={};na[t.STATUS]=u.COMPLETED;z[oa]=m.set(z[oa],na);}ga=true;};ma.prototype.handleTransferDeclined=function(na){var oa;for(var pa=0,qa=z.length;pa<qa;pa++)if(z[pa][t.TRANSFER_ID]===na[t.TRANSFER_ID]&&z[pa][t.STATUS]===u.PENDING_RECIPIENT_NUX){oa={};oa[t.STATUS]=u.CANCELED_DECLINED;z[pa]=m.set(z[pa],oa);break;}};ma.prototype.handleTransferUpdatedError=function(na){ja(na.requestID,na.errors);};ma.prototype.getTransferByID=function(na){return z.filter(function(oa){return na===oa[t.TRANSFER_ID];})[0];};ma.prototype.getAll=function(na){if(!x){x=true;o.getTransactions(na);}return z;};ma.prototype.getNUXTransfer=function(){var na=z.filter(function(oa){return s.isRecipientActionableStatus(oa);})[0];if(!na&&!y&&!x){y=true;o.getNUXTransactions();}return na;};ma.prototype.hasTransfers=function(){return z.length>0;};ma.prototype.hasAccepted=function(){return ga;};ma.prototype.hasReceivedFromSender=function(na){for(var oa=0,pa=z.length;oa<pa;oa++)if(z[oa].sender.id===na)return true;return false;};ma.prototype.hasReceived=function(){for(var na=0,oa=z.length;na<oa;na++)if(z[na].receiver.id===j.getID())return true;return false;};ma.prototype.getTransferFetchError=function(){return da;};ma.prototype.getTransferWithExtensiveDetailsByID=function(na){if(!ha.has(na)){ha.add(na);o.getExtensiveTransferDetailsByID(na);}};ma.prototype.handleTransferWithExtensiveDetails=function(na){if(this.getTransferByID(na.transfer_id)){this.handleTransferUpdated(na);}else this.handleTransferAdded(na);};e.exports=new ma();},null);
__d("P2PJewelBannerContainer.react",["CurrentUser","P2PPendingPushFailJewelBanner.react","P2PPendingRecipientNUXJewelBanner.react","P2PPendingRecipientVerificationJewelBanner.react","P2PTransferParam","P2PTransferStatus","P2PTransferStore","React","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();'use strict';var p=n.createClass({displayName:"P2PJewelBannerContainer",getInitialState:function(){return {dialogComponent:null,transfer:m.getNUXTransfer()};},transferStoreSub:(null),componentDidMount:function(){this.transferStoreSub=m.addListener('change',this.onTransferStoreChange);},componentWillUnmount:function(){if(this.transferStoreSub){this.transferStoreSub.remove();this.transferStoreSub=null;}},onTransferStoreChange:function(){this.setState({transfer:m.getNUXTransfer()});},shouldShowTransferBanner:function(){var q=this.state.transfer;return !!(q&&q.receiver.id==g.getID());},renderTransferBanner:function(){var q=this.state.transfer,r=q[k.STATUS];switch(r){case l.PENDING_RECIPIENT_NUX:return (n.createElement(i,{transfer:q}));case l.PENDING_RECIPIENT_VERIFICATION:return (n.createElement(j,{transfer:q}));case l.PENDING_PUSH_FAIL:return (n.createElement(h,{transfer:q}));}},render:function(){var q;if(this.shouldShowTransferBanner())q=this.renderTransferBanner();return (n.createElement("div",{className:"_1xfk"},q));}});e.exports=p;},null);
__d("MercuryThreadlistContainer.react",["Bootloader","immutable","MercuryAPIArgsSource","MercuryFilters","MercuryThreadlistConstants","P2PJewelBannerContainer.react","React","SubscriptionsHandler"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();'use strict';var o=m,p=o.PropTypes,q='search',r=m.createClass({displayName:"MercuryThreadlistContainer",propTypes:{ChildClass:p.func.isRequired,folder:p.string.isRequired,showCount:p.bool,showPresence:p.bool,threadCount:p.number,viewer:p.string.isRequired},getInitialState:function(){return {isLoading:true,isSearching:false,threads:h.Map()};},componentDidMount:function(){g.loadModules(["MercuryOrderedThreadlist","MercuryThreadInformer","MercuryThreads"],function(s,t,u){this._threadlist=s.getForFBID(this.props.viewer);this._threads=u.getForFBID(this.props.viewer);this._informer=t.getForFBID(this.props.viewer);this._subscriptions=new n();this._subscriptions.addSubscriptions(this._informer.subscribe('threadlist-updated',function(v,w){this._updateThreads(this.props.folder,this.props.filter);}.bind(this)));this._handleFolderChange(this.props.folder,this.props.filter);}.bind(this));},componentWillReceiveProps:function(s){if(s.folder!==this.props.folder||s.filter!==this.props.filter)this._handleFolderChange(s.folder,s.filter);},componentWillUnmount:function(){this._cancelThreadsCallback();this._cancelThreadlistCallback();this._subscriptions&&this._subscriptions.release();},render:function(){var s=this.props,t=s.ChildClass,u=s.folder,v=s.filter,w=(function(y,z){var aa={},ba=Object.prototype.hasOwnProperty;if(y==null)throw new TypeError();for(var ca in y)if(ba.call(y,ca)&&!ba.call(z,ca))aa[ca]=y[ca];return aa;})(s,{ChildClass:1,folder:1,filter:1}),x=this.state.isSearching?this.state.threads.get(q)||[]:this.state.threads.get(u)||[];return (m.createElement(t,m.__spread({},w,{isLoaded:!!this._threadlist&&this._threadlist.hasLoadedThreadlist(u,v),isLoading:this.state.isLoading,isSearching:this.state.isSearching,onLoadMoreRequest:this._loadMoreThreads,onQuery:this._handleQuery,onSearchResults:this._handleSearchResults,p2pJewelBannerContainer:this._renderP2PJewelBannerContainer(),threads:x})));},_renderP2PJewelBannerContainer:function(){return (m.createElement(l,null));},_handleFolderChange:function(s,t){if(!this._hasInitialThreads(s,t)){this._loadThreads(s,t,this.props.threadCount||(k.JEWEL_THREAD_COUNT+1));}else if(this.state.isLoading){this.setState({isLoading:false},function(){this._updateThreads(s,t);}.bind(this));}else this._updateThreads(s,t);},_loadMoreThreads:function(){if(!this.state.isSearching&&!this.state.isLoading&&!this._threadlist.hasLoadedThreadlist(this.props.folder,this.props.filter))this._loadThreads(this.props.folder,this.props.filter,this._getThreadCount(this.props.folder)+k.JEWEL_MORE_COUNT+1);},_loadThreads:function(s,t,u){if(!this._threadlist)return;this._cancelThreadlistCallback();this.setState({isLoading:true},function(){var v=this._threadlist.getFilteredThreadlist(k.RECENT_THREAD_OFFSET,u,s,t||j.ALL,function(w){return this.setState({isLoading:false});}.bind(this),true,i.JEWEL);this._threadlistSub={subscriberID:v,folder:s,filter:t};}.bind(this));},_updateThreads:function(s,t,u){if(!this._threadlist||!this._threads)return;this._cancelThreadsCallback();var v=u||this._threadlist.getAvailableThreadlistNow(s,t);this._threadsSub=this._threads.getMultiThreadMeta(v,function(w){this.setState({threads:this.state.threads.set(s,v.map(function(x){return w[x];}))});}.bind(this));},_hasInitialThreads:function(s,t){return !!(this._threadlist&&(this._threadlist.getThreadCount(s,t)>=k.JEWEL_THREAD_COUNT+1||this._threadlist.hasLoadedThreadlist(s,t)));},_getThreadCount:function(s){var t=this.state.threads.get(s);return t?t.length:0;},_cancelThreadsCallback:function(){this._threads&&this._threadsSub&&this._threads.unsubscribe(this._threadsSub);},_cancelThreadlistCallback:function(){this._threadlist&&this._threadlistSub&&this._threadlist.unsubscribe(this._threadlistSub.subscriberID,this._threadlistSub.folder,this._threadlistSub.filter);},_handleSearchResults:function(s,t){this.setState({isLoading:t,searchThreads:[]},function(){return this._updateThreads(q,j.ALL,s);}.bind(this));},_handleQuery:function(s){this.setState({isSearching:!!s});}});e.exports=r;},null);
__d("MessengerNewMessagesNotice.react",["Image.react","Link.react","ReactComponentWithPureRenderMixin","React","cx","fbt","ix"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();'use strict';var n=j,o=n.PropTypes,p=m('/images/mercury/clients/messenger/threadlist/newMessageIndicator.png'),q=j.createClass({displayName:"MessengerNewMessagesNotice",mixins:[i],propTypes:{isOpen:o.bool.isRequired,onClick:o.func},render:function(){return (j.createElement("div",{className:(("_4wzq")+(this.props.isOpen?' '+"_4wzr":''))},j.createElement(h,{className:"_5f0v _4wzs",onClick:this.props.onClick,tabIndex:this.props.isOpen?0:-1},j.createElement(g,{className:"_4wzt",src:p}),j.createElement("div",{className:"_1bqr"},l._("New Messages")))));}});e.exports=q;},null);
__d("MessengerSearchTypeahead.react",["AbstractTypeahead.react","Image.react","MercuryIDs","MercuryTypeaheadConstants","MercuryVanityIDMap","MessengerActions","MessengerSearchSource","MessengerTypeaheadUtils","MessengerTypeaheadView.react","React","cx","fbt","ix","MercuryThreadIDMap","MercuryThreads"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){b.__markCompiled&&b.__markCompiled();'use strict';var t=b('MercuryThreadIDMap').get(),u=b('MercuryThreads').get(),v=p,w=v.PropTypes,x=s('/images/mercury/clients/messenger/threadlist/InboxThreadDismiss.png'),y=100,z=p.createClass({displayName:"MessengerSearchTypeahead",propTypes:{isFocused:w.bool,onBlur:w.func,onChange:w.func,onClear:w.func,onFocus:w.func,onScrollIntoView:w.func,queryString:w.string,viewer:w.string.isRequired},getInitialState:function(){return {isLoading:false};},render:function(){return (p.createElement("div",null,p.createElement(g,{autoHighlight:false,className:(("_5iwm")+(this.props.isFocused||!!this.props.queryString?' '+"_5iwn":'')+(' '+"_150g")),onBlur:this.props.onBlur,onChange:this.props.onChange,onFocus:this.props.onFocus,onSelectAttempt:this._handleSelect,placeholder:r._("Search for people and groups"),presenter:{ViewRenderer:o,alwaysVisibleOnFocus:true,extraRendererProps:{className:"_11_d",hasHoverState:false,isLoading:this.state.isLoading,onScrollIntoView:this.props.onScrollIntoView,viewer:this.props.viewer},maxEntries:y,sortEntries:this._sortEntries,useLayer:false},queryString:this.props.queryString,searchSource:m.getForFBID(this.props.viewer),searchSourceOptions:{onQueryFinished:this._handleQueryFinished,onQueryStarted:this._handleQueryStarted,showDefaultEntries:true},selectOnTab:true,showEntriesOnFocus:true}),p.createElement(h,{onMouseDown:this.props.onClear,className:((!this.props.queryString?"hidden_elem":'')+(' '+"_2xme")),src:x})));},_handleQueryStarted:function(aa){if(aa===this.props.queryString)this.setState({isLoading:true});},_handleQueryFinished:function(aa){if(aa===this.props.queryString)this.setState({isLoading:false});},_sortEntries:function(aa){return n.sortEntries(aa);},_handleSelect:function(aa){var ba=aa.getUniqueID(),ca=aa.getType(),da=aa.getAuxiliaryData().alias;if(da)k.set(da,i.getParticipantIDFromUserID(ba));if(ca===j.THREAD_TYPE){t.getClientIDFromFBID(ba,function(ea){l.selectThread(ea);});}else u.getThreadMeta(i.getThreadIDFromUserID(ba),function(ea){l.selectThread(ea.thread_id);});}});e.exports=z;},null);
__d("MessengerThreadlistNewMessageRow.react",["Image.react","Link.react","MercuryIDs","MercuryParticipantListRenderer","MercuryParticipants","MercuryParticipantsImage.react","MessengerActions","MessengerComposerStore","MessengerProfileImageWrapper.react","MessengerView","ReactComponentWithPureRenderMixin","PureStoreBasedStateMixin","React","cx","fbt","ix"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){b.__markCompiled&&b.__markCompiled();'use strict';var w=50,x=v('/images/mercury/clients/messenger/threadlist/NewMessage.png'),y=s,z=y.PropTypes,aa=s.createClass({displayName:"MessengerThreadlistNewMessageRow",mixins:[q,r(k,n)],propTypes:{isActive:z.bool,onClose:z.func.isRequired},statics:{calculateState:function(){return {participants:n.getState().recipients.map(function(ba){return k.getOrFetch(i.getParticipantIDFromUserID(ba.getUniqueID()));}).filter(function(ba){return !!ba;})};}},render:function(){return (s.createElement("li",{className:(("_1ht1")+(this.props.isActive?' '+"_1ht2":''))},s.createElement(h,{onClick:this._handleClickRow,className:"_1ht5"},this._renderImage(),s.createElement("div",{className:"_1qt4"},s.createElement("div",{className:"_1qt5"},s.createElement("div",{className:"_1ht6"},this._renderTitle()),s.createElement("div",{className:"_23ct",onClick:this.props.onClose})),s.createElement("div",{className:"_1qt5"}," ")))));},_renderImage:function(){var ba=this.state.participants;if(!ba.isEmpty())return (s.createElement("div",{className:"_1qt3"},s.createElement(o,{isMessengerUser:ba.size===1&&ba.first().is_messenger_user,size:w,showBadge:ba.size===1},s.createElement(l,{participants:ba.map(function(ca){return ca.id;}).slice(0,3).toArray(),size:w}))));return (s.createElement("div",{className:"_1qt3"},s.createElement(g,{height:w,src:x,width:w})));},_renderTitle:function(){if(this.state.participants.isEmpty())return u._("New message");return (u._("New message to {List of message recipients}",[u.param("List of message recipients",new j().renderParticipantList(this.state.participants.toArray()))]));},_handleClickRow:function(ba){ba.preventDefault();m.changeDetailView(p.DETAIL.COMPOSE);}});e.exports=aa;},null);
__d("MercuryThreadlistRowContainer.react",["immutable","ImmutableObject","MercuryParticipants","React","StoreAndPropBasedStateMixin","shallowEqual"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';var m=j,n=m.PropTypes,o=j.createClass({displayName:"MercuryThreadlistRowContainer",mixins:[k(i)],propTypes:{ChildClass:n.func.isRequired,thread:n.instanceOf(h).isRequired,viewer:n.string.isRequired},statics:{calculateState:function(p){return {participants:g.Map(g.Seq(p.thread.participants).map(function(q){return [q,i.getOrFetch(q)];}))};}},shouldComponentUpdate:function(p,q){return (!l(p,this.props)||!g.is(q.participants,this.state.participants));},render:function(){var p=this.props,q=p.ChildClass,r=(function(s,t){var u={},v=Object.prototype.hasOwnProperty;if(s==null)throw new TypeError();for(var w in s)if(v.call(s,w)&&!v.call(t,w))u[w]=s[w];return u;})(p,{ChildClass:1});return (j.createElement(q,j.__spread({},r,{participants:this.state.participants})));}});e.exports=o;},null);
__d("MercuryShareAttachmentSnippet.react",["MercuryShareAttachmentReactShape","MercuryShareStyleMap","React"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';var j=i,k=j.PropTypes,l=i.createClass({displayName:"MercuryShareAttachmentSnippet",propTypes:{attachment:g,isSenderViewer:k.bool,senderName:k.string},render:function(){var m=h.getStyleFactory(this.props.attachment);if(m.factory&&!!m.factory.getSnippetComponent){var n=m.factory.getSnippetComponent();return (i.createElement(n,i.__spread({},this.props,{attachment:m.attachment})));}return null;}});e.exports=l;},null);
__d("MercuryAttachmentSnippet.react",["EmoticonsList","Image.react","MercuryAttachment","MercuryAttachmentSnippetRenderer","MercuryAttachmentSnippetType","MercuryAttachmentType","MercuryIDs","P2PMercuryAttachmentSnippet.react","MercuryShareAttachmentSnippet.react","MercuryParticipants","React","StickerConstants","TextWithEmoticons.react","cx","ix","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){b.__markCompiled&&b.__markCompiled();'use strict';var w=q,x=w.PropTypes,y=q.createClass({displayName:"MercuryAttachmentSnippet",propTypes:{thread:x.object.isRequired,viewer:x.string.isRequired},componentWillMount:function(){this._ensureParticipant(this.props.thread.snippet_sender);this._setVariables(this.props);},componentWillReceiveProps:function(ba){this._ensureParticipant(ba.thread.snippet_sender);this._setVariables(ba);},componentWillUnmount:function(){this._cancelParticipantFetch();},render:function(){var ba=this._getSenderName(),ca=j.getAttachmentSnippetType(this._attachments);switch(ca){case k.PHOTO:return this._renderPhotoSnippet(ba);case k.GIF:return this._renderAnimatedImageSnippet(ba);case k.VIDEO:return this._renderVideoSnippet(ba);case k.AUDIO_CLIP:return this._renderAudioClipSnippet(ba);case k.STICKER:return this._renderStickerSnippet(ba);case k.ORION:return this._renderOrionSnippet(ba);case k.SHARE:return this._renderShareSnippet(ba);case k.ERROR:return this._renderError(ba);default:return this._renderMixedSnippet(ba);}},_renderPhotoSnippet:function(ba){return this._renderSnippet(j.renderAttachmentSnippetText(k.PHOTO,this._isViewerSender,ba,this._attachments));},_renderAnimatedImageSnippet:function(ba){return this._renderSnippet(j.renderAttachmentSnippetText(k.GIF,this._isViewerSender,ba,this._attachments));},_renderVideoSnippet:function(ba){return this._renderSnippet(j.renderAttachmentSnippetText(k.VIDEO,this._isViewerSender,ba));},_renderAudioClipSnippet:function(ba){return this._renderSnippet(j.renderAttachmentSnippetText(k.AUDIO_CLIP,this._isViewerSender,ba));},_renderStickerSnippet:function(ba){if(z(this._attachments[0].metadata.stickerID)){return (q.createElement(s,{renderEmoticons:true,text:g.symbols.like}));}else return (q.createElement("span",null,j.renderAttachmentSnippetText(k.STICKER,this._isViewerSender,ba)));},_renderOrionSnippet:function(ba){return (q.createElement("span",null,q.createElement(n,q.__spread({},this._attachments[0].metadata))));},_renderShareSnippet:function(ba){if(!!this._attachments[0].share)return (q.createElement(o,{attachment:this._attachments[0].share,senderName:ba,isViewerSender:this._isViewerSender}));return this._renderSnippet(j.renderAttachmentSnippetText(k.SHARE,this._isViewerSender,ba));},_renderMixedSnippet:function(ba){return (q.createElement("span",null,this._attachments.filter(function(ca){return ca.attach_type===l.FILE||ca.attach_type===l.PHOTO||ca.attach_type===l.VIDEO;}).map(function(ca,da){return this._renderSnippet(ca.name,ca.icon_type,da);}.bind(this))));},_renderSnippet:function(ba,ca,da){var ea=i.getAttachIconClass(ca||this._attachments[0].icon_type),fa=v(ea,"uiIconText _3l6h");return (q.createElement("span",{className:fa,key:da},q.createElement(h,{src:u('/images/messaging/docs/generic.png')}),ba));},_renderError:function(ba){var ca=j.renderAttachmentSnippetText(k.ERROR,this._isViewerSender,ba);return this._renderSnippet(ca);},_setVariables:function(ba){this._viewer=ba.viewer;this._sender=ba.thread.snippet_sender;this._attachments=ba.thread.snippet_attachments;this._isViewerSender=aa(this._sender,this._viewer);},_getSenderName:function(){if(!this._sender||this._isViewerSender)return null;var ba=p.getNow(this._sender);if(!ba)return null;return ba.short_name;},_ensureParticipant:function(ba){if(!ba)return;this._cancelParticipantFetch();if(!p.getNow(ba))this._sub=p.get(ba,function(ca){return this.forceUpdate();}.bind(this));},_cancelParticipantFetch:function(){this._sub&&this._sub.remove();}});function z(ba){return (ba==r.LIKE_STICKER_ID||ba==r.HOT_LIKE_SMALL_STICKER_ID||ba==r.HOT_LIKE_MEDIUM_STICKER_ID||ba==r.HOT_LIKE_LARGE_STICKER_ID);}function aa(ba,ca){return !!(ba&&m.getParticipantIDFromUserID(ca)==ba);}e.exports=y;},null);
__d("MercuryThreadSnippet.react",["immutable","MercuryAttachmentSnippet.react","MercuryIDs","React","TextWithEmoticons.react","fbt","shallowEqual"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();'use strict';var n=j,o=n.PropTypes,p=j.createClass({displayName:"MercuryThreadSnippet",propTypes:{participants:o.instanceOf(g.Map).isRequired,shouldRenderYou:o.bool,thread:o.object.isRequired,viewer:o.string.isRequired},shouldComponentUpdate:function(s,t){return (!m(s,this.props)||!g.is(s.participants,this.props.participants));},render:function(){return (j.createElement("span",{className:this.props.className},this._renderAttachmentIndicator(),this._renderSnippet()));},_renderAttachmentIndicator:function(){if(!this.props.thread.snippet||!q(this.props.thread))return null;return j.createElement("span",{className:"MercuryAttachmentIndicator"});},_renderSnippet:function(){var s=this.props.thread,t=i.getParticipantIDFromUserID(this.props.viewer),u=this._renderInnerSnippet(),v=s.participants.length;if(s.is_subscribed)v--;if(r(s)||!s.snippet_sender)return u;if(s.snippet_sender===t){if(!this.props.shouldRenderYou)return u;return (l._("You: {conversation_snippet}",[l.param("conversation_snippet",u)]));}if(v<=1)return u;var w=this.props.participants.get(s.snippet_sender);if(!w||!w.short_name)return u;return (l._("{name}: {conversation_snippet}",[l.param("name",w.short_name),l.param("conversation_snippet",u)]));},_renderInnerSnippet:function(){var s=this.props.thread,t=s.snippet;if(t&&t.startsWith('?OTR'))return (l._("[encrypted message]"));if(t)return (j.createElement(k,{renderEmoticons:true,renderEmoji:true,text:t.replace(/\r\n|[\r\n]/g,' ')}));if(q(s))return (j.createElement(h,{thread:s,viewer:this.props.viewer}));return null;}});function q(s){return (s.snippet_has_attachment&&s.snippet_attachments&&s.snippet_attachments.length>0);}function r(s){return !s.snippet&&q(s);}e.exports=p;},null);
__d("MercuryThreadTimestamp.react",["ReactComponentWithPureRenderMixin","React","formatDate","joinClasses"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';var k=h,l=k.PropTypes,m=h.createClass({displayName:"MercuryThreadTimestamp",mixins:[g],propTypes:{time:l.number,title:l.string,text:l.string},render:function(){var n=this.props.time;if(!n)return h.createElement("abbr",null);return (h.createElement("abbr",{className:j(this.props.className,'timestamp'),title:this.props.title||(new Date(n)).toLocaleDateString(),"data-utime":n/1000},this.props.text||i(new Date(n),'g:ia')));}});e.exports=m;},null);
__d("MessengerDeleteDialog.react",["MessengerDialog.react","MessengerDialogBody.react","MessengerDialogButton.react","MessengerDialogFooter.react","MessengerDialogHeader.react","React","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();'use strict';var n=l,o=n.PropTypes,p=l.createClass({displayName:"MessengerDeleteDialog",propTypes:{onArchive:o.func,onDelete:o.func,onToggle:o.func},render:function(){return (l.createElement(g,{onToggle:this.props.onToggle},l.createElement(k,null,m._("Delete Conversation")),l.createElement(h,null,m._("This will permanently delete the conversation history.")),l.createElement(j,null,l.createElement(i,{action:"cancel",label:m._("Cancel"),type:"secondary"}),l.createElement(i,{label:m._("Archive"),onClick:this._handleArchive,type:"secondary"}),l.createElement(i,{label:m._("Delete"),onClick:this._handleDelete,type:"primary",use:"danger"}))));},_handleArchive:function(){this.props.onToggle&&this.props.onToggle(false);this.props.onArchive&&this.props.onArchive();},_handleDelete:function(){this.props.onToggle&&this.props.onToggle(false);this.props.onDelete&&this.props.onDelete();}});e.exports=p;},null);
__d("MessengerMarkSpamDialog.react",["MessengerActions","MessengerDialog.react","MessengerDialogBody.react","MessengerDialogButton.react","MessengerDialogFooter.react","MessengerDialogHeader.react","ReactComponentWithPureRenderMixin","React","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();'use strict';var p=n,q=p.PropTypes,r=n.createClass({displayName:"MessengerMarkSpamDialog",mixins:[m],propTypes:{onMarkSpam:q.func,onToggle:q.func},render:function(){return (n.createElement(h,{onToggle:this.props.onToggle},n.createElement(l,null,o._("Mark as Spam")),n.createElement(i,null,o._("This conversation will be reported as spam and removed.")),n.createElement(k,null,n.createElement(j,{action:"cancel",label:o._("Cancel"),type:"secondary"}),n.createElement(j,{label:o._("Mark as Spam"),onClick:this._handleMarkSpam,type:"primary",use:"danger"}))));},_handleMarkSpam:function(s){s.stopPropagation();this.props.onToggle&&this.props.onToggle(false);this.props.onMarkSpam&&this.props.onMarkSpam();g.hideDialog();}});e.exports=r;},null);
__d("MessengerThreadlistRowActions.react",["MessengerActions","MessengerDeleteDialog.react","MessengerMarkSpamDialog.react","MessengerMenu.react","MessengerMuteDialog.react","MessengerPopoverMenu.react","ReactComponentWithPureRenderMixin","React","cx","fbt","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){b.__markCompiled&&b.__markCompiled();'use strict';var r=j.Item,s=j.Separator,t=n,u=t.PropTypes,v=n.createClass({displayName:"MessengerThreadlistRowActions",mixins:[m],propTypes:{isMuted:u.bool,isOpen:u.bool,isUnread:u.bool,onArchive:u.func,onDelete:u.func,onMarkRead:u.func,onMarkSpam:u.func,onMarkUnread:u.func,onMute:u.func,onToggle:u.func,onUnmute:u.func},render:function(){var w=(n.createElement(j,null,n.createElement(r,{label:this.props.isMuted?p._("Unmute"):p._("Mute"),onclick:this._handleMuteClick}),n.createElement(r,{label:p._("Delete"),onclick:this._handleDeleteClick}),n.createElement(s,null),n.createElement(r,{label:this.props.isUnread?p._("Mark as Read"):p._("Mark as Unread"),onclick:this._handleMarkReadClick}),n.createElement(r,{label:p._("Mark as Spam"),onclick:this._handleMarkSpamClick})));return (n.createElement(l,{menu:w,onHide:function(){return this.props.onToggle(false);}.bind(this),onShow:function(){return this.props.onToggle(true);}.bind(this)},n.createElement("div",{className:q(this.props.className,(("_4-0h")+(this.props.isOpen?' '+"_4-0i":''))),onClick:this._handleClick,tabIndex:0})));},_handleClick:function(w){w.preventDefault();w.stopPropagation();},_handleDeleteClick:function(){g.showDialog(h,{onArchive:this.props.onArchive,onDelete:this.props.onDelete,onToggle:this._handleDialogToggle});},_handleMuteClick:function(){if(this.props.isMuted){this.props.onUnmute&&this.props.onUnmute();}else g.showDialog(k,{onMute:this.props.onMute,onToggle:this._handleDialogToggle});},_handleMarkReadClick:function(){if(this.props.isUnread){this.props.onMarkRead&&this.props.onMarkRead();}else this.props.onMarkUnread&&this.props.onMarkUnread();},_handleMarkSpamClick:function(){g.showDialog(i,{onMarkSpam:this.props.onMarkSpam,onToggle:this._handleDialogToggle});},_handleDialogToggle:function(w){if(!w)g.hideDialog();}});e.exports=v;},null);
__d("MessengerThreadlistRowSeenHead.react",["Image.react","immutable","ImmutableObject","MercuryIDs","MercuryMessageInfo","ReactComponentWithPureRenderMixin","React","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();'use strict';var p=m,q=p.PropTypes,r=m.createClass({displayName:"MessengerThreadlistRowSeenHead",mixins:[l],propTypes:{isHidden:q.bool,lastMessage:q.instanceOf(i),participants:q.instanceOf(h.Map).isRequired,readReceipts:q.instanceOf(h.OrderedMap).isRequired,thread:q.instanceOf(i).isRequired,viewer:q.string.isRequired},render:function(){if(this.props.isHidden||!this.props.thread.is_canonical)return null;var t=this.props,u=t.lastMessage,v=t.participants,w=t.readReceipts,x=t.thread,y=t.viewer,z=j.getParticipantIDFromUserID(y),aa=j.getParticipantIDFromUserID(x.canonical_fbid),ba=w.get(aa),ca=v.get(aa);if(!ca||!s(z,ba,x,u))return null;return (m.createElement(g,{className:o(this.props.className,"_2_a2"),src:ca.image_src,title:ca.name}));}});function s(t,u,v,w){if(w){return (w.author===t&&u>=w.timestamp&&!k.isSending(w)&&!k.hasError(w));}else return (v.snippet_sender===t&&u>=v.timestamp);}e.exports=r;},null);
__d("MessengerThreadlistRow.react",["Image.react","immutable","ImmutableObject","Link.react","MercuryMessageInfo","MercuryThreadSnippet.react","MercuryThreadTimestamp.react","MercuryThreadTitle.react","MessengerThreadImage.react","MessengerThreadlistRowActions.react","MessengerThreadlistRowSeenHead.react","ReactComponentWithPureRenderMixin","React","cx","ix","joinClasses","messengerRTLClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){b.__markCompiled&&b.__markCompiled();'use strict';var x=s,y=x.PropTypes,z=50,aa=u('/images/mercury/clients/messenger/message/messageStateFailed.png'),ba=u('/images/mercury/clients/messenger/message/messageStateSending.png'),ca=s.createClass({displayName:"MessengerThreadlistRow",mixins:[r],propTypes:{isActive:y.bool,isMuted:y.bool,lastMessage:y.instanceOf(i),onArchive:y.func,onDelete:y.func,onMarkRead:y.func,onMarkSpam:y.func,onMarkUnread:y.func,onMute:y.func,onSelect:y.func,onUnmute:y.func,participants:y.instanceOf(h.Map).isRequired,readReceipts:y.instanceOf(h.OrderedMap).isRequired,thread:y.instanceOf(i).isRequired,viewer:y.string.isRequired,wasSeenByAll:y.bool},getInitialState:function(){return {actionsOpen:false};},render:function(){var da=this.props,ea=da.participants,fa=da.thread,ga=da.viewer,ha=this.props.isActive?{role:'log','aria-relevant':'additions text'}:{};return (s.createElement("li",s.__spread({},ha,{className:(("_1ht1")+(this.props.isActive?' '+"_1ht2":'')+(fa.unread_count>0?' '+"_1ht3":'')+(this.state.actionsOpen?' '+"_13aa":'')+(this.props.isMuted?' '+"_569x":''))}),s.createElement(j,{onClick:this._handleClick,className:"_1ht5"},s.createElement("div",{className:"_1qt3"},s.createElement(o,{participants:ea,size:z,thread:fa,viewer:ga})),s.createElement("div",{className:"_1qt4"},s.createElement("div",{className:"_1qt5"},s.createElement(n,{className:"_1ht6",showUnreadCount:false,thread:fa,useShortName:false,viewer:ga}),s.createElement("div",null,s.createElement(m,{className:"_1ht7",time:fa.timestamp,title:fa.timestamp_absolute,text:fa.timestamp_relative}))),s.createElement("div",{className:"_1qt5"},s.createElement(l,{className:v("_1htf",w(fa.snippet,true)),participants:ea,shouldRenderYou:true,thread:fa,viewer:ga}),s.createElement("div",{className:"_2j6"},s.createElement(q,{className:"_5bli",isHidden:this.state.actionsOpen,lastMessage:this.props.lastMessage,participants:ea,readReceipts:this.props.readReceipts,thread:fa,viewer:ga}),this._renderSendingState(),s.createElement(p,{className:"_5blh",isMuted:this.props.isMuted,isOpen:this.state.actionsOpen,isUnread:fa.unread_count>0,onArchive:this.props.onArchive,onDelete:this.props.onDelete,onMarkRead:this.props.onMarkRead,onMarkSpam:this.props.onMarkSpam,onMarkUnread:this.props.onMarkUnread,onMute:this.props.onMute,onToggle:this._handleActionsToggle,onUnmute:this.props.onUnmute}),s.createElement("div",{className:"_56ck"})))))));},_renderSendingState:function(){var da=this.props.lastMessage;if(this.state.actionsOpen||!da)return null;var ea=k.isSending(da),fa=k.hasError(da);if(!ea&&!fa)return null;return (s.createElement(g,{className:(("_wtw")+(ea?' '+"_3qh2":'')),src:ea?ba:aa}));},_handleClick:function(da){da.preventDefault();this.props.onSelect&&this.props.onSelect();},_handleActionsToggle:function(da){this.setState({actionsOpen:da});}});e.exports=ca;},null);
__d("MessengerThreadlistRowContainer.react",["ImmutableObject","MercuryMessages","MercuryThreadActions","MercuryThreadInfo","MercuryThreadlistRowContainer.react","MessengerActions","MessengerThreadlistRow.react","ReactComponentWithPureRenderMixin","React","StoreAndPropBasedStateMixin","MercuryRoger"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){b.__markCompiled&&b.__markCompiled();'use strict';var q=b('MercuryRoger').get(),r=o,s=r.PropTypes,t=o.createClass({displayName:"MessengerThreadlistRowContainer",mixins:[n,p(h,q)],propTypes:{isActive:s.bool,thread:s.instanceOf(g).isRequired,viewer:s.string.isRequired},statics:{calculateState:function(u){var v=h.getForFBID(u.viewer),w=u.thread.thread_id,x=v.getThreadMessagesRangeNow(w,0,1)[0];return {lastMessage:x||null,readReceipts:q.getSeenTimestamps(w)};}},componentWillMount:function(){this._actions=i.getForFBID(this.props.viewer);},componentDidUpdate:function(u){if(this.props.isActive&&!u.isActive)this.props.onScrollIntoView(o.findDOMNode(this));},render:function(){return (o.createElement(k,{ChildClass:m,isActive:this.props.isActive,isMuted:j.isMuted(this.props.thread),lastMessage:this.state.lastMessage,onArchive:this._handleArchive,onDelete:this._handleDelete,onMarkRead:this._handleMarkRead,onMarkSpam:this._handleMarkSpam,onMarkUnread:this._handleMarkUnread,onMute:this._handleMute,onSelect:this._handleSelect,onUnmute:this._handleUnmute,readReceipts:this.state.readReceipts,thread:this.props.thread,viewer:this.props.viewer}));},_handleArchive:function(){var u=this.props.isActive;this._actions.archive(this.props.thread.thread_id);u&&l.selectThread(null);},_handleDelete:function(){var u=this.props.isActive;this._actions["delete"](this.props.thread.thread_id);u&&l.selectThread(null);},_handleMarkRead:function(){this._actions.markRead(this.props.thread.thread_id);},_handleMarkSpam:function(){var u=this.props.isActive;this._actions.markSpam(this.props.thread.thread_id);u&&l.selectThread(null);},_handleMarkUnread:function(){this._actions.markUnread(this.props.thread.thread_id);},_handleMute:function(u){this._actions.updateMuteSetting(this.props.thread.thread_id,u);},_handleSelect:function(){l.selectThread(this.props.thread.thread_id);},_handleUnmute:function(){this._actions.unmute(this.props.thread.thread_id);}});e.exports=t;},null);
__d("MessengerThreadlist.react",["ImmutableObject","KeyEventController","Link.react","MercuryThreadInfo","MessengerActions","MessengerComposerActions","MessengerConfig","MessengerDialogStore","MessengerFlexScrollableArea.react","MessengerNewMessagesNotice.react","MessengerSearchTypeahead.react","MessengerSpinner.react","MessengerThreadlistNewMessageRow.react","MessengerThreadlistRowContainer.react","MessengerTypeaheadUtils","MessengerView","Parent","PureStoreBasedStateMixin","React","SubscriptionsHandler","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba){b.__markCompiled&&b.__markCompiled();'use strict';var ca=y,da=ca.PropTypes;function ea(ha,ia,ja){if(!(ha&&ia))return false;var ka=ha[0]||0,la=ia[0]||0;return !!(ka&&la&&ka.unread_count&&ka.thread_id!==ja&&(ka.unread_count!==la.unread_count||ka!==la)&&!j.isMuted(ka));}function fa(event,ha){return h.defaultFilter(event,ha)&&!w.byClass(event.getTarget(),"_150g");}var ga=y.createClass({displayName:"MessengerThreadlist",mixins:[x(n)],propTypes:{activeThreadID:da.string,isComposing:da.bool,isLoaded:da.bool,isLoading:da.bool,isNewMessageActive:da.bool,onLoadMoreRequest:da.func,threads:da.arrayOf(da.instanceOf(g)).isRequired,viewer:da.string.isRequired},statics:{calculateState:function(){return {dialogShown:!!n.getState().dialogClass};}},getInitialState:function(){return {isSearchFocused:false,queryString:'',searchResults:[],showNewMessagesNotice:false};},componentWillMount:function(){this._subscriptions=new z();this._subscriptions.addSubscriptions(h.registerKey('UP',function(){return this._handleArrowKey(-1);}.bind(this),fa),h.registerKey('DOWN',function(){return this._handleArrowKey(1);}.bind(this),fa));},componentWillUnmount:function(){this._subscriptions&&this._subscriptions.release();},componentWillReceiveProps:function(ha,ia){var ja=this.refs.scrollable.isScrolledToTop();if(!m.DisableNewMessagePill)if(!ja&&ea(ha.threads,this.props.threads,ha.activeThreadID)){this.setState({showNewMessagesNotice:true});}else this.setState({showNewMessagesNotice:this.state.showNewMessagesNotice&&!ja});},componentDidUpdate:function(ha,ia){if((this.state.isSearchFocused!==ia.isSearchFocused)||(this.props.isComposing&&!ha.isComposing))this.refs.scrollable&&this.refs.scrollable.scrollToTop();},render:function(){var ha=this.state.showNewMessagesNotice&&!this.state.isSearchFocused;return (y.createElement("div",{className:"_2xhi"},y.createElement(p,{isOpen:ha,onClick:this._handleNewMessageNoticeClick}),y.createElement(o,{onScroll:this._handleScroll,ref:"scrollable"},y.createElement(q,{isFocused:this.state.isSearchFocused,onBlur:this._handleBlur,onChange:this._handleChange,onClear:this._handleClear,onFocus:this._handleFocus,onScrollIntoView:this._handleScrollIntoView,queryString:this.state.queryString,viewer:this.props.viewer}),y.createElement("div",{className:((this.state.isSearchFocused?"hidden_elem":''))},y.createElement("ul",null,this.props.isComposing?y.createElement(s,{isActive:this.props.isNewMessageActive,onClose:this._handleCloseNewMessage}):null,this.props.threads.map(function(ia){return y.createElement(t,{isActive:ia.thread_id===this.props.activeThreadID,key:ia.thread_id,onScrollIntoView:this._handleScrollIntoView,thread:ia,viewer:this.props.viewer});}.bind(this))),this._renderLoadMoreLink()))));},_renderLoadMoreLink:function(){if(this.props.isLoaded)return null;if(this.props.isLoading)return (y.createElement("div",{className:"_19hf"},y.createElement(r,null)));return (y.createElement("div",{className:"_19hf"},y.createElement(i,{href:"#",onClick:this._handleLoadMoreClick},ba._("Show Older"))));},_handleScroll:function(){if(this.props.isLoaded||this.state.isSearchFocused)return;if(this.refs.scrollable.isScrolledToBottom())this.props.onLoadMoreRequest&&this.props.onLoadMoreRequest();if(this.refs.scrollable.isScrolledToTop()&&this.state.showNewMessagesNotice)this.setState({showNewMessagesNotice:false});},_handleLoadMoreClick:function(ha){ha.preventDefault();this.props.onLoadMoreRequest&&this.props.onLoadMoreRequest();},_handleNewMessageNoticeClick:function(ha){ha.preventDefault();this.setState({showNewMessagesNotice:false});this.refs.scrollable.scrollToTop();},_handleArrowKey:function(ha){if(this.state.dialogShown)return;if(this.props.isNewMessageActive){if(ha===1&&this.props.threads[0])k.selectThread(this.props.threads[0].thread_id);return;}var ia=this.props.threads.findIndex(function(ka){return ka.thread_id===this.props.activeThreadID;}.bind(this));if(ia===-1)return;var ja=this.props.threads[ia+ha];if(ja){k.selectThread(ja.thread_id);}else if(this.props.isComposing&&ia===0&&ha===-1)k.changeDetailView(v.DETAIL.COMPOSE);if(ia===this.props.threads.length-1)this.props.onLoadMoreRequest&&this.props.onLoadMoreRequest();},_handleFocus:function(){this.setState({isSearchFocused:true});},_handleBlur:function(){this.setState({isSearchFocused:false,queryString:''});},_handleChange:function(event){this.setState({queryString:event.target.value});},_handleClear:function(){this.setState({queryString:''});},_handleScrollIntoView:function(ha){u.scrollEntryIntoView(ha,this.refs.scrollable);},_handleCloseNewMessage:function(ha){ha.stopPropagation();l.exitComposeState();if(this.props.isNewMessageActive){var ia=this.props.threads.find(function(ja){return ja.unread_count===0;});k.selectThread(ia?ia.thread_id:null);}}});e.exports=ga;},null);
__d("MessengerRecentContainer.react",["MercuryThreadlistContainer.react","MercuryFilters","MessengerComposerSteps","MessengerComposerStore","MessengerThreadlist.react","PureStoreBasedStateMixin","React"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();'use strict';var n=m,o=n.PropTypes,p=m.createClass({displayName:"MessengerRecentContainer",mixins:[l(j)],propTypes:{activeThreadID:o.string,folder:o.string,viewer:o.string.isRequired},statics:{calculateState:function(){return {isComposing:j.getState().step!==i.NULL};}},render:function(){return (m.createElement(g,{ChildClass:k,activeThreadID:this.props.activeThreadID,filter:h.ALL,folder:this.props.folder,isComposing:this.state.isComposing,isNewMessageActive:this.props.isNewMessageActive,viewer:this.props.viewer}));}});e.exports=p;},null);
__d("MessengerMasterView.react",["MessengerMasterViewHeader.react","MessengerRecentContainer.react","MessengerView","ReactComponentWithPureRenderMixin","React"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l=k,m=l.PropTypes,n=k.createClass({displayName:"MessengerMasterView",mixins:[j],propTypes:{activeThreadID:m.string,detailView:m.string,folder:m.string,view:m.string.isRequired,viewer:m.string.isRequired},render:function(){return (k.createElement("div",null,k.createElement(g,{folder:this.props.folder,viewer:this.props.viewer}),this._renderMainView()));},_renderMainView:function(){switch(this.props.view){case i.MASTER.RECENT:return (k.createElement(h,{activeThreadID:this.props.activeThreadID,folder:this.props.folder,isNewMessageActive:this.props.detailView===i.DETAIL.COMPOSE,viewer:this.props.viewer}));default:throw 'Unknown master view: '+this.props.view;}}});e.exports=n;},null);
__d("MNCommerceDialogContainer.react",["MNCommerceDialogStateStore","PureStoreBasedStateMixin","React"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';var j=i.createClass({displayName:"MNCommerceDialogContainer",mixins:[h(g)],statics:{calculateState:function(){var k=g.getDialogContainer();return {dialogContainer:k};}},render:function(){var k=this.state.dialogContainer;if(!k)return null;return i.createElement(k,null);}});e.exports=j;},null);
__d("P2PDialogStore",["EventEmitter","P2PActionConstants","P2PDispatcher"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';var j,k={};for(var l in g)if(g.hasOwnProperty(l))n[l]=g[l];var m=g===null?null:g.prototype;n.prototype=Object.create(m);n.prototype.constructor=n;n.__superConstructor__=g;function n(){g.call(this);j=i.register(this.onEventDispatched.bind(this));k={dialogClass:null,dialogProps:null};}n.prototype.getState=function(){return k;};n.prototype.onEventDispatched=function(o){var p=o.type,q=o.data;switch(p){case h.DIALOG_SHOWN:k.dialogClass=q.dialogClass;k.dialogProps=q.dialogProps;this.emit('change');break;case h.DIALOG_CLOSED:k.dialogClass=null;k.dialogProps=null;this.emit('change');break;}};e.exports=new n();},null);
__d("P2PDialogContainer.react",["P2PDialogStore","React","ReactLayeredComponentMixin"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';var j=h.createClass({displayName:"P2PDialogContainer",mixins:[i],getInitialState:function(){return g.getState();},componentDidMount:function(){this.dialogStoreSub=g.addListener('change',this.onDialogStoreChange);},componentWillUnmount:function(){if(this.dialogStoreSub){this.dialogStoreSub.remove();this.dialogStoreSub=null;}},onDialogStoreChange:function(){this.setState(g.getState());},renderLayers:function(){if(!this.state.dialogClass)return {};var k=this.state.dialogClass;return {dialog:h.createElement(k,h.__spread({},this.state.dialogProps))};},render:function(){return null;}});e.exports=j;},null);
__d("Messenger.react",["CurrentUser","MessengerBanner.react","MessengerBugNub.react","MessengerDetailView.react","MessengerDialogContainer.react","MessengerMasterView.react","MessengerStateStore","MNCommerceDialogContainer.react","P2PDialogContainer.react","ReactComponentWithPureRenderMixin","PureStoreBasedStateMixin","React","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){b.__markCompiled&&b.__markCompiled();'use strict';var t=r,u=t.PropTypes,v=r.createClass({displayName:"Messenger",mixins:[p,q(m)],propTypes:{isBetaEnabled:u.bool,isBrowserUnsupported:u.bool,mobileAppInfo:u.objectOf(u.bool),promotionData:u.object,viewer:u.string.isRequired},statics:{calculateState:function(){return m.getState();}},componentWillUnmount:function(){m.unregister();},render:function(){return (r.createElement("div",null,r.createElement(h,{isBrowserUnsupported:this.props.isBrowserUnsupported,mobileAppInfo:this.props.mobileAppInfo,promotionData:this.props.promotionData}),r.createElement("div",{className:"_4sp8 _li",onDragEnter:function(w){return w.preventDefault();},onDragOver:function(w){return w.preventDefault();},onDrop:function(w){return w.preventDefault();}},r.createElement("div",{className:"_1enh"},r.createElement(l,{activeThreadID:this.state.activeThreadID,detailView:this.state.detailView,folder:this.state.folder,view:this.state.masterView,viewer:g.getID()}),g.isEmployee()?r.createElement(i,{isBetaEnabled:this.props.isBetaEnabled}):null),r.createElement(j,{activeThreadID:this.state.activeThreadID,view:this.state.detailView,viewer:g.getID()}),r.createElement(k,null),r.createElement(n,null),r.createElement(o,null))));}});e.exports=v;},null);
__d("MessengerRTCMessageHandler",["Bootloader","FBRTCCallSummaryUploader","FBRTCMessageListener","VideoCallSupport"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';var k=null,l={init:function(){if(j.isReceiveWebrtcSupported()){h.init();i.init();i.once('messageReceived',function(n){m();});}}};function m(){if(!k)g.loadModules(["FBRTCIncomingCallController","MessengerRTCIncomingDialogController","MessengerRTCMissedCallDialogController","MessengerRTCUnsupportedBrowserDialogController"],function(n,o,p,q){k=new n(o,q,p);i.setMessageHandler(k.onMessageReceived,k);});}e.exports=l;},null);
__d("DOMScroll",["Animation","Arbiter","DOM","DOMQuery","Vector","ViewportBounds","ge","isAsyncScrollQuery"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();var o={SCROLL:'dom-scroll',getScrollState:function(){var p=k.getViewportDimensions(),q=k.getDocumentDimensions(),r=(q.x>p.x),s=(q.y>p.y);r+=0;s+=0;return new k(r,s);},_scrollbarSize:null,_initScrollbarSize:function(){var p=i.create('p');p.style.width='100%';p.style.height='200px';var q=i.create('div');q.style.position='absolute';q.style.top='0px';q.style.left='0px';q.style.visibility='hidden';q.style.width='200px';q.style.height='150px';q.style.overflow='hidden';q.appendChild(p);document.body.appendChild(q);var r=p.offsetWidth;q.style.overflow='scroll';var s=p.offsetWidth;if(r==s)s=q.clientWidth;document.body.removeChild(q);o._scrollbarSize=r-s;},getScrollbarSize:function(){if(o._scrollbarSize===null)o._initScrollbarSize();return o._scrollbarSize;},scrollTo:function(p,q,r,s,t,u){if(typeof q=='undefined'||q===true)q=750;if(n())q=false;if(!(p instanceof k)){var v=k.getScrollPosition().x,w=k.getElementPosition(m(p)).y;p=new k(v,w,'document');if(!s)p.y-=l.getTop()/(r?2:1);}if(r){p.y-=k.getViewportDimensions().y/2;}else if(s){p.y-=k.getViewportDimensions().y;p.y+=s;}if(t)p.y-=t;p=p.convertTo('document');if(q){return new g(document.body).to('scrollTop',p.y).to('scrollLeft',p.x).ease(g.ease.end).duration(q).ondone(u).go();}else if(window.scrollTo){window.scrollTo(p.x,p.y);u&&u();}h.inform(o.SCROLL);},ensureVisible:function(p,q,r,s,t){if(r===(void 0))r=10;p=m(p);if(q)p=j.find(p,q);var u=k.getScrollPosition().x,v=k.getScrollPosition().y,w=v+k.getViewportDimensions().y,x=k.getElementPosition(p).y,y=x+k.getElementDimensions(p).y;x-=l.getTop();x-=r;y+=r;if(x<v){o.scrollTo(new k(u,x,'document'),s,false,false,0,t);}else if(y>w)if(x-(y-w)<v){o.scrollTo(new k(u,x,'document'),s,false,false,0,t);}else o.scrollTo(new k(u,y,'document'),s,false,true,0,t);},scrollToTop:function(p){var q=k.getScrollPosition();o.scrollTo(new k(q.x,0,'document'),p!==false);}};e.exports=o;},null);
__d("goOrReplace",["URI"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();function h(i,j,k){var l=new g(j),m=a.Quickling;if(i.pathname=='/'&&l.getPath()!='/'&&m&&m.isActive()&&m.isPageActive(l)){var n=i.search?{}:{q:''};l=new g().setPath('/').setQueryData(n).setFragment(l.getUnqualifiedURI().toString());j=l.toString();}if(k){i.replace(j);}else if(i.href==j){i.reload();}else i.href=j;}e.exports=h;},null);
__d("HistoryManager",["Cookie","Env","Event","URI","UserAgent_DEPRECATED","isFacebookURI","emptyFunction","goOrReplace","isInIframe","setIntervalAcrossTransitions","SessionName"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){b.__markCompiled&&b.__markCompiled();b('SessionName');var q={history:null,current:0,fragment:null,isInitialized:function(){return !!q._initialized;},init:function(){if(!h.ALLOW_TRANSITION_IN_IFRAME&&o())return;if(q._initialized)return q;var r=new j(window.location.href),s=r.getFragment()||'';if(s.charAt(0)==='!'){s=s.substr(1);r.setFragment(s);}Object.assign(q,{_initialized:true,fragment:s,orig_fragment:s,history:[r],callbacks:[],lastChanged:Date.now(),canonical:new j('#'),user:0,enabled:true,debug:m});if(window.history&&history.pushState){this.lastURI=document.URL;window.history.replaceState(this.lastURI,null);i.listen(window,'popstate',function(t){var u=t&&t.state&&typeof t.state==='string';if(u&&q.lastURI!=t.state){q.lastURI=t.state;q.lastChanged=Date.now();q.notify(new j(t.state).getUnqualifiedURI().toString());}}.bind(q));if(k.webkit()<534||k.chrome()<=13){p(q.checkURI,42);q._updateRefererURI(this.lastURI);}return q;}q._updateRefererURI(j.getRequestURI(false));if(k.webkit()<500||k.firefox()<2){q.enabled=false;return q;}if('onhashchange' in window){i.listen(window,'hashchange',function(){setTimeout(q.checkURI.bind(q),0);});}else p(q.checkURI,42);return q;},registerURIHandler:function(r){q.callbacks.push(r);return q;},setCanonicalLocation:function(r){q.canonical=new j(r);return q;},notify:function(r){if(r==q.orig_fragment)r=q.canonical.getFragment();for(var s=0;s<q.callbacks.length;s++)try{if(q.callbacks[s](r))return true;}catch(t){}return false;},checkURI:function(){if(Date.now()-q.lastChanged<400)return;if(window.history&&history.pushState){var r=new j(document.URL).removeQueryData('ref').toString(),s=new j(q.lastURI).removeQueryData('ref').toString();if(r!=s){q.lastChanged=Date.now();q.lastURI=r;if(k.webkit()<534)q._updateRefererURI(r);q.notify(new j(r).getUnqualifiedURI().toString());}return;}if(k.webkit()&&window.history.length==200){if(!q.warned)q.warned=true;return;}var t=new j(window.location.href).getFragment();if(t.charAt(0)=='!')t=t.substr(1);t=t.replace(/%23/g,'#');if(t!=q.fragment.replace(/%23/g,'#')){q.debug([t,' vs ',q.fragment,'whl: ',window.history.length,'QHL: ',q.history.length].join(' '));for(var u=q.history.length-1;u>=0;--u)if(q.history[u].getFragment().replace(/%23/g,'#')==t)break;++q.user;if(u>=0){q.go(u-q.current);}else q.go('#'+t);--q.user;}},_updateRefererURI:function(r){r=r.toString();if(r.charAt(0)!='/'&&r.indexOf('//')==-1)return;var s=new j(window.location);if(l(s)){var t=s.getPath()+window.location.search;}else var t='';var u=new j(r).getQualifiedURI().setFragment(t).toString(),v=2048;if(u.length>v)u=u.substring(0,v)+'...';g.set('x-referer',u);},go:function(r,s,t){if(window.history&&history.pushState){s||typeof(r)=='number';var u=new j(r).removeQueryData('ref').toString();q.lastChanged=Date.now();this.lastURI=u;if(t){window.history.replaceState(r,null,u);}else window.history.pushState(r,null,u);if(k.webkit()<534)q._updateRefererURI(r);return false;}q.debug('go: '+r);if(s===(void 0))s=true;if(!q.enabled)if(!s)return false;if(typeof(r)=='number'){if(!r)return false;var v=r+q.current,w=Math.max(0,Math.min(q.history.length-1,v));q.current=w;v=q.history[w].getFragment()||q.orig_fragment;v=new j(v).removeQueryData('ref').getUnqualifiedURI().toString();q.fragment=v;q.lastChanged=Date.now();if(!q.user)n(window.location,window.location.href.split('#')[0]+'#!'+v,t);if(s)q.notify(v);q._updateRefererURI(v);return false;}r=new j(r);if(r.getDomain()==new j(window.location.href).getDomain())r=new j('#'+r.getUnqualifiedURI());var x=q.history[q.current].getFragment(),y=r.getFragment();if(y==x||(x==q.orig_fragment&&y==q.canonical.getFragment())){if(s)q.notify(y);q._updateRefererURI(y);return false;}if(t)q.current--;var z=(q.history.length-q.current)-1;q.history.splice(q.current+1,z);q.history.push(new j(r));return q.go(1,s,t);},getCurrentFragment:function(){var r=j.getRequestURI(false).getFragment();return r==q.orig_fragment?q.canonical.getFragment():r;}};e.exports=q;},null);
__d("PageHooks",["Arbiter","ErrorUtils","InitialJSLoader","PageEvents"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k={DOMREADY_HOOK:'domreadyhooks',ONLOAD_HOOK:'onloadhooks'};function l(){var s=a.CavalryLogger;if(!window.domready&&s)s.getInstance().setTimeStamp('t_prehooks');o(r.DOMREADY_HOOK);if(!window.domready&&s)s.getInstance().setTimeStamp('t_hooks');window.domready=true;g.inform('uipage_onload',true,g.BEHAVIOR_STATE);}function m(){o(r.ONLOAD_HOOK);window.loaded=true;}function n(s,t){return h.applyWithGuard(s,null,null,function(u){u.event_type=t;u.category='runhook';},'PageHooks:'+t);}function o(s){var t=(s=='onbeforeleavehooks')||(s=='onbeforeunloadhooks');do{var u=window[s];if(!u)break;if(!t)window[s]=null;for(var v=0;v<u.length;v++){var w=n(u[v],s);if(t&&w)return w;}}while(!t&&window[s]);}function p(){if(!window.domready){window.domready=true;o('onloadhooks');}if(!window.loaded){window.loaded=true;o('onafterloadhooks');}}function q(){g.registerCallback(l,[j.BIGPIPE_DOMREADY,i.INITIAL_JS_READY]);g.registerCallback(m,[j.BIGPIPE_DOMREADY,j.BIGPIPE_ONLOAD,i.INITIAL_JS_READY]);g.subscribe(j.NATIVE_ONBEFOREUNLOAD,function(s,t){t.warn=o('onbeforeleavehooks')||o('onbeforeunloadhooks');if(!t.warn){window.domready=false;window.loaded=false;}},g.SUBSCRIBE_NEW);g.subscribe(j.NATIVE_ONUNLOAD,function(s,t){o('onunloadhooks');o('onafterunloadhooks');},g.SUBSCRIBE_NEW);}var r=Object.assign({_domreadyHook:l,_onloadHook:m,runHook:n,runHooks:o,keepWindowSetAsLoaded:p},k);q();a.PageHooks=e.exports=r;},null);
__d("PageTransitions",["Arbiter","Bootloader","BusyUIManager","DOMQuery","DOMScroll","Env","Event","HistoryManager","JSLogger","LayerHideOnEscape","ModalLayer","PageHooks","PageTransitionsRegistrar","React","ScriptPath","URI","Vector","areEqual","clickRefAction","escapeJSQuotes","ge","goOrReplace","invariant","isInIframe","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea){b.__markCompiled&&b.__markCompiled();var fa={};function ga(ka,la){fa[ka.getUnqualifiedURI()]=la;}function ha(ka){return fa[ka.getUnqualifiedURI()];}function ia(ka){delete fa[ka.getUnqualifiedURI()];}var ja={_scroll_locked:false,isInitialized:function(){return !!ja._initialized;},_init:function(){if(!l.ALLOW_TRANSITION_IN_IFRAME&&da())return;if(ja._initialized)return ja;var ka=s.getMostRecentURI();ja._current_uri=ka;ja._most_recent_uri=ka;ja._next_uri=ka;ja._initialized=true;var la,ma=v.getRequestURI(false);if(ma.getFragment().startsWith('/')){la=ma.getFragment();}else la=ka;n.init().setCanonicalLocation('#'+la).registerURIHandler(ja._historyManagerHandler);m.listen(window,'scroll',function(){if(!ja._scroll_locked)ga(ja._current_uri,w.getScrollPosition());});return ja;},registerHandler:s.registerHandler,removeHandler:s.removeHandler,getCurrentURI:function(ka){this._init();if(!ja._current_uri&&!ka)return new v(ja._most_recent_uri);return new v(ja._current_uri);},getMostRecentURI:function(){this._init();return new v(ja._most_recent_uri);},go:function(ka,la){this._init();var ma=new v(ka).removeQueryData('quickling').getQualifiedURI();o.create('pagetransition').debug('go',{uri:ma.toString()});ia(ma);!la&&y('uri',{href:ma.toString()},null,'INDIRECT');i.lookBusy();ja._loadPage(ma,function(na){if(na){q.unfixed(function(){n.go(ma.toString(),false,la);});}else ba(window.location,ma,la);});},_historyManagerHandler:function(ka){if(ka.charAt(0)!='/')return false;y('h',{href:ka});if(!u.getClickPointInfo())u.setClickPointInfo({click:'back'});ja._loadPage(new v(ka),function(la){if(!la)ba(window.location,ka,true);});return true;},_loadPage:function(ka,la){if(new v(ka).getFragment()&&x(new v(ka).setFragment(null).getQualifiedURI(),new v(ja._current_uri).setFragment(null).getQualifiedURI())){g.inform("pre_page_fragment_transition",{from:new v(ja._current_uri).getFragment(),to:new v(ka).getFragment()});if(ja.restoreScrollPosition(ka)){ja._current_uri=ja._most_recent_uri=ka;i.stopLookingBusy();g.inform("page_fragment_transition",{fragment:new v(ka).getFragment()});return;}}var ma;if(ja._current_uri)ma=ha(ja._current_uri);var na=function(){if(ma&&ja._current_uri)ga(ja._current_uri,ma);ja._current_uri=null;ja._next_uri=ka;if(ma)k.scrollTo(ma,false);ja._scroll_locked=true;var qa=ja._handleTransition(ka);la&&la(qa);},oa=ja._next_uri;ja._next_uri=ka;var pa=r.runHooks('onbeforeleavehooks');ja._next_uri=oa;if(pa){i.stopLookingBusy();ja._warnBeforeLeaving(pa,na);}else na();},_handleTransition:function(ka){window.onbeforeleavehooks=(void 0);i.lookBusy();if(!ka.isSameOrigin())return false;var la,ma=a.AsyncRequest;if(ma)la=ma.getLastID();g.inform("pre_page_transition",{from:ja.getMostRecentURI(),to:ka});var na=s._getTransitionHandlers();for(var oa=na.length-1;oa>=0;--oa){var pa=na[oa];if(!pa)continue;for(var qa=pa.length-1;qa>=0;--qa)if(pa[qa](ka)===true){var ra={sender:this,uri:ka,id:la};try{g.inform("page_transition",ra);}catch(sa){}return true;}else pa.splice(qa,1);}return false;},unifyURI:function(){this._init();ja._current_uri=ja._most_recent_uri=ja._next_uri;},transitionComplete:function(ka){this._init();ja._scroll_locked=false;ja._executeCompletionCallbacks();i.stopLookingBusy();ja.unifyURI();if(!ka)ja.restoreScrollPosition(ja._current_uri);try{if(document.activeElement&&document.activeElement.nodeName==='A')document.activeElement.blur();}catch(la){}},_executeCompletionCallbacks:function(){var ka=s._getCompletionCallbacks();if(ka.length>0){s._resetCompletionCallbacks();ka.forEach(function(la){return la();});}},registerCompletionCallback:s.registerCompletionCallback,rewriteCurrentURI:function(ka,la){this._init();var ma=s._getTransitionHandlers(),na=ma.length||1,oa=false;s.registerHandler(function(){if(ka==ja.getMostRecentURI().getUnqualifiedURI().toString()){ja.transitionComplete();return true;}oa=true;},na);ja.go(la,true);ca(ma.length===na+1&&ma[na].length===(oa?0:1));ma.length=na;},_warnBeforeLeaving:function(ka,la){h.loadModules(["DialogX","XUIDialogTitle.react","XUIDialogBody.react","XUIDialogButton.react","XUIDialogFooter.react","XUIGrayText.react"],function(ma,na,oa,pa,qa,ra){var sa=new ma({width:450,addedBehaviors:[p]},t.createElement("div",null,t.createElement(na,{showCloseButton:false},ea._("Leave Page?")),t.createElement(oa,null,t.createElement(ra,{shade:"medium",size:"medium"},ka)),t.createElement(qa,null,t.createElement(pa,{action:"cancel",label:ea._("Stay on This Page")}),t.createElement(pa,{action:"confirm",use:"confirm",label:ea._("Leave This Page")}))));sa.subscribe('confirm',function(){sa.hide();la();});sa.show();});},restoreScrollPosition:function(ka){var la=ha(ka);if(la){k.scrollTo(la,false);return true;}function ma(pa){if(!pa)return null;var qa="a[name='"+z(pa)+"']";return j.scry(document.body,qa)[0]||aa(pa);}var na=ma(new v(ka).getFragment());if(na){var oa=w.getElementPosition(na);oa.x=0;k.scrollTo(oa);return true;}return false;}};e.exports=ja;a.PageTransitions=ja;},null);
__d("MessengerURIListener",["MessengerActions","MessengerURISerializer","PageTransitions"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';var j=false,k={start:function(){if(!j)i.registerHandler(l,6);j=true;},stop:function(){i.removeHandler(l,6);j=false;}};function l(m){var n=h.deserialize(m);i.transitionComplete();g.changeState(n);return true;}e.exports=k;},null);
__d("MessengerMount",["CSS","CurrentUser","HotLikeSound","MercuryChannelHandler","MercuryDelayedRoger","MercuryDeliveryState","MercuryOrderedThreadlist","MercuryParticipants","MercuryServerPayloadPreprocessor","MercuryStateCheck","MercuryThreads","MercuryThreadIDMap","MercuryUnreadState","MercuryUnseenState","Messenger.react","MessengerActions","MessengerComposerActions","MessengerBrowserAlerts","MessengerComposerStore","MessengerConfig","MessengerPage","MessengerRTCMessageHandler","MessengerSettingsStore","MessengerStateStore","MessengerURIListener","React","URI","goURI","cx","OrderedFriendsList","PageHooks"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia){b.__markCompiled&&b.__markCompiled();'use strict';b('OrderedFriendsList');b('PageHooks');var ja={mount:function(na,oa){aa.emit(aa.Events.JS_LOADED);var pa=h.getID();ka(pa);la(pa);ma(pa,oa);aa.emit(aa.Events.DATA_INITIALIZED);g.addClass(document.documentElement,"_51l0");i.setCheckSoundEnabledFunc(function(){return ca.getSettings().sound_enabled;});fa.render(fa.createElement(u,{isBetaEnabled:oa.isBetaEnabled,isBrowserUnsupported:oa.isBrowserUnsupported,mobileAppInfo:oa.mobileAppInfo,promotionData:oa.promotionData,viewer:pa}),na,function(){aa.emit(aa.Events.APP_MOUNTED);});}};function ka(na){k;l.getForFBID(na);m.getForFBID(na);n;q.getForFBID(na);s.getForFBID(na);t.getForFBID(na);y;ca;da;}function la(na){ea.start();j.getForFBID(na).turnOn();x.init(na);p.getForFBID(na);if(z.EnableRtcGK)ba.init();}function ma(na,oa){var pa=o.getForFBID(na);pa.handleUpdate(oa.mercuryPayload);ha(new ga(window.location.href));var qa=r.get(),ra=qa.getClientIDFromFBIDNow(oa.lastReadThreadKey);if(ra){w.exitComposeState();v.selectThread(ra);}}e.exports=ja;},null);
__d("XHPTemplate",["DataStore","DOM","HTML"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();function j(l){"use strict";this._model=l;}j.prototype.render=function(){"use strict";if(i.isHTML(this._model))this._model=h.setContent(document.createDocumentFragment(),this._model)[0];return this._model.cloneNode(true);};j.prototype.build=function(){"use strict";return new k(this.render());};j.getNode=function(l,m){"use strict";return j.getNodes(l)[m];};j.getNodes=function(l){"use strict";var m=g.get(l,'XHPTemplate:nodes');if(!m){m={};var n=h.scry(l,'[data-jsid]');n.push(l);var o=n.length;while(o--){var p=n[o];m[p.getAttribute('data-jsid')]=p;p.removeAttribute('data-jsid');}g.set(l,'XHPTemplate:nodes',m);}return m;};function k(l){"use strict";this._root=l;this._populateNodes();}k.prototype._populateNodes=function(){"use strict";this._nodes={};this._leaves={};var l=this._root.getElementsByTagName('*');for(var m=0,n=l.length;m<n;m++){var o=l[m],p=o.getAttribute('data-jsid');if(p){o.removeAttribute('data-jsid');this._nodes[p]=o;this._leaves[p]=!o.childNodes.length;}}};k.prototype.getRoot=function(){"use strict";return this._root;};k.prototype.getNode=function(l){"use strict";return this._nodes[l];};k.prototype.setNodeProperty=function(l,m,n){"use strict";this.getNode(l)[m]=n;return this;};k.prototype.setNodeContent=function(l,m){"use strict";if(!this._leaves[l])throw new Error("Can't setContent on non-leaf node: "+l);h.setContent(this.getNode(l),m);return this;};e.exports=j;},null);