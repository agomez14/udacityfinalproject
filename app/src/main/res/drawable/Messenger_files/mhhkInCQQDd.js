/*!CK:2791537611!*//*1438098912,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["PX69h"]); }

__d("MNCommerceBubbleType",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={FB_RETAIL_RECEIPT:1,FB_RETAIL_CANCELLATION:2,FB_RETAIL_SHIPMENT:3,FB_RETAIL_SHIPMENT_TRACKING_EVENT_ETA:4,FB_RETAIL_SHIPMENT_TRACKING_EVENT_IN_TRANSIT:5,FB_RETAIL_SHIPMENT_TRACKING_EVENT_OUT_FOR_DELIVERY:6,FB_RETAIL_SHIPMENT_TRACKING_EVENT_DELAYED:7,FB_RETAIL_SHIPMENT_TRACKING_EVENT_DELIVERED:8,FB_RETAIL_SHIPMENT_FOR_UNSUPPORTED_CARRIER:9,FB_RETAIL_SHIPMENT_ETA:10,FB_RETAIL_NOW_IN_STOCK:11,FB_RETAIL_AGENT_ITEM_SUGGESTION:12,FB_RETAIL_AGENT_ITEM_RECEIPT:13};},null);
__d("MercuryAttachmentPhoto.react",["ChatImageArrowDirection","ChatImageWithArrow.react","MercuryMessageInfo","MessagesViewer","React"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l=k,m=l.PropTypes,n=k.createClass({displayName:"MercuryAttachmentPhoto",propTypes:{height:m.number,image:m.object.isRequired,message:m.object.isRequired,width:m.number},componentDidMount:function(){j.preload();},_handleClickPicture:function(o){var p=this.props.image;j.bootstrapWithConfig({src:p.preview_url,endpoint:p.url,fbid:p.metadata.fbid,dimensions:p.metadata.dimensions,disablePaging:true},null);},render:function(){var o=i.isInbound(this.props.message);return (k.createElement(h,{arrowDirection:o?g.LEFT:g.RIGHT,source:this.props.image.preview_url,height:this.props.height,width:this.props.width,onClick:this._handleClickPicture,isLoading:!!this.props.image.preview_uploading}));}});e.exports=n;},null);
__d("ChatGridImage.react",["Link.react","React","cx"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';var j=h,k=j.PropTypes,l=h.createClass({displayName:"ChatGridImage",propTypes:{isLoading:k.bool,onClick:k.func,size:k.number.isRequired,source:k.string},render:function(){if(this.props.isLoading)return (h.createElement("div",{className:"_4ypb",style:{width:this.props.size,height:this.props.size}}));return (h.createElement(g,{onClick:this.props.onClick},h.createElement("div",{className:"_332l",style:{backgroundImage:'url('+this.props.source+')',width:this.props.size,height:this.props.size}})));}});e.exports=l;},null);
__d("MercuryAttachmentPhotoGrid.react",["ChatGridImage.react","ChatImageArrowDirection","ChatImageWithArrow.react","Grid.react","MercuryAttachmentType","MercuryMessageInfo","MessagesViewer","React","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();'use strict';var p=j.GridItem,q=n,r=q.PropTypes,s=n.createClass({displayName:"MercuryAttachmentPhotoGrid",propTypes:{images:r.arrayOf(r.object).isRequired,size:r.number.isRequired,message:r.object.isRequired},componentDidMount:function(){m.preload();},_generateClickHandler:function(t){var u=this.props.images.some(function(v){return v.attach_type===k.ANIMATED_IMAGE;});return (function(v){m.bootstrapWithConfig({src:t.preview_url,endpoint:t.url,fbid:t.metadata.fbid,dimensions:t.metadata.dimensions,disablePaging:u},null);});},render:function(){var t=this.props.images,u=t.length,v=(u==2||u==4)?2:3,w=Math.floor(this.props.size/v),x=l.isInbound(this.props.message),y=x?0:v-1,z=[];for(var aa=0;aa<t.length;aa++)if(aa===y){z.push(n.createElement(p,{key:aa},n.createElement(i,{arrowDirection:x?h.LEFT:h.RIGHT,source:t[aa].preview_url,height:w,width:w,isLoading:!!t[aa].preview_uploading,onClick:this._generateClickHandler(t[aa])})));}else z.push(n.createElement(p,{key:aa},n.createElement(g,{isLoading:!!t[aa].preview_uploading,onClick:this._generateClickHandler(t[aa]),size:w,source:t[aa].preview_url})));return (n.createElement(j,{cols:v,className:"_5b2w",spacing:"_5b2x",alignh:"right"},z));}});e.exports=s;},null);
__d("FBOverlayBase.react",["React"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h=g.createClass({displayName:"FBOverlayBase",render:function(){return g.Children.only(this.props.children);}});e.exports=h;},null);
__d("FBOverlayElement.react",["React","cloneWithProps","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=g,l=k.PropTypes,m={horizontal:{left:"_32rg",right:"_32rh",fit:j("_32rg","_32rh")},vertical:{top:"_32ri",bottom:"_32rj",fit:j("_32ri","_32rj")}},n=g.createClass({displayName:"FBOverlayElement",propTypes:{horizontal:l.oneOf(['left','right','fit']),vertical:l.oneOf(['top','bottom','fit'])},getDefaultProps:function(){return {horizontal:'fit',vertical:'fit'};},render:function(){var o=j("_32rk",m.horizontal[this.props.horizontal],m.vertical[this.props.vertical]);return h(g.Children.only(this.props.children),{className:o});}});e.exports=n;},null);
__d("FBOverlayContainer.react",["FBOverlayBase.react","FBOverlayElement.react","React","cx","invariant","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m=i.createClass({displayName:"FBOverlayContainer",propTypes:{children:function(n,o){var p=n[o],q=0;i.Children.forEach(p,function(r){if(r===null||r===(void 0))return;switch(r.type){case g:q++;break;case h:break;default:k(false);}});k(q===1);}},render:function(){return (i.createElement("div",i.__spread({},this.props,{className:l(this.props.className,"_23n-")}),this.props.children));}});e.exports=m;},null);
__d("MercuryAttachmentVideo.react",["ChatAttachmentAttribution.react","ChatImageArrowDirection","ChatImageWithArrow.react","CenteredContainer.react","FBOverlayBase.react","FBOverlayContainer.react","FBOverlayElement.react","Image.react","ImmutableObject","MercuryAttachment","MessagesViewer","React","Vector","cx","ix"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){b.__markCompiled&&b.__markCompiled();var v=r,w=v.PropTypes,x=r.createClass({displayName:"MercuryAttachmentVideo",propTypes:{attachment:w.instanceOf(o),duration:w.number.isRequired,isChat:w.bool,isInbound:w.bool,name:w.string.isRequired,pageID:w.number,thumbSize:w.shape({height:w.number,width:w.number}).isRequired,thumbnail:w.string.isRequired,videoSize:w.shape({height:w.number,width:w.number}).isRequired,videoID:w.string.isRequired,videoURI:w.string.isRequired},componentDidMount:function(){q.preload();},_formatDuration:function(){var y=this.props.duration,z=Math.floor(y/60),aa=y%60;if(aa<10)return z+':0'+aa;return z+':'+aa;},openViewer:function(){var y=this.props,z=y.pageID,aa=y.videoID,ba=y.videoSize,ca=y.videoURI;ba=new s(ba.width,ba.height);q.renderVideo({pageID:z,videoID:aa,videoSize:ba,videoURI:ca});},_renderImage:function(){if(this.props.isChat){return (r.createElement("div",null,r.createElement(i,{arrowDirection:this.props.isInbound?h.LEFT:h.RIGHT,height:this.props.thumbSize.height,key:"previewImage",source:this.props.thumbnail,width:this.props.thumbSize.width}),r.createElement(g,{attachment:this.props.attachment,key:"chatAttribution"})));}else return (r.createElement(n,{height:this.props.thumbSize.height,width:this.props.thumbSize.width,src:this.props.thumbnail}));},_getStyle:function(){if(this.props.isChat)return {};return this.props.thumbSize;},render:function(){var y=p.hasAttribution(this.props.attachment),z=(("clearfix")+(' '+"_zow")+(' '+"_59go")+(y?' '+"_4yjw":'')+(this.props.isChat?' '+"_3ds5":'')),aa=(r.createElement(l,{className:z,key:"overlayContainer",onClick:this.openViewer,style:this._getStyle()},r.createElement(k,null,this._renderImage()),r.createElement(m,null,r.createElement("div",{className:((!this.props.isChat?"_zox":'')+(y?' '+"_jt3":''))},r.createElement("span",{className:"_zoz"},this._formatDuration()))),r.createElement(m,null,r.createElement(j,{className:((y?"_jt3":'')),vertical:true},r.createElement(n,{src:u('/images/chat/chat_play_icon.png')})))));if(this.props.isChat)return aa;return (r.createElement("div",null,aa,r.createElement(g,{attachment:this.props.attachment,key:"inboxAttribution"})));}});e.exports=x;},null);
__d("FBTilesMapZoomOverlay.react",["Image.react","React","ReactComponentWithPureRenderMixin","XUIButton.react","cx","ix"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';var m=h,n=m.PropTypes,o=h.createElement(g,{src:l('/images/ads/common/zoom_icon/icon_plus.png')}),p=h.createElement(g,{src:l('/images/ads/common/zoom_icon/icon_minus.png')}),q=h.createClass({displayName:"FBTilesMapZoomOverlay",mixins:[i],propTypes:{onZoomIn:n.func,onZoomOut:n.func},render:function(){var r=this.props,s=r.onZoomIn,t=r.onZoomOut,u=(function(v,w){var x={},y=Object.prototype.hasOwnProperty;if(v==null)throw new TypeError();for(var z in v)if(y.call(v,z)&&!y.call(w,z))x[z]=v[z];return x;})(r,{onZoomIn:1,onZoomOut:1});return (h.createElement("div",h.__spread({},u),h.createElement("div",null,h.createElement(j,{disabled:s==null,image:o,onClick:s,type:"button"})),h.createElement("div",null,h.createElement(j,{className:"_3d8x",disabled:t==null,image:p,onClick:t,type:"button"}))));}});e.exports=q;},null);
__d("SubscriptionList",["invariant"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();function h(i,j){"use strict";this.$SubscriptionList0=[];this.$SubscriptionList1=i;this.$SubscriptionList2=j;}h.prototype.$SubscriptionList3=function(i){"use strict";var j=this.$SubscriptionList0.indexOf(i);g(j!==-1);this.$SubscriptionList0.splice(j,1);if(this.$SubscriptionList0.length===0)this.$SubscriptionList2.call(this);};h.prototype.add=function(i){"use strict";var j={callback:i};this.$SubscriptionList0.push(j);if(this.$SubscriptionList0.length===1)this.$SubscriptionList1.call(this);return {remove:this.$SubscriptionList3.bind(this,j)};};h.prototype.getCallbacks=function(){"use strict";return this.$SubscriptionList0.map(function(i){return i.callback;});};h.prototype.fireCallbacks=function(){"use strict";for(var i=[],j=0,k=arguments.length;j<k;j++)i.push(arguments[j]);this.$SubscriptionList0.forEach(function(l){l.callback.apply(null,i);});};e.exports=h;},null);
__d("ElementResizeEmitter",["DOM","EventListener","SubscriptionList","cx","invariant","requestAnimationFrame"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';var m=!!navigator.userAgent.match(/Trident/);for(var n in i)if(i.hasOwnProperty(n))p[n]=i[n];var o=i===null?null:i.prototype;p.prototype=Object.create(o);p.prototype.constructor=p;p.__superConstructor__=i;function p(q){k(getComputedStyle(q).position!=='static');i.call(this,p.__setup,p.__teardown);this.$ElementResizeEmitter0=q;this.$ElementResizeEmitter1=false;}p.__setup=function(){var q=document.createElement('iframe');this.$ElementResizeEmitter2=q;if(m)q.src=("javascript:void((function(){document.open();document.domain="+JSON.stringify(document.domain)+";document.close();})())");q.className="_3dtr";q.onload=this.$ElementResizeEmitter3.bind(this);this.$ElementResizeEmitter0.appendChild(q);};p.__teardown=function(){if(this.$ElementResizeEmitter4!=(void 0))this.$ElementResizeEmitter4.remove();if(this.$ElementResizeEmitter2){g.remove(this.$ElementResizeEmitter2);this.$ElementResizeEmitter2=(void 0);}};p.prototype.$ElementResizeEmitter3=function(){this.$ElementResizeEmitter5();var q;try{q=this.$ElementResizeEmitter2.contentWindow;q.document;}catch(r){return;}this.$ElementResizeEmitter4=h.listen(q,'resize',this.$ElementResizeEmitter5.bind(this));};p.prototype.$ElementResizeEmitter5=function(){if(this.$ElementResizeEmitter1)return;this.$ElementResizeEmitter1=true;l(function(){this.fireCallbacks();this.$ElementResizeEmitter1=false;}.bind(this));};e.exports=p;},null);
__d("forEachDifference",["forEachObject"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';function h(i,j,k){g(i,function(l,m){if(Object.prototype.hasOwnProperty.call(j,m)){k.onBoth&&k.onBoth(l,j[m],m);}else k.onLeft&&k.onLeft(l,m);});g(j,function(l,m){if(!Object.prototype.hasOwnProperty.call(i,m))k.onRight&&k.onRight(l,m);});}e.exports=h;},null);
__d("partitionObject",["forEachObject"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';function h(i,j,k){var l={},m={};g(i,function(n,o){if(j.call(k,n,o,i)){l[o]=n;}else m[o]=n;});return [l,m];}e.exports=h;},null);
__d("partitionObjectByKey",["partitionObject"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';function h(i,j){return g(i,function(k,l){return j.has(l);});}e.exports=h;},null);
__d("LeafletMapLayer.react",["LeafletLayer.react","React","invariant","onlyChild"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';var k=h,l=k.PropTypes,m=h.createClass({displayName:"LeafletMapLayer",propTypes:{onAddLayer:l.func.isRequired,onRemoveLayer:l.func.isRequired},componentDidMount:function(){var n=j(this.props.children);i(n.type.mutate);i(n.type.toLayer);},render:function(){var n=j(this.props.children);return (h.createElement(g,h.__spread({},n.props,{onAddLayer:this.props.onAddLayer,onRemoveLayer:this.props.onRemoveLayer,onCreateLayer:this._createLayer,onUpdateLayer:this._mutate})));},_createLayer:function(){var n=j(this.props.children);this._prevChild=n;return n.type.toLayer(n.props);},_mutate:function(n,o,p){var q=j(this.props.children);if(q.type!==this._prevChild.type)return false;this._prevChild=q;return q.type.mutate(n,o,p);}});e.exports=m;},null);
__d("nearlyEqualNumbers",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(h,i){if(h===i)return true;var j=Math.abs(h-i);if(j<Number.EPSILON)return true;var k=Math.abs(h),l=Math.abs(i);return j/(k+l)<Number.EPSILON;}e.exports=g;},null);
__d("LeafletView",["GeoCoordinates","ImmutableObject","invariant","nearlyEqualNumbers"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';for(var k in h)if(h.hasOwnProperty(k))m[k]=h[k];var l=h===null?null:h.prototype;m.prototype=Object.create(l);m.prototype.constructor=m;m.__superConstructor__=h;function m(n){i(n);i(n.center instanceof g);i(typeof n.zoom==='number');h.call(this,n);}m.prototype.nearlyEquals=function(n){return (this.center.nearlyEquals(n.center)&&j(this.zoom,n.zoom));};m.prototype.setZoom=function(n){return new m({center:this.center,zoom:n});};m.DEFAULT=new m({center:new g(0,0),zoom:0});e.exports=m;},null);
__d("mod",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(h,i){var j=h%i;if(j*i<0)j+=i;return j;}e.exports=g;},null);
__d("LeafletUtils",["GeoCoordinates","leaflet","LeafletView","invariant","mod"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l=h.CRS.EPSG3857,m=360,n=m/2,o=h.LatLng.DEG_TO_RAD,p=h.LatLng.RAD_TO_DEG,q=h.Projection.Mercator.R_MAJOR;function r(t){var u=t.zoomRange;j(Array.isArray(u)&&u.length===2);return u;}var s={fromLatLng:function(t){return new g(t.lat,t.lng);},normalizedBounds:function(t,u){var v=s.wrapLongitude(t.lng);u=h.latLng(u.lat,u.lng+v-t.lng);t=h.latLng(t.lat,v);return h.latLngBounds(t,u);},fitBounds:function(t,u,v){var w=v.crs||l,x=r(v),y=s.getBoundsZoom(t,u,{zoomRange:x,crs:w});if(y===null)y=x[0];var z=w.latLngToPoint(t.getSouthWest(),y),aa=w.latLngToPoint(t.getNorthEast(),y),ba=s.fromLatLng(w.pointToLatLng(z.add(aa).divideBy(2),y));return new i({center:ba,zoom:y});},getBoundsZoom:function(t,u,v){var w=v.crs||l,x=r(v),y=h.point(u.width,u.height),z=t.getNorthWest(),aa=t.getSouthEast(),ba=x[0]-1;for(;ba<=x[1];++ba){var ca=w.latLngToPoint(aa,ba+1),da=w.latLngToPoint(z,ba+1),ea=ca.subtract(da).floor();if(!y.contains(ea))break;}if(ba<x[0])return null;if(ba<=x[1])return ba;return ba-1;},getViewBounds:function(t,u,v){v=v||l;var w=u.width/2,x=u.height/2,y=s.toLatLng(t.center),z=v.latLngToPoint(y,t.zoom),aa=v.pointToLatLng(h.point(z.x-w,z.y+x),t.zoom),ba=v.pointToLatLng(h.point(z.x+w,z.y-x),t.zoom);return s.normalizedBounds(aa,ba);},isViewInBounds:function(t,u,v,w){var x=s.getViewBounds(t,u,w),y=s.shiftBoundsLng(x,m);return v.some(function(z){return z.contains(x)||z.contains(y);});},projectCircle:function(t,u,v){v=v||l;var w=s.toLatLng(t.center),x=v.projection,y=s.circleBounds(w,t.radius,x),z=v.latLngToPoint(y.getCenter(),u),aa=v.latLngToPoint(y.getSouthWest(),u),ba=v.latLngToPoint(y.getNorthEast(),u),ca=h.point(Math.round((ba.x-aa.x)/2),Math.round((aa.y-ba.y)/2));return {center:z,radius:ca};},circleBounds:function(t,u,v){v=v||l.projection;var w=t.lat,x=t.lng,y=(u/q)*p,z=v.project(h.latLng(w+y,x)),aa=v.project(h.latLng(w-y,x)),ba=z.add(aa).divideBy(2),ca=v.unproject(ba).lat,da=w*o,ea=ca*o,fa=Math.acos((Math.cos(y*o)-Math.sin(da)*Math.sin(ea))/(Math.cos(da)*Math.cos(ea)))*p;return h.latLngBounds(h.latLng(ca-y,x-fa),h.latLng(ca+y,x+fa));},shiftBoundsLng:function(t,u){return h.latLngBounds([t.getSouthWest().lat,t.getSouthWest().lng+u],[t.getNorthEast().lat,t.getNorthEast().lng+u]);},toLatLng:function(t){return new h.LatLng(t.latitude,t.longitude);},wrapLongitude:function(t){return k(t+n,m)-n;}};e.exports=s;},null);
__d("LeafletMap.react",["ElementResizeEmitter","leaflet","LeafletMapLayer.react","LeafletUtils","LeafletView","React","Set","debounceCore","emptyFunction","forEachDifference","invariant","keyMirror"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){b.__markCompiled&&b.__markCompiled();'use strict';var s=l,t=s.PropTypes,u=100,v=10,w=new m(['dragging','touchZoom','doubleClickZoom','scrollWheelZoom','boxZoom','keyboard','tab']),x=t.instanceOf(k),y=r({STILL:undefined,MOVING:undefined,MOVING_STALE:undefined});function z(ca){var da=ca.getCenter();return new k({center:j.fromLatLng(da),zoom:ca.getZoom()});}function aa(ca,da){return {center:[ca.center.latitude,ca.center.longitude],zoom:ca.zoom,attributionControl:false,layers:da,trackResize:false};}var ba=l.createClass({displayName:"LeafletMap",propTypes:{className:t.string,defaultOptions:t.object,defaultView:t.instanceOf(k),eventHandlers:t.object,onSizeSettled:t.func,onViewChange:t.func,options:t.object,style:t.object,view:function(ca,da,ea){var fa=x(ca,da,ea);if(!ca[da]||fa)return fa;if(ca[da]&&ca.defaultView)return new Error('You provided both `view` and `defaultView` props to LeafletMap. '+'`defaultView` will be discarded.');if(ca.onViewChange)return;return new Error('You provided a `view` prop to LeafletMap without an '+'`onViewChange` handler. This will prevent the user to move the '+'view. If the view should be movable use `defaultView`. Otherwise, '+'set `onViewChange`.');}},childContextTypes:{onAddLayer:t.func.isRequired,onRemoveLayer:t.func.isRequired},getChildContext:function(){return {onAddLayer:this._onAddLayer,onRemoveLayer:this._onRemoveLayer};},componentDidMount:function(){var ca=Object.assign({},this.props.defaultOptions,this.props.options,aa(this._getView(),this._getInitLayers()));this._map=h.map(l.findDOMNode(this),ca);this._initLayers=null;this._setViewFromPropDebounced=n(this._setViewFromProp,u);this._updateEventHandlers({});this._map.on('movestart',this._onMoveStart);this._map.on('moveend',this._onMoveEnd);this._internalViewState=y.STILL;this._warnings=new m();this._setView=n(function(da,ea){if(this._map)this._map.setView(da,ea);}.bind(this),v);this._resizeListener=(new g(l.findDOMNode(this))).add(function(){this._map.invalidateSize();this.props.onSizeSettled(this._map.getSize());}.bind(this));},componentDidUpdate:function(ca,da){this._updateEventHandlers(ca.eventHandlers);this._updateOptions(ca.options);this._updateView(ca.view);},componentWillUnmount:function(){this._resizeListener.remove();this._map.remove();this._map=null;},getDefaultProps:function(){return {eventHandlers:{},onSizeSettled:o,options:{}};},render:function(){var ca=l.Children.map(this.props.children,function(da,ea){if(!da)return da;if(da.type.toLayer==null)return da;return (l.createElement(i,{key:da.key,onAddLayer:this._onAddLayer,onRemoveLayer:this._onRemoveLayer},da));}.bind(this));return (l.createElement("div",{className:this.props.className,style:Object.assign({display:'relative'},this.props.style)},ca));},_getInitLayers:function(){if(!this._initLayers)this._initLayers=[];return this._initLayers;},_getView:function(){if(this.props.view)return this.props.view;if(this.props.defaultView)return this.props.defaultView;return k.DEFAULT;},_onAddLayer:function(ca){if(this._map){this._map.addLayer(ca);return;}this._getInitLayers().push(ca);},_onMoveEnd:function(ca){if(!this._map)return;var da=z(this._map),ea=this._internalViewState;this._internalViewState=y.STILL;if(this.props.view){if(ea===y.MOVING_STALE){this._setViewFromProp();return;}if(da.nearlyEquals(this.props.view))return;this._setViewFromPropDebounced();}if(!this.props.onViewChange)return;this.props.onViewChange(da);},_onMoveStart:function(){if(!this._map)return;if(this._internalViewState===y.STILL)this._internalViewState=y.MOVING;},_onRemoveLayer:function(ca){q(this._map!==undefined);if(this._map!==null)this._map.removeLayer(ca);},_setOption:function(ca,da){if(!w.has(ca))throw new Error('cannot change Leaflet option `'+ca+'` during component lifetime');this._map[ca][da?'enable':'disable']();},_setViewFromProp:function(){this._setViewFromPropDebounced.reset();if(this._internalViewState===y.MOVING)this._internalViewState=y.MOVING_STALE;var ca=this.props.view;if(ca.nearlyEquals(z(this._map)))return;this._setView([ca.center.latitude,ca.center.longitude],ca.zoom);},_updateEventHandlers:function(ca){p(this.props.eventHandlers,ca,{onLeft:function(da,ea){this._map.on(ea,da);}.bind(this),onRight:function(da,ea){this._map.off(ea,da);}.bind(this),onBoth:function(da,ea,fa){if(da!==ea){this._map.off(fa,ea);this._map.on(fa,da);}}.bind(this)});},_updateOptions:function(ca){if(this.props.options===ca)return;p(this.props.options,ca,{onLeft:function(da,ea){return this._setOption(ea,da);}.bind(this),onRight:function(da,ea){throw new Error('reverting Leaflet option `'+ea+'` back to default is not supported');},onBoth:function(da,ea,fa){if(da!==ea)this._setOption(fa,da);}.bind(this)});},_updateView:function(ca){var da=this.props.view;if(!da||!this._map||da===ca||da.nearlyEquals(ca))return;this._setViewFromProp();},_warnForDefaultProp:function(ca,da){if(ca[da]!==this.props[da]&&!this._warnings.has(da))this._warnings.add(da);}});e.exports=ba;},null);
__d("LeafletTileLayer.react",["React","leaflet","LeafletLayer.react","areEqual"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=g,l=k.PropTypes,m=g.createClass({displayName:"LeafletTileLayer",propTypes:{options:l.object,urlTemplate:l.string.isRequired},render:function(){return (g.createElement(i,g.__spread({},this.props,{onCreateLayer:n,onUpdateLayer:o})));}});function n(p){return h.tileLayer(p.urlTemplate,p.options);}function o(p,q,r){var s=r.options||{},t=s.opacity,u=s.zIndex,v=(function(aa,ba){var ca={},da=Object.prototype.hasOwnProperty;if(aa==null)throw new TypeError();for(var ea in aa)if(da.call(aa,ea)&&!da.call(ba,ea))ca[ea]=aa[ea];return ca;})(s,{opacity:1,zIndex:1}),w=q.options||{},x=w.opacity,y=w.zIndex,z=(function(aa,ba){var ca={},da=Object.prototype.hasOwnProperty;if(aa==null)throw new TypeError();for(var ea in aa)if(da.call(aa,ea)&&!da.call(ba,ea))ca[ea]=aa[ea];return ca;})(w,{opacity:1,zIndex:1});if(!j(z,v))return false;if(x!==t)p.setOpacity(x);if(y!==u)p.setZIndex(y);if(q.urlTemplate!==r.urlTemplate)p.setUrl(q.urlTemplate);return true;}e.exports=m;},null);
__d("FBTilesMap.react",["FBOverlayBase.react","FBOverlayContainer.react","FBOverlayElement.react","FBTilesAttributionLogo.react","FBTilesMapZoomOverlay.react","LeafletMap.react","FBTilesReportButton.react","LeafletTileLayer.react","React","TilesMapConfig","TilesMapUtils","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){b.__markCompiled&&b.__markCompiled();'use strict';var s=o,t=s.PropTypes,u=q.getTileURLTemplate(),v={maxZoom:p.ZOOM_RANGE.MAX,minZoom:p.ZOOM_RANGE.MIN};function w(ba,ca){if(ca!=null&&ca.type===i)return ba?ca:undefined;return ba?undefined:ca;}var x=function(ba){return o.Children.map(ba,w.bind(undefined,false));},y=function(ba){return o.Children.map(ba,w.bind(undefined,true));};function z(ba){return {overlays:y(ba),others:x(ba)};}var aa=o.createClass({displayName:"FBTilesMap",propTypes:{className:t.string,showZoomControls:t.bool,showReportButton:t.bool,style:t.object},getDefaultProps:function(){return {showReportButton:true};},getInitialState:function(){return {size:undefined};},render:function(){var ba=this.props,ca=ba.children,da=ba.className,ea=ba.style,fa=(function(ja,ka){var la={},ma=Object.prototype.hasOwnProperty;if(ja==null)throw new TypeError();for(var na in ja)if(ma.call(ja,na)&&!ma.call(ka,na))la[na]=ja[na];return la;})(ba,{children:1,className:1,style:1}),ga=z(ca),ha=ga.others,ia=ga.overlays;return (o.createElement(h,{className:da,style:ea},o.createElement(g,null,this._renderMap(ha,fa)),ia,this._renderAttribution(),this._renderReportButton(),this._renderZoomControls()));},_onSizeSettled:function(ba){this.setState({size:ba});if(this.props.onSizeSettled!=null)this.props.onSizeSettled(ba);},_onZoomIn:function(){var ba=this.props.view;if(ba==null||this.props.onViewChange==null)return;if(ba.zoom<p.ZOOM_RANGE.MAX)this.props.onViewChange(ba.setZoom(ba.zoom+1));},_onZoomOut:function(){var ba=this.props.view;if(ba==null||this.props.onViewChange==null)return;if(ba.zoom>p.ZOOM_RANGE.MIN)this.props.onViewChange(ba.setZoom(ba.zoom-1));},_renderAttribution:function(){if(this.state.size==null)return;var ba=q.getMapProviderForAttribution(this.props.view,{width:this.state.size.x,height:this.state.size.y});if(ba===null)return;return (o.createElement(i,{vertical:"bottom",horizontal:"left"},o.createElement(j,{mapProvider:ba})));},_renderReportButton:function(){if(!this.props.showReportButton||!p.IS_REPORT_BUTTON_ENABLED||this.state.size==null)return;return (o.createElement(i,{vertical:"bottom",horizontal:"right"},o.createElement(m,{leafletView:this.props.view})));},_renderMap:function(ba,ca){var da=Object.assign({},ca.options,{zoomControl:false});return (o.createElement(l,o.__spread({},ca,{className:"_5db7",onSizeSettled:this._onSizeSettled,options:da}),o.createElement(n,{options:v,urlTemplate:u}),ba));},_renderZoomControls:function(){if(this.props.view==null||this.props.onViewChange==null||!this.props.showZoomControls)return;var ba=this.props.view.zoom<v.maxZoom?this._onZoomIn:undefined,ca=this.props.view.zoom>v.minZoom?this._onZoomOut:undefined;return (o.createElement(i,{vertical:"top",horizontal:"left"},o.createElement(k,{className:"_3-8j",onZoomIn:ba,onZoomOut:ca})));}});e.exports=aa;},null);
__d("AbstractActionList.react",["React","ReactChildren","ReactFragment"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=' \u00b7 ',k=g.createClass({displayName:"AbstractActionList",render:function(){var l=true,m=h.map(this.props.children,function(n){if(!n)return n;if(l){l=false;return n;}return i.create({BULLET:j,child:n});});return g.createElement("div",g.__spread({},this.props),m);}});e.exports=k;},null);
__d("ActionList.react",["AbstractActionList.react","joinClasses","React"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=i.createClass({displayName:"ActionList",render:function(){return (i.createElement(g,i.__spread({},this.props,{className:h(this.props.className,"fsm fwn fcg")}),this.props.children));}});e.exports=j;},null);
__d("updatePhotoProgressBar",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();'use strict';function g(h,event){if(event.loaded!=event.total){h.setPosition(50*event.loaded/event.total);}else{h.setPosition(50);h.setTarget(100,2000);}}e.exports=g;},null);
__d("LeafletPath",["Set","areEqual","partitionObjectByKey"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';var j=(function(){var l=new g(['color','dashArray','fill','fillColor','fillOpacity','lineCap','lineJoin','opacity','stroke','weight']);return function(m){return i(m,l);};})(),k={mutateOptions:function(l,m,n){var o=j(m||{}),p=o[0],q=o[1],r=j(n||{}),s=r[0],t=r[1];if(!h(q,t))return false;if(!h(p,s))l.setStyle(p);return true;}};e.exports=k;},null);
__d("LeafletCircleMarker.react",["GeoCoordinates","leaflet","LeafletPath","LeafletUtils","React"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l=k,m=l.PropTypes,n=k.createClass({displayName:"LeafletCircleMarker",propTypes:{options:m.object,center:m.instanceOf(g).isRequired},statics:{mutate:function(o,p,q){var r=p.options||{},s=r.radius,t=(function(x,y){var z={},aa=Object.prototype.hasOwnProperty;if(x==null)throw new TypeError();for(var ba in x)if(aa.call(x,ba)&&!aa.call(y,ba))z[ba]=x[ba];return z;})(r,{radius:1}),u=q.options||{},v=u.prevRadius,w=(function(x,y){var z={},aa=Object.prototype.hasOwnProperty;if(x==null)throw new TypeError();for(var ba in x)if(aa.call(x,ba)&&!aa.call(y,ba))z[ba]=x[ba];return z;})(u,{prevRadius:1});if(!i.mutateOptions(o,t,w))return false;if(p.center!==q.center)o.setLatLng(j.toLatLng(p.center));if(s!==v)o.setRadius(p.radius);return true;},toLayer:function(o){return h.circleMarker(j.toLatLng(o.center),o.options);}},render:function(){return null;}});e.exports=n;},null);
__d("LeafletPopup.react",["GeoCoordinates","leaflet","LeafletUtils","React","areEqual"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l=j,m=l.PropTypes,n=j.createClass({displayName:"LeafletPopup",propTypes:{options:m.object,coordinates:m.instanceOf(g)},statics:{mutate:function(o,p,q){if(!k(p.options,q.options))return false;if(p.coordinates!==q.coordinates)o.setLatLng(i.toLatLng(p.coordinates));var r=o.getContent(),s=j.Children.only(p.children);j.render(s,r);return true;},toLayer:function(o){var p=h.popup(o.options);if(o.coordinates)p.setLatLng(i.toLatLng(o.coordinates));var q=j.Children.only(o.children),r=document.createElement('div');p.setContent(r);j.render(q,r,function(){return p.update();});return p;}},render:function(){return null;}});e.exports=n;},null);
__d("LeafletMarker.react",["GeoCoordinates","leaflet","LeafletLayer.react","LeafletPopup.react","LeafletUtils","React","areEqual"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();var n=l,o=n.PropTypes,p=l.createClass({displayName:"LeafletMarker",propTypes:{options:o.object,eventHandlers:o.object,coordinates:o.instanceOf(g).isRequired,popup:o.instanceOf(j)},statics:{mutate:function(q,r,s){var t=s.options||{},u=t.opacity,v=t.zIndex,w=(function(ca,da){var ea={},fa=Object.prototype.hasOwnProperty;if(ca==null)throw new TypeError();for(var ga in ca)if(fa.call(ca,ga)&&!fa.call(da,ga))ea[ga]=ca[ga];return ea;})(t,{opacity:1,zIndex:1}),x=r.options||{},y=x.opacity,z=x.zIndex,aa=(function(ca,da){var ea={},fa=Object.prototype.hasOwnProperty;if(ca==null)throw new TypeError();for(var ga in ca)if(fa.call(ca,ga)&&!fa.call(da,ga))ea[ga]=ca[ga];return ea;})(x,{opacity:1,zIndex:1});if(!m(aa,w))return false;i.mutateEventHandlers(q,r.eventHandlers,s.eventHandlers);if(y!==u)q.setOpacity(y);if(z!==v)q.setZIndex(z);if(r.coordinates!==s.coordinates)q.setLatLng(k.toLatLng(r.coordinates));if(r.popup){var ba=r.popup.type.mutate(q.getPopup(),r.popup.props,s.popup.props);if(!ba){q.unbindPopup();q.bindPopup(r.popup.type.toLayer(r.popup.props));}}else if(!r.popup&&s.popup)q.unbindPopup();return true;},toLayer:function(q){var r=h.marker(k.toLatLng(q.coordinates),q.options);i.addEventHandlers(r,q.eventHandlers);if(q.popup)r.bindPopup(q.popup.type.toLayer(q.popup.props));return r;}},render:function(){return null;}});e.exports=p;},null);
__d("LeafletPolyline.react",["leaflet","LeafletPath","LeafletUtils","immutable","React","nearlyEqualNumbers"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';var m=k,n=m.PropTypes,o=k.createClass({displayName:"LeafletPolyline",propTypes:{options:n.object,coordinates:n.instanceOf(j.List).isRequired},statics:{coordinatesToLatLngs:function(p){return p.toSeq().map(i.toLatLng).toArray();},mutate:function(p,q,r){if(!o.mutateOptions(p,q.options,r.options))return false;if(!j.is(q.coordinates,r.coordinates))p.setLatLngs(o.coordinatesToLatLngs(q.coordinates));return true;},toLayer:function(p){return g.polyline(o.coordinatesToLatLngs(p.coordinates),p.options);},mutateOptions:function(p,q,r){var s=q||{},t=s.smoothFactor,u=s.noClip,v=(function(aa,ba){var ca={},da=Object.prototype.hasOwnProperty;if(aa==null)throw new TypeError();for(var ea in aa)if(da.call(aa,ea)&&!da.call(ba,ea))ca[ea]=aa[ea];return ca;})(s,{smoothFactor:1,noClip:1}),w=r||{},x=w.smoothFactor,y=w.noClip,z=(function(aa,ba){var ca={},da=Object.prototype.hasOwnProperty;if(aa==null)throw new TypeError();for(var ea in aa)if(da.call(aa,ea)&&!da.call(ba,ea))ca[ea]=aa[ea];return ca;})(w,{smoothFactor:1,noClip:1});if(!h.mutateOptions(p,z,v))return false;if(!l(x,t)||y!==u)return false;return true;}},render:function(){return null;}});e.exports=o;},null);
__d("MessengerPhotoishXMA.react",["React","requireWeak"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';var i;h('MessengerPhotosGroup.react',function(n){i=n;});var j=g.Component;for(var k in j)if(j.hasOwnProperty(k))m[k]=j[k];var l=j===null?null:j.prototype;m.prototype=Object.create(l);m.prototype.constructor=m;m.__superConstructor__=j;function m(n){j.call(this,n);}m.prototype.shouldComponentUpdate=function(n,o){return this.props!==n;};m.prototype.render=function(){if(!i)return null;return g.createElement(i,g.__spread({},this.props));};e.exports=m;},null);
__d("MNCommerceReceiptActions",["MessengerDispatcher","MNCommerceActionTypes"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';var i={receiptLoaded:function(j){g.dispatch({type:h.RECEIPT.LOADED,receipt:j});},receiptLoadError:function(j){g.dispatch({type:h.RECEIPT.LOAD_ERROR,receiptID:j});},receiptReload:function(j){g.dispatch({type:h.RECEIPT.RELOAD,receiptID:j});}};e.exports=i;},null);
__d("MNCommerceShipmentActions",["MessengerDispatcher","MNCommerceActionTypes"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';var i={shipmentLoaded:function(j){g.dispatch({type:h.SHIPMENT.LOADED,shipment:j});},shipmentLoadError:function(j){g.dispatch({type:h.SHIPMENT.LOAD_ERROR,shipmentID:j});},shipmentReload:function(j){g.dispatch({type:h.SHIPMENT.RELOAD,shipmentID:j});}};e.exports=i;},null);
__d("MNCommerceAddress.react",["React"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';var h=g,i=h.PropTypes,j=g.createClass({displayName:"MNCommerceAddress",propTypes:{name:i.string,rawAddress:i.string,address:i.shape({street_1:i.string,street_2:i.string,city:i.string,state:i.string,postal_code:i.string})},render:function(){if(this.props.rawAddress)return this._renderFallbackAddress();return this._renderProperAddress();},_renderProperAddress:function(){if(!this.props.address)return null;return (g.createElement("div",null,this._renderName(),g.createElement("div",null,this.props.address.street_1),g.createElement("div",null,this.props.address.street_2),g.createElement("div",null,this._getCityStateZip())));},_getCityStateZip:function(){var k=null;if(this.props.address.city)k=this.props.address.city;if(this.props.address.state){k+=k?', ':'';k+=this.props.address.state;}if(this.props.address.postal_code){k+=k?' ':'';k+=this.props.address.postal_code;}return k;},_renderFallbackAddress:function(){return (g.createElement("div",null,this._renderName(),g.createElement("div",null,this.props.rawAddress)));},_renderName:function(){if(this.props.name)return (g.createElement("div",null,this.props.name));}});e.exports=j;},null);
__d("MNCommerceDetailSection.react",["React","cx"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';var i=g,j=i.PropTypes,k=g.createClass({displayName:"MNCommerceDetailSection",propTypes:{headerLabel:j.string.isRequired,margin:j.number},getDefaultProps:function(){return {margin:0};},render:function(){return (g.createElement("div",{className:this.props.className},g.createElement("div",{className:"_5171",style:{marginBottom:this.props.margin}},this.props.headerLabel),this.props.children));}});e.exports=k;},null);
__d("MNCommerceItemText.react",["MNCommerceOrderItemsStatus","React","cx","fbt","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l=h,m=l.PropTypes,n=h.createClass({displayName:"MNCommerceItemText",propTypes:{metalines:m.shape({metaline_1:m.string,metaline_2:m.string,metaline_3:m.string}),title:m.string,size:m.oneOf(['large','small']),statusType:m.number},getDefaultProps:function(){return {size:'small'};},render:function(){var o=this.props,p=o.className,q=(function(s,t){var u={},v=Object.prototype.hasOwnProperty;if(s==null)throw new TypeError();for(var w in s)if(v.call(s,w)&&!v.call(t,w))u[w]=s[w];return u;})(o,{className:1}),r=(("_swr")+(q.size==='small'?' '+"_sws":''));return (h.createElement("div",h.__spread({className:k(p,r)},q),h.createElement("div",{className:"_51fw"},this.props.title),h.createElement("div",{className:"_2y0f"},this._renderMetaData())));},_renderMetaData:function(){if(this.props.metalines)return (h.createElement("div",null,this._renderMetaDataSection(this.props.metalines.metaline_1),this._renderMetaDataSection(this.props.metalines.metaline_2),this._renderPriceMetaDataSection()));},_renderMetaDataSection:function(o){if(o)return (h.createElement("div",null,o));},_renderPriceMetaDataSection:function(){if(this.props.size!=='large')return null;if(this.props.statusType===g.CANCELED)return (h.createElement("div",null,h.createElement("span",{className:"__hz"},j._("Canceled"),' \u00b7 '),this.props.metalines.metaline_3));return (h.createElement("div",null,this.props.metalines.metaline_3));}});e.exports=n;},null);
__d("MNCommerceSingleListItem.react",["Image.react","MNCommerceItemText.react","React","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l=i,m=l.PropTypes,n=i.createClass({displayName:"MNCommerceSingleListItem",propTypes:{description:m.string,thumbURL:m.string,imageDimension:m.number.isRequired,statusType:m.number},render:function(){return (i.createElement("div",{className:k(this.props.className,"_39q_"),style:{height:this.props.imageDimension,width:this.props.width}},i.createElement("div",{className:"_1fld"},this._renderImage()),i.createElement(h,i.__spread({className:"_1flf",style:{left:this.props.imageDimension},size:this.props.size,statusType:this.props.statusType},this.props))));},_renderImage:function(){var o=this.props.imageDimension;if(this.props.thumbURL){return (i.createElement(g,{className:"_1fle",height:o,src:this.props.thumbURL,width:o}));}else return (i.createElement("div",{className:"_1prr",style:{height:o,width:o}}));}});e.exports=n;},null);
__d("MNCommerceItemList.react",["List.react","MNCommerceSingleListItem.react","MNCommerceViewTypes","React","cx","fbt","getOwnObjectValues"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();'use strict';var n=j,o=n.PropTypes,p=2,q=10,r=j.createClass({displayName:"MNCommerceItemList",propTypes:{items:o.array,imageDimension:o.number.isRequired,size:o.oneOf(['large','small']),width:o.number,viewType:o.oneOf(m(i)).isRequired},render:function(){var s;switch(this.props.viewType){case i.DETAIL:s=q;break;case i.BUBBLE:s=p;break;}var t=this._getItems(s),u=this.props.items.length;if(u>s)t.push(j.createElement("li",{key:"andMore",className:"_24ry",style:{width:this.props.width}},l._("And {Number of items not visible} more",[l.param("Number of items not visible",u-s)])));return (j.createElement("div",null,j.createElement(g,{border:"none",spacing:"none"},t)));},_getItems:function(s){var t=this.props,u=t.imageDimension,v=t.items,w=v.map(function(x){return j.createElement("li",{key:x.id,className:(("_24rx")+(this.props.size==='large'?' '+"_1n5y":'')),style:{width:this.props.width}},j.createElement(h,j.__spread({imageDimension:u,size:this.props.size,width:this.props.width,statusType:x.status_type},x)));}.bind(this)).slice(0,s);return w;}});e.exports=r;},null);
__d("MNCommerceLogoHeader.react",["Image.react","React","cx"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';var j=h,k=j.PropTypes,l={width:72,height:24},m={width:36,height:12},n=3,o=.75,p=h.createClass({displayName:"MNCommerceLogoHeader",propTypes:{logo:k.object,logoPosition:k.oneOf(['left','right'])},render:function(){var q=this._renderLogo();if(this.props.children){var r=h.createElement("div",{className:(("_fy-")+(this.props.logoPosition==='left'?' '+"_fy_":'')),key:"children"},h.createElement("div",{className:"_56rv"},this.props.children)),s=[r];if(q)if(this.props.logoPosition==='right'){s.push(q);}else s.unshift(q);return (h.createElement("div",{className:"_56rt"},s));}else return q;},_renderLogo:function(){var q=this.props.logo;if(!q||!q.src)return null;var r=l.width,s=l.height,t=(q.width/q.height);if(Math.abs((n-t))<=o){r=m.width;s=m.height;}var u={float:this.props.children?this.props.logoPosition:'none'};u.maxWidth=r;return (h.createElement("div",{className:"_b0-",key:"logo"},h.createElement("div",{className:"_fz0",style:u},h.createElement(g,{className:"_56rs",height:q.height,src:q.src,width:q.width,style:{maxHeight:s}}))));}});e.exports=p;},null);
__d("MNCommerceOrderDetailsDialog.react",["MNCommerceAddress.react","MNCommerceAttachmentConstants","MNCommerceDetailSection.react","MNCommerceDialog.react","MNCommerceDialogBody.react","MNCommerceDialogTitle.react","MNCommerceItemList.react","MNCommerceLogoHeader.react","MNCommerceViewTypes","React","XUISpinner.react","XUIButton.react","cx","fbt","mergeDeep"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){b.__markCompiled&&b.__markCompiled();'use strict';var v=p,w=v.PropTypes,x=[h.ORDER_DETAIL.SUB_TOTAL,h.ORDER_DETAIL.SHIPPING,h.ORDER_DETAIL.TAX,h.ORDER_DETAIL.TOTAL],y={};y[h.ORDER_DETAIL.SUB_TOTAL]=t._("Subtotal");y[h.ORDER_DETAIL.SHIPPING]=t._("Shipping");y[h.ORDER_DETAIL.TAX]=t._("Tax");y[h.ORDER_DETAIL.TOTAL]=t._("Total");var z=p.createClass({displayName:"MNCommerceOrderDetailsDialog",propTypes:{receipt:w.object,shown:w.bool.isRequired,error:w.object,loading:w.bool.isRequired,onTryAgain:w.func},getDefaultProps:function(){return {shown:false};},getInitialState:function(){return this._calculateState(this.props);},componentWillReceiveProps:function(aa){this.setState(this._calculateState(aa));},_calculateState:function(aa){if(!aa.receipt)return {};var ba=aa.receipt,ca=Array.isArray(ba.structured_address)?null:ba.structured_address;return {address:ca,items:this._processItems(ba.items),logo:ba.partner_logo?{height:ba.partner_logo.height,width:ba.partner_logo.width,src:ba.partner_logo.url}:null,name:ba.recipient_name,orderDate:ba.order_time,orderNumber:ba.order_id,orderStatus:ba.status,payment:ba.payment_method,rawAddress:ba.address,shippingCost:ba.shipping_cost,subTotal:ba.subtotal,tax:ba.total_tax,totalCost:ba.total_cost};},render:function(){var aa=null;if(this.props.loading){aa=this._renderLoadingDetailsSection();}else if(this.props.error){aa=this._renderErrorDetailsSection();}else aa=this._renderFullDetailsSection();return (p.createElement(j,{onToggle:this.props.onToggle,shown:this.props.shown},p.createElement(l,null,t._("Order Details")),p.createElement(k,{useCustomPadding:true},p.createElement("div",{className:"_4vx2"},aa))));},_renderErrorDetailsSection:function(){return (p.createElement("div",{className:"_289q"},p.createElement("p",{className:"_289r"},"Sorry, Something Went Wrong"),p.createElement("p",{className:"_289s"},"Your order details couldn't be shown."),p.createElement(r,{onClick:this.props.onTryAgain,label:t._("Try Again")})));},_renderLoadingDetailsSection:function(){return (p.createElement("div",{className:"_p43"},p.createElement(q,{background:"light",size:"large",paused:false})));},_renderFullDetailsSection:function(){return (p.createElement("div",null,this._renderLogo(),this._renderItems(),p.createElement("div",{className:"_2hsz"}),p.createElement("div",null,p.createElement(i,{className:"_4vx4 _4vx5",headerLabel:t._("Ordered on")},this.state.orderDate),p.createElement(i,{className:"_4vx4",headerLabel:t._("Ship to")},p.createElement(g,{name:this.state.name,address:this.state.address,rawAddress:this.state.rawAddress})),p.createElement(i,{className:"_4vx4",headerLabel:t._("Paid with")},this.state.payment),p.createElement(i,{className:"_4vx4",headerLabel:t._("Summary")},this._renderOrderSummary())),p.createElement("div",{className:"_4vx6"},t._("Order number: {order number}",[t.param("order number",this.state.orderNumber)]))));},_processItems:function(aa){if(!aa)return null;var ba=Object.keys(aa).map(function(ca){var da=aa[ca],ea=u({},da);ea.id=ca;ea.thumbURL=da.thumb_url;return ea;});return ba;},_renderLogo:function(){if(!this.state.logo)return null;return (p.createElement("div",{className:"_4vx3"},p.createElement(n,{logo:this.state.logo,logoPosition:"left"})));},_renderItems:function(){var aa=h.DIALOG.WIDTH-2*h.DIALOG.PADDING;return (p.createElement("div",{className:"_39yr"},p.createElement(m,{imageDimension:h.XLARGE_IMAGE_DIMENSION,items:this.state.items,size:"large",viewType:o.DETAIL,width:aa})));},_renderOrderSummary:function(){var aa=x.map(function(ba){var ca=this.state[ba];return (p.createElement("div",{className:((ba==='totalCost'?"_4vx9":'')),key:ba},p.createElement("div",{className:"_4vx5"},y[ba]),p.createElement("div",{className:"_4vx5"},ca||'--')));}.bind(this));return aa;}});e.exports=z;},null);
__d("MNCommerceCacheTimeoutLimits",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();'use strict';var g={SUCCESS_TIMEOUT:10,ERROR_TIMEOUT:1};e.exports=g;},null);
__d("XMNCommerceOrderDetailsController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/messages\/commerce\/order_details\/",{receipt_id:{type:"String",required:true}});},null);
__d("MNCommerceReceiptDataManager",["AsyncRequest","MNCommerceReceiptActions","XMNCommerceOrderDetailsController"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';function j(){}j.prototype.fetchReceipt=function(k){var l=i.getURIBuilder().setString('receipt_id',k).getURI();new g().setURI(l).setHandler(this.$MNCommerceReceiptDataManager0).setErrorHandler(this.$MNCommerceReceiptDataManager1).send();};j.prototype.$MNCommerceReceiptDataManager0=function(k){h.receiptLoaded(k.payload);};j.prototype.$MNCommerceReceiptDataManager1=function(k){var l=k.getRequest().uri.getQueryData(),m=l.receipt_id;h.receiptLoadError(m);};e.exports=new j();},null);
__d("MNCommerceReceiptStore",["Cache","FluxStore","LoadObject","MessengerDispatcher","MNCommerceActionTypes","MNCommerceCacheTimeoutLimits","MNCommerceReceiptDataManager"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();'use strict';for(var n in h)if(h.hasOwnProperty(n))p[n]=h[n];var o=h===null?null:h.prototype;p.prototype=Object.create(o);p.prototype.constructor=p;p.__superConstructor__=h;function p(){h.call(this,j);this.$MNCommerceReceiptStore0=new g();}p.prototype.__onDispatch=function(q){var r=q.type,s=q.receiptID;switch(r){case k.RECEIPT.LOADED:var t=q.receipt;this.$MNCommerceReceiptStore0.set(t.receipt_id,i.empty().setValue(t),null,l.SUCCESS_TIMEOUT);this.__emitChange();break;case k.RECEIPT.LOAD_ERROR:this.$MNCommerceReceiptStore0.set(s,i.empty().setError(new Error('Unable to load receipt: '+s)),null,l.ERROR_TIMEOUT);this.__emitChange();break;case k.RECEIPT.RELOAD:if(s){this.$MNCommerceReceiptStore0.set(s,i.loading());m.fetchReceipt(s);}this.__emitChange();break;}};p.prototype.getReceipt=function(q){if(q&&!this.$MNCommerceReceiptStore0.has(q)){this.$MNCommerceReceiptStore0.set(q,i.loading().setValue({receiptID:q}));m.fetchReceipt(q);}return this.$MNCommerceReceiptStore0.get(q)||i.empty();};e.exports=new p();},null);
__d("MNCommerceOrderDetailsDialogContainer.react",["BanzaiLogger","MNCommerceDialogStateActions","MNCommerceDialogStateStore","MNCommerceLoggingConstants","MNCommerceLoggerEvents","MNCommerceOrderDetailsDialog.react","MNCommerceReceiptActions","MNCommerceReceiptStore","PureStoreBasedStateMixin","React"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){b.__markCompiled&&b.__markCompiled();'use strict';var q=p.createClass({displayName:"MNCommerceOrderDetailsDialogContainer",mixins:[o(n)],statics:{calculateState:function(){var r=i.getState(),s=null;if(r)s=r.receiptID;var t=n.getReceipt(s);if(!t.isLoading())g.log('MessengerCommerceLoggerConfig',{event:(t.hasError()?k.DIALOG_LOAD_ERROR:k.DIALOG_LOAD_SUCCESS),debug_data:JSON.stringify({dialog_surface:j.DIALOG_SURFACE.RECEIPT,receipt_id:s})});return {shown:!!r,loading:t.isLoading(),receiptID:s,receipt:t.getValue(),error:t.getError()};}},render:function(){return (p.createElement(l,{loading:this.state.loading,error:this.state.error,onToggle:this._onToggle,onTryAgain:this._onTryAgainClick,shown:this.state.shown,receipt:this.state.receipt}));},_onToggle:function(r){if(!r){g.log('MessengerCommerceLoggerConfig',{event:k.DIALOG_CLOSED,debug_data:JSON.stringify({dialog_surface:j.DIALOG_SURFACE.RECEIPT,receipt_id:this.state.receipt.receipt_id})});h.hideDialog();}},_onTryAgainClick:function(){m.receiptReload(this.state.receiptID);}});e.exports=q;},null);
__d("MNCommerceFooterTypes",["keyMirror"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h=g({TOTAL:null,REFUND:null});e.exports=h;},null);
__d("MNCommerceTotalCostFooter.react",["LeftRight.react","MNCommerceFooterTypes","React","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l=i,m=l.PropTypes,n=i.createClass({displayName:"MNCommerceTotalCostFooter",propTypes:{type:m.oneOf(Object.keys(h)),totalCost:m.string},render:function(){var o,p;switch(this.props.type){case h.TOTAL:o=(k._("Total"));p="_28k2";break;case h.REFUND:o=(k._("Refund"));p="_28k3";break;default:o='';p='';break;}return (i.createElement(g,{className:p},i.createElement("div",null,o),i.createElement("div",{className:"_28k4"},this.props.totalCost)));}});e.exports=n;},null);
__d("MNCommerceReceiptMercuryAttachment.react",["MNCommerceFooterTypes","MNCommerceItemList.react","MNCommerceAttachmentConstants","MNCommerceAttachmentUtils","MNCommerceLogoHeader.react","MNCommerceBubbleSection.react","MNCommerceTotalCostFooter.react","MNCommerceViewTypes","MercuryShareAttachmentRenderLocations","React","fbt","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){b.__markCompiled&&b.__markCompiled();'use strict';var t=p,u=t.PropTypes,v=p.createClass({displayName:"MNCommerceReceiptMercuryAttachment",propTypes:{items:u.array.isRequired,location:u.oneOf(o.getValues()),logo:u.object,payment_method:u.string,totalCost:u.string,width:u.number,onAttachmentClick:u.func,status:u.string,structured_address:u.object},render:function(){return (p.createElement("div",{className:s((("_1xjh")+(this.props.location===o.WEB_INBOX?' '+"_1hf9":'')),this.props.className),onClick:this.props.onAttachmentClick},p.createElement("div",{className:"_xm3"},p.createElement(k,{logo:this.props.logo,logoPosition:"right"},q._("Order Confirmation"))),p.createElement("div",{className:"_xmt"},p.createElement(l,null,this._renderItemDescriptions()),this._renderPaymentMethodSection(),this._renderAddressSection()),p.createElement("div",{className:"_xmx"},p.createElement(m,{totalCost:this.props.totalCost,type:g.TOTAL}))));},_renderPaymentMethodSection:function(){if(!this.props.payment_method)return null;return (p.createElement(l,{label:q._("Paid with")},this.props.payment_method));},_renderAddressSection:function(){var w=j.getDestinationAddressString(this.props.structured_address);return (p.createElement(l,{label:q._("Ship to")},w));},_renderItemDescriptions:function(){if(!this.props.items.length)return null;var w=this.props.width-2*i.BUBBLE_PADDING,x={size:'small',width:w};return (p.createElement(h,p.__spread({items:this.props.items,imageDimension:i.LARGE_IMAGE_DIMENSION,viewType:n.BUBBLE},x)));}});e.exports=v;},null);
__d("MNCommerceReceiptMercuryShareAttachment.react",["BanzaiLogger","MercuryShareAttachmentReactShape","MNCommerceDialogStateActions","MNCommerceLoggingConstants","MNCommerceLoggerEvents","MNCommerceOrderDetailsDialogContainer.react","MNCommerceReceiptMercuryAttachment.react","React","mergeDeep"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();'use strict';var p=n,q=p.PropTypes,r=n.createClass({displayName:"MNCommerceReceiptMercuryShareAttachment",propTypes:{attachment:h,maxWidth:q.number},render:function(){var s=this.props.attachment,t=[],u=s.target.items;Object.keys(u).forEach(function(w){var x=u[w],y=o({},x);y.id=w;y.thumbURL=x.thumb_url;t.push(y);});var v={items:t,totalCost:s.target.total_cost,width:this.props.maxWidth,onAttachmentClick:this._onAttachmentClick,location:this.props.location,logo:s.target.partner_logo?{height:s.target.partner_logo.height,width:s.target.partner_logo.width,src:s.target.partner_logo.url}:null,payment_method:s.target.payment_method,status:s.target.status,structured_address:s.target.structured_address};return (n.createElement(m,n.__spread({},v)));},_onAttachmentClick:function(){g.log('MessengerCommerceLoggerConfig',{event:k.DIALOG_OPENED,debug_data:JSON.stringify({dialog_surface:j.DIALOG_SURFACE.RECEIPT,receipt_id:this.props.attachment.target.receipt_id})});i.showDialog(l,{receiptID:this.props.attachment.target.receipt_id});}});e.exports=r;},null);
__d("XTilesStaticMapController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/staticmap\/",{bbox:{type:"String"},center:{type:"String"},circle:{type:"String"},format:{type:"String"},language:{type:"String"},markers:{type:"String"},path:{type:"String"},paths:{type:"StringVector"},region:{type:"String"},scale:{type:"Int"},size:{type:"String",required:true},u:{type:"String"},v:{type:"String"},visible:{type:"String"},zoom:{type:"Int"}});},null);
__d("MNCommerceShippingMap.react",["FBTilesMap.react","GeoCoordinates","leaflet","LeafletCircleMarker.react","LeafletPolyline.react","LeafletMarker.react","LeafletUtils","immutable","MercuryShareAttachmentRenderLocations","MNCommerceAttachmentConstants","MNCommerceBubbleImage.react","React","ResponsiveBlock.react","XTilesStaticMapController","cssVar","cx","debounce"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){b.__markCompiled&&b.__markCompiled();'use strict';var x=r,y=x.PropTypes,z=.02,aa={boxZoom:false,doubleClickZoom:false,dragging:false,scrollWheelZoom:false,touchZoom:false,zoomControl:false},ba={color:'#70768b',opacity:1,weight:1,fill:true,fillOpacity:1,fillColor:'#ffffff',radius:2.5},ca={color:'black',opacity:.2},da={color:"#5890ff",opacity:1},ea={iconSize:[18,24],iconAnchor:[9,24]},fa=445,ga=242,ha=r.createClass({displayName:"MNCommerceShippingMap",propTypes:{className:y.string,destination:y.instanceOf(h).isRequired,delivered:y.bool,location:y.string,shippingCheckPoints:y.instanceOf(n.List).isRequired,style:y.object,width:y.number},getInitialState:function(){return {height:ga,size:i.point(fa,ga),width:null};},render:function(){if(this.props.location){return this._renderStaticMap();}else return (r.createElement(g,{className:this.props.className,view:this._getView(),style:this.props.style,options:aa,onViewChange:this._onViewChange,onSizeSettled:this._onSizeSettled},this._renderShippingCheckPoints(),this._renderDestinationPolyline(),this._renderDestinationWayPoint(),this._renderLocationIdentifiers()));},_renderStaticMap:function(){var ia=this.props.width||this.state.width,ja=this._getMapHeight(),ka=m.getViewBounds(this._getView(),{width:ia,height:ja}),la=ka.getNorthWest().lat+','+ka.getNorthWest().lng+'|'+ka.getSouthEast().lat+','+ka.getSouthEast().lng,ma=t.getURIBuilder().setString('size',ia+'x'+ja).setString('markers',this.props.destination.latitude+','+this.props.destination.longitude).setInt('scale',2).setString('bbox',la).getURI(),na=r.createElement(q,{location:this.props.location,source:ma.toString(),width:this.props.width});if(this.props.location===o.MESSENGER)na=(r.createElement(s,{onResize:w(this._onResize,500,this)},na));return na;},_onResize:function(ia,ja){this.setState({width:ia,height:ja});},_getMapHeight:function(){var ia;switch(this.props.location){case o.CHAT:ia=p.IMAGE_HEIGHT.CHAT;break;case o.WEB_INBOX:ia=p.IMAGE_HEIGHT.WEB_INBOX;break;default:ia=this.state.height;}return ia;},_onViewChange:function(){},_renderShippingCheckPoints:function(){if(this.props.shippingCheckPoints.size>1)return (r.createElement(k,{coordinates:this.props.shippingCheckPoints,options:da}));},_renderDestinationPolyline:function(){if(!this.props.delivered&&this.props.shippingCheckPoints.size>0){var ia=n.List([this.props.destination,this.props.shippingCheckPoints.first()]);return (r.createElement(k,{coordinates:ia,options:ca}));}},_renderDestinationWayPoint:function(){return (r.createElement(l,{coordinates:this.props.destination,options:{icon:i.divIcon(Object.assign({},ea,{className:"_18ea"}))}}));},_renderLocationIdentifiers:function(){var ia=[this.props.destination];if(this.props.shippingCheckPoints.size>0)return ia.concat(this.props.shippingCheckPoints.toArray()).map(function(ja,ka){return r.createElement(j,{center:ja,key:ka,options:ba});});},_getLatLngPoints:function(){var ia=[this.props.destination];if(this.props.shippingCheckPoints.size>0)ia=ia.concat(this.props.shippingCheckPoints.toArray());return ia.map(m.toLatLng);},_getView:function(){var ia=this._getLatLngPoints(),ja=i.latLngBounds(ia).pad(z);return m.fitBounds(ja,{width:this.state.size.x,height:this.state.size.y},{zoomRange:[0,12]});},_onSizeSettled:function(ia){this.setState({size:ia});}});e.exports=ha;},null);
__d("MNCommerceShippingDetailsDialog.react",["ActionList.react","GeoCoordinates","immutable","Link.react","MNCommerceAddress.react","MNCommerceAttachmentConstants","MNCommerceDetailSection.react","MNCommerceDialog.react","MNCommerceDialogBody.react","MNCommerceDialogTitle.react","MNCommerceItemList.react","MNCommerceLogoHeader.react","MNCommerceShippingMap.react","MNCommerceViewTypes","React","XUISpinner.react","XUIButton.react","cx","fbt","mergeDeep"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){b.__markCompiled&&b.__markCompiled();'use strict';var aa=u,ba=aa.PropTypes,ca=u.createClass({displayName:"MNCommerceShippingDetailsDialog",propTypes:{shipment:ba.shape({address:ba.shape({street_1:ba.string,street_2:ba.string,city:ba.string,state:ba.string,postal_code:ba.string}),carrierInfo:ba.string,changeURL:ba.string,deliverDate:ba.string,name:ba.string,shipDate:ba.string,delivered:ba.bool,destination:ba.instanceOf(h),items:ba.object,legalText:ba.string,logo:ba.shape({height:ba.number,width:ba.number,src:ba.string}),orderDetailsURL:ba.string,rawAddress:ba.string,progress:ba.object,shippingCheckPoints:ba.instanceOf(i.List),trackingNumber:ba.string}),shown:ba.bool.isRequired,error:ba.object,loading:ba.bool.isRequired,onToggle:ba.func,onTryAgain:ba.func},getDefaultProps:function(){return {shown:false};},render:function(){var da=null;if(this.props.loading){da=this._renderLoadingDetailsSection();}else if(this.props.error){da=this._renderErrorDetailsSection();}else da=this._renderFullDetailsSection();return (u.createElement(n,{className:"_z-y",modal:true,onToggle:this.props.onToggle,shown:this.props.shown},u.createElement(p,null,y._("Shipping Details")),u.createElement(o,{useCustomPadding:true},da)));},_renderErrorDetailsSection:function(){return (u.createElement("div",{className:"_1bi1"},u.createElement("p",{className:"_1bi3"},"Sorry, Something Went Wrong"),u.createElement("p",{className:"_1bi4"},"Your shipment details couldn't be shown."),u.createElement(w,{onClick:this.props.onTryAgain,label:y._("Try Again")})));},_renderLoadingDetailsSection:function(){return (u.createElement("div",{className:"_p43"},u.createElement(v,{background:"light",size:"large",paused:false})));},_renderFullDetailsSection:function(){return (u.createElement("div",null,this._renderMap(),u.createElement("div",{className:"_3qia"},u.createElement("div",null,this._renderCallToActionList()),u.createElement("div",null,this._renderDeliverySection(),this._renderAddressSection(),this._renderCarrierSection(),this._renderProgressSection(),this._renderItemsSection()),u.createElement("div",{className:"_1pyw"},this._renderFooter()))));},_processItems:function(){var da=Object.keys(this.props.shipment.items).map(function(ea){var fa=this.props.shipment.items[ea],ga=z({},fa);ga.id=ea;ga.thumbURL=fa.thumb_url;return ga;}.bind(this));return da;},_getItemsHeader:function(){var da,ea=this._processItems();if(ea.length===1){da=(y._("Item"));}else if(ea.length>1){da=(y._("Items"));}else da=(y._("No items found"));return da;},_renderDeliverySection:function(){if(!this.props.shipment.deliverDate)return null;return (u.createElement(m,{className:"_3qic",headerLabel:y._("Delivery on")},this.props.shipment.deliverDate));},_renderAddressSection:function(){if(!this.props.shipment.address&&!this.props.rawAddress)return null;return (u.createElement(m,{className:"_3qic",headerLabel:y._("Ship to")},u.createElement(k,{address:this.props.shipment.address,rawAddress:this.props.shipment.rawAddress,name:this.props.shipment.name})));},_renderCarrierSection:function(){if(!this.props.shipment.carrierInfo)return null;return (u.createElement(m,{className:"_3qic",headerLabel:y._("Carrier")},this.props.shipment.carrierInfo));},_renderProgressSection:function(){var da=this.props.shipment.progress,ea=Object.keys(da).reverse(),fa=null;if(!da||!ea.length){fa=(y._("Tracking info should be available soon"));}else fa=ea.map(function(ga){var ha=da[ga];return (u.createElement("div",{className:"_3qii",key:ga},u.createElement("p",{className:"_3qij"},ha.tracking_event_description),u.createElement("p",{className:"_3qik"},ha.display_time)));});return (u.createElement(m,{className:"_3qic",headerLabel:y._("Tracking")},fa));},_renderItemsSection:function(){if(!this.props.shipment.items)return null;var da=l.DIALOG.WIDTH-2*l.DIALOG.PADDING;return (u.createElement(m,{className:"_3qic _39yr",headerLabel:this._getItemsHeader(),margin:6},u.createElement(q,{imageDimension:l.SMALL_IMAGE_DIMENSION,items:this._processItems(),size:"small",viewType:t.DETAIL,width:da})));},_renderFooter:function(){if(!this.props.shipment.logo)return null;var da=(y._("Tracking number {tracking number}",[y.param("tracking number",this.props.shipment.trackingNumber)])),ea=u.createElement("div",{className:"_3xyi",key:"logo"},u.createElement(r,{logo:this.props.shipment.logo,logoPosition:"right"},this.props.shipment.legalText||da));if(this.props.shipment.legalText)ea=[u.createElement("div",{className:"_1pyx",key:"tracking"},da),ea];return ea;},_renderMap:function(){if(!this.props.shipment.destination)return null;return (u.createElement(s,{className:"_387w",delivered:this.props.shipment.delivered,destination:this.props.shipment.destination,shippingCheckPoints:this.props.shipment.shippingCheckPoints}));},_renderCallToActionList:function(){var da=[];if(this.props.shipment.changeURL)da.push(u.createElement(j,{className:"_3qil",href:this.props.shipment.changeURL,key:"changeDelivery",target:"_blank"},y._("Change Delivery Options")));if(!da.length)return null;return (u.createElement(g,{className:"_3qim"},da));},_onViewChange:function(da){this.setState({view:da});}});e.exports=ca;},null);
__d("XMNCommerceShippingDetailsController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/messages\/commerce\/shipping_details\/",{shipment_id:{type:"String",required:true}});},null);
__d("MNCommerceShipmentDataManager",["AsyncRequest","MNCommerceShipmentActions","XMNCommerceShippingDetailsController"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';function j(){}j.prototype.fetchShipment=function(k){var l=i.getURIBuilder().setString('shipment_id',k).getURI();new g().setURI(l).setHandler(this.$MNCommerceShipmentDataManager0).setErrorHandler(this.$MNCommerceShipmentDataManager1).send();};j.prototype.$MNCommerceShipmentDataManager0=function(k){h.shipmentLoaded(k.payload);};j.prototype.$MNCommerceShipmentDataManager1=function(k){var l=k.getRequest().uri.getQueryData(),m=l.shipment_id;h.shipmentLoadError(m);};e.exports=new j();},null);
__d("MNCommerceShipmentStore",["Cache","FluxStore","LoadObject","MessengerDispatcher","MNCommerceActionTypes","MNCommerceCacheTimeoutLimits","MNCommerceShipmentDataManager"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();'use strict';for(var n in h)if(h.hasOwnProperty(n))p[n]=h[n];var o=h===null?null:h.prototype;p.prototype=Object.create(o);p.prototype.constructor=p;p.__superConstructor__=h;function p(){h.call(this,j);this.$MNCommerceShipmentStore0=new g();}p.prototype.__onDispatch=function(q){var r=q.type,s=q.shipmentID;switch(r){case k.SHIPMENT.LOADED:var t=q.shipment;this.$MNCommerceShipmentStore0.set(t.shipment_id,i.empty().setValue(t),null,l.SUCCESS_TIMEOUT);this.__emitChange();break;case k.SHIPMENT.LOAD_ERROR:this.$MNCommerceShipmentStore0.set(s,i.empty().setError(new Error('Unable to load shipment: '+s)),null,l.ERROR_TIMEOUT);this.__emitChange();break;case k.SHIPMENT.RELOAD:if(s){this.$MNCommerceShipmentStore0.set(s,i.loading());m.fetchShipment(s);}this.__emitChange();break;}};p.prototype.getShipment=function(q){if(q&&!this.$MNCommerceShipmentStore0.has(q)){this.$MNCommerceShipmentStore0.set(q,i.loading().setValue({shipmentID:q}));m.fetchShipment(q);}return this.$MNCommerceShipmentStore0.get(q)||i.empty();};e.exports=new p();},null);
__d("MNCommerceShippingDetailsDialogContainer.react",["BanzaiLogger","GeoCoordinates","immutable","MNCommerceDialogStateActions","MNCommerceDialogStateStore","MNCommerceLoggingConstants","MNCommerceLoggerEvents","MNCommerceShippingDetailsDialog.react","MNCommerceShipmentActions","MNCommerceShipmentStore","PureStoreBasedStateMixin","React"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){b.__markCompiled&&b.__markCompiled();'use strict';var s=r.createClass({displayName:"MNCommerceShippingDetailsDialogContainer",mixins:[q(p)],statics:{calculateState:function(){var t=k.getState(),u=null;if(t)u=t.shipmentID;var v=p.getShipment(u);if(!v.isLoading())g.log('MessengerCommerceLoggerConfig',{event:(v.hasError()?m.DIALOG_LOAD_ERROR:m.DIALOG_LOAD_SUCCESS),debug_data:JSON.stringify({dialog_surface:l.DIALOG_SURFACE.SHIPMENT,shipment_id:u})});return {shown:!!t,loading:v.isLoading(),shipmentID:u,shipment:v.getValue(),error:v.getError()};}},render:function(){return (r.createElement(n,{loading:this.state.loading,error:this.state.error,onToggle:this._onToggle,onTryAgain:this._onTryAgainClick,shown:this.state.shown,shipment:this._getParsedShipment(this.state.shipment)}));},_getParsedShipment:function(t){if(!t)return {};var u=[],v=t.origin,w=t.events;if(v&&v.latitude&&(!w||Object.keys(w).length===0)){u=[new h(v.latitude,v.longitude)];}else if(w)u=Object.keys(w).map(function(y){var z=w[y];if(z.tracking_event_location&&z.tracking_event_location.latitude)return new h(z.tracking_event_location.latitude,z.tracking_event_location.longitude);});var x=Array.isArray(t.destination)?null:t.destination;return {address:x,carrierInfo:t.carrier,changeURL:t.carrier_tracking_url,delivered:t.delivered,deliverDate:t.estimated_delivery_display_time,shipDate:t.display_ship_date,destination:(t.destination&&t.destination.latitude)?new h(t.destination.latitude,t.destination.longitude):null,items:t.items,legalText:t.legal_text,logo:t.carrier_logo?{height:t.carrier_logo.height,width:t.carrier_logo.width,src:t.carrier_logo.url}:null,name:t.recipient_name?t.recipient_name:null,orderDetailsURL:t.order_details_url,progress:t.events,shippingCheckPoints:i.List(u),trackingNumber:t.tracking_number};},_onToggle:function(t){if(!t){g.log('MessengerCommerceLoggerConfig',{event:m.DIALOG_CLOSED,debug_data:JSON.stringify({dialog_surface:l.DIALOG_SURFACE.SHIPMENT,shipment_id:this.state.shipment.shipment_id})});j.hideDialog();}},_onTryAgainClick:function(){o.shipmentReload(this.state.shipmentID);}});e.exports=s;},null);
__d("MNCommerceShippingMercuryAttachment.react",["GeoCoordinates","immutable","MNCommerceItemList.react","MNCommerceAttachmentConstants","MNCommerceAttachmentUtils","MNCommerceLogoHeader.react","MNCommerceBubbleSection.react","MNCommerceShipmentTrackingEventTypes","MNCommerceShippingMap.react","MNCommerceViewTypes","MercuryShareAttachmentRenderLocations","React","cx","fbt","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){b.__markCompiled&&b.__markCompiled();'use strict';var v=r,w=v.PropTypes,x=r.createClass({displayName:"MNCommerceShippingMercuryAttachment",propTypes:{carrierInfo:w.string,carrierTrackingURL:w.string,deliveryDate:w.string,deliveryPeriod:w.string,destination:w.shape,hasUnsupportedCarrier:w.bool,items:w.array.isRequired,location:w.string,logo:w.object,shippingDate:w.string,type:w.number,width:w.number,onAttachmentClick:w.func},render:function(){var y=null;if(!this.props.hasUnsupportedCarrier&&this.props.logo)y=r.createElement("div",{className:"_3lx4"},r.createElement(l,{logo:this.props.logo,logoPosition:"left"}));var z=this.props.items.length>1?t._("Items"):t._("Item");return (r.createElement("div",{className:u((("_3lx3")+(this.props.location===q.WEB_INBOX?' '+"_1hf9":'')),this.props.className),onClick:this.props.onAttachmentClick},this._renderUnsupportedURL(),this._renderShippingMap(),r.createElement("div",{className:"_2jdp"},r.createElement("div",{className:"_2jdq"},y,r.createElement("div",{className:"_3lx5"},this._renderShippingMapDescriptionOrFallback(),r.createElement(m,{label:z},this._renderItemDescriptions()))))));},_renderUnsupportedURL:function(){if(this.props.hasUnsupportedCarrier&&this.props.carrierTrackingURL)return (r.createElement("a",{href:this.props.carrierTrackingURL,target:"_blank"}));},_renderShippingMap:function(){if(k.shouldRenderMap(this.props.destination,this.props.deliveryDate)){var y=new g(this.props.destination.latitude,this.props.destination.longitude);return (r.createElement(o,{className:"_gn9",destination:y,shippingCheckPoints:h.List([]),location:this.props.location,style:{height:j.SINGLE_IMAGE_HEIGHT},width:this.props.width}));}},_renderShippingMapDescriptionOrFallback:function(){if(k.shouldRenderMap(this.props.destination,this.props.deliveryDate)){var y=this.props.deliveryDate;if(this.props.deliveryPeriod)y+=', '+this.props.deliveryPeriod;var z=k.getDestinationAddressString(this.props.destination);return (r.createElement("div",null,this._renderDeliverySection(),r.createElement(m,{label:t._("Ship to")},z)));}return (r.createElement("div",null,this._renderShippingSection(),this._renderDeliveryOrCarrierSection()));},_renderDeliveryOrCarrierSection:function(){if(this.props.hasUnsupportedCarrier){return (r.createElement(m,{label:t._("Carrier")},this.props.carrierInfo));}else if(!this.props.deliveryDate){return null;}else return this._renderDeliverySection();},_renderDeliverySection:function(){var y=this.props.type===n.DELAYED?r.createElement("span",null,r.createElement("span",{className:"_5ryb"},t._("Delayed")),' ',"  ",' '):'',z=this.props.deliveryDate;if(this.props.deliveryPeriod)z+=', '+this.props.deliveryPeriod;return (r.createElement(m,{label:this._getDeliveryLabel()},y,z));},_getDeliveryLabel:function(){switch(this.props.type){case n.OUT_FOR_DELIVERY:return (t._("Out for delivery on"));case n.DELIVERED:return (t._("Delivered on"));default:return (t._("Delivery on"));}},_renderShippingSection:function(){if(!this.props.type)return (r.createElement(m,{label:t._("Shipped on")},this.props.shippingDate));return null;},_renderItemDescriptions:function(){if(!this.props.items.length)return null;var y=this.props.width-2*j.BUBBLE_PADDING;return (r.createElement(i,{items:this.props.items,imageDimension:j.SMALL_IMAGE_DIMENSION,size:"small",viewType:p.BUBBLE,width:y}));}});e.exports=x;},null);
__d("MNCommerceShippingMercuryShareAttachment.react",["BanzaiLogger","MercuryShareAttachmentReactShape","MNCommerceBubbleType","MNCommerceDialogStateActions","MNCommerceLoggingConstants","MNCommerceLoggerEvents","MNCommerceShippingDetailsDialogContainer.react","MNCommerceShippingMercuryAttachment.react","ReactComponentWithPureRenderMixin","React"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){b.__markCompiled&&b.__markCompiled();'use strict';var q=p,r=q.PropTypes,s=p.createClass({displayName:"MNCommerceShippingMercuryShareAttachment",mixins:[o],propTypes:{attachment:h,maxWidth:r.number},render:function(){var t=this.props.attachment,u=[],v=t.target.items;Object.keys(v).forEach(function(z){var aa=v[z],ba=Object.assign({},aa);ba.id=z;ba.thumbURL=aa.thumb_url;u.push(ba);});var w=t.target,x=w.messenger_commerce_bubble_type===i.FB_RETAIL_SHIPMENT_FOR_UNSUPPORTED_CARRIER,y={carrierInfo:w.carrier,carrierTrackingURL:w.carrier_tracking_url,deliveryDate:w.estimated_delivery_display_time||null,destination:w.destination,logo:t.target.carrier_logo?{height:t.target.carrier_logo.height,width:t.target.carrier_logo.width,src:t.target.carrier_logo.url}:null,items:u,hasUnsupportedCarrier:x,location:this.props.location,width:this.props.maxWidth,type:w.tracking_event_type,shippingDate:w.display_ship_date||null,onAttachmentClick:x?null:this._onAttachmentClick};return (p.createElement(n,p.__spread({},y)));},_onAttachmentClick:function(){g.log('MessengerCommerceLoggerConfig',{event:l.DIALOG_OPENED,debug_data:JSON.stringify({dialog_surface:k.DIALOG_SURFACE.SHIPMENT,shipment_id:this.props.attachment.target.shipment_id})});j.showDialog(m,{shipmentID:this.props.attachment.target.shipment_id});}});e.exports=s;},null);
__d("XMomentsAppInstallLinkDialogController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/moments_app\/install_link\/dialog\/",{share_id:{type:"String"},__asyncDialog:{type:"Int"}});},null);
__d("MessengerMomentsAppShareAttachment.react",["AsyncRequest","Image.react","ImageBlock.react","Link.react","MarauderLogger","MercuryShareAttachmentReactShape","MercuryShareAttachmentRenderLocations","MercuryShareImage.react","React","ReactComponentWithPureRenderMixin","XUIButton.react","XMomentsAppInstallLinkDialogController","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){b.__markCompiled&&b.__markCompiled();'use strict';var u=o,v=u.PropTypes,w=173,x=82,y=200,z={},aa=o.createClass({displayName:"MessengerMomentsAppShareAttachment",mixins:[p],propTypes:{attachment:l,location:v.string,rootClassName:v.string},render:function(){var ba=this.props.attachment;if(!ba||!ba.media||!ba.media.image||!ba.target)return null;if(!z[ba.share_id]){z[ba.share_id]=true;k.log('moments_invite_impression',undefined,{share_id:ba.share_id});}return (o.createElement(j,{className:t("_-2m",this.props.rootClassName),onClick:function(){return this._onClick();}.bind(this)},this._renderContentBlock(ba)));},_onClick:function(){var ba=this.props.attachment;if(!ba||!ba.target)return;var ca=String(ba.share_id),da=r.getURIBuilder().setString('share_id',ca).getURI();k.log('moments_invite_install_clicked',undefined,{share_id:ca});new g(da).send();},_renderContentBlock:function(ba){var ca=ba.media.image,da=ba.target.call_to_action_text,ea=this.props.location;if(ea===m.CHAT||ea===m.MESSENGER){var fa=null;if(ea===m.CHAT){fa=(o.createElement(n,{source:ca,width:w,height:x}));}else fa=(o.createElement("div",{className:"_54hl",style:{backgroundImage:'url('+ca+')'}}));return (o.createElement("div",{className:"_54hm"},fa,o.createElement("div",{className:"_1ath"},this._renderTextBlock(ba,"_1ati"),o.createElement("div",{className:"_-2n"}),o.createElement("div",{className:"_1atj"},da))));}else return (o.createElement(i,null,o.createElement(h,{src:ca,width:y}),o.createElement("div",{className:"_2pi8"},this._renderTextBlock(ba),o.createElement(q,{className:"_3-8n",label:da}))));},_renderTextBlock:function(ba,ca){return (o.createElement("div",{className:t("_54hq",ca)},o.createElement("div",{className:"_-2p"},ba.title),o.createElement("div",{className:"_-2q"},ba.description)));}});e.exports=aa;},null);
__d("MercuryShareSizeImageByWidthMixin",["Image.react","MercuryAttachment","MercuryShareAttachmentRenderLocations","MercuryShareImage.react","React"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l={_getImageSize:function(m){var n=this.props.attachment&&this.props.attachment.media,o=m?n&&n.animated_image_size:n&&n.image_size;return this.props.maxWidth?h.resizeContain({height:this.props.maxWidth,width:this.props.maxWidth},o):o;},_renderImage:function(m){var n=this.props.attachment&&this.props.attachment.media,o=this._getImageSize(m),p=m?n&&n.animated_image:n&&n.image;if(this.props.location==i.CHAT){return (k.createElement(j,{height:o&&o.height,source:p,width:o&&o.width}));}else return (k.createElement(g,{height:o&&o.height,src:p,width:o&&o.width}));}};e.exports=l;},null);
__d("MercuryAnimatedShareAttachment.react",["Link.react","MercuryAttachmentType","MercuryFallbackShareAttachment.react","MercuryShareAttachmentReactShape","MercuryShareAttachmentRenderLocations","MercuryShareSizeImageByWidthMixin","MessengerPhotoishXMA.react","React"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();'use strict';var o=n,p=o.PropTypes,q=n.createClass({displayName:"MercuryAnimatedShareAttachment",mixins:[l],propTypes:{attachment:j,location:p.oneOf(k.getValues()),maxWidth:p.number},render:function(){if(this.props.location===k.CHAT_PREVIEW){return n.createElement(i,n.__spread({},this.props));}else if(this.props.location===k.MESSENGER)return (n.createElement(m,{attachType:h.ANIMATED_IMAGE,attachments:[this.props.attachment]}));var r=this.props.attachment&&this.props.attachment.uri;return (n.createElement(g,{href:r,target:"_blank"},this._renderImage(true)));}});e.exports=q;},null);
__d("MercuryImageShareAttachment.react",["Link.react","MercuryAttachmentType","MercuryFallbackShareAttachment.react","MercuryShareAttachmentReactShape","MercuryShareAttachmentRenderLocations","MercuryShareSizeImageByWidthMixin","MessengerPhotoishXMA.react","React"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();'use strict';var o=n,p=o.PropTypes,q=n.createClass({displayName:"MercuryImageShareAttachment",mixins:[l],propTypes:{attachment:j,location:p.oneOf(k.getValues()),maxWidth:p.number},render:function(){if(this.props.location===k.CHAT_PREVIEW){return n.createElement(i,n.__spread({},this.props));}else if(this.props.location===k.MESSENGER)return (n.createElement(m,{attachType:h.PHOTO,attachments:[this.props.attachment]}));var r=this.props.attachment&&this.props.attachment.uri;return (n.createElement(g,{href:r,target:"_blank"},this._renderImage()));}});e.exports=q;},null);
__d("XPlacesMapController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/places\/map\/",{id:{type:"Int"},latitude:{type:"Float",defaultValue:0},longitude:{type:"Float",defaultValue:0},address:{type:"StringVector",defaultValue:[]},name:{type:"String"},zoom:{type:"Int"},message_location_id:{type:"Int"},__asyncDialog:{type:"Int"}});},null);
__d("MercuryMessageLocationShareAttachment.react",["Link.react","MercuryFallbackShareAttachmentContent.react","MercuryShareAttachmentRenderLocations","MercuryShareAttachmentReactShape","React","XPlacesMapController","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();'use strict';var n=k,o=n.PropTypes,p=k.createClass({displayName:"MercuryMessageLocationShareAttachment",propTypes:{attachment:j,location:o.oneOf(i.getValues())},renderLink:function(q){if(i.isPreview(this.props.location))return q;var r=this.props.attachment.deduplication_key,s=l.getURIBuilder().setInt('message_location_id',r).getURI();return (k.createElement(g,{className:"_5rw4",href:this.props.attachment.uri,ajaxify:s,rel:"dialog",target:"_blank"},q));},render:function(){return this.renderLink(k.createElement(h,k.__spread({},this.props)));}});e.exports=p;},null);
__d("MercuryPhotoShareAttachment.react",["Link.react","MercuryAttachmentType","MercuryFallbackShareAttachment.react","MercuryShareAttachmentReactShape","MercuryShareAttachmentRenderLocations","MercuryShareSizeImageByWidthMixin","MessengerPhotoishXMA.react","React"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();'use strict';var o=n,p=o.PropTypes,q=n.createClass({displayName:"MercuryPhotoShareAttachment",mixins:[l],propTypes:{attachment:j,location:p.oneOf(k.getValues()),maxWidth:p.number},render:function(){if(this.props.location===k.CHAT_PREVIEW){return n.createElement(i,n.__spread({},this.props));}else if(this.props.location===k.MESSENGER)return (n.createElement(m,{attachType:h.PHOTO,attachments:[this.props.attachment]}));var r=this.props.attachment&&this.props.attachment.uri;return (n.createElement(g,{rel:"theater",href:r},this._renderImage()));}});e.exports=q;},null);
__d("MercuryVideoShareAttachment.react",["CenteredContainer.react","FBOverlayBase.react","FBOverlayContainer.react","FBOverlayElement.react","Image.react","Link.react","MercuryAttachmentType","MercuryFallbackShareAttachment.react","MercuryShareAttachmentReactShape","MercuryShareAttachmentRenderLocations","MercuryShareSizeImageByWidthMixin","MessengerPhotoishXMA.react","React","cx","ix"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){b.__markCompiled&&b.__markCompiled();'use strict';var v=s,w=v.PropTypes,x=s.createClass({displayName:"MercuryVideoShareAttachment",mixins:[q],propTypes:{attachment:o,location:w.oneOf(p.getValues()),maxWidth:w.number},render:function(){if(this.props.location===p.CHAT_PREVIEW){return s.createElement(n,s.__spread({},this.props));}else if(this.props.location===p.MESSENGER)return (s.createElement(r,{attachType:m.VIDEO,attachments:[this.props.attachment]}));var y=this.props.attachment&&this.props.attachment.uri;return (s.createElement(l,{rel:"theater",href:y},s.createElement(i,{className:"clearfix",style:this._getImageSize()},s.createElement(h,null,this._renderImage()),s.createElement(j,null,s.createElement(g,{vertical:true},s.createElement(k,{src:u('/images/chat/chat_play_icon.png')}))))));}});e.exports=x;},null);
__d("MercuryAttachmentRenderer",["MercuryAttachmentAudioClip.react","ChatAttachmentAttribution.react","ImmutableObject","MercuryAttachment","MercuryAttachmentFile.react","MercuryAttachmentPhoto.react","MercuryAttachmentPhotoGrid.react","MercuryAttachmentVideo.react","MercuryMessageInfo","MercuryShareAttachment.react","MercuryShareAttachmentRenderLocations","MessengerHotLikeUtils","React","Sticker.react","StickerAssetType","StickerConstants","StickerImages","StickerUtils","cx","XStickerAssetController"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){b.__markCompiled&&b.__markCompiled();'use strict';var aa={renderFile:function(ba,ca){return (s.createElement(k,{name:ba.name,open_url:ca?null:ba.open_url,rel:ba.rel,type:ba.icon_type,url:ba.url}));},renderAudioClip:function(ba,ca){var da=ba.metadata.duration/1000,ea=100,fa=ca?160:400,ga=100;if(da>=5)ga=(1-Math.pow(10,(da-5)/-30))*(fa-ea)+ea;return [s.createElement(g,{duration:ba.metadata.duration/1000,key:"audioClip",showHelp:false,src:ba.url,width:ga}),s.createElement(h,{attachment:new i(ba),key:"audioAttribution"})];},renderVideo:function(ba,ca,da){var ea=ca?ba.metadata.chat_size:ba.metadata.inbox_size,fa=ca?ba.metadata.chat_preview:ba.metadata.inbox_preview;return (s.createElement(n,{attachment:new i(ba),duration:ba.metadata.duration,isInbound:o.isInbound(da),isChat:ca,name:ba.name,pageID:ba.metadata.pageid,thumbSize:ea,thumbnail:fa,videoSize:ba.metadata.dimensions,videoID:ba.metadata.fbid,videoURI:ba.url}));},constructStickerComponent:function(ba,ca,da,ea,fa){var ga=ea?'chatScrolled/':'messengerScrolled/';ga+=ba.thread_id;if(!ca){ca=r.getMetadataForHotLike(ba.sticker_id);if(!ca){var ha=w.getSticker(ba.sticker_id),ia=Object.assign({},ha),ja=ha?x.getScaledDimensions(ha.height,ha.width,v.THREAD_SIZE):{height:v.THREAD_SIZE,width:v.THREAD_SIZE},ka=ja.height,la=ja.width;ia.height=ka;ia.width=la;ia.stickerID=ba.sticker_id;ia.spriteURI='';ia.spriteURI2x='';ia.paddedSpriteURI='';ia.paddedSpriteURI2x='';ca=ia;}}var ma=null;if(ca.stickerID){ma=ca.stickerID.toString();}else if(ba.sticker_id)ma=ba.sticker_id.toString();var na=null;if(ca.packID)na=ca.packID.toString();var oa=z.getURIBuilder().setInt('sticker_id',ma),pa=null,qa=null;if(window.devicePixelRatio&&window.devicePixelRatio>1){qa=ca.paddedSpriteURI2x;pa=ca.spriteURI2x;}else{qa=ca.paddedSpriteURI;pa=ca.spriteURI;}return (s.createElement(t,{animationTrigger:"hover",className:"mvs",frameCount:ca.frameCount||1,frameRate:ca.frameRate||83,framesPerCol:ca.framesPerCol||1,framesPerRow:ca.framesPerRow||1,onAttachmentLoad:fa,onStickerClick:da,packID:na,paddedSpriteURI:qa,sourceHeight:ca.height,sourceURI:oa.setEnum('image_type',u.IMAGE).getURI().toString(),sourceWidth:ca.width,spriteURI:pa,stickerID:ma,subscribedThreadID:ga}));},renderPhotoAttachments:function(ba,ca,da){var ea=ba.length;if(!ea)return null;if(ea===1){var fa=ba[0],ga=j.resizeContain({width:da,height:da},{width:fa.preview_width,height:fa.preview_height});return (s.createElement("div",{className:(("_55pk")+(' '+"_59go")+(j.hasAttribution(fa)?' '+"_4yjw":''))},s.createElement(l,{image:fa,width:ga.width,height:ga.height,message:ca}),s.createElement(h,{attachment:new i(ba[0])})));}return (s.createElement("div",{className:"_55pk"},s.createElement(m,{images:ba,size:da,message:ca})));},sortAttachmentsStablyByType:function(ba){var ca=[j.isPhotoAttachment,j.isShareAttachment,j.isFileAttachment,j.isErrorAttachment];ca.push(function(ea){return true;});var da=ca.map(function(ea){return [];});ba.forEach(function(ea){for(var fa=0;fa<ca.length;fa++)if(ca[fa](ea)){da[fa].push(ea);break;}});return Array.prototype.concat.apply([],da);},constructStoryBasedShareAttachment:function(ba,ca,da,ea,fa){var ga=da?q.CHAT:q.WEB_INBOX;return (s.createElement("div",{className:((!!ba.body&&da?"_r38":''))},s.createElement(p,{attachment:ca.share,location:ga,maxWidth:ea,onComponentLoaded:fa})));}};e.exports=aa;},null);
__d("P2PMercuryAttachment.react",["CurrentUser","Link.react","P2PAcceptMoneyDialog.react","P2PActions","P2PBigAmount.react","P2PButton.react","P2PCreditCardStore","P2PNUXRendererUtils","P2PTransferParam","P2PTransferStatus","P2PTransferStore","P2PVerificationFlowHelper","React","ReactLayeredComponentMixin","XP2PTransactionDetailController","cx","formatDate","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){b.__markCompiled&&b.__markCompiled();'use strict';var y=s,z=y.PropTypes,aa=s.createClass({displayName:"P2PMercuryAttachment",mixins:[t],propTypes:{metadata:z.object.isRequired,theme:z.string},getInitialState:function(){var ba={acceptMoneyDialogShown:false},ca=this.props.metadata,da=q.getTransferByID(ca[o.TRANSFER_ID]);if(da){ca=da;}else j.transferAdded(ca);ba.transfer=ca;ba.viewerIsSender=g.getID()===ba.transfer.sender.id;if(n.doesNUXNeedCreditCards(ba.transfer))ba.creditCardAsyncRequestState=m.getAsyncRequestState(),ba.creditCards=m.getAll();return ba;},componentDidMount:function(){this.creditCardStoreSub=m.addListener('change',this.onCreditCardStoreChange);this.transferStoreSub=q.addListener('change',this.onTransferStoreChange);i.preload();},componentWillUnmount:function(){if(this.creditCardStoreSub){this.creditCardStoreSub.remove();this.creditCardStoreSub=null;}if(this.transferStoreSub){this.transferStoreSub.remove();this.transferStoreSub=null;}},onCreditCardStoreChange:function(){this.setState({creditCardAsyncRequestState:m.getAsyncRequestState(),creditCards:m.getAll()});},onTransferStoreChange:function(){var ba={},ca=q.getTransferByID(this.state.transfer[o.TRANSFER_ID]);if(ca&&ca[o.STATUS]!==this.state.transfer[o.STATUS]){ba.transfer=ca;if(n.doesNUXNeedCreditCards(ba.transfer))ba.creditCardAsyncRequestState=m.getAsyncRequestState(),ba.creditCards=m.getAll();this.setState(ba);}},getStatus:function(){var ba=x._("Pending"),ca=x._("Completed"),da=x._("Canceled"),ea=x._("Sent"),fa=this.state.viewerIsSender;switch(this.state.transfer[o.STATUS]){case p.PENDING_RECIPIENT_PROCESSING:case p.INTERMEDIATE_PROCESSING:return fa?ea:ca;case p.PENDING_RECIPIENT_NUX:case p.PENDING_RECIPIENT_VERIFICATION:case p.PENDING_RECIPIENT_MANUAL_REVIEW:case p.PENDING_RECIPIENT_VERIFICATION_PROCESSING:case p.PENDING_PUSH_FAIL:case p.PENDING_SENDER_INITED:return fa?ea:ba;case p.PENDING_SENDER_MANUAL_REVIEW:case p.PENDING_SENDER_VERIFICATION:case p.PENDING_SENDER_VERIFICATION_PROCESSING:return ba;case p.CANCELED_SENDER_RISK:case p.CANCELED_DECLINED:case p.CANCELED_RECIPIENT_RISK:case p.CANCELED_SYSTEM_FAIL:case p.CANCELED_EXPIRED:case p.CANCELED_SAME_CARD:return da;case p.COMPLETED:return ca;}},isGrayStatus:function(){switch(this.state.transfer[o.STATUS]){case p.PENDING_RECIPIENT_VERIFICATION:case p.PENDING_RECIPIENT_VERIFICATION_PROCESSING:case p.PENDING_RECIPIENT_MANUAL_REVIEW:case p.PENDING_RECIPIENT_NUX:case p.PENDING_PUSH_FAIL:if(this.state.viewerIsSender)return false;return true;case p.PENDING_SENDER_MANUAL_REVIEW:case p.PENDING_SENDER_VERIFICATION:case p.PENDING_SENDER_VERIFICATION_PROCESSING:case p.CANCELED_SENDER_RISK:case p.CANCELED_DECLINED:case p.CANCELED_RECIPIENT_RISK:case p.CANCELED_SYSTEM_FAIL:case p.CANCELED_EXPIRED:case p.CANCELED_SAME_CARD:return true;case p.COMPLETED:case p.INTERMEDIATE_PROCESSING:case p.PENDING_SENDER_INITED:case p.PENDING_RECIPIENT_PROCESSING:return false;}},shouldRenderBannerFooter:function(){if(n.doesNUXNeedCreditCards(this.state.transfer)&&!m.isCreditCardsFetchComplete())return false;return (n.isRecipientActionableStatus(this.state.transfer));},handleConfirmInfoButtonClicked:function(){r.startVerificationFlow(this.state.transfer[o.TRANSFER_ID],false);},handleAddCardButtonClicked:function(){this.setState({acceptMoneyDialogShown:true});},handleAcceptMoneyDialogClose:function(){this.setState({acceptMoneyDialogShown:false});},renderInlineBanner:function(){var ba=this.state.transfer[o.STATUS];if(ba===p.PENDING_RECIPIENT_NUX){return this.renderPendingRecipientNUX();}else if(ba===p.PENDING_RECIPIENT_VERIFICATION){return this.renderPendingRecipientVerification();}else if(ba===p.PENDING_PUSH_FAIL)return this.renderPendingPushFail();return null;},renderPendingRecipientNUX:function(){var ba=this.state.transfer;return (s.createElement("div",{className:"_3asb"},s.createElement("div",{className:"_3asc"},x._("{sender_name} Sent You Money!",[x.param("sender_name",ba.sender.name)])),s.createElement("div",{className:"_3asd"},x._("It's free to accept it. Just add a debit card.")),s.createElement("div",{className:"_5abs"},s.createElement(l,{use:"confirm",className:"_5abt",size:"medium",label:x._("Add Debit Card"),type:"primary",onClick:this.handleAddCardButtonClicked}))));},renderPendingRecipientVerification:function(){return (s.createElement("div",{className:"_3asb"},s.createElement("div",{className:"_3asc"},x._("Please Confirm Your Info")),s.createElement("div",{className:"_3asd"},x._("To accept the money {sender_name} sent you, please confirm your information.",[x.param("sender_name",this.state.transfer.sender.name)])),s.createElement("div",{className:"_5abs"},s.createElement(l,{use:"confirm",className:"_5abt",size:"medium",label:x._("Confirm Info"),type:"primary",onClick:this.handleConfirmInfoButtonClicked}))));},renderPendingPushFail:function(){return (s.createElement("div",{className:"_3asb"},s.createElement("div",{className:"_3asc"},x._("Update Your Card")),s.createElement("div",{className:"_3asd"},x._("It looks like your card is expired or invalid. Please update it to get {currency}{amount} from {sender_name}.",[x.param("currency",this.state.transfer.currency),x.param("amount",this.state.transfer.amount),x.param("sender_name",this.state.transfer.sender.name)])),s.createElement("div",{className:"_5abs"},s.createElement(l,{use:"confirm",size:"medium",className:"_5abt",label:x._("Update Card"),type:"primary",href:this.getTransferDetailsURI(),target:"_blank"}))));},getStatusHeaderText:function(){if(this.isMessengerDotComView()){return (x._("Status"));}else return (x._("STATUS"));},getActionHeaderText:function(){var ba=this.state.transfer[o.STATUS],ca=this.isMessengerDotComView(),da=this.state.viewerIsSender,ea=ca?x._("Sent on"):x._("SENT ON"),fa=ca?x._("Received on"):x._("RECEIVED ON"),ga=ca?x._("Canceled on"):x._("CANCELED ON");switch(ba){case p.PENDING_SENDER_MANUAL_REVIEW:case p.PENDING_RECIPIENT_MANUAL_REVIEW:case p.PENDING_RECIPIENT_PROCESSING:case p.INTERMEDIATE_PROCESSING:case p.COMPLETED:return da?ea:fa;case p.PENDING_RECIPIENT_NUX:case p.PENDING_RECIPIENT_VERIFICATION:case p.PENDING_RECIPIENT_VERIFICATION_PROCESSING:case p.PENDING_PUSH_FAIL:case p.PENDING_SENDER_INITED:return da?ea:null;case p.PENDING_SENDER_VERIFICATION:case p.PENDING_SENDER_VERIFICATION_PROCESSING:return null;case p.CANCELED_SENDER_RISK:case p.CANCELED_DECLINED:case p.CANCELED_RECIPIENT_RISK:case p.CANCELED_SYSTEM_FAIL:case p.CANCELED_EXPIRED:case p.CANCELED_SAME_CARD:return ga;}},isMessengerDotComView:function(){return this.props.theme==='messenger';},isMessagesView:function(){return this.props.theme==='messages';},getTransferStatusDate:function(){var ba,ca=this.state.transfer[o.STATUS];switch(ca){case p.PENDING_RECIPIENT_PROCESSING:case p.INTERMEDIATE_PROCESSING:case p.COMPLETED:ba=this.state.transfer.completedTime;break;case p.CANCELED_SENDER_RISK:case p.CANCELED_DECLINED:case p.CANCELED_RECIPIENT_RISK:case p.CANCELED_SYSTEM_FAIL:case p.CANCELED_EXPIRED:case p.CANCELED_SAME_CARD:ba=this.state.transfer.updatedTime;break;}if(!ba)ba=this.state.transfer.creationTime;return w(ba,'M jS, g:ia');},renderStatusFooter:function(){var ba=this.getActionHeaderText(),ca;if(ba)ca=s.createElement("div",{className:"_4ybr"},s.createElement("div",{className:"_1nkr"},s.createElement("div",{className:"_4ybp"},ba),s.createElement("div",{className:"_4ybq"},this.getTransferStatusDate())));return (s.createElement("div",{className:"_4ybn"},s.createElement("div",{className:"_4ybo"},s.createElement("div",{className:"_1nkq"},s.createElement("div",{className:"_4ybp"},this.getStatusHeaderText()),s.createElement("div",{className:"_4ybq"},this.getStatus()))),ca));},renderLayers:function(){var ba={};if(this.state.acceptMoneyDialogShown)ba.acceptDialog=s.createElement(i,{creditCards:this.state.creditCards,onClose:this.handleAcceptMoneyDialogClose,transfer:this.state.transfer});return ba;},getTransferDetailsURI:function(){return ((u.getURIBuilder()).setString('id',this.state.transfer[o.TRANSFER_ID]).getURI());},renderBigAmount:function(){return (s.createElement(k,{amount:this.state.transfer.amount,isPending:this.isGrayStatus()}));},render:function(){var ba,ca,da="_4ybm",ea=this.getTransferDetailsURI();if(this.shouldRenderBannerFooter()){ba=s.createElement("div",{className:da},this.renderInlineBanner());}else ca=s.createElement("div",{className:da},this.renderStatusFooter());return (s.createElement("div",{className:(("_30of")+(this.state.viewerIsSender?' '+"_4ybf":'')+(this.isMessagesView()?' '+"_4ybg":'')+(this.isMessengerDotComView()?' '+"_4ybh":''))},s.createElement("div",{className:"_3ase"},s.createElement(h,{className:"_3asf",href:ea,target:"_blank"},s.createElement("div",{className:"_4ybi"},this.renderBigAmount()),ca),ba)));}});e.exports=aa;},null);
__d("P2PMercuryShareAttachment.react",["MercuryShareAttachmentReactShape","MercuryShareAttachmentRenderLocations","P2PMercuryAttachment.react","React","cx"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l=j,m=l.PropTypes,n=j.createClass({displayName:"P2PMercuryShareAttachment",propTypes:{attachment:g,location:m.oneOf(h.getValues())},render:function(){var o={metadata:this.props.attachment.target};if(this.props.location===h.MESSENGER){o.theme='messenger';}else if(this.props.location===h.WEB_INBOX)o.theme='messages';return (j.createElement("div",{className:"_3fyk"},j.createElement(i,j.__spread({},o))));}});e.exports=n;},null);