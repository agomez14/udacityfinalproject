/*!CK:994426565!*//*1438197740,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["nX+SC"]); }

__d("VideoVolumeSlider.react",["EventListener","React","ReactComponentWithPureRenderMixin","cx","getElementPosition","throttle"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m=h,n=m.PropTypes,o=h.createClass({displayName:"VideoVolumeSlider",mixins:[i],propTypes:{volume:n.number,onVolumeChange:n.func},getInitialState:function(){return {engaged:false};},componentWillReceiveProps:function(p){this.setState({awaitingUpdate:false});},componentDidUpdate:function(p,q){if(!this.state.engaged&&q.engaged){this._mouseUpListener.remove();this._mouseMoveListener.remove();}else if(this.state.engaged&&!q.engaged){this._mouseMoveListener=g.listen(document,'mousemove',l(this.onMouseMove,50,this));this._mouseUpListener=g.listen(document,'mouseup',this.onMouseUp);}},onMouseDown:function(p){if(p.button!==0)return;this.setState({engaged:true,volume:this.getClampedClickPositionVolume(p.clientY)});p.preventDefault();p.stopPropagation();},getClampedClickPositionVolume:function(p){var q=k(h.findDOMNode(this.refs.slider)),r=k(h.findDOMNode(this.refs.nub)).height,s=q.y-p+q.height+r/2;return Math.max(0,Math.min(1,s/q.height));},onMouseUp:function(p){this.props.onVolumeChange&&this.props.onVolumeChange(this.state.volume);this.setState({engaged:false,awaitingUpdate:true});p.preventDefault();p.stopPropagation();},onMouseMove:function(p){this.setState({volume:this.getClampedClickPositionVolume(p.clientY)});this.props.onVolumeChange&&this.props.onVolumeChange(this.state.volume);p.preventDefault();p.stopPropagation();},getVolume:function(){if(this.state.engaged||this.state.awaitingUpdate)return this.state.volume;return this.props.volume;},render:function(){var p={height:Math.round(this.getVolume()*100)+'%'},q=(("_3pao")+(this.state.engaged?' '+"_2yu6":''));return h.createElement("div",{onMouseDown:this.onMouseDown,className:q},h.createElement("div",{ref:"slider",className:"_3paq"},h.createElement("div",{style:p,className:"_3par"},h.createElement("div",{ref:"nub",className:"_3pas"}))),h.createElement("div",{className:"_3pat"}));}});e.exports=o;},null);