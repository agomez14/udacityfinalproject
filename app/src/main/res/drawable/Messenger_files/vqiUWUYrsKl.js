/*!CK:832790887!*//*1438093792,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["Led0V"]); }

__d("P2PPasswordProtectionStatusTypes",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={NOT_SET:0,DISABLED:1,ENABLED:2};},null);
__d("XUINotice.react",["React","Image.react","XUICloseButton.react","cx","fbt","ix","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();'use strict';var n=g,o=n.PropTypes,p={notify:{altText:k._("Notice"),className:null,iconSrc:l('/images/deprecated/glyphs/flat/info-flat_m.png')},success:{altText:k._("Success"),className:"_3qh4",iconSrc:l('/images/deprecated/glyphs/flat/checkmark_white_m.png')},warn:{altText:k._("Warning"),className:"_585o",iconSrc:l('/images/deprecated/glyphs/flat/error-flat_m.png')}},q=g.createClass({displayName:"XUINotice",propTypes:{onDismiss:o.func,use:o.oneOf(Object.keys(p)),size:o.oneOf(['medium','small'])},getDefaultProps:function(){return {use:'notify',size:'medium'};},render:function(){var r=this.props,s=r.children,t=r.className,u=r.onDismiss,v=r.use,w=(function(aa,ba){var ca={},da=Object.prototype.hasOwnProperty;if(aa==null)throw new TypeError();for(var ea in aa)if(da.call(aa,ea)&&!da.call(ba,ea))ca[ea]=aa[ea];return ca;})(r,{children:1,className:1,onDismiss:1,use:1}),x=p[v];t=m("_585n",x.className,t);var y=null;if(u)y=g.createElement(i,{className:"_585q",href:"#",onClick:u});var z=(("_585r")+(u?' '+"_2i-a":'')+(this.props.size==='medium'?' '+"_50f4":'')+(this.props.size==='small'?' '+"_50f3":''));return (g.createElement("div",g.__spread({},w,{className:t}),g.createElement(h,{alt:x.altText,className:"_585p",src:x.iconSrc}),y,g.createElement("div",{className:z},s)));}});e.exports=q;},null);
__d("XUIError",["ARIA","Bootloader","CSS","DataStore","DOM","Event","JSXDOM","Parent","Promise","cx","filterObject","getActiveElement","getElementText","invariant","isNode","memoize","nl2br"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){b.__markCompiled&&b.__markCompiled();'use strict';var x='data-xui-error-alignh',y='XUIError',z='data-xui-error',aa="_1tp7",ba='data-xui-error-position';l.listen(document.documentElement,'mouseover',function(event){if(n.byClass(r(),aa))return;var pa=n.byClass(event.getTarget(),aa);if(pa){la(pa);}else ma();});l.listen(document.documentElement,'focusin',function(event){var pa=n.byClass(event.getTarget(),aa);if(pa){la(pa);}else ma();});l.listen(document.documentElement,'focusout',function(event){ma();});var ca=v(function(){return new o(function(pa,qa){h.loadModules(["ContextualDialog","ContextualLayerAutoFlip","ContextualLayerUpdateOnScroll","LayerRefocusOnHide","React"],function(ra,sa,ta,ua,va){var wa={ContextualDialog:ra,ContextualLayerAutoFlip:sa,ContextualLayerUpdateOnScroll:ta,LayerRefocusOnHide:ua,React:va};pa(Object.assign({},wa,da(wa)));});});});function da(pa){var qa=pa.ContextualDialog,ra=pa.ContextualLayerAutoFlip,sa=pa.ContextualLayerUpdateOnScroll,ta=pa.LayerRefocusOnHide,ua=m.div({className:"_1tp8"}),va=(m.div({className:"_53ij _1tp9"},m.div({className:"_1tpa"}),ua)),wa=new qa({addedBehaviors:[sa,ra],theme:{wrapperClassName:"_1tpb",arrowDimensions:{offset:12,length:16}}},va);wa.disableBehavior(ta);wa.shouldSetARIAProperties(false);return {dialog:wa,dialogBodyNode:va,dialogMessageNode:ua};}var ea=null;function fa(pa){return Object.assign({message:pa.getAttribute(z),position:pa.getAttribute(ba),alignh:pa.getAttribute(x)},j.get(pa,y));}function ga(pa,qa){j.set(pa,y,qa);}function ha(pa,qa){j.set(pa,y,Object.assign({},j.get(pa,y),qa));}function ia(pa){j.remove(pa,y);}var ja=false,ka=false;function la(pa){ca().done(function(qa){var ra=qa.React,sa=qa.dialog,ta=qa.dialogMessageNode,ua=fa(pa),va=ua.message;if(va==null)return;var wa=ra.isValidElement(va);if(ja&&!wa)ra.unmountComponentAtNode(ta);if(wa){ra.render(va,ta);}else{t(typeof va==='string'||u(va));if(typeof va==='string')va=w(va);k.setContent(ta,va);}ja=wa;sa.setContext(pa).setPosition(ua.position||'right').setAlignment(ua.alignh||(ua.position==='above'||ua.position==='below'?'right':null)).show();g.notify(s(ta));ea=pa;});ka=true;}function ma(){if(!ka)return;ca().done(function(pa){var qa=pa.React,ra=pa.dialog,sa=pa.dialogMessageNode;if(!ea)return;if(ja){qa.unmountComponentAtNode(sa);ja=false;}ra.hide();ea=null;});}function na(pa){if(k.contains(pa,r()))la(pa);}var oa={set:function(pa){var qa=pa.target,ra=pa.message,sa=pa.position,ta=pa.alignh;t(ra!==null);i.addClass(qa,aa);ha(qa,q({message:ra,position:sa,alignh:ta},function(ua){return ua!==(void 0);}));na(qa);},clear:function(pa){i.removeClass(pa,aa);pa.removeAttribute(z);ia(pa);if(pa===ea)ma();},updatePosition:function(){if(!ka)return;ca().done(function(pa){var qa=pa.dialog;if(ea)qa.updatePosition();});},__setReactError:function(pa,qa){var ra=qa.message,sa=qa.position,ta=qa.alignh;t(ra!==null);ga(pa,{message:ra,position:sa,alignh:ta});na(pa);},__clearReactError:function(pa){ia(pa);if(pa===ea)ma();}};e.exports=oa;},null);
__d("XUIError.react",["React","XUIError","cx","joinClasses","onlyChild"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l=g,m=l.PropTypes,n="_1tp7",o=g.createClass({displayName:"ReactXUIError",propTypes:{xuiError:m.any,xuiErrorPosition:m.oneOf(['above','below','left','right']),xuiErrorAlignh:m.oneOf(['left','center','right'])},componentDidMount:function(){if(this.props.xuiError!=null)h.__setReactError(g.findDOMNode(this),{message:this.props.xuiError,position:this.props.xuiErrorPosition,alignh:this.props.xuiErrorAlignh});},componentDidUpdate:function(){if(this.props.xuiError==null){h.__clearReactError(g.findDOMNode(this));}else h.__setReactError(g.findDOMNode(this),{message:this.props.xuiError,position:this.props.xuiErrorPosition,alignh:this.props.xuiErrorAlignh});},componentWillUnmount:function(){h.__clearReactError(g.findDOMNode(this));},render:function(){var p=k(this.props.children);if(this.props.xuiError!=null)p=g.cloneElement(p,{className:j(p.props.className,n)});return p;}});e.exports=o;},null);
__d("XUITextInput.react",["AbstractTextInput.react","React","XUIError.react","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=h.createClass({displayName:"XUITextInput",propTypes:Object.assign({},g.propTypes,i.propTypes),render:function(){var m=(("_55r1")+(this.props.height=='tall'?' '+"_55r2":'')),n=(h.createElement(g,h.__spread({},this.props,{ref:"textInput",className:k(this.props.className,m)})));return (h.createElement(i,h.__spread({},this.props),n));},focusInput:function(){this.refs.textInput.focusInput();}});e.exports=l;},null);
__d("P2PDialogTitle.react",["CurrentEnvironment","MessengerDialogHeader.react","React","XUIDialogTitle.react"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';var k=i.createClass({displayName:"P2PDialogTitle",render:function(){var l=g.messengerdotcom,m=l?h:j;return (i.createElement(m,i.__spread({},this.props),this.props.children));}});e.exports=k;},null);
__d("KappaWrapper",["AsyncSignal","setTimeoutAcrossTransitions"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i=false;e.exports={forceStart:function(j,k,l){var m=0,n=function(){new g('/si/kappa/',{Ko:"a"}).send();if(++m<j)h(n,(k*1000));};h(n,((k+l)*1000));},start:function(j,k,l){if(!i){i=true;this.forceStart(j,k,l);}}};},null);
__d("P2PCreditCardFormFieldMixin.react",["React","ReactInputSelection","XUITextInput.react","cx","emptyFunction"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l=49,m=g,n=m.PropTypes,o={propTypes:{onChange:n.func,reference:n.string,saveError:n.string,focused:n.bool,value:n.string,isMasked:n.bool,showFocusOutline:n.bool,showIcon:n.bool,showPlaceholder:n.bool},getDefaultProps:function(){return {onChange:k,saveError:'',focused:false,value:'',isMasked:false,showFocusOutline:true,showIcon:true,showPlaceholder:true};},getInitialState:function(){return {isValid:null,value:'',oldValue:'',focused:false,lastKeyCode:l,modified:false,cursorPosition:0,errorMessage:null};},getInputElement:function(){return this.refs.ccFormFieldInput.refs.textInput.getTextFieldDOM();},restoreCursorPosition:function(){if(!this.getUpdatedCursorPosition)return;if(this.state.oldValue===this.state.value)return;var p=this.getUpdatedCursorPosition(this.state.value,this.state.oldValue,this.state.cursorPosition);h.setSelection(this.getInputElement(),{start:p});},setAndValidate:function(p,q){var r,s=this.state.value,t=h.getSelection(this.getInputElement()),u=this.formatValue?this.formatValue(p,s,q):p;r=this.validate(u);this.setState({modified:true,value:u,oldValue:p,isValid:r,cursorPosition:t.start},this.restoreCursorPosition);this.triggerChange(u,r);},triggerChange:function(p,q){this.props.onChange(this.props.reference,p,q);},componentDidMount:function(){if(this.props.focused)setTimeout(function(){if(this.isMounted())this.focus();}.bind(this),100);this.initializeFormValue();},initializeFormValue:function(){var p;if(this.props.value){p=this.props.isMasked?true:this.validate(this.props.value);this.setState({isValid:p,modified:true,value:this.props.value});this.triggerChange(this.props.value,p);}},handleBlur:function(p){var q=this.getInputElement().value;if(q&&q!==this.state.value)this.setAndValidate(q,l);this.setState({focused:false});},handlePaste:function(p){this.setState({lastKeyCode:l});},handleChange:function(p){this.setAndValidate(p.target.value,this.state.lastKeyCode);},handleOnKeyDown:function(p){var q=p.keyCode;if(q>=96&&q<=105)q=q-48;this.setState({lastKeyCode:q});},handleFocus:function(p){this.setState({focused:true});},focus:function(){g.findDOMNode(this.refs.ccFormFieldInput).focus();},shouldShowIsValidError:function(){if(!this.state.isValid&&this.state.modified)return !this.state.focused||this.isValAtLimit();return false;},isDisabled:function(){return this.props.isMasked;},render:function(){var p=this.shouldShowIsValidError()||this.props.saveError||this.state.errorMessage;return (g.createElement("div",{className:(("_2wac")+(p?' '+"_5bqn":'')+(this.props.showFocusOutline&&!p&&this.state.focused?' '+"_5bqo":'')),onClick:this.focus},this.props.showIcon?this.getIcon():null,g.createElement(i,{autoComplete:this.getAutocompleteName(),ref:"ccFormFieldInput",defaultValue:this.props.defaultValue,value:this.state.value,onChange:this.handleChange,onPaste:this.handlePaste,onKeyDown:this.handleOnKeyDown,onFocus:this.handleFocus,onBlur:this.handleBlur,placeholder:this.props.showPlaceholder?this.getPlaceholder():'',disabled:this.isDisabled(),className:(("_5bqq")+(!this.props.showIcon?' '+"_46tf":'')),xuiError:this.state.errorMessage}),g.createElement("div",{className:"_5br4"})));}};e.exports=o;},null);
__d("P2PCreditCardNumberFormFieldHelper",["Keys"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';var h={formatCardNumber:function(i,j,k,l,m){if(k===g.BACKSPACE||k===g.DELETE){var n=(j.split(m).length-1),o=(i.split(m).length-1);if(o!==n)return i;}i=i.replace(/\D/g,'');i=i.substr(0,l[l.length-1]);var p='';for(var q=1;q<l.length;q++){if(l[q]>i.length||(q===l.length-1)){p+=i.slice(l[q-1]);break;}p+=i.slice(l[q-1],l[q])+m;}return p;},getUpdatedCursorPosition:function(i,j,k,l){var m=0,n=0;while(m<k&&m<j.length&&n<i.length)if(j[m]===i[n]){m++;n++;}else if(!/^\d+$/.test(j[m])){m++;}else n++;if(i.substr(n,1)===l)n++;return n;}};e.exports=h;},null);
__d("P2PCreditCardNumberFormField.react",["React","PaymentMethodUtils","P2PCreditCardFormFieldMixin.react","P2PCreditCardNumberFormFieldHelper","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';var m=g.createClass({displayName:"P2PCreditCardFormField",mixins:[i],getIcon:function(){return (g.createElement("div",{className:"_31_w _3_2h"}));},getAutocompleteName:function(){return 'cc-number';},isAmex:function(n){var o=h.getCardType(n||this.state.value);return (o.name==='amex');},getLimit:function(){return this.isAmex()?15:16;},isValAtLimit:function(){var n=this.getLimit(),o=this.state.value.replace(/ /g,'');return o.length===n;},formatValue:function(n,o,p){var q=this.isAmex(n)?[0,4,10,15]:[0,4,8,12,16];return j.formatCardNumber(n,o,p,q,' ');},getUpdatedCursorPosition:function(n,o,p){return j.getUpdatedCursorPosition(n,o,p,' ');},getPlaceholder:function(){return l._("Card Number");},validate:function(n){var o=this.isValidCardType(n);this.setState({errorMessage:!o?l._("Please enter a debit card. Credit cards can't be used."):null});return !!(h.isValidCCNumber(n)&&o);},isValidCardType:function(n){var o=['mc','visa','unknown'],p=h.getCardType(n),q=p?p.name:'',r=o.indexOf(q)>=0;return r;}});e.exports=m;},null);
__d("P2PCreditCardExpDateFormField.react",["React","P2PCreditCardFormFieldMixin.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';var k=g.createClass({displayName:"P2PCreditCardExpDateFormField",mixins:[h],getIcon:function(){return (g.createElement("div",{className:"_31_w _31_x"}));},getAutocompleteName:function(){return 'cc-exp';},isValAtLimit:function(){var l=this.state.value;return l.length===this.getLimit();},getLimit:function(){return 5;},getPlaceholder:function(){return (j._("MM\/YY"));},formatValue:function(l,m,n){var o=this.getLimit(),p=String.fromCharCode(n);l=l.replace(/[^0-9\/]+/g,'');var q=l.split('/'),r=q[0],s=q[1];if(s&&s.length===4){l=r+'/'+s.substr(-2);}else l=l.slice(0,o);if(!/^\d+$/.test(p)&&n!==191&&n!==111)return l;l=l.replace(/\D/g,'');if(/^\d$/.test(l)&&(l!=='0'&&l!=='1')){l='0'+l+'/';}else if(l.length>=2&&l.indexOf('/')===-1)l=l.substr(0,2)+'/'+l.substr(2,4);return l;},validate:function(l){var m=l.split('/'),n=(new Date()),o=parseInt(n.getFullYear().toString().substring(2),10),p=parseInt(n.getMonth()+1,10),q=parseInt(m[0],10),r=parseInt(m[1],10);if(l.length!==5||!q||!r||isNaN(q)||isNaN(r)||q<1||q>12)return false;if((r<o)||(r===o&&q<p)||q>12||q<1)return false;return true;}});e.exports=k;},null);
__d("P2PCreditCardCVCFormField.react",["CreditCardFormParam","React","P2PCreditCardFormFieldMixin.react","PaymentMethodUtils","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';var m=h.createClass({displayName:"P2PCreditCardCVCFormField",mixins:[i],getIcon:function(){return (h.createElement("div",{className:"_31_w _5wcr"}));},getAutocompleteName:function(){return 'cc-csc';},isValAtLimit:function(){var n=this.state.value;return n.length===this.getLimit();},getLimit:function(){var n,o=this.props.cscMaxLength;if(!o){n=j.getCardType(this.props[g.CARD_NUMBER]);o=n.name==='amex'?4:3;}return o;},formatValue:function(n,o,p){var q=this.getLimit();n=n.replace(/\D/g,'');n=n.slice(0,q);return n;},getPlaceholder:function(){return l._("CVV");},validate:function(n){return n.length===this.getLimit();}});e.exports=m;},null);
__d("P2PCreditCardZipCodeFormField.react",["React","P2PCreditCardFormFieldMixin.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';var k=g.createClass({displayName:"P2PCreditCardZipCodeFormField",mixins:[h],getIcon:function(){return (g.createElement("div",{className:"_31_w _3oce"}));},getAutocompleteName:function(){return 'postal-code';},isValAtLimit:function(){var l=this.state.value;return l.length===this.getLimit();},getLimit:function(){return 5;},getPlaceholder:function(){return j._("Billing ZIP Code");},formatValue:function(l,m,n){var o=this.getLimit();l=l.replace(/\D/g,'');l=l.slice(0,o);return l;},validate:function(l){return l.length===this.getLimit();}});e.exports=k;},null);
__d("P2PConfirmationDialog.react",["CurrentEnvironment","LayerFadeOnHide","LeftRight.react","P2PButton.react","P2PDialog.react","P2PDialogBody.react","P2PDialogFooter.react","P2PText.react","P2PDialogTitle.react","React","cx","emptyFunction","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){b.__markCompiled&&b.__markCompiled();'use strict';var t=p,u=t.PropTypes,v=p.createClass({displayName:"P2PConfirmationDialog",propTypes:{allowBack:u.bool,buttonLabel:u.node.isRequired,buttonUse:u.string.isRequired,centered:u.bool,image:u.object.isRequired,onBackClick:u.func,onOKClick:u.func,onSecondaryClick:u.func,showCloseButton:u.bool,showSecondaryButton:u.bool,secondaryButtonLabel:u.node,secondaryButtonUse:u.string,title:u.string.isRequired},getDefaultProps:function(){return {buttonLabel:s._("OK"),buttonUse:'default',centered:false,onBackClick:r,onSecondaryClick:r,showCloseButton:false,showSecondaryButton:false,onOKClick:r,width:g.messengerdotcom?350:300};},getBackButton:function(){if(!this.props.allowBack)return null;return (p.createElement(j,{label:s._("Back"),onClick:this.props.onBackClick,use:"default"}));},getSecondaryButton:function(){if(!this.props.showSecondaryButton)return null;return (p.createElement(j,{label:this.props.secondaryButtonLabel,onClick:this.props.onSecondaryClick,use:this.props.secondaryButtonUse}));},render:function(){var w=g.messengerdotcom,x=[p.createElement("div",{className:"_465t",key:"confirmation_icon"},this.props.image),p.createElement(n,{className:(("_465u")+(this.props.centered?' '+"_465v":'')),key:"confirmation_text",type:"primary"},this.props.children)];if(w)x=p.createElement(i,{direction:"left"},x);return (p.createElement(k,{behaviors:Object.assign({LayerFadeOnShow:false,LayerFadeOnHide:h},this.props.behaviors),className:(("_465w")+(w?' '+"_465x":'')),layerHideOnBlur:false,ref:"dialog",repositionOnUpdate:true,shown:true,width:this.props.width},p.createElement("div",{className:"_465y"},p.createElement(o,{className:"_465z",showCloseButton:this.props.showCloseButton},this.props.title),p.createElement(l,null,x),p.createElement(m,null,this.getBackButton(),this.getSecondaryButton(),p.createElement(j,{label:this.props.buttonLabel,onClick:this.props.onOKClick,use:this.props.buttonUse})))));}});e.exports=v;},null);
__d("P2PErrorDialog.react",["CurrentEnvironment","Image.react","P2PConfirmationDialog.react","P2PText.react","React","emptyFunction","fbt","ix"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();var o=k,p=o.PropTypes,q=k.createClass({displayName:"P2PErrorDialog",propTypes:{allowBack:p.bool,onBackClick:p.func,onOKClick:p.func,error:p.object,title:p.string},getDefaultProps:function(){return {allowBack:false,onBackClick:l,onOKClick:l,error:null,title:m._("Problem")};},renderErrorContent:function(){var r=this.props.error;if(r.message.__html){return (k.createElement(j,{dangerouslySetInnerHTML:r.message,type:"primary"}));}else return k.createElement(j,{type:"primary"},r.message);},getImage:function(){if(g.messengerdotcom){return (k.createElement(h,{height:62,width:62,src:n('/images/p2p/confirmation-error-messengerdotcom.png')}));}else return (k.createElement(h,{height:55,width:55,src:n('/images/p2p/confirmation-error.png')}));},render:function(){var r=this.getImage();return (k.createElement(i,{allowBack:this.props.allowBack,behaviors:Object.assign({},this.props.behaviors),centered:this.props.centered,image:r,onBackClick:this.props.onBackClick,onOKClick:this.props.onOKClick,title:this.props.title,width:this.props.width},this.renderErrorContent()));}});e.exports=q;},null);
__d("P2PErrorNotice.react",["React","XUINotice.react","cx"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=g,k=j.PropTypes,l=g.createClass({displayName:"P2PErrorNotice",propTypes:{error:k.object},getDefaultProps:function(){return {error:null};},renderErrorContent:function(){var m=this.props.error;if(m.message.__html){return g.createElement("span",{dangerouslySetInnerHTML:m.message});}else return g.createElement("span",null,m.message);},render:function(){return (g.createElement(h,{className:"_3-8n",use:"warn"},this.renderErrorContent()));}});e.exports=l;},null);
__d("P2PCreditCardForm.react",["CreditCardFormParam","KappaWrapper","React","P2PAPI","P2PAPIUtils","P2PCreditCardNumberFormField.react","P2PCreditCardExpDateFormField.react","P2PCreditCardCVCFormField.react","P2PCreditCardZipCodeFormField.react","P2PErrorDialog.react","P2PErrorNotice.react","ReactLayeredComponentMixin","cx","emptyFunction","fbt","getObjectValues"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){b.__markCompiled&&b.__markCompiled();'use strict';var w=i,x=w.PropTypes,y=i.createClass({displayName:"P2PCreditCardForm",mixins:[r],propTypes:{asyncRequestState:x.object,cscMaxLength:x.number,editMode:x.bool,onErrorDialogOKClick:x.func,onValidation:x.func,prefilledFormData:x.object,rendersErrorDialog:x.bool,saveErrors:x.object,validateBIN:x.bool},getDefaultProps:function(){return {cscMaxLength:null,editMode:false,onErrorDialogOKClick:t,onValidation:t,prefilledFormData:{},rendersErrorDialog:false,saveErrors:null,validateBIN:false};},getInitialState:function(){var z={};z[g.CARD_NUMBER]={};z[g.CARD_NUMBER].valid=false;z[g.CARD_NUMBER].value=this.props.prefilledFormData[g.CARD_NUMBER]||'';z[g.CARD_EXPIRATION]={};z[g.CARD_EXPIRATION].valid=false;z[g.CARD_EXPIRATION].value=this.props.prefilledFormData[g.CARD_EXPIRATION]||'';z[g.CSC]={};z[g.CSC].valid=false;z[g.CSC].value=this.props.prefilledFormData[g.CSC]||'';z[g.ZIP]={};z[g.ZIP].valid=false;z[g.ZIP].value=this.props.prefilledFormData[g.ZIP]||'';return {binError:'',isValid:false,fields:z,previousBINNumber:'',validateBINRequestID:''};},componentWillMount:function(){h.start(6,3,0);},componentWillReceiveProps:function(z){var aa=z.asyncRequestState,ba=aa?aa[this.state.validateBINRequestID]:null;if(ba){this.setState({validateBINRequestID:''});if(ba.error){this.handleValidateBINNumberError(ba.error);}else this.handleValidateBINNumberSuccess();}},handleValidateBINNumberSuccess:function(){this.setState({binError:''},this.validateForm);},handleValidateBINNumberError:function(z){this.setState({binError:z.message},this.validateForm);},handleCreditCardNumberChange:function(z,aa,ba){if(this.props.validateBIN)this.validateBIN(aa);this.handleFormValueChange(z,aa,ba);},validateBIN:function(z){var aa,ba;z=z.replace(/ /g,'');aa=z.substr(0,6);if(aa!==this.state.previousBINNumber&&aa.length>=6){ba=k.genRequestID();this.setState({validateBINRequestID:ba});j.validateBINNumber({binNumber:aa,requestID:ba});}else if(aa.length<6)this.setState({binError:'',validateBINRequestID:''});this.setState({previousBINNumber:aa});},handleFormValueChange:function(z,aa,ba){var ca=this.state.fields;ca[z]={valid:ba,value:aa};this.validateForm();},validateForm:function(){var z=true,aa=this.state.fields;z=!v(aa).some(function(ba){return !ba.valid;})&&!this.state.binError;this.setState({isValid:z});this.props.onValidation(z,this.serializeFormFields(),this.getFormFieldLoggingData());},serializeFormFields:function(){var z=this.state.fields,aa={};for(var ba in z)if(z.hasOwnProperty(ba))aa[ba]=z[ba].value;return aa;},getFormFieldLoggingData:function(){var z=this.state.fields,aa=z[g.CARD_NUMBER],ba=z[g.CARD_EXPIRATION],ca=z[g.CSC],da=z[g.ZIP],ea={card_number_digits:aa.value.replace(/ /g,'').length,is_card_number_valid:aa.valid,expiration_date_digits:ba.value.replace(/\//,'').length,is_expiration_date_valid:ba.valid,csc_digits:ca.value.length,is_csc_valid:ca.valid,billing_zip_digits:da.value.length,is_billing_zip_valid:da.valid};return {credit_card_validation_data:ea};},getSaveError:function(z){var aa='',ba=this.props.saveErrors;if(ba&&ba.fields&&ba.fields[z])aa=ba.fields[z].message;return aa;},isCreditCardNumberMasked:function(){return this.props.editMode;},isCreditCardNumberFocused:function(){return !this.props.editMode;},isExpFocused:function(){return this.props.editMode;},renderBINError:function(){if(!this.state.binError)return;return (i.createElement(q,{error:{message:this.state.binError}}));},renderGeneralError:function(){var z=this.getGeneralError();if(!z)return;return (i.createElement(q,{error:z}));},getGeneralError:function(){if(this.props.saveErrors&&this.props.saveErrors.general)return this.props.saveErrors.general;return null;},handleErrorOKClick:function(){this.props.onErrorDialogOKClick();},renderLayers:function(){var z=this.getGeneralError();if(!this.props.rendersErrorDialog||!z)return {};return {errorMessageDialog:i.createElement(p,{error:z,onOKClick:this.handleErrorOKClick,title:u._("Problem Saving Card")})};},render:function(){return (i.createElement("form",{className:"_3bez"},!this.props.rendersErrorDialog?this.renderGeneralError():null,this.renderBINError(),i.createElement("div",{className:"_2xxs _2xxt"},i.createElement(l,{reference:g.CARD_NUMBER,onChange:this.handleCreditCardNumberChange,saveError:this.getSaveError(g.CARD_NUMBER)||this.state.binError,value:this.state.fields[g.CARD_NUMBER].value,isMasked:this.isCreditCardNumberMasked(),focused:this.isCreditCardNumberFocused()})),i.createElement("div",{className:"_2xxs _2xxu"},i.createElement(m,{reference:g.CARD_EXPIRATION,focused:this.isExpFocused(),onChange:this.handleFormValueChange,saveError:this.getSaveError(g.CARD_EXPIRATION),value:this.state.fields[g.CARD_EXPIRATION].value}),i.createElement(n,{reference:g.CSC,onChange:this.handleFormValueChange,saveError:this.getSaveError(g.CSC),cscMaxLength:this.props.cscMaxLength,creditCardNumber:this.state.fields[g.CARD_NUMBER].value,value:this.state.fields[g.CSC].value})),i.createElement("div",{className:"_2xxs _2xxv"},i.createElement(o,{reference:g.ZIP,onChange:this.handleFormValueChange,saveError:this.getSaveError(g.ZIP),value:this.state.fields[g.ZIP].value}))));}});e.exports=y;},null);
__d("P2PAddCreditCardDialog.react",["CurrentEnvironment","Link.react","P2PAPI","P2PAPIUtils","P2PCreditCardStore","P2PCreditCardForm.react","P2PLoadingMask.react","P2PLogger","P2PPaymentLoggerEvent","P2PLinkConstants","React","P2PButton.react","P2PDialog.react","P2PDialogTitle.react","P2PDialogBody.react","P2PDialogFooter.react","P2PText.react","cx","emptyFunction","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){b.__markCompiled&&b.__markCompiled();'use strict';var aa=q,ba=aa.PropTypes,ca='fbP2PAddCreditCardDialog_learnMoreSentenceID',da=q.createClass({displayName:"P2PAddCreditCardDialog",propTypes:{cancelButtonText:ba.string,eventFlow:ba.string.isRequired,loggingData:ba.object,loggingObjectID:ba.string,onCancel:ba.func,onSuccess:ba.func,saveButtonText:ba.string,showCancelButton:ba.bool,text:ba.string,title:ba.string},getDefaultProps:function(){return {cancelButtonText:z._("Cancel"),loggingData:{},onCancel:y,onSuccess:y,saveButtonText:z._("Save"),showCancelButton:true,text:z._("Please enter a debit card. Credit cards can't be used."),title:z._("Add Debit Card"),width:g.messengerdotcom?350:288};},getInitialState:function(){return {isValid:false,formData:{},formFieldLoggingData:{},loading:false,requestID:'',saveErrors:null};},onCreditCardStoreChange:function(){var ea=k.getAsyncRequestState(),fa=ea[this.state.requestID];this.setState({asyncRequestState:ea});if(fa){this.setState({requestID:''});if(fa.error){this.handleOnSaveError(fa.error);}else this.handleOnSaveSuccess(fa);}},componentDidMount:function(){this.log(o.UI_ACTN_INITIATE_ADD_CARD);this.creditCardStoreSub=k.addListener('change',this.onCreditCardStoreChange);},componentWillUnmount:function(){if(this.creditCardStoreSub){this.creditCardStoreSub.remove();this.creditCardStoreSub=null;}},log:function(ea,fa){n.log(ea,Object.assign({www_event_flow:this.props.eventFlow,object_id:this.props.loggingObjectID},this.props.loggingData,fa));},onSaveClick:function(){var ea=j.genRequestID();this.setState({loading:true,requestID:ea,saveErrors:null});this.log(o.UI_ACTN_CONFIRM_CARD_DETAILS);i.addCreditCard(Object.assign({requestID:ea},this.state.formData));},handleOnSaveSuccess:function(ea){this.props.onSuccess(ea);this.log(o.UI_ACTN_ADD_CARD_SUCCESS);},handleOnSaveError:function(ea){this.setState({loading:false,saveErrors:ea});this.log(o.UI_ACTN_ADD_CARD_FAIL,{message:ea&&ea.general?ea.general.message:''});},handleValidation:function(ea,fa,ga){this.setState({isValid:ea,formData:fa,formFieldLoggingData:ga});},isSaveButtonDisabled:function(){return this.state.loading||!this.state.isValid;},onToggle:function(ea){if(!ea){this.props.onCancel();this.log(o.UI_ACTN_CANCEL_ADD_CARD,this.state.formFieldLoggingData);}},onCancelClicked:function(){this.onToggle(false);},renderAddCardForm:function(){var ea;if(this.props.showCancelButton)ea=q.createElement(r,{use:"default",size:"medium",label:this.props.cancelButtonText,disabled:this.state.loading,onClick:this.onCancelClicked});return (q.createElement("div",null,q.createElement(t,null,this.props.title),q.createElement(u,null,q.createElement(w,{type:"primary",className:"_3-96"},this.props.text),q.createElement(l,{asyncRequestState:this.state.asyncRequestState,onValidation:this.handleValidation,saveErrors:this.state.saveErrors,validateBIN:true}),q.createElement(w,{className:"_3-8y",id:ca,type:"secondary"},z._("Your payment info is stored securely."),q.createElement("div",null,q.createElement(h,{"aria-describedby":ca,href:p.addDebitCardHelpURI,target:"_blank"},z._("Learn More"))))),q.createElement(v,{leftContent:this.props.leftContent},ea,q.createElement(r,{use:"confirm",size:"medium",label:this.props.saveButtonText,disabled:this.isSaveButtonDisabled(),onClick:this.onSaveClick}))));},render:function(){return (q.createElement(s,{behaviors:this.props.behaviors,layerHideOnBlur:false,ref:"dialog",onToggle:this.onToggle,repositionOnUpdate:true,shown:true,width:this.props.width},this.renderAddCardForm(),q.createElement(m,{visible:this.state.loading})));}});e.exports=da;},null);
__d("P2PPasswordProtectionNUXDialog.react",["CurrentEnvironment","Link.react","P2PAPI","P2PErrorDialog.react","P2PLinkConstants","P2PLoadingMask.react","P2PLogger","P2PPaymentLoggerEvent","P2PPaymentLoggerEventFlow","P2PPasswordProtectionParam","P2PPasswordProtectionStatusTypes","React","P2PButton.react","P2PDialog.react","P2PDialogTitle.react","P2PDialogBody.react","P2PDialogFooter.react","P2PText.react","cx","emptyFunction","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa){b.__markCompiled&&b.__markCompiled();'use strict';var ba=r,ca=ba.PropTypes,da=r.createClass({displayName:"P2PPasswordProtectionNUXDialog",propTypes:{onComplete:ca.func},getDefaultProps:function(){return {onComplete:z,width:g.messengerdotcom?320:300};},getInitialState:function(){return {saveErrorObject:null,loading:false};},componentWillMount:function(){this.log(n.UI_ACTN_INITIATE_PASSWORD_PROTECTION_NUX);},log:function(ea,fa){m.log(ea,Object.assign({www_event_flow:o.UI_FLOW_P2P_SETTINGS},fa));},onSaveClick:function(){this.setState({loading:true,saveErrorObject:null});this.setPasswordProtection(q.ENABLED);this.log(n.UI_ACTN_OPT_IN_PASSWORD_PROTECTION_NUX);},setPasswordProtection:function(ea){var fa={};fa[p.STATUS]=ea;i.setPasswordProtectionSetting({formData:fa,success:this.handleOnSaveSuccess,error:this.handleOnSaveError});},handleOnSaveSuccess:function(){this.setState({loading:false});this.props.onComplete();},handleOnSaveError:function(ea){this.setState({loading:false,saveErrorObject:ea});},isSaveButtonDisabled:function(){return this.state.loading;},isCancelButtonDisabled:function(){return this.state.loading;},onCancelClick:function(){this.setState({loading:true,saveErrorObject:null});this.setPasswordProtection(q.DISABLED);this.log(n.UI_ACTN_OPT_OUT_PASSWORD_PROTECTION_NUX);},handleErrorBackClick:function(){this.setState({saveErrorObject:null});},handleErrorOKClick:function(){this.setState({saveErrorObject:null});this.props.onComplete();},render:function(){if(this.state.saveErrorObject)return (r.createElement(j,{allowBack:true,title:aa._("Problem Saving"),onBackClick:this.handleErrorBackClick,onOKClick:this.handleErrorOKClick,error:this.state.saveErrorObject}));return (r.createElement(t,{className:((g.messengerdotcom?"_-el":'')),behaviors:{LayerFadeOnShow:false},layerHideOnBlur:false,shown:true,width:this.props.width},r.createElement(u,{showCloseButton:false},aa._("Use Password?")),r.createElement(v,null,r.createElement(x,{className:"_5sor",type:"primary"},aa._("For additional security, you can enter your Facebook password to send money. You can always update this in {link}.",[aa.param("link",r.createElement(h,{href:k.settingsWWWURI,target:"_blank"},aa._("Settings")))]))),r.createElement(w,null,r.createElement(s,{className:"_5sov",disabled:this.isCancelButtonDisabled(),label:aa._("Not Now"),onClick:this.onCancelClick,size:"medium",use:"default"}),r.createElement(s,{className:"_5sox",disabled:this.isSaveButtonDisabled(),label:aa._("Use Password"),onClick:this.onSaveClick,size:"medium",use:"confirm"})),r.createElement(l,{visible:this.state.loading})));}});e.exports=da;},null);
__d("LayerSlowlyFadeOnShow",["LayerFadeOnShow"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h=500,i=g.forDuration(h);e.exports=i;},null);
__d("P2PSuccessDialog.react",["CurrentEnvironment","Image.react","LayerSlowlyFadeOnShow","P2PConfirmationDialog.react","React","emptyFunction","fbt","ix"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();'use strict';var o=k,p=o.PropTypes,q=k.createClass({displayName:"P2PSuccessDialog",propTypes:{buttonLabel:p.node,buttonUse:p.string,onOKClick:p.func,onSecondaryClick:p.func,showCloseButton:p.bool,showSecondaryButton:p.bool,secondaryButtonLabel:p.node,secondaryButtonUse:p.string,title:p.string.isRequired},getDefaultProps:function(){return {allowBack:false,buttonLabel:m._("OK"),buttonUse:'default',onOKClick:l,showCloseButton:false,width:g.messengerdotcom?350:300};},getImage:function(){if(g.messengerdotcom){return (k.createElement(h,{height:62,width:62,src:n('/images/p2p/checkmark-messenger.png')}));}else return (k.createElement(h,{height:56,width:56,src:n('/images/p2p/check_mark-sm.png')}));},render:function(){var r=this.getImage();return (k.createElement(j,{behaviors:Object.assign({LayerSlowlyFadeOnShow:i},this.props.behaviors),allowBack:this.props.allowBack,buttonLabel:this.props.buttonLabel,buttonUse:this.props.buttonUse,centered:this.props.centered,image:r,onOKClick:this.props.onOKClick,onSecondaryClick:this.props.onSecondaryClick,showCloseButton:this.props.showCloseButton,showSecondaryButton:this.props.showSecondaryButton,secondaryButtonLabel:this.props.secondaryButtonLabel,secondaryButtonUse:this.props.secondaryButtonUse,title:this.props.title,width:this.props.width},this.props.children));}});e.exports=q;},null);