/*!CK:1629334286!*//*1438138313,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["UqAnD"]); }

__d("VideoControls",["fbt","DeferredComponent.react","Event","EventListener","Keys","React","VideoPlayerReason","cancelAnimationFrame","containsNode","destroyOnUnload","getActiveElement","logVideosClickTracking","throttle","requestAnimationFrame"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){b.__markCompiled&&b.__markCompiled();function u(v,w,x){"use strict";this.$VideoControls0=v;this.$VideoControls1=w;this.$VideoControls2=x.hidePaused;this.$VideoControls3=x.hideWhenFinishedInFullscreen;this.$VideoControls4=x.hasWatchAndScroll;this.$VideoControls5=x.isLive;this.$VideoControls6=false;this.$VideoControls7=0;this.$VideoControls8=0;this.$VideoControls9=0;this.$VideoControlsa=false;this.$VideoControlsb=x.lessFrequentRender;p(function(){return l.unmountComponentAtNode(w);});var y=this.$VideoControls0.getRootNode();j.listen(y,'mousemove',s(this.flashControls.bind(this),200));if(!y.getAttribute('tabindex'))y.setAttribute('tabindex','0');y.setAttribute('aria-label',g._("Video"));j.listen(y,'keydown',function(aa){if(i.getKeyCode(aa)===k.SPACE){if(this.$VideoControls0.isState('playing')){this.pause();}else this.play();i.kill(aa);}}.bind(this));j.listen(this.$VideoControls1,'focusin',function(){this.$VideoControlsc=true;this.scheduleRenderReactComponent();}.bind(this));j.listen(this.$VideoControls1,'focusout',function(){if(!o(this.$VideoControls1,q())){this.$VideoControlsc=false;this.scheduleRenderReactComponent();}}.bind(this));j.listen(y,'mouseleave',function(){this.$VideoControlsd=false;this.scheduleRenderReactComponent();}.bind(this));j.listen(y,'mouseenter',function(){this.$VideoControlsd=true;this.scheduleRenderReactComponent();}.bind(this));this.scheduleRenderReactComponent();var z=['stateChange','unmuteVideo','muteVideo','toggleFullscreen','changeVolume','updateMetadata','qualityChange','pausePlayback','loadedSubtitles','toggleSubtitles'];z.forEach(function(event){return this.$VideoControls0.addListener(event,function(){return this.scheduleRenderReactComponentWithVideoInfoUpdate();}.bind(this));}.bind(this));this.$VideoControls0.addListener('beginPlayback',function(){return this.$VideoControlse();}.bind(this));this.$VideoControls0.addListener('updateStatus',function(aa){var ba=aa.position;this.$VideoControls8=ba;this.scheduleRenderReactComponent();}.bind(this));this.$VideoControls0.addListener('updateBuffer',function(aa){var ba=aa.duration,ca=aa.offset;this.$VideoControls7=ba+ca;this.scheduleRenderReactComponent();}.bind(this));this.$VideoControls0.addListener('enterWatchAndScroll',function(){return this.onEnterWatchAndScroll();}.bind(this));this.$VideoControls0.addListener('exitWatchAndScroll',function(){return this.onExitWatchAndScroll();}.bind(this));}u.prototype.$VideoControlse=function(){"use strict";this.flashControls();this.scheduleRenderReactComponentWithVideoInfoUpdate();};u.prototype.flashControls=function(){"use strict";if(!this.$VideoControlsf){this.$VideoControlsf=true;this.scheduleRenderReactComponent();}clearTimeout(this.$VideoControlsg);this.$VideoControlsg=setTimeout(function(){this.$VideoControlsf=false;this.scheduleRenderReactComponent();}.bind(this),3000);};u.prototype.areControlsVisible=function(){"use strict";if(this.$VideoControls0.isState('playing')){return this.$VideoControlsc||(this.$VideoControlsd&&this.$VideoControlsf);}else if(this.$VideoControls0.isState('finished')){return this.$VideoControls0.isFullscreen()&&!this.$VideoControls3;}else return this.$VideoControls0.isFullscreen()||!this.$VideoControls2;};u.prototype.scheduleRenderReactComponentWithVideoInfoUpdate=function(event){"use strict";this.$VideoControlsh=true;this.scheduleRenderReactComponent(event);};u.prototype.shouldRenderComponent=function(){"use strict";if(this.$VideoControls0.isState('loading')||this.$VideoControls0.isState('fallback'))return false;if(!this.$VideoControlsb)return true;if(this.areControlsVisible()){this.$VideoControlsa=false;return true;}if(!this.$VideoControlsa){this.$VideoControlsa=true;return true;}return false;};u.prototype.scheduleRenderReactComponent=function(event){"use strict";if(!this.shouldRenderComponent())return;n(this.$VideoControlsi);this.$VideoControlsi=t(this.renderReactComponent.bind(this));};u.prototype.renderReactComponent=function(){"use strict";if(this.$VideoControlsh){this.$VideoControlsj();this.$VideoControlsh=false;}l.render(l.createElement(h,{deferredPlaceholder:l.createElement("span",null),deferredComponent:function(v){return d(['VideoControls.react'],v);},areSubtitlesActive:this.$VideoControlsk,bufferedPosition:this.$VideoControls7,hasHD:this.$VideoControlsl,hasSubtitles:this.$VideoControlsm,hasWatchAndScroll:this.$VideoControls4,hidden:!this.areControlsVisible(),isFullscreen:this.$VideoControlsn,isHD:this.$VideoControlso,isLive:this.$VideoControls5,isMuted:this.$VideoControlsp,isPlaying:this.$VideoControlsq,isWatchAndScrollActive:this.$VideoControls6,onPause:this.pause.bind(this),onPlay:this.play.bind(this),onScrubBegin:this.scrubBegin.bind(this),onScrubEnd:this.scrubEnd.bind(this),onToggleFullscreen:this.toggleFullscreen.bind(this),onToggleHD:this.toggleHD.bind(this),onToggleMuted:this.toggleMuted.bind(this),onToggleSubtitles:this.toggleSubtitles.bind(this),onToggleWatchAndScroll:this.toggleWatchAndScroll.bind(this),onVolumeChange:this.changeVolume.bind(this),playbackDuration:this.$VideoControls9,playbackPosition:this.$VideoControls8,volume:this.$VideoControlsr}),this.$VideoControls1);};u.prototype.$VideoControlsj=function(){"use strict";var v=this.$VideoControls0.getVideoInfo();if(v){this.$VideoControlsk=v.areSubtitlesActive;this.$VideoControlsm=v.hasSubtitles;this.$VideoControlsl=v.hasHD;this.$VideoControlso=v.isHD;this.$VideoControlsp=v.isMuted;this.$VideoControlsq=v.isPlaying;this.$VideoControls9=v.playbackDuration;this.$VideoControlsr=v.volume;this.$VideoControlsn=this.$VideoControls0.isFullscreen();}};u.prototype.toggleHD=function(){"use strict";this.$VideoControls0.toggleHD();};u.prototype.toggleWatchAndScroll=function(){"use strict";if(this.$VideoControls6){this.$VideoControls0.emit('exitWatchAndScroll');}else this.$VideoControls0.emit('enterWatchAndScroll');};u.prototype.onEnterWatchAndScroll=function(){"use strict";this.$VideoControls6=true;this.$VideoControlss=this.$VideoControls2;this.$VideoControls2=false;};u.prototype.onExitWatchAndScroll=function(){"use strict";this.$VideoControls6=false;this.$VideoControls2=this.$VideoControlss;};u.prototype.scrubBegin=function(){"use strict";this.$VideoControls0.pause(m.SEEK);};u.prototype.scrubEnd=function(v){"use strict";this.$VideoControls0.seek(v);this.$VideoControls0.play(m.SEEK);};u.prototype.toggleMuted=function(){"use strict";if(this.$VideoControls0.isMuted()){r(this.$VideoControls0.getVideoNode());this.$VideoControls0.unmute();}else this.$VideoControls0.mute();};u.prototype.toggleFullscreen=function(){"use strict";if(!this.$VideoControls0.isFullscreen())r(this.$VideoControls0.getVideoNode());this.$VideoControls0.toggleFullscreen();};u.prototype.toggleSubtitles=function(){"use strict";this.$VideoControls0.toggleSubtitles();this.scheduleRenderReactComponent();};u.prototype.changeVolume=function(v){"use strict";this.$VideoControls0.setVolume(v);};u.prototype.play=function(){"use strict";r(this.$VideoControls0.getVideoNode());this.$VideoControls0.play(m.USER);};u.prototype.pause=function(){"use strict";this.$VideoControls0.pause(m.USER);};e.exports=u;},null);